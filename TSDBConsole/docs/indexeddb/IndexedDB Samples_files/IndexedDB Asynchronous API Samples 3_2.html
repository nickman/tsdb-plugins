
<!-- saved from url=(0123)http://html5labs.interoperabilitybridges.com/IndexedDBTest/CodeSnippets/IndexedDB%20Asynchronous%20API%20Samples%203_2.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Add Records (Async)</title>
  <meta http-equiv="X-UA-Compatible" content="IE=8">
   <script src="bootidb.js"></script>
  <script>
   
      ////////////////////////////////////////////
      //global variables
      ////////////////////////////////////////////
      var indexedDBName = "AsyncIndexedDB2";
      var version = "2.0";
      var read_only = 1;
      var read_write = 0;
      var version_change = 2;

      var objNames =
      [
         "KIDSTORE", "CANDYSTORE"
      ];

      var OBJECTSTORES =
      [
	    { name: "KIDSTORE", keyPath: "id", autoIncrement: true },
	    { name: "CANDYSTORE", keyPath: "id", autoIncrement: false },
	    { name: "CANDYSALESTORE", keyPath: "id", autoIncrement: true }
      ];

      var kidsData =
      [
		{ name: "Anna", number: 1000 },
		{ name: "Betty", number: 1001 },
		{ name: "Christine", number: 1002 },
        { name: "Amy", number: 1003 },
        { name: "Linda", number: 1004 },
        { name: "Lincoln", number: 1005 }
	  ];

      var kidsDataUpdate =
      [
		{ id: 100, name: "Anna", number: 2000 },
		{ id: 101, name: "Betty", number: 2001 },
		{ id: 102, name: "Christine", number: 2002 },
        { id: 103, name: "Amy", number: 2003 },
        { id: 104, name: "Linda", number: 2004 },
        { id: 105, name: "Lincoln", number: 2005 }
	  ];

      var candyData =
      [
      //need id since autoIncrement is set false, i.e. key generator is turned off        
        {id: 10, name: "candy1", weight: 100 },
		{ id: 11, name: "candy2", weight: 200 },
		{ id: 12, name: "candy3", weight: 300 },
        { id: 13, name: "candy4", weight: 400 }
	  ];

       ///////////////////////////////////
      //utility functions
      ////////////////////////////////////

      function PrintDBInformation(idb) {
          if (idb) {
              var sName = idb.name;
              var dVersion = idb.version;
              var dTableNames = idb.objectStoreNames;
              var strNames = "IndexedDB name: " + sName
                            + "; version: " + dVersion + "; object stores: ";
              for (var i = 0; i < dTableNames.length; i++) {
                  strNames = strNames + dTableNames[i] + ", ";
              }
              alert(strNames);
          }
      }

      function PrintRecord(tTable, tRecord) {
          if (tRecord != undefined) {
              if (tTable == "KIDSTORE") {
                  alert("( " + tRecord.id + "," + tRecord.name + "," + tRecord.number + ")");
              }
              else if (tTable == "CANDYSTORE") {
                  alert("( " + tRecord.id + "," + tRecord.name + "," + tRecord.weight + ")");
              }
              else if (tTable == "CANDYSALESTORE") {
              }
          }
      }

      /////////////////////////////////////////////////////////////
      // Sample functions
      /////////////////////////////////////////////////////////////
      function Async_add_records_read_write() {
          var objName = "KIDSTORE";
          var records = kidsData;
          var txnMode = read_write;
          var txnTimeout = 5000;
          var txnCommit = true;
          add_objStoreRecords(objName, records, txnMode, txnTimeout, txnCommit);
      }

      function Async_add_records_read_only() {
          var objName = "KIDSTORE";
          var records = kidsData;
          var txnMode = read_only; 
          var txnTimeout = 5000;
          var txnCommit = true;
          add_objStoreRecords(objName, records, txnMode, txnTimeout, txnCommit);
      }

      function add_objStoreRecords(objName, records, txnMode, txnTimeout, txnCommit) {
          var dbreq = window.indexedDB.open(indexedDBName);
          dbreq.onsuccess = function (event) {
              var db = event.result;
              var txn = db.transaction(null, txnMode, txnTimeout);
              if (txn) {
	              txn.oncomplete = function () {
                      output_trace("transaction completed.");
                      db.close();
                  }
                  txn.onabort = function () {
                      output_trace("transaction aborted.");
                      db.close();
                  }
                  txn.ontimeout = function () {
                      output_trace("transaction timeout.");
                      db.close();
                  }
                  var store = txn.objectStore(objName);
                  if (store)
                      add_record(txn, store, records, 0, txnCommit);                  
                  else
	                	output_trace("object store: " + objName + " cannot be opened");      
              }
          }
          dbreq.onerror = function (event) {
              output_trace("indexedDB.open Error: " + event.message);
          }
      }

      function add_record(txn, store, records, i, commitT) {
        
        try{
              if (i < records.length) {
                  var rec = records[i];
                  var req = store.add(rec);
                  req.onsuccess = function (ev) {
                      output_trace("Record  added.");
                      i++;
                      add_record(txn, store, records, i, commitT);
                  }
                  req.onerror = function (ev) {
                      output_trace("Failed to add record." + "  Error: " + ev.message);
                  }
              }
              else if (i == records.length) {
                  if (commitT == true)
                      txn.db.close(); // txn.commit();
                  else
                      txn.abort();
              }
          }
          catch (e) {
              output_trace(e.message);
          }
      }

   	  function output_trace(sMsg){
		var oTrace = document.getElementById("traceoutput");
		if (oTrace.value == "")
			oTrace.value = sMsg;
		else
			oTrace.value = oTrace.value + "\n"+ sMsg;
	  }


</script>
</head>
<body>
<h2>IndexedDB Asynchronous API Samples</h2>
<h3>Add Records (Please create object store before running this sample)</h3>
<div style="float:right;">
<div style="height: 320px;">

	<label>Trace</label><br>
	<textarea id="traceoutput" style="width:100%;height:288px;" cols="20" name="S1" rows="1"></textarea>
</div>
<div id="codeSnippetWrapper" style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border: solid 1px silver; cursor: text; margin: 20px 0px 10px 0px; max-height: 200px; overflow: auto; padding: 4px; width: 97.5%; direction: ltr; text-align: left;"><div id="codeSnippet" style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; direction: ltr; text-align: left;">
<pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum1" style="color: #606060;">   1:</span> <span style="color: #0000ff;">function</span> output_trace(sMsg){</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum2" style="color: #606060;">   2:</span>        <span style="color: #0000ff;">var</span> oTrace = document.getElementById(<span style="color: #006080;">"traceoutput"</span>);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum3" style="color: #606060;">   3:</span>        <span style="color: #0000ff;">if</span> (oTrace.value == <span style="color: #006080;">""</span>)</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum4" style="color: #606060;">   4:</span>            oTrace.value = sMsg;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum5" style="color: #606060;">   5:</span>        <span style="color: #0000ff;">else</span></pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum6" style="color: #606060;">   6:</span>            oTrace.value = oTrace.value + <span style="color: #006080;">"\n"</span>+ sMsg;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum7" style="color: #606060;">   7:</span>      }</pre><!--CRLF--></div></div>
</div>

<button onclick="Async_add_records_read_write()">Async add records in read_write transaction mode</button>
<br>
<button onclick="Async_add_records_read_only()">Async add records in read_only transaction mode</button>

<div id="codeSnippetWrapper" style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border: solid 1px silver; cursor: text; margin: 20px 0px 10px 0px;overflow: visible; padding: 4px; width: 97.5%; direction: ltr; text-align: left;"><div id="codeSnippet" style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; direction: ltr; text-align: left;">
<pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum1" style="color: #606060;">   1:</span> <span style="color: #0000ff;">function</span> Async_add_records_read_write() {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum2" style="color: #606060;">   2:</span>        <span style="color: #0000ff;">var</span> objName = <span style="color: #006080;">"KIDSTORE"</span>;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum3" style="color: #606060;">   3:</span>        <span style="color: #0000ff;">var</span> records = kidsData;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum4" style="color: #606060;">   4:</span>        <span style="color: #0000ff;">var</span> txnMode = read_write;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum5" style="color: #606060;">   5:</span>        <span style="color: #0000ff;">var</span> txnTimeout = 5000;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum6" style="color: #606060;">   6:</span>        <span style="color: #0000ff;">var</span> txnCommit = <span style="color: #0000ff;">true</span>;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum7" style="color: #606060;">   7:</span>        add_objStoreRecords(objName, records, txnMode, txnTimeout, txnCommit);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum8" style="color: #606060;">   8:</span>    }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum9" style="color: #606060;">   9:</span> &nbsp;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum10" style="color: #606060;">  10:</span>    <span style="color: #0000ff;">function</span> Async_add_records_read_only() {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum11" style="color: #606060;">  11:</span>        <span style="color: #0000ff;">var</span> objName = <span style="color: #006080;">"KIDSTORE"</span>;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum12" style="color: #606060;">  12:</span>        <span style="color: #0000ff;">var</span> records = kidsData;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum13" style="color: #606060;">  13:</span>        <span style="color: #0000ff;">var</span> txnMode = read_only; </pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum14" style="color: #606060;">  14:</span>        <span style="color: #0000ff;">var</span> txnTimeout = 5000;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum15" style="color: #606060;">  15:</span>        <span style="color: #0000ff;">var</span> txnCommit = <span style="color: #0000ff;">true</span>;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum16" style="color: #606060;">  16:</span>        add_objStoreRecords(objName, records, txnMode, txnTimeout, txnCommit);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum17" style="color: #606060;">  17:</span>    }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum18" style="color: #606060;">  18:</span> &nbsp;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum19" style="color: #606060;">  19:</span>    <span style="color: #0000ff;">function</span> add_objStoreRecords(objName, records, txnMode, txnTimeout, txnCommit) {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum20" style="color: #606060;">  20:</span>        <span style="color: #0000ff;">var</span> dbreq = window.indexedDB.open(indexedDBName);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum21" style="color: #606060;">  21:</span>        dbreq.onsuccess = <span style="color: #0000ff;">function</span> (<span style="color: #0000ff;">event</span>) {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum22" style="color: #606060;">  22:</span>            <span style="color: #0000ff;">var</span> db = <span style="color: #0000ff;">event</span>.result;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum23" style="color: #606060;">  23:</span>            <span style="color: #0000ff;">var</span> txn = db.transaction(<span style="color: #0000ff;">null</span>, txnMode, txnTimeout);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum24" style="color: #606060;">  24:</span>            <span style="color: #0000ff;">if</span> (txn) {</pre>
	<pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum81" style="color: #606060;"> 29:</span>                txn.oncomplete = <span style="color: #0000ff;">function</span> () {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum82" style="color: #606060;">  30:</span>                    output_trace(<span style="color: #006080;">"transaction completed."</span>);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum83" style="color: #606060;">  31:</span>                    db.close();</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum84" style="color: #606060;">  32:</span>                }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum85" style="color: #606060;">  33:</span>                txn.onabort = <span style="color: #0000ff;">function</span> () {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum86" style="color: #606060;">  34:</span>                    output_trace(<span style="color: #006080;">"transaction aborted."</span>);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum87" style="color: #606060;">  35:</span>                    db.close();</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum88" style="color: #606060;">  36:</span>                }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum89" style="color: #606060;">  37:</span>                txn.ontimeout = <span style="color: #0000ff;">function</span> () {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum90" style="color: #606060;">  38:</span>                    output_trace(<span style="color: #006080;">"transaction timeout."</span>);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum91" style="color: #606060;">  39:</span>                    db.close();</pre>
	<pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;">&nbsp;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum25" style="color: #606060;">  25:</span>                <span style="color: #0000ff;">var</span> store = txn.objectStore(objName);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum26" style="color: #606060;">  26:</span>                <span style="color: #0000ff;">if</span> (store)</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum27" style="color: #606060;">  27:</span>                    add_record(txn, store, records, 0, txnCommit);</pre><!--CRLF-->
	<pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;">&nbsp;</pre>
	<!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum40" style="color: #606060;">  40:</span>                }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum41" style="color: #606060;">  41:</span>            }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum42" style="color: #606060;">  42:</span>        }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum43" style="color: #606060;">  43:</span>        dbreq.onerror = <span style="color: #0000ff;">function</span> (<span style="color: #0000ff;">event</span>) {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum44" style="color: #606060;">  44:</span>            output_trace(<span style="color: #006080;">"indexedDB.open Error: "</span> + <span style="color: #0000ff;">event</span>.message);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum45" style="color: #606060;">  45:</span>        }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum46" style="color: #606060;">  46:</span>    }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum47" style="color: #606060;">  47:</span> &nbsp;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum48" style="color: #606060;">  48:</span>    <span style="color: #0000ff;">function</span> add_record(txn, store, records, i, commitT) {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum49" style="color: #606060;">  49:</span>      </pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum50" style="color: #606060;">  50:</span>      <span style="color: #0000ff;">try</span>{</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum51" style="color: #606060;">  51:</span>            <span style="color: #0000ff;">if</span> (i &lt; records.length) {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum52" style="color: #606060;">  52:</span>                <span style="color: #0000ff;">var</span> rec = records[i];</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum53" style="color: #606060;">  53:</span>                <span style="color: #0000ff;">var</span> req = store.add(rec);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum54" style="color: #606060;">  54:</span>                req.onsuccess = <span style="color: #0000ff;">function</span> (ev) {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum55" style="color: #606060;">  55:</span>                    output_trace(<span style="color: #006080;">"Record  added."</span>);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum56" style="color: #606060;">  56:</span>                    i++;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum57" style="color: #606060;">  57:</span>                    add_record(txn, store, records, i, commitT);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum58" style="color: #606060;">  58:</span>                }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum59" style="color: #606060;">  59:</span>                req.onerror = <span style="color: #0000ff;">function</span> (ev) {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum60" style="color: #606060;">  60:</span>                    output_trace(<span style="color: #006080;">"Failed to add record."</span> + <span style="color: #006080;">"  Error: "</span> + ev.message);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum61" style="color: #606060;">  61:</span>                }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum62" style="color: #606060;">  62:</span>            }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum63" style="color: #606060;">  63:</span>            <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (i == records.length) {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum64" style="color: #606060;">  64:</span>                <span style="color: #0000ff;">if</span> (commitT == <span style="color: #0000ff;">true</span>)</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum65" style="color: #606060;">  65:</span>                    txn.commit();</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum66" style="color: #606060;">  66:</span>                <span style="color: #0000ff;">else</span></pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum67" style="color: #606060;">  67:</span>                    txn.abort();</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum68" style="color: #606060;">  68:</span>            }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum69" style="color: #606060;">  69:</span>        }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum70" style="color: #606060;">  70:</span>        <span style="color: #0000ff;">catch</span> (e) {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum71" style="color: #606060;">  71:</span>            output_trace(e.message);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum72" style="color: #606060;">  72:</span>        }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum73" style="color: #606060;">  73:</span>    }</pre><!--CRLF--></div></div>
<div id="codeSnippetWrapper" style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border: solid 1px silver; cursor: text; margin: 20px 0px 10px 0px; overflow: visible; padding: 4px; width: 97.5%; direction: ltr; text-align: left;"><div id="codeSnippet" style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; direction: ltr; text-align: left;">
<pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum1" style="color: #606060;">   1:</span> <span style="color: #008000;">////////////////////////////////////////////</span></pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum2" style="color: #606060;">   2:</span> <span style="color: #008000;">//global variables</span></pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum3" style="color: #606060;">   3:</span> <span style="color: #008000;">////////////////////////////////////////////</span></pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum4" style="color: #606060;">   4:</span> <span style="color: #0000ff;">var</span> indexedDBName = <span style="color: #006080;">"AsyncIndexedDB2"</span>;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum5" style="color: #606060;">   5:</span> <span style="color: #0000ff;">var</span> version = <span style="color: #006080;">"2.0"</span>;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum6" style="color: #606060;">   6:</span> <span style="color: #0000ff;">var</span> read_only = 1;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum7" style="color: #606060;">   7:</span> <span style="color: #0000ff;">var</span> read_write = 0;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum8" style="color: #606060;">   8:</span> <span style="color: #0000ff;">var</span> version_change = 2;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum9" style="color: #606060;">   9:</span> &nbsp;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum10" style="color: #606060;">  10:</span> <span style="color: #0000ff;">var</span> objNames =</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum11" style="color: #606060;">  11:</span> [</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum12" style="color: #606060;">  12:</span>    <span style="color: #006080;">"KIDSTORE"</span>, <span style="color: #006080;">"CANDYSTORE"</span></pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum13" style="color: #606060;">  13:</span> ];</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum14" style="color: #606060;">  14:</span> &nbsp;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum15" style="color: #606060;">  15:</span> <span style="color: #0000ff;">var</span> OBJECTSTORES =</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum16" style="color: #606060;">  16:</span> [</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum17" style="color: #606060;">  17:</span>   { name: <span style="color: #006080;">"KIDSTORE"</span>, keyPath: <span style="color: #006080;">"id"</span>, autoIncrement: <span style="color: #0000ff;">true</span> },</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum18" style="color: #606060;">  18:</span>   { name: <span style="color: #006080;">"CANDYSTORE"</span>, keyPath: <span style="color: #006080;">"id"</span>, autoIncrement: <span style="color: #0000ff;">false</span> },</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum19" style="color: #606060;">  19:</span>   { name: <span style="color: #006080;">"CANDYSALESTORE"</span>, keyPath: <span style="color: #006080;">"id"</span>, autoIncrement: <span style="color: #0000ff;">true</span> }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum20" style="color: #606060;">  20:</span> ];</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum21" style="color: #606060;">  21:</span> &nbsp;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum22" style="color: #606060;">  22:</span> <span style="color: #0000ff;">var</span> kidsData =</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum23" style="color: #606060;">  23:</span> [</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum24" style="color: #606060;">  24:</span>   { name: <span style="color: #006080;">"Anna"</span>, number: 1000 },</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum25" style="color: #606060;">  25:</span>   { name: <span style="color: #006080;">"Betty"</span>, number: 1001 },</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum26" style="color: #606060;">  26:</span>   { name: <span style="color: #006080;">"Christine"</span>, number: 1002 },</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum27" style="color: #606060;">  27:</span>   { name: <span style="color: #006080;">"Amy"</span>, number: 1003 },</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum28" style="color: #606060;">  28:</span>   { name: <span style="color: #006080;">"Linda"</span>, number: 1004 },</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum29" style="color: #606060;">  29:</span>   { name: <span style="color: #006080;">"Lincoln"</span>, number: 1005 }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum30" style="color: #606060;">  30:</span> ];</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum31" style="color: #606060;">  31:</span> &nbsp;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum32" style="color: #606060;">  32:</span> <span style="color: #0000ff;">var</span> kidsDataUpdate =</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum33" style="color: #606060;">  33:</span> [</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum34" style="color: #606060;">  34:</span>   { id: 100, name: <span style="color: #006080;">"Anna"</span>, number: 2000 },</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum35" style="color: #606060;">  35:</span>   { id: 101, name: <span style="color: #006080;">"Betty"</span>, number: 2001 },</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum36" style="color: #606060;">  36:</span>   { id: 102, name: <span style="color: #006080;">"Christine"</span>, number: 2002 },</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum37" style="color: #606060;">  37:</span>   { id: 103, name: <span style="color: #006080;">"Amy"</span>, number: 2003 },</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum38" style="color: #606060;">  38:</span>   { id: 104, name: <span style="color: #006080;">"Linda"</span>, number: 2004 },</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum39" style="color: #606060;">  39:</span>   { id: 105, name: <span style="color: #006080;">"Lincoln"</span>, number: 2005 }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum40" style="color: #606060;">  40:</span> ];</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum41" style="color: #606060;">  41:</span> &nbsp;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum42" style="color: #606060;">  42:</span> <span style="color: #0000ff;">var</span> candyData =</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum43" style="color: #606060;">  43:</span> [</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum44" style="color: #606060;">  44:</span> <span style="color: #008000;">//need id since autoIncrement is set false, i.e. key generator is turned off        </span></pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum45" style="color: #606060;">  45:</span>   {id: 10, name: <span style="color: #006080;">"candy1"</span>, weight: 100 },</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum46" style="color: #606060;">  46:</span>   { id: 11, name: <span style="color: #006080;">"candy2"</span>, weight: 200 },</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum47" style="color: #606060;">  47:</span>   { id: 12, name: <span style="color: #006080;">"candy3"</span>, weight: 300 },</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum48" style="color: #606060;">  48:</span>   { id: 13, name: <span style="color: #006080;">"candy4"</span>, weight: 400 }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum49" style="color: #606060;">  49:</span> ];</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum50" style="color: #606060;">  50:</span> &nbsp;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum51" style="color: #606060;">  51:</span>  <span style="color: #008000;">///////////////////////////////////</span></pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum52" style="color: #606060;">  52:</span> <span style="color: #008000;">//utility functions</span></pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum53" style="color: #606060;">  53:</span> <span style="color: #008000;">////////////////////////////////////</span></pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum54" style="color: #606060;">  54:</span> &nbsp;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum55" style="color: #606060;">  55:</span> <span style="color: #0000ff;">function</span> PrintDBInformation(idb) {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum56" style="color: #606060;">  56:</span>     <span style="color: #0000ff;">if</span> (idb) {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum57" style="color: #606060;">  57:</span>         <span style="color: #0000ff;">var</span> sName = idb.name;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum58" style="color: #606060;">  58:</span>         <span style="color: #0000ff;">var</span> dVersion = idb.version;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum59" style="color: #606060;">  59:</span>         <span style="color: #0000ff;">var</span> dTableNames = idb.objectStoreNames;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum60" style="color: #606060;">  60:</span>         <span style="color: #0000ff;">var</span> strNames = <span style="color: #006080;">"IndexedDB name: "</span> + sName</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum61" style="color: #606060;">  61:</span>                       + <span style="color: #006080;">"; version: "</span> + dVersion + <span style="color: #006080;">"; object stores: "</span>;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum62" style="color: #606060;">  62:</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> i = 0; i &lt; dTableNames.length; i++) {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum63" style="color: #606060;">  63:</span>             strNames = strNames + dTableNames[i] + <span style="color: #006080;">", "</span>;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum64" style="color: #606060;">  64:</span>         }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum65" style="color: #606060;">  65:</span>         output_trace(strNames);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum66" style="color: #606060;">  66:</span>     }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum67" style="color: #606060;">  67:</span> }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum68" style="color: #606060;">  68:</span> &nbsp;</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum69" style="color: #606060;">  69:</span> <span style="color: #0000ff;">function</span> PrintRecord(tTable, tRecord) {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum70" style="color: #606060;">  70:</span>     <span style="color: #0000ff;">if</span> (tRecord != undefined) {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum71" style="color: #606060;">  71:</span>         <span style="color: #0000ff;">if</span> (tTable == <span style="color: #006080;">"KIDSTORE"</span>) {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum72" style="color: #606060;">  72:</span>             output_trace(<span style="color: #006080;">"( "</span> + tRecord.id + <span style="color: #006080;">","</span> + tRecord.name + <span style="color: #006080;">","</span> + tRecord.number + <span style="color: #006080;">")"</span>);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum73" style="color: #606060;">  73:</span>         }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum74" style="color: #606060;">  74:</span>         <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (tTable == <span style="color: #006080;">"CANDYSTORE"</span>) {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum75" style="color: #606060;">  75:</span>             output_trace(<span style="color: #006080;">"( "</span> + tRecord.id + <span style="color: #006080;">","</span> + tRecord.name + <span style="color: #006080;">","</span> + tRecord.weight + <span style="color: #006080;">")"</span>);</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum76" style="color: #606060;">  76:</span>         }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum77" style="color: #606060;">  77:</span>         <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (tTable == <span style="color: #006080;">"CANDYSALESTORE"</span>) {</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum78" style="color: #606060;">  78:</span>         }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; background-color: white; direction: ltr; text-align: left;"><span id="lnum79" style="color: #606060;">  79:</span>     }</pre><!--CRLF--><pre style="background-color: #f4f4f4; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 8pt; line-height: 12pt; border-style: none; color: black; overflow: visible; padding: 0px; width: 100%; margin: 0em; direction: ltr; text-align: left;"><span id="lnum80" style="color: #606060;">  80:</span> }</pre><!--CRLF--></div></div>

<br>

</body></html>