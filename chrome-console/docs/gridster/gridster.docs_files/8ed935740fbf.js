/*

 jQuery Tools @VERSION Tooltip - UI essentials

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tooltip/

 Since: November 2008
 Date: @DATE

 jQuery Tools @VERSION / Tooltip Dynamic Positioning

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tooltip/dynamic.html

 Since: July 2009
 Date: @DATE

 jQuery Tools @VERSION Tabs- The basics of UI design.

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tabs/

 Since: November 2008
 Date: @DATE
 MIT License - http://www.opensource.org/licenses/mit-license.php

 For usage and examples, visit:
 http://timeago.yarp.com/

 Copyright (c) 2008-2013, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
*/
var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(a){"string"==typeof a&&(a=document.getElementById(a));a.addClass||(a.hide=function(){this.style.display="none"},a.show=function(){this.style.display=""},a.addClass=function(a){this.removeClass(a);this.className+=" "+a},a.removeClass=function(a){for(var e=this.className.split(/\s+/),d=-1,g=0;g<e.length;g++)e[g]==a&&(d=g,g=e.length);-1<d&&(e.splice(d,1),this.className=e.join(" "));return this},a.hasClass=
function(a){return!!this.className.match(RegExp("\\s*"+a+"\\s*"))});return a},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,j,e){(a=this.clients[a])&&a.receiveEvent(j,e)},register:function(a,j){this.clients[a]=j},getDOMObjectPosition:function(a,j){for(var e={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};a&&a!=j;)e.left+=a.offsetLeft,e.top+=a.offsetTop,a=a.offsetParent;return e},Client:function(a){this.handlers={};this.id=ZeroClipboard.nextId++;
this.movieId="ZeroClipboardMovie_"+this.id;ZeroClipboard.register(this.id,this);a&&this.glue(a)}};
ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(a,j,e){this.domElement=ZeroClipboard.$(a);a=99;this.domElement.style.zIndex&&(a=parseInt(this.domElement.style.zIndex,10)+1);"string"==typeof j?j=ZeroClipboard.$(j):"undefined"==typeof j&&(j=document.getElementsByTagName("body")[0]);var d=ZeroClipboard.getDOMObjectPosition(this.domElement,j);d.width=e.width||d.width;d.height=e.height||d.height;this.div=document.createElement("div");
var g=this.div.style;g.position="absolute";g.left=""+d.left+"px";g.top=""+d.top+"px";g.width=""+d.width+"px";g.height=""+d.height+"px";g.zIndex=a;if("object"==typeof e)for(addedStyle in e)g[addedStyle]=e[addedStyle];j.appendChild(this.div);this.div.innerHTML=this.getHTML(d.width,d.height)},getHTML:function(a,j){var e="",d="id="+this.id+"&width="+a+"&height="+j;if(navigator.userAgent.match(/MSIE/))var g=location.href.match(/^https/i)?"https://":"http://",e=e+('<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+
g+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+a+'" height="'+j+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+d+'"/><param name="wmode" value="transparent"/></object>');
else e+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+a+'" height="'+j+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+d+'" wmode="transparent" />';return e},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&
this.div){this.hide();this.div.innerHTML="";var a=document.getElementsByTagName("body")[0];try{a.removeChild(this.div)}catch(j){}this.div=this.domElement=null}},reposition:function(a){a&&((this.domElement=ZeroClipboard.$(a))||this.hide());if(this.domElement&&this.div){var a=ZeroClipboard.getDOMObjectPosition(this.domElement),j=this.div.style;j.left=""+a.left+"px";j.top=""+a.top+"px"}},setText:function(a){this.clipText=a;this.ready&&this.movie.setText(a)},addEventListener:function(a,j){a=a.toString().toLowerCase().replace(/^on/,
"");this.handlers[a]||(this.handlers[a]=[]);this.handlers[a].push(j)},setHandCursor:function(a){this.handCursorEnabled=a;this.ready&&this.movie.setHandCursor(a)},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,j){a=a.toString().toLowerCase().replace(/^on/,"");switch(a){case "load":this.movie=document.getElementById(this.movieId);if(!this.movie){var e=this;setTimeout(function(){e.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){e=
this;setTimeout(function(){e.receiveEvent("load",null)},100);this.ready=!0;return}this.ready=!0;this.movie.setText(this.clipText);this.movie.setHandCursor(this.handCursorEnabled);break;case "mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case "mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),
this.domElement.removeClass("hover"));break;case "mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case "mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[a])for(var d=0,g=this.handlers[a].length;d<g;d++){var b=this.handlers[a][d];if("function"==typeof b)b(this,j);else if("object"==typeof b&&2==b.length)b[0][b[1]](this,j);else if("string"==typeof b)window[b](this,j)}}};
(function(a){var j=/[\.\/]/,e=function(){},d=function(a,b){return a-b},g,b,f={n:{}},h=function(a,f){var a=String(a),e=b,j=Array.prototype.slice.call(arguments,2),k=h.listeners(a),n=0,x,v=[],w={},z=[],E=g;g=a;for(var B=b=0,F=k.length;B<F;B++)"zIndex"in k[B]&&(v.push(k[B].zIndex),0>k[B].zIndex&&(w[k[B].zIndex]=k[B]));for(v.sort(d);0>v[n];)if(x=w[v[n++]],z.push(x.apply(f,j)),b)return b=e,z;for(B=0;B<F;B++)if(x=k[B],"zIndex"in x)if(x.zIndex==v[n]){z.push(x.apply(f,j));if(b)break;do if(n++,(x=w[v[n]])&&
z.push(x.apply(f,j)),b)break;while(x)}else w[x.zIndex]=x;else if(z.push(x.apply(f,j)),b)break;b=e;g=E;return z.length?z:null};h._events=f;h.listeners=function(a){var a=a.split(j),b=f,d,e,h,g,x,v,w,z=[b],E=[];h=0;for(g=a.length;h<g;h++){w=[];x=0;for(v=z.length;x<v;x++){b=z[x].n;d=[b[a[h]],b["*"]];for(e=2;e--;)if(b=d[e])w.push(b),E=E.concat(b.f||[])}z=w}return E};h.on=function(a,b){a=String(a);if("function"!=typeof b)return function(){};for(var d=a.split(j),h=f,g=0,n=d.length;g<n;g++)h=h.n,h=h.hasOwnProperty(d[g])&&
h[d[g]]||(h[d[g]]={n:{}});h.f=h.f||[];g=0;for(n=h.f.length;g<n;g++)if(h.f[g]==b)return e;h.f.push(b);return function(a){+a==+a&&(b.zIndex=+a)}};h.f=function(a){var b=[].slice.call(arguments,1);return function(){h.apply(null,[a,null].concat(b).concat([].slice.call(arguments,0)))}};h.stop=function(){b=1};h.nt=function(a){return a?RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)").test(g):g};h.nts=function(){return g.split(j)};h.off=h.unbind=function(a,b){if(a){var d=a.split(j),g,e,n,x,v,w,z=[f];x=0;for(v=d.length;x<
v;x++)for(w=0;w<z.length;w+=n.length-2){n=[w,1];g=z[w].n;if("*"!=d[x])g[d[x]]&&n.push(g[d[x]]);else for(e in g)g.hasOwnProperty(e)&&n.push(g[e]);z.splice.apply(z,n)}x=0;for(v=z.length;x<v;x++)for(g=z[x];g.n;){if(b){if(g.f){w=0;for(d=g.f.length;w<d;w++)if(g.f[w]==b){g.f.splice(w,1);break}!g.f.length&&delete g.f}for(e in g.n)if(g.n.hasOwnProperty(e)&&g.n[e].f){n=g.n[e].f;w=0;for(d=n.length;w<d;w++)if(n[w]==b){n.splice(w,1);break}!n.length&&delete g.n[e].f}}else for(e in delete g.f,g.n)g.n.hasOwnProperty(e)&&
g.n[e].f&&delete g.n[e].f;g=g.n}}else h._events=f={n:{}}};h.once=function(a,b){var d=function(){h.unbind(a,d);return b.apply(this,arguments)};return h.on(a,d)};h.version="0.4.2";h.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=h:"undefined"!=typeof define?define("eve",[],function(){return h}):a.eve=h})(this);
(function(a,j){"function"===typeof define&&define.amd?define("raphael",["eve"],j):a.Raphael=j(a.eve)})(this,function(a){function j(b){if(j.is(b,"function"))return x?b():a.on("raphael.DOMload",b);if(j.is(b,Z))return j._engine.create[A](j,b.splice(0,3+j.is(b[0],U))).add(b);var d=Array.prototype.slice.call(arguments,0);if(j.is(d[d.length-1],"function")){var f=d.pop();return x?f.call(j._engine.create[A](j,d)):a.on("raphael.DOMload",function(){f.call(j._engine.create[A](j,d))})}return j._engine.create[A](j,
arguments)}function e(a){if(Object(a)!==a)return a;var b=new a.constructor,d;for(d in a)a[E](d)&&(b[d]=e(a[d]));return b}function d(a,b,d){function f(){var g=Array.prototype.slice.call(arguments,0),e=g.join("\u2400"),h=f.cache=f.cache||{},j=f.count=f.count||[];if(h[E](e)){a:for(var g=j,j=e,k=0,n=g.length;k<n;k++)if(g[k]===j){g.push(g.splice(k,1)[0]);break a}return d?d(h[e]):h[e]}1E3<=j.length&&delete h[j.shift()];j.push(e);h[e]=a[A](b,g);return d?d(h[e]):h[e]}return f}function g(){return this.hex}
function b(a,b){for(var d=[],f=0,g=a.length;g-2*!b>f;f+=2){var e=[{x:+a[f-2],y:+a[f-1]},{x:+a[f],y:+a[f+1]},{x:+a[f+2],y:+a[f+3]},{x:+a[f+4],y:+a[f+5]}];b?f?g-4==f?e[3]={x:+a[0],y:+a[1]}:g-2==f&&(e[2]={x:+a[0],y:+a[1]},e[3]={x:+a[2],y:+a[3]}):e[0]={x:+a[g-2],y:+a[g-1]}:g-4==f?e[3]=e[2]:f||(e[0]={x:+a[f],y:+a[f+1]});d.push(["C",(-e[0].x+6*e[1].x+e[2].x)/6,(-e[0].y+6*e[1].y+e[2].y)/6,(e[1].x+6*e[2].x-e[3].x)/6,(e[1].y+6*e[2].y-e[3].y)/6,e[2].x,e[2].y])}return d}function f(a,b,d,f,e,g,h,j,k){null==k&&
(k=1);for(var k=(1<k?1:0>k?0:k)/2,n=[-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],o=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],l=0,m=0;12>m;m++)var q=k*n[m]+k,v=q*(q*(-3*a+9*d-9*e+3*h)+6*a-12*d+6*e)-3*a+3*d,q=q*(q*(-3*b+9*f-9*g+3*j)+6*b-12*f+6*g)-3*b+3*f,l=l+o[m]*M.sqrt(v*v+q*q);return k*l}function h(a,b,d,e,g,h,j,k,n){if(!(0>n||f(a,b,d,e,g,h,j,k)<n)){var o=0.5,l=1-o,m;for(m=f(a,b,d,e,g,h,j,k,l);0.01<N(m-n);)o/=
2,l+=(m<n?1:-1)*o,m=f(a,b,d,e,g,h,j,k,l);return l}}function o(a,b,d){for(var a=j._path2curve(a),b=j._path2curve(b),e,g,h,k,n,o,l,m,q,v,u=d?0:[],x=0,C=a.length;x<C;x++)if(q=a[x],"M"==q[0])e=n=q[1],g=o=q[2];else{"C"==q[0]?(q=[e,g].concat(q.slice(1)),e=q[6],g=q[7]):(q=[e,g,e,g,n,o,n,o],e=n,g=o);for(var w=0,A=b.length;w<A;w++)if(v=b[w],"M"==v[0])h=l=v[1],k=m=v[2];else{"C"==v[0]?(v=[h,k].concat(v.slice(1)),h=v[6],k=v[7]):(v=[h,k,h,k,l,m,l,m],h=l,k=m);var y;var K=q,t=v;y=d;var I=j.bezierBBox(K),G=j.bezierBBox(t);
if(j.isBBoxIntersect(I,G)){for(var I=f.apply(0,K),G=f.apply(0,t),I=~~(I/5),G=~~(G/5),J=[],X=[],M={},P=y?0:[],z=0;z<I+1;z++){var B=j.findDotsAtSegment.apply(j,K.concat(z/I));J.push({x:B.x,y:B.y,t:z/I})}for(z=0;z<G+1;z++)B=j.findDotsAtSegment.apply(j,t.concat(z/G)),X.push({x:B.x,y:B.y,t:z/G});for(z=0;z<I;z++)for(K=0;K<G;K++){var T=J[z],L=J[z+1],t=X[K],B=X[K+1],da=0.001>N(L.x-T.x)?"y":"x",E=0.001>N(B.x-t.x)?"y":"x",Q;Q=T.x;var F=T.y,ba=L.x,W=L.y,fa=t.x,U=t.y,ea=B.x,ha=B.y;if(H(Q,ba)<R(fa,ea)||R(Q,ba)>
H(fa,ea)||H(F,W)<R(U,ha)||R(F,W)>H(U,ha))Q=void 0;else{var la=(Q*W-F*ba)*(fa-ea)-(Q-ba)*(fa*ha-U*ea),Z=(Q*W-F*ba)*(U-ha)-(F-W)*(fa*ha-U*ea),ia=(Q-ba)*(U-ha)-(F-W)*(fa-ea);if(ia){var la=la/ia,Z=Z/ia,ia=+la.toFixed(2),na=+Z.toFixed(2);Q=ia<+R(Q,ba).toFixed(2)||ia>+H(Q,ba).toFixed(2)||ia<+R(fa,ea).toFixed(2)||ia>+H(fa,ea).toFixed(2)||na<+R(F,W).toFixed(2)||na>+H(F,W).toFixed(2)||na<+R(U,ha).toFixed(2)||na>+H(U,ha).toFixed(2)?void 0:{x:la,y:Z}}else Q=void 0}Q&&M[Q.x.toFixed(4)]!=Q.y.toFixed(4)&&(M[Q.x.toFixed(4)]=
Q.y.toFixed(4),T=T.t+N((Q[da]-T[da])/(L[da]-T[da]))*(L.t-T.t),t=t.t+N((Q[E]-t[E])/(B[E]-t[E]))*(B.t-t.t),0<=T&&(1>=T&&0<=t&&1>=t)&&(y?P++:P.push({x:Q.x,y:Q.y,t1:T,t2:t})))}y=P}else y=y?0:[];if(d)u+=y;else{I=0;for(G=y.length;I<G;I++)y[I].segment1=x,y[I].segment2=w,y[I].bez1=q,y[I].bez2=v;u=u.concat(y)}}}return u}function u(a,b,d,f,e,g){null!=a?(this.a=+a,this.b=+b,this.c=+d,this.d=+f,this.e=+e,this.f=+g):(this.a=1,this.c=this.b=0,this.d=1,this.f=this.e=0)}function q(){return this.x+m+this.y+m+this.width+
" \u00d7 "+this.height}function l(a,b){var d=[],f={};this.ms=b;this.times=1;if(a){for(var e in a)a[E](e)&&(f[Y(e)]=a[e],d.push(Y(e)));d.sort(ta)}this.anim=f;this.top=d[d.length-1];this.percents=d}function k(b,d,f,e,g,h){var f=Y(f),k,n,o,l,m,q,x=b.ms,w={},H={},A={};if(e){q=0;for(K=aa.length;q<K;q++){var y=aa[q];if(y.el.id==d.id&&y.anim==b){y.percent!=f?(aa.splice(q,1),o=1):n=y;d.attr(y.totalOrigin);break}}}else e=+H;q=0;for(var K=b.percents.length;q<K;q++)if(b.percents[q]==f||b.percents[q]>e*b.top){f=
b.percents[q];m=b.percents[q-1]||0;x=x/b.top*(f-m);l=b.percents[q+1];k=b.anim[f];break}else e&&d.attr(b.anim[b.percents[q]]);if(k){if(n)n.initstatus=e,n.start=new Date-n.ms*e;else{for(var t in k)if(k[E](t)&&(la[E](t)||d.paper.customAttributes[E](t)))switch(w[t]=d.attr(t),null==w[t]&&(w[t]=ba[t]),H[t]=k[t],la[t]){case U:A[t]=(H[t]-w[t])/x;break;case "colour":w[t]=j.getRGB(w[t]);q=j.getRGB(H[t]);A[t]={r:(q.r-w[t].r)/x,g:(q.g-w[t].g)/x,b:(q.b-w[t].b)/x};break;case "path":q=Sa(w[t],H[t]);y=q[1];w[t]=
q[0];A[t]=[];q=0;for(K=w[t].length;q<K;q++){A[t][q]=[0];for(var I=1,G=w[t][q].length;I<G;I++)A[t][q][I]=(y[q][I]-w[t][q][I])/x}break;case "transform":q=d._;if(K=yb(q[t],H[t])){w[t]=K.from;H[t]=K.to;A[t]=[];A[t].real=!0;q=0;for(K=w[t].length;q<K;q++){A[t][q]=[w[t][q][0]];I=1;for(G=w[t][q].length;I<G;I++)A[t][q][I]=(H[t][q][I]-w[t][q][I])/x}}else K=d.matrix||new u,q={_:{transform:q.transform},getBBox:function(){return d.getBBox(1)}},w[t]=[K.a,K.b,K.c,K.d,K.e,K.f],ya(q,H[t]),H[t]=q._.transform,A[t]=
[(q.matrix.a-K.a)/x,(q.matrix.b-K.b)/x,(q.matrix.c-K.c)/x,(q.matrix.d-K.d)/x,(q.matrix.e-K.e)/x,(q.matrix.f-K.f)/x];break;case "csv":K=P(k[t])[J](v);y=P(w[t])[J](v);if("clip-rect"==t){w[t]=y;A[t]=[];for(q=y.length;q--;)A[t][q]=(K[q]-w[t][q])/x}H[t]=K;break;default:K=[][C](k[t]);y=[][C](w[t]);A[t]=[];for(q=d.paper.customAttributes[t].length;q--;)A[t][q]=((K[q]||0)-(y[q]||0))/x}q=k.easing;t=j.easing_formulas[q];if(!t)if((t=P(q).match(ja))&&5==t.length){var R=t;t=function(a){var b=+R[1],d=+R[2],f=3*
b,e=3*(+R[3]-b)-f,g=1-f-e,b=3*d,d=3*(+R[4]-d)-b,h=1-b-d,a=function(a,b){var d,h,j,k;j=a;for(h=0;8>h;h++){k=((g*j+e)*j+f)*j-a;if(N(k)<b)return j;d=(3*g*j+2*e)*j+f;if(1E-6>N(d))break;j-=k/d}d=0;h=1;j=a;if(j<d)return d;if(j>h)return h;for(;d<h;){k=((g*j+e)*j+f)*j;if(N(k-a)<b)break;a>k?d=j:h=j;j=(h-d)/2+d}return j}(a,1/(200*x));return((h*a+d)*a+b)*a}}else t=Fa;q=k.start||b.start||+new Date;y={anim:b,percent:f,timestamp:q,start:q+(b.del||0),status:0,initstatus:e||0,stop:!1,ms:x,easing:t,from:w,diff:A,
to:H,el:d,callback:k.callback,prev:m,next:l,repeat:h||b.times,origin:d.attr(),totalOrigin:g};aa.push(y);if(e&&(!n&&!o)&&(y.stop=!0,y.start=new Date-x*e,1==aa.length))return db();o&&(y.start=new Date-y.ms*e);1==aa.length&&V(db)}a("raphael.anim.start."+d.id,d,b)}}function n(a){for(var b=0;b<aa.length;b++)aa[b].el.paper==a&&aa.splice(b--,1)}j.version="2.1.0";j.eve=a;var x,v=/[, ]+/,w={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},z=/\{(\d+)\}/g,E="hasOwnProperty",B={doc:document,win:window},F=Object.prototype[E].call(B.win,
"Raphael"),t=B.win.Raphael,G=function(){this.ca=this.customAttributes={}},y,A="apply",C="concat",K="createTouch"in B.doc,m=" ",P=String,J="split",T="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[J](m),Q={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},I=P.prototype.toLowerCase,M=Math,H=M.max,R=M.min,N=M.abs,L=M.pow,W=M.PI,U="number",Z="array",fa=Object.prototype.toString;j._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i;var ha=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
ia={NaN:1,Infinity:1,"-Infinity":1},ja=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,ra=M.round,Y=parseFloat,X=parseInt,da=P.prototype.toUpperCase,ba=j._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,
rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},la=j._availableAnimAttrs={blur:U,"clip-rect":"csv",cx:U,cy:U,fill:"colour","fill-opacity":U,"font-size":U,height:U,opacity:U,path:"path",r:U,rx:U,ry:U,stroke:"colour","stroke-opacity":U,"stroke-width":U,transform:"transform",width:U,x:U,y:U},ea=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,
na={hs:1,rg:1},Ga=/,?([achlmqrstvxz]),?/gi,za=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,
Aa=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,ma=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig;
j._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/;var sa={},ta=function(a,b){return Y(a)-Y(b)},va=function(){},Fa=function(a){return a},qa=j._rectPath=function(a,b,d,f,e){return e?[["M",a+e,b],["l",d-2*e,0],["a",e,e,0,0,1,
e,e],["l",0,f-2*e],["a",e,e,0,0,1,-e,e],["l",2*e-d,0],["a",e,e,0,0,1,-e,-e],["l",0,2*e-f],["a",e,e,0,0,1,e,-e],["z"]]:[["M",a,b],["l",d,0],["l",0,f],["l",-d,0],["z"]]},Ha=function(a,b,d,f){null==f&&(f=d);return[["M",a,b],["m",0,-f],["a",d,f,0,1,1,0,2*f],["a",d,f,0,1,1,0,-2*f],["z"]]},wa=j._getPath={path:function(a){return a.attr("path")},circle:function(a){a=a.attrs;return Ha(a.cx,a.cy,a.r)},ellipse:function(a){a=a.attrs;return Ha(a.cx,a.cy,a.rx,a.ry)},rect:function(a){a=a.attrs;return qa(a.x,a.y,
a.width,a.height,a.r)},image:function(a){a=a.attrs;return qa(a.x,a.y,a.width,a.height)},text:function(a){a=a._getBBox();return qa(a.x,a.y,a.width,a.height)},set:function(a){a=a._getBBox();return qa(a.x,a.y,a.width,a.height)}},ka=j.mapPath=function(a,b){if(!b)return a;var d,f,e,g,h,j,k,a=Sa(a);e=0;for(h=a.length;e<h;e++){k=a[e];g=1;for(j=k.length;g<j;g+=2)d=b.x(k[g],k[g+1]),f=b.y(k[g],k[g+1]),k[g]=d,k[g+1]=f}return a};j._g=B;j.type=B.win.SVGAngle||B.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure",
"1.1")?"SVG":"VML";if("VML"==j.type){var Ja=B.doc.createElement("div"),Ca;Ja.innerHTML='<v:shape adj="1"/>';Ca=Ja.firstChild;Ca.style.behavior="url(#default#VML)";if(!(Ca&&"object"==typeof Ca.adj))return j.type="";Ja=null}j.svg=!(j.vml="VML"==j.type);j._Paper=G;j.fn=y=G.prototype=j.prototype;j._id=0;j._oid=0;j.is=function(a,b){b=I.call(b);return"finite"==b?!ia[E](+a):"array"==b?a instanceof Array:"null"==b&&null===a||b==typeof a&&null!==a||"object"==b&&a===Object(a)||"array"==b&&Array.isArray&&Array.isArray(a)||
fa.call(a).slice(8,-1).toLowerCase()==b};j.angle=function(a,b,d,f,e,g){return null==e?(a-=d,b-=f,!a&&!b?0:(180*M.atan2(-b,-a)/W+540)%360):j.angle(a,b,e,g)-j.angle(d,f,e,g)};j.rad=function(a){return a%360*W/180};j.deg=function(a){return 180*a/W%360};j.snapTo=function(a,b,d){d=j.is(d,"finite")?d:10;if(j.is(a,Z))for(var f=a.length;f--;){if(N(a[f]-b)<=d)return a[f]}else{a=+a;f=b%a;if(f<d)return b-f;if(f>a-d)return b-f+a}return b};var eb=/[xy]/g,fb=function(a){var b=16*M.random()|0;return("x"==a?b:b&3|
8).toString(16)};j.createUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(eb,fb).toUpperCase()};j.setWindow=function(b){a("raphael.setWindow",j,B.win,b);B.win=b;B.doc=B.win.document;j._engine.initWin&&j._engine.initWin(B.win)};var oa=function(a){if(j.vml){var b=/^\s+|\s+$/g,f;try{var e=new ActiveXObject("htmlfile");e.write("<body>");e.close();f=e.body}catch(g){f=createPopup().document.body}var h=f.createTextRange();oa=d(function(a){try{f.style.color=P(a).replace(b,"");var d=h.queryCommandValue("ForeColor");
return"#"+("000000"+((d&255)<<16|d&65280|(d&16711680)>>>16).toString(16)).slice(-6)}catch(e){return"none"}})}else{var k=B.doc.createElement("i");k.title="Rapha\u00ebl Colour Picker";k.style.display="none";B.doc.body.appendChild(k);oa=d(function(a){k.style.color=a;return B.doc.defaultView.getComputedStyle(k,"").getPropertyValue("color")})}return oa(a)},Ka=function(){return"hsb("+[this.h,this.s,this.b]+")"},Ta=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ua=function(){return this.hex},gb=function(a,
b,d){null==b&&(j.is(a,"object")&&"r"in a&&"g"in a&&"b"in a)&&(d=a.b,b=a.g,a=a.r);null==b&&j.is(a,"string")&&(d=j.getRGB(a),a=d.r,b=d.g,d=d.b);if(1<a||1<b||1<d)a/=255,b/=255,d/=255;return[a,b,d]},La=function(a,b,d,f){a*=255;b*=255;d*=255;a={r:a,g:b,b:d,hex:j.rgb(a,b,d),toString:Ua};j.is(f,"finite")&&(a.opacity=f);return a};j.color=function(a){var b;j.is(a,"object")&&"h"in a&&"s"in a&&"b"in a?(b=j.hsb2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):j.is(a,"object")&&"h"in a&&"s"in a&&"l"in a?(b=j.hsl2rgb(a),
a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):(j.is(a,"string")&&(a=j.getRGB(a)),j.is(a,"object")&&"r"in a&&"g"in a&&"b"in a?(b=j.rgb2hsl(a),a.h=b.h,a.s=b.s,a.l=b.l,b=j.rgb2hsb(a),a.v=b.b):(a={hex:"none"},a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1));a.toString=Ua;return a};j.hsb2rgb=function(a,b,d,f){this.is(a,"object")&&("h"in a&&"s"in a&&"b"in a)&&(d=a.b,b=a.s,a=a.h,f=a.o);var e,g,h,a=360*a%360/60;h=d*b;b=h*(1-N(a%2-1));d=e=g=d-h;a=~~a;d+=[h,b,0,0,b,h][a];e+=[b,h,h,b,0,0][a];g+=[0,0,b,h,h,b][a];return La(d,e,g,f)};
j.hsl2rgb=function(a,b,d,f){this.is(a,"object")&&("h"in a&&"s"in a&&"l"in a)&&(d=a.l,b=a.s,a=a.h);if(1<a||1<b||1<d)a/=360,b/=100,d/=100;var e,g,h,a=360*a%360/60;h=2*b*(0.5>d?d:1-d);b=h*(1-N(a%2-1));d=e=g=d-h/2;a=~~a;d+=[h,b,0,0,b,h][a];e+=[b,h,h,b,0,0][a];g+=[0,0,b,h,h,b][a];return La(d,e,g,f)};j.rgb2hsb=function(a,b,d){var d=gb(a,b,d),a=d[0],b=d[1],d=d[2],f,e;f=H(a,b,d);e=f-R(a,b,d);return{h:60*(((0==e?0:f==a?(b-d)/e:f==b?(d-a)/e+2:(a-b)/e+4)+360)%6)/360,s:0==e?0:e/f,b:f,toString:Ka}};j.rgb2hsl=
function(a,b,d){var d=gb(a,b,d),a=d[0],b=d[1],d=d[2],f,e,g;e=H(a,b,d);f=R(a,b,d);g=e-f;f=(e+f)/2;return{h:60*(((0==g?0:e==a?(b-d)/g:e==b?(d-a)/g+2:(a-b)/g+4)+360)%6)/360,s:0==g?0:0.5>f?g/(2*f):g/(2-2*f),l:f,toString:Ta}};j._path2string=function(){return this.join(",").replace(Ga,"$1")};j._preload=function(a,b){var d=B.doc.createElement("img");d.style.cssText="position:absolute;left:-9999em;top:-9999em";d.onload=function(){b.call(this);this.onload=null;B.doc.body.removeChild(this)};d.onerror=function(){B.doc.body.removeChild(this)};
B.doc.body.appendChild(d);d.src=a};j.getRGB=d(function(a){if(!a||(a=P(a)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:g};if("none"==a)return{r:-1,g:-1,b:-1,hex:"none",toString:g};!(na[E](a.toLowerCase().substring(0,2))||"#"==a.charAt())&&(a=oa(a));var b,d,f,e,h;if(a=a.match(ha)){a[2]&&(f=X(a[2].substring(5),16),d=X(a[2].substring(3,5),16),b=X(a[2].substring(1,3),16));a[3]&&(f=X((h=a[3].charAt(3))+h,16),d=X((h=a[3].charAt(2))+h,16),b=X((h=a[3].charAt(1))+h,16));a[4]&&(h=a[4][J](ea),
b=Y(h[0]),"%"==h[0].slice(-1)&&(b*=2.55),d=Y(h[1]),"%"==h[1].slice(-1)&&(d*=2.55),f=Y(h[2]),"%"==h[2].slice(-1)&&(f*=2.55),"rgba"==a[1].toLowerCase().slice(0,4)&&(e=Y(h[3])),h[3]&&"%"==h[3].slice(-1)&&(e/=100));if(a[5])return h=a[5][J](ea),b=Y(h[0]),"%"==h[0].slice(-1)&&(b*=2.55),d=Y(h[1]),"%"==h[1].slice(-1)&&(d*=2.55),f=Y(h[2]),"%"==h[2].slice(-1)&&(f*=2.55),("deg"==h[0].slice(-3)||"\u00b0"==h[0].slice(-1))&&(b/=360),"hsba"==a[1].toLowerCase().slice(0,4)&&(e=Y(h[3])),h[3]&&"%"==h[3].slice(-1)&&
(e/=100),j.hsb2rgb(b,d,f,e);if(a[6])return h=a[6][J](ea),b=Y(h[0]),"%"==h[0].slice(-1)&&(b*=2.55),d=Y(h[1]),"%"==h[1].slice(-1)&&(d*=2.55),f=Y(h[2]),"%"==h[2].slice(-1)&&(f*=2.55),("deg"==h[0].slice(-3)||"\u00b0"==h[0].slice(-1))&&(b/=360),"hsla"==a[1].toLowerCase().slice(0,4)&&(e=Y(h[3])),h[3]&&"%"==h[3].slice(-1)&&(e/=100),j.hsl2rgb(b,d,f,e);a={r:b,g:d,b:f,toString:g};a.hex="#"+(16777216|f|d<<8|b<<16).toString(16).slice(1);j.is(e,"finite")&&(a.opacity=e);return a}return{r:-1,g:-1,b:-1,hex:"none",
error:1,toString:g}},j);j.hsb=d(function(a,b,d){return j.hsb2rgb(a,b,d).hex});j.hsl=d(function(a,b,d){return j.hsl2rgb(a,b,d).hex});j.rgb=d(function(a,b,d){return"#"+(16777216|d|b<<8|a<<16).toString(16).slice(1)});j.getColor=function(a){var a=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||0.75},b=this.hsb2rgb(a.h,a.s,a.b);a.h+=0.075;1<a.h&&(a.h=0,a.s-=0.2,0>=a.s&&(this.getColor.start={h:0,s:1,b:a.b}));return b.hex};j.getColor.reset=function(){delete this.start};j.parsePathString=function(a){if(!a)return null;
var b=S(a);if(b.arr)return xa(b.arr);var d={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},f=[];j.is(a,Z)&&j.is(a[0],Z)&&(f=xa(a));f.length||P(a).replace(za,function(a,b,e){var h=[],a=b.toLowerCase();e.replace(ma,function(a,b){b&&h.push(+b)});"m"==a&&2<h.length&&(f.push([b][C](h.splice(0,2))),a="l",b="m"==b?"l":"L");if("r"==a)f.push([b][C](h));else for(;h.length>=d[a]&&!(f.push([b][C](h.splice(0,d[a]))),!d[a]););});f.toString=j._path2string;b.arr=xa(f);return f};j.parseTransformString=d(function(a){if(!a)return null;
var b=[];j.is(a,Z)&&j.is(a[0],Z)&&(b=xa(a));b.length||P(a).replace(Aa,function(a,d,f){var e=[];I.call(d);f.replace(ma,function(a,b){b&&e.push(+b)});b.push([d][C](e))});b.toString=j._path2string;return b});var S=function(a){var b=S.ps=S.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100};setTimeout(function(){for(var d in b)b[E](d)&&d!=a&&(b[d].sleep--,!b[d].sleep&&delete b[d])});return b[a]};j.findDotsAtSegment=function(a,b,d,f,e,h,g,j,k){var n=1-k,o=L(n,3),l=L(n,2),m=k*k,q=m*k,v=o*a+3*l*k*d+3*n*k*k*e+q*
g,o=o*b+3*l*k*f+3*n*k*k*h+q*j,l=a+2*k*(d-a)+m*(e-2*d+a),q=b+2*k*(f-b)+m*(h-2*f+b),u=d+2*k*(e-d)+m*(g-2*e+d),m=f+2*k*(h-f)+m*(j-2*h+f),a=n*a+k*d,b=n*b+k*f,e=n*e+k*g,h=n*h+k*j,j=90-180*M.atan2(l-u,q-m)/W;(l>u||q<m)&&(j+=180);return{x:v,y:o,m:{x:l,y:q},n:{x:u,y:m},start:{x:a,y:b},end:{x:e,y:h},alpha:j}};j.bezierBBox=function(a,b,d,f,e,h,g,k){j.is(a,"array")||(a=[a,b,d,f,e,h,g,k]);a=zb.apply(null,a);return{x:a.min.x,y:a.min.y,x2:a.max.x,y2:a.max.y,width:a.max.x-a.min.x,height:a.max.y-a.min.y}};j.isPointInsideBBox=
function(a,b,d){return b>=a.x&&b<=a.x2&&d>=a.y&&d<=a.y2};j.isBBoxIntersect=function(a,b){var d=j.isPointInsideBBox;return d(b,a.x,a.y)||d(b,a.x2,a.y)||d(b,a.x,a.y2)||d(b,a.x2,a.y2)||d(a,b.x,b.y)||d(a,b.x2,b.y)||d(a,b.x,b.y2)||d(a,b.x2,b.y2)||(a.x<b.x2&&a.x>b.x||b.x<a.x2&&b.x>a.x)&&(a.y<b.y2&&a.y>b.y||b.y<a.y2&&b.y>a.y)};j.pathIntersection=function(a,b){return o(a,b)};j.pathIntersectionNumber=function(a,b){return o(a,b,1)};j.isPointInsidePath=function(a,b,d){var f=j.pathBBox(a);return j.isPointInsideBBox(f,
b,d)&&1==o(a,[["M",b,d],["H",f.x2+10]],1)%2};j._removedFactory=function(b){return function(){a("raphael.log",null,"Rapha\u00ebl: you are calling to method \u201c"+b+"\u201d of removed object",b)}};var Ab=j.pathBBox=function(a){var b=S(a);if(b.bbox)return e(b.bbox);if(!a)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var a=Sa(a),d=0,f=0,h=[],g=[],j,k=0,n=a.length;k<n;k++)j=a[k],"M"==j[0]?(d=j[1],f=j[2],h.push(d),g.push(f)):(d=zb(d,f,j[1],j[2],j[3],j[4],j[5],j[6]),h=h[C](d.min.x,d.max.x),g=g[C](d.min.y,
d.max.y),d=j[5],f=j[6]);a=R[A](0,h);j=R[A](0,g);h=H[A](0,h);g=H[A](0,g);k=h-a;n=g-j;g={x:a,y:j,x2:h,y2:g,width:k,height:n,cx:a+k/2,cy:j+n/2};b.bbox=e(g);return g},xa=function(a){a=e(a);a.toString=j._path2string;return a},Sb=j._pathToRelative=function(a){var b=S(a);if(b.rel)return xa(b.rel);if(!j.is(a,Z)||!j.is(a&&a[0],Z))a=j.parsePathString(a);var d=[],f=0,e=0,h=0,g=0,k=0;"M"==a[0][0]&&(f=a[0][1],e=a[0][2],h=f,g=e,k++,d.push(["M",f,e]));for(var n=a.length;k<n;k++){var o=d[k]=[],l=a[k];if(l[0]!=I.call(l[0]))switch(o[0]=
I.call(l[0]),o[0]){case "a":o[1]=l[1];o[2]=l[2];o[3]=l[3];o[4]=l[4];o[5]=l[5];o[6]=+(l[6]-f).toFixed(3);o[7]=+(l[7]-e).toFixed(3);break;case "v":o[1]=+(l[1]-e).toFixed(3);break;case "m":h=l[1],g=l[2];default:for(var m=1,q=l.length;m<q;m++)o[m]=+(l[m]-(m%2?f:e)).toFixed(3)}else{d[k]=[];"m"==l[0]&&(h=l[1]+f,g=l[2]+e);o=0;for(m=l.length;o<m;o++)d[k][o]=l[o]}l=d[k].length;switch(d[k][0]){case "z":f=h;e=g;break;case "h":f+=+d[k][l-1];break;case "v":e+=+d[k][l-1];break;default:f+=+d[k][l-2],e+=+d[k][l-
1]}}d.toString=j._path2string;b.rel=xa(d);return d},qb=j._pathToAbsolute=function(a){var d=S(a);if(d.abs)return xa(d.abs);if(!j.is(a,Z)||!j.is(a&&a[0],Z))a=j.parsePathString(a);if(!a||!a.length)return[["M",0,0]];var f=[],e=0,h=0,g=0,k=0,n=0;"M"==a[0][0]&&(e=+a[0][1],h=+a[0][2],g=e,k=h,n++,f[0]=["M",e,h]);for(var o=3==a.length&&"M"==a[0][0]&&"R"==a[1][0].toUpperCase()&&"Z"==a[2][0].toUpperCase(),l,m=n,q=a.length;m<q;m++){f.push(n=[]);l=a[m];if(l[0]!=da.call(l[0]))switch(n[0]=da.call(l[0]),n[0]){case "A":n[1]=
l[1];n[2]=l[2];n[3]=l[3];n[4]=l[4];n[5]=l[5];n[6]=+(l[6]+e);n[7]=+(l[7]+h);break;case "V":n[1]=+l[1]+h;break;case "H":n[1]=+l[1]+e;break;case "R":for(var v=[e,h][C](l.slice(1)),u=2,x=v.length;u<x;u++)v[u]=+v[u]+e,v[++u]=+v[u]+h;f.pop();f=f[C](b(v,o));break;case "M":g=+l[1]+e,k=+l[2]+h;default:u=1;for(x=l.length;u<x;u++)n[u]=+l[u]+(u%2?e:h)}else if("R"==l[0])v=[e,h][C](l.slice(1)),f.pop(),f=f[C](b(v,o)),n=["R"][C](l.slice(-2));else{v=0;for(u=l.length;v<u;v++)n[v]=l[v]}switch(n[0]){case "Z":e=g;h=k;
break;case "H":e=n[1];break;case "V":h=n[1];break;case "M":g=n[n.length-2],k=n[n.length-1];default:e=n[n.length-2],h=n[n.length-1]}}f.toString=j._path2string;d.abs=xa(f);return f},Va=function(a,b,d,f,e,h){var g=1/3,j=2/3;return[g*a+j*d,g*b+j*f,g*e+j*d,g*h+j*f,e,h]},Bb=function(a,b,f,e,h,g,j,k,n,o){var l=120*W/180,m=W/180*(+h||0),q=[],v,u=d(function(a,b,d){var f=a*M.cos(d)-b*M.sin(d),a=a*M.sin(d)+b*M.cos(d);return{x:f,y:a}});if(o)H=o[0],v=o[1],g=o[2],x=o[3];else{v=u(a,b,-m);a=v.x;b=v.y;v=u(k,n,-m);
k=v.x;n=v.y;M.cos(W/180*h);M.sin(W/180*h);v=(a-k)/2;H=(b-n)/2;x=v*v/(f*f)+H*H/(e*e);1<x&&(x=M.sqrt(x),f*=x,e*=x);var x=f*f,w=e*e,x=(g==j?-1:1)*M.sqrt(N((x*w-x*H*H-w*v*v)/(x*H*H+w*v*v))),g=x*f*H/e+(a+k)/2,x=x*-e*v/f+(b+n)/2,H=M.asin(((b-x)/e).toFixed(9));v=M.asin(((n-x)/e).toFixed(9));H=a<g?W-H:H;v=k<g?W-v:v;0>H&&(H=2*W+H);0>v&&(v=2*W+v);j&&H>v&&(H-=2*W);!j&&v>H&&(v-=2*W)}if(N(v-H)>l){var q=v,w=k,A=n;v=H+l*(j&&v>H?1:-1);k=g+f*M.cos(v);n=x+e*M.sin(v);q=Bb(k,n,f,e,h,0,j,w,A,[v,q,g,x])}g=v-H;h=M.cos(H);
l=M.sin(H);j=M.cos(v);v=M.sin(v);g=M.tan(g/4);f=4/3*f*g;g*=4/3*e;e=[a,b];a=[a+f*l,b-g*h];b=[k+f*v,n-g*j];k=[k,n];a[0]=2*e[0]-a[0];a[1]=2*e[1]-a[1];if(o)return[a,b,k][C](q);q=[a,b,k][C](q).join()[J](",");o=[];k=0;for(n=q.length;k<n;k++)o[k]=k%2?u(q[k-1],q[k],m).y:u(q[k],q[k+1],m).x;return o},hb=function(a,b,d,f,e,h,g,j,k){var n=1-k;return{x:L(n,3)*a+3*L(n,2)*k*d+3*n*k*k*e+L(k,3)*g,y:L(n,3)*b+3*L(n,2)*k*f+3*n*k*k*h+L(k,3)*j}},zb=d(function(a,b,d,f,e,h,g,j){var k=e-2*d+a-(g-2*e+d),n=2*(d-a)-2*(e-d),
o=a-d,l=(-n+M.sqrt(n*n-4*k*o))/2/k,k=(-n-M.sqrt(n*n-4*k*o))/2/k,m=[b,j],q=[a,g];"1e12"<N(l)&&(l=0.5);"1e12"<N(k)&&(k=0.5);0<l&&1>l&&(l=hb(a,b,d,f,e,h,g,j,l),q.push(l.x),m.push(l.y));0<k&&1>k&&(l=hb(a,b,d,f,e,h,g,j,k),q.push(l.x),m.push(l.y));k=h-2*f+b-(j-2*h+f);n=2*(f-b)-2*(h-f);o=b-f;l=(-n+M.sqrt(n*n-4*k*o))/2/k;k=(-n-M.sqrt(n*n-4*k*o))/2/k;"1e12"<N(l)&&(l=0.5);"1e12"<N(k)&&(k=0.5);0<l&&1>l&&(l=hb(a,b,d,f,e,h,g,j,l),q.push(l.x),m.push(l.y));0<k&&1>k&&(l=hb(a,b,d,f,e,h,g,j,k),q.push(l.x),m.push(l.y));
return{min:{x:R[A](0,q),y:R[A](0,m)},max:{x:H[A](0,q),y:H[A](0,m)}}}),Sa=j._path2curve=d(function(a,b){var d=!b&&S(a);if(!b&&d.curve)return xa(d.curve);var f=qb(a),e=b&&qb(b),h={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},j=function(a,b){var d,f;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null);switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"][C](Bb[A](0,[b.x,b.y][C](a.slice(1))));break;case "S":d=b.x+(b.x-(b.bx||
b.x));f=b.y+(b.y-(b.by||b.y));a=["C",d,f][C](a.slice(1));break;case "T":b.qx=b.x+(b.x-(b.qx||b.x));b.qy=b.y+(b.y-(b.qy||b.y));a=["C"][C](Va(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"][C](Va(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"][C]([b.x,b.y,a[1],a[2],a[1],a[2]]);break;case "H":a=["C"][C]([b.x,b.y,a[1],b.y,a[1],b.y]);break;case "V":a=["C"][C]([b.x,b.y,b.x,a[1],b.x,a[1]]);break;case "Z":a=["C"][C]([b.x,b.y,b.X,b.Y,b.X,b.Y])}return a},k=function(a,b){if(7<a[b].length){a[b].shift();
for(var d=a[b];d.length;)a.splice(b++,0,["C"][C](d.splice(0,6)));a.splice(b,1);l=H(f.length,e&&e.length||0)}},n=function(a,b,d,h,g){a&&(b&&"M"==a[g][0]&&"M"!=b[g][0])&&(b.splice(g,0,["M",h.x,h.y]),d.bx=0,d.by=0,d.x=a[g][1],d.y=a[g][2],l=H(f.length,e&&e.length||0))},o=0,l=H(f.length,e&&e.length||0);for(;o<l;o++){f[o]=j(f[o],h);k(f,o);e&&(e[o]=j(e[o],g));e&&k(e,o);n(f,e,h,g,o);n(e,f,g,h,o);var m=f[o],q=e&&e[o],v=m.length,u=e&&q.length;h.x=m[v-2];h.y=m[v-1];h.bx=Y(m[v-4])||h.x;h.by=Y(m[v-3])||h.y;g.bx=
e&&(Y(q[u-4])||g.x);g.by=e&&(Y(q[u-3])||g.y);g.x=e&&q[u-2];g.y=e&&q[u-1]}e||(d.curve=xa(f));return e?[f,e]:f},null,xa);j._parseDots=d(function(a){for(var b=[],d=0,f=a.length;d<f;d++){var e={},h=a[d].match(/^([^:]*):?([\d\.]*)/);e.color=j.getRGB(h[1]);if(e.color.error)return null;e.color=e.color.hex;h[2]&&(e.offset=h[2]+"%");b.push(e)}d=1;for(f=b.length-1;d<f;d++)if(!b[d].offset){a=Y(b[d-1].offset||0);h=0;for(e=d+1;e<f;e++)if(b[e].offset){h=b[e].offset;break}h||(h=100,e=f);h=Y(h);for(h=(h-a)/(e-d+
1);d<e;d++)a+=h,b[d].offset=a+"%"}return b});var Wa=j._tear=function(a,b){a==b.top&&(b.top=a.prev);a==b.bottom&&(b.bottom=a.next);a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next)};j._tofront=function(a,b){b.top!==a&&(Wa(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)};j._toback=function(a,b){b.bottom!==a&&(Wa(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)};j._insertafter=function(a,b,d){Wa(a,d);b==d.top&&(d.top=a);b.next&&(b.next.prev=a);a.next=b.next;a.prev=b;b.next=a};
j._insertbefore=function(a,b,d){Wa(a,d);b==d.bottom&&(d.bottom=a);b.prev&&(b.prev.next=a);a.prev=b.prev;b.prev=a;a.next=b};var Cb=j.toMatrix=function(a,b){var d=Ab(a),f={_:{transform:""},getBBox:function(){return d}};ya(f,b);return f.matrix};j.transformPath=function(a,b){return ka(a,Cb(a,b))};var ya=j._extractTransform=function(a,b){if(null==b)return a._.transform;var b=P(b).replace(/\.{3}|\u2026/g,a._.transform||""),d=j.parseTransformString(b),f=0,e=0,h=0,g=1,k=1,n=a._,h=new u;n.transform=d||[];
if(d)for(var e=0,o=d.length;e<o;e++){var l=d[e],m=l.length,q=P(l[0]).toLowerCase(),v=l[0]!=q,x=v?h.invert():0,w;"t"==q&&3==m?v?(m=x.x(0,0),q=x.y(0,0),v=x.x(l[1],l[2]),x=x.y(l[1],l[2]),h.translate(v-m,x-q)):h.translate(l[1],l[2]):"r"==q?2==m?(w=w||a.getBBox(1),h.rotate(l[1],w.x+w.width/2,w.y+w.height/2),f+=l[1]):4==m&&(v?(v=x.x(l[2],l[3]),x=x.y(l[2],l[3]),h.rotate(l[1],v,x)):h.rotate(l[1],l[2],l[3]),f+=l[1]):"s"==q?2==m||3==m?(w=w||a.getBBox(1),h.scale(l[1],l[m-1],w.x+w.width/2,w.y+w.height/2),g*=
l[1],k*=l[m-1]):5==m&&(v?(v=x.x(l[3],l[4]),x=x.y(l[3],l[4]),h.scale(l[1],l[2],v,x)):h.scale(l[1],l[2],l[3],l[4]),g*=l[1],k*=l[2]):"m"==q&&7==m&&h.add(l[1],l[2],l[3],l[4],l[5],l[6]);n.dirtyT=1;a.matrix=h}a.matrix=h;n.sx=g;n.sy=k;n.deg=f;n.dx=e=h.e;n.dy=h=h.f;1==g&&1==k&&!f&&n.bbox?(n.bbox.x+=+e,n.bbox.y+=+h):n.dirtyT=1},rb=function(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3]]:[b,0];case "s":return 5==a.length?
[b,1,1,a[3],a[4]]:3==a.length?[b,1,1]:[b,1]}},yb=j._equaliseTransform=function(a,b){for(var b=P(b).replace(/\.{3}|\u2026/g,a),a=j.parseTransformString(a)||[],b=j.parseTransformString(b)||[],d=H(a.length,b.length),f=[],e=[],h=0,g,k,n,o;h<d;h++){n=a[h]||rb(b[h]);o=b[h]||rb(n);if(n[0]!=o[0]||"r"==n[0].toLowerCase()&&(n[2]!=o[2]||n[3]!=o[3])||"s"==n[0].toLowerCase()&&(n[3]!=o[3]||n[4]!=o[4]))return;f[h]=[];e[h]=[];g=0;for(k=H(n.length,o.length);g<k;g++)g in n&&(f[h][g]=n[g]),g in o&&(e[h][g]=o[g])}return{from:f,
to:e}};j._getContainer=function(a,b,d,f){var e;e=null==f&&!j.is(a,"object")?B.doc.getElementById(a):a;if(null!=e)return e.tagName?null==b?{container:e,width:e.style.pixelWidth||e.offsetWidth,height:e.style.pixelHeight||e.offsetHeight}:{container:e,width:b,height:d}:{container:1,x:a,y:b,width:d,height:f}};j.pathToRelative=Sb;j._engine={};j.path2curve=Sa;j.matrix=function(a,b,d,f,e,h){return new u(a,b,d,f,e,h)};var pa=u.prototype,ib=function(a){return a[0]*a[0]+a[1]*a[1]},Db=function(a){var b=M.sqrt(ib(a));
a[0]&&(a[0]/=b);a[1]&&(a[1]/=b)};pa.add=function(a,b,d,f,e,h){var g=[[],[],[]],j=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],b=[[a,d,e],[b,f,h],[0,0,1]];a&&a instanceof u&&(b=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]);for(a=0;3>a;a++)for(d=0;3>d;d++){for(f=e=0;3>f;f++)e+=j[a][f]*b[f][d];g[a][d]=e}this.a=g[0][0];this.b=g[1][0];this.c=g[0][1];this.d=g[1][1];this.e=g[0][2];this.f=g[1][2]};pa.invert=function(){var a=this.a*this.d-this.b*this.c;return new u(this.d/a,-this.b/a,-this.c/a,this.a/
a,(this.c*this.f-this.d*this.e)/a,(this.b*this.e-this.a*this.f)/a)};pa.clone=function(){return new u(this.a,this.b,this.c,this.d,this.e,this.f)};pa.translate=function(a,b){this.add(1,0,0,1,a,b)};pa.scale=function(a,b,d,f){null==b&&(b=a);(d||f)&&this.add(1,0,0,1,d,f);this.add(a,0,0,b,0,0);(d||f)&&this.add(1,0,0,1,-d,-f)};pa.rotate=function(a,b,d){var a=j.rad(a),b=b||0,d=d||0,f=+M.cos(a).toFixed(9),a=+M.sin(a).toFixed(9);this.add(f,a,-a,f,b,d);this.add(1,0,0,1,-b,-d)};pa.x=function(a,b){return a*this.a+
b*this.c+this.e};pa.y=function(a,b){return a*this.b+b*this.d+this.f};pa.get=function(a){return+this[P.fromCharCode(97+a)].toFixed(4)};pa.toString=function(){return j.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()};pa.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+
this.get(5)+", sizingmethod='auto expand')"};pa.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};pa.split=function(){var a={};a.dx=this.e;a.dy=this.f;var b=[[this.a,this.c],[this.b,this.d]];a.scalex=M.sqrt(ib(b[0]));Db(b[0]);a.shear=b[0][0]*b[1][0]+b[0][1]*b[1][1];b[1]=[b[1][0]-b[0][0]*a.shear,b[1][1]-b[0][1]*a.shear];a.scaley=M.sqrt(ib(b[1]));Db(b[1]);a.shear/=a.scaley;var d=-b[0][1],b=b[1][1];0>b?(a.rotate=j.deg(M.acos(b)),0>d&&(a.rotate=360-a.rotate)):a.rotate=j.deg(M.asin(d));a.isSimple=
!+a.shear.toFixed(9)&&(a.scalex.toFixed(9)==a.scaley.toFixed(9)||!a.rotate);a.isSuperSimple=!+a.shear.toFixed(9)&&a.scalex.toFixed(9)==a.scaley.toFixed(9)&&!a.rotate;a.noRotation=!+a.shear.toFixed(9)&&!a.rotate;return a};pa.toTransformString=function(a){a=a||this[J]();return a.isSimple?(a.scalex=+a.scalex.toFixed(4),a.scaley=+a.scaley.toFixed(4),a.rotate=+a.rotate.toFixed(4),(a.dx||a.dy?"t"+[a.dx,a.dy]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[a.rotate,0,0]:"")):
"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]};var jb=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);y.safari="Apple Computer, Inc."==navigator.vendor&&(jb&&4>jb[1]||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&jb&&8>jb[1]?function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:va;var Tb=function(){this.returnValue=!1},Eb=function(){return this.originalEvent.preventDefault()},
Ub=function(){this.cancelBubble=!0},Vb=function(){return this.originalEvent.stopPropagation()},sb;sb=B.doc.addEventListener?function(a,b,d,f){var e=K&&Q[b]?Q[b]:b,h=function(e){var h=e.clientX+(B.doc.documentElement.scrollLeft||B.doc.body.scrollLeft),g=e.clientY+(B.doc.documentElement.scrollTop||B.doc.body.scrollTop);if(K&&Q[E](b))for(var j=0,k=e.targetTouches&&e.targetTouches.length;j<k;j++)if(e.targetTouches[j].target==a){k=e;e=e.targetTouches[j];e.originalEvent=k;e.preventDefault=Eb;e.stopPropagation=
Vb;break}return d.call(f,e,h,g)};a.addEventListener(e,h,!1);return function(){a.removeEventListener(e,h,!1);return!0}}:B.doc.attachEvent?function(a,b,d,f){var e=function(a){var a=a||B.win.event,b=a.clientX+(B.doc.documentElement.scrollLeft||B.doc.body.scrollLeft),e=a.clientY+(B.doc.documentElement.scrollTop||B.doc.body.scrollTop);a.preventDefault=a.preventDefault||Tb;a.stopPropagation=a.stopPropagation||Ub;return d.call(f,a,b,e)};a.attachEvent("on"+b,e);return function(){a.detachEvent("on"+b,e);return!0}}:
void 0;for(var Da=[],kb=function(b){for(var d=b.clientX,f=b.clientY,e=B.doc.documentElement.scrollTop||B.doc.body.scrollTop,h=B.doc.documentElement.scrollLeft||B.doc.body.scrollLeft,g,j=Da.length;j--;){g=Da[j];if(K)for(var k=b.touches.length,n;k--;){if(n=b.touches[k],n.identifier==g.el._drag.id){d=n.clientX;f=n.clientY;(b.originalEvent?b.originalEvent:b).preventDefault();break}}else b.preventDefault();var k=g.el.node,o=k.nextSibling,l=k.parentNode,m=k.style.display;B.win.opera&&l.removeChild(k);k.style.display=
"none";n=g.el.paper.getElementByPoint(d,f);k.style.display=m;B.win.opera&&(o?l.insertBefore(k,o):l.appendChild(k));n&&a("raphael.drag.over."+g.el.id,g.el,n);d+=h;f+=e;a("raphael.drag.move."+g.el.id,g.move_scope||g.el,d-g.el._drag.x,f-g.el._drag.y,d,f,b)}},Xa=function(b){j.unmousemove(kb).unmouseup(Xa);for(var d=Da.length,f;d--;)f=Da[d],f.el._drag={},a("raphael.drag.end."+f.el.id,f.end_scope||f.start_scope||f.move_scope||f.el,b);Da=[]},ca=j.el={},lb=T.length;lb--;)(function(a){j[a]=ca[a]=function(b,
d){j.is(b,"function")&&(this.events=this.events||[],this.events.push({name:a,f:b,unbind:sb(this.shape||this.node||B.doc,a,b,d||this)}));return this};j["un"+a]=ca["un"+a]=function(b){for(var d=this.events||[],f=d.length;f--;)if(d[f].name==a&&d[f].f==b){d[f].unbind();d.splice(f,1);!d.length&&delete this.events;break}return this}})(T[lb]);ca.data=function(b,d){var f=sa[this.id]=sa[this.id]||{};if(1==arguments.length){if(j.is(b,"object")){for(var e in b)b[E](e)&&this.data(e,b[e]);return this}a("raphael.data.get."+
this.id,this,f[b],b);return f[b]}f[b]=d;a("raphael.data.set."+this.id,this,d,b);return this};ca.removeData=function(a){null==a?sa[this.id]={}:sa[this.id]&&delete sa[this.id][a];return this};ca.getData=function(){return e(sa[this.id]||{})};ca.hover=function(a,b,d,f){return this.mouseover(a,d).mouseout(b,f||d)};ca.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var Ma=[];ca.drag=function(b,d,f,e,h,g){function k(n){(n.originalEvent||n).preventDefault();var o=B.doc.documentElement.scrollTop||
B.doc.body.scrollTop,l=B.doc.documentElement.scrollLeft||B.doc.body.scrollLeft;this._drag.x=n.clientX+l;this._drag.y=n.clientY+o;this._drag.id=n.identifier;!Da.length&&j.mousemove(kb).mouseup(Xa);Da.push({el:this,move_scope:e,start_scope:h,end_scope:g});d&&a.on("raphael.drag.start."+this.id,d);b&&a.on("raphael.drag.move."+this.id,b);f&&a.on("raphael.drag.end."+this.id,f);a("raphael.drag.start."+this.id,h||e||this,n.clientX+l,n.clientY+o,n)}this._drag={};Ma.push({el:this,start:k});this.mousedown(k);
return this};ca.onDragOver=function(b){b?a.on("raphael.drag.over."+this.id,b):a.unbind("raphael.drag.over."+this.id)};ca.undrag=function(){for(var b=Ma.length;b--;)Ma[b].el==this&&(this.unmousedown(Ma[b].start),Ma.splice(b,1),a.unbind("raphael.drag.*."+this.id));!Ma.length&&j.unmousemove(kb).unmouseup(Xa);Da=[]};y.circle=function(a,b,d){a=j._engine.circle(this,a||0,b||0,d||0);this.__set__&&this.__set__.push(a);return a};y.rect=function(a,b,d,f,e){a=j._engine.rect(this,a||0,b||0,d||0,f||0,e||0);this.__set__&&
this.__set__.push(a);return a};y.ellipse=function(a,b,d,f){a=j._engine.ellipse(this,a||0,b||0,d||0,f||0);this.__set__&&this.__set__.push(a);return a};y.path=function(a){a&&!j.is(a,"string")&&!j.is(a[0],Z)&&(a+="");var b=j._engine.path(j.format[A](j,arguments),this);this.__set__&&this.__set__.push(b);return b};y.image=function(a,b,d,f,e){a=j._engine.image(this,a||"about:blank",b||0,d||0,f||0,e||0);this.__set__&&this.__set__.push(a);return a};y.text=function(a,b,d){a=j._engine.text(this,a||0,b||0,P(d));
this.__set__&&this.__set__.push(a);return a};y.set=function(a){!j.is(a,"array")&&(a=Array.prototype.splice.call(arguments,0,arguments.length));var b=new Ea(a);this.__set__&&this.__set__.push(b);b.paper=this;b.type="set";return b};y.setStart=function(a){this.__set__=a||this.set()};y.setFinish=function(){var a=this.__set__;delete this.__set__;return a};y.setSize=function(a,b){return j._engine.setSize.call(this,a,b)};y.setViewBox=function(a,b,d,f,e){return j._engine.setViewBox.call(this,a,b,d,f,e)};
y.top=y.bottom=null;y.raphael=j;y.getElementByPoint=function(a,b){var d,f,e=this.canvas,h=B.doc.elementFromPoint(a,b);if(B.win.opera&&"svg"==h.tagName){f=e.getBoundingClientRect();d=e.ownerDocument;var g=d.body,j=d.documentElement;d=f.top+(B.win.pageYOffset||j.scrollTop||g.scrollTop)-(j.clientTop||g.clientTop||0);f=f.left+(B.win.pageXOffset||j.scrollLeft||g.scrollLeft)-(j.clientLeft||g.clientLeft||0);g=e.createSVGRect();g.x=a-f;g.y=b-d;g.width=g.height=1;d=e.getIntersectionList(g,null);d.length&&
(h=d[d.length-1])}if(!h)return null;for(;h.parentNode&&h!=e.parentNode&&!h.raphael;)h=h.parentNode;h==this.canvas.parentNode&&(h=e);return h=h&&h.raphael?this.getById(h.raphaelid):null};y.getElementsByBBox=function(a){var b=this.set();this.forEach(function(d){j.isBBoxIntersect(d.getBBox(),a)&&b.push(d)});return b};y.getById=function(a){for(var b=this.bottom;b;){if(b.id==a)return b;b=b.next}return null};y.forEach=function(a,b){for(var d=this.bottom;d&&!1!==a.call(b,d);)d=d.next;return this};y.getElementsByPoint=
function(a,b){var d=this.set();this.forEach(function(f){f.isPointInside(a,b)&&d.push(f)});return d};ca.isPointInside=function(a,b){var d=this.realPath=this.realPath||wa[this.type](this);return j.isPointInsidePath(d,a,b)};ca.getBBox=function(a){if(this.removed)return{};var b=this._;if(a){if(b.dirty||!b.bboxwt)this.realPath=wa[this.type](this),b.bboxwt=Ab(this.realPath),b.bboxwt.toString=q,b.dirty=0;return b.bboxwt}if(b.dirty||b.dirtyT||!b.bbox){if(b.dirty||!this.realPath)b.bboxwt=0,this.realPath=wa[this.type](this);
b.bbox=Ab(ka(this.realPath,this.matrix));b.bbox.toString=q;b.dirty=b.dirtyT=0}return b.bbox};ca.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(a);return a};ca.glow=function(a){if("text"==this.type)return null;for(var a=a||{},b=(a.width||10)+(+this.attr("stroke-width")||1),d=a.fill||!1,f=a.opacity||0.5,e=a.offsetx||0,h=a.offsety||0,a=a.color||"#000",g=b/2,j=this.paper,k=j.set(),n=this.realPath||wa[this.type](this),n=this.matrix?
ka(n,this.matrix):n,o=1;o<g+1;o++)k.push(j.path(n).attr({stroke:a,fill:d?a:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b/g*o).toFixed(3),opacity:+(f/g).toFixed(3)}));return k.insertBefore(this).translate(e,h)};var Oa=function(a,b,d,e,g,k,n,o,l){return null==l?f(a,b,d,e,g,k,n,o):j.findDotsAtSegment(a,b,d,e,g,k,n,o,h(a,b,d,e,g,k,n,o,l))},mb=function(a,b){return function(d,f,e){for(var d=Sa(d),h,g,k,n,o="",l={},m=0,q=0,v=d.length;q<v;q++){k=d[q];if("M"==k[0])h=+k[1],g=
+k[2];else{n=Oa(h,g,k[1],k[2],k[3],k[4],k[5],k[6]);if(m+n>f){if(b&&!l.start){h=Oa(h,g,k[1],k[2],k[3],k[4],k[5],k[6],f-m);o+=["C"+h.start.x,h.start.y,h.m.x,h.m.y,h.x,h.y];if(e)return o;l.start=o;o=["M"+h.x,h.y+"C"+h.n.x,h.n.y,h.end.x,h.end.y,k[5],k[6]].join();m+=n;h=+k[5];g=+k[6];continue}if(!a&&!b)return h=Oa(h,g,k[1],k[2],k[3],k[4],k[5],k[6],f-m),{x:h.x,y:h.y,alpha:h.alpha}}m+=n;h=+k[5];g=+k[6]}o+=k.shift()+k}l.end=o;h=a?m:b?l:j.findDotsAtSegment(h,g,k[0],k[1],k[2],k[3],k[4],k[5],1);h.alpha&&(h=
{x:h.x,y:h.y,alpha:h.alpha});return h}},Na=mb(1),Fb=mb(),Pa=mb(0,1);j.getTotalLength=Na;j.getPointAtLength=Fb;j.getSubpath=function(a,b,d){if(1E-6>this.getTotalLength(a)-d)return Pa(a,b).end;a=Pa(a,d,1);return b?Pa(a,b).end:a};ca.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():Na(this.attrs.path)};ca.getPointAtLength=function(a){if("path"==this.type)return Fb(this.attrs.path,a)};ca.getSubpath=function(a,b){if("path"==this.type)return j.getSubpath(this.attrs.path,
a,b)};var O=j.easing_formulas={linear:function(a){return a},"<":function(a){return L(a,1.7)},">":function(a){return L(a,0.48)},"<>":function(a){var b=0.48-a/1.04,d=M.sqrt(0.1734+b*b),a=d-b,a=L(N(a),1/3)*(0>a?-1:1),b=-d-b,b=L(N(b),1/3)*(0>b?-1:1),a=a+b+0.5;return 3*(1-a)*a*a+a*a*a},backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){a-=1;return a*a*(2.70158*a+1.70158)+1},elastic:function(a){return a==!!a?a:L(2,-10*a)*M.sin((a-0.075)*2*W/0.3)+1},bounce:function(a){a<1/2.75?a*=7.5625*
a:a<2/2.75?(a-=1.5/2.75,a=7.5625*a*a+0.75):a<2.5/2.75?(a-=2.25/2.75,a=7.5625*a*a+0.9375):(a-=2.625/2.75,a=7.5625*a*a+0.984375);return a}};O.easeIn=O["ease-in"]=O["<"];O.easeOut=O["ease-out"]=O[">"];O.easeInOut=O["ease-in-out"]=O["<>"];O["back-in"]=O.backIn;O["back-out"]=O.backOut;var aa=[],V=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,16)},db=function(){for(var b=
+new Date,d=0;d<aa.length;d++){var f=aa[d];if(!f.el.removed&&!f.paused){var e=b-f.start,h=f.ms,g=f.easing,n=f.from,o=f.diff,l=f.to,q=f.el,v={},u,x={},w;f.initstatus?(e=(f.initstatus*f.anim.top-f.prev)/(f.percent-f.prev)*h,f.status=f.initstatus,delete f.initstatus,f.stop&&aa.splice(d--,1)):f.status=(f.prev+(f.percent-f.prev)*(e/h))/f.anim.top;if(!(0>e))if(e<h){var H=g(e/h),A;for(A in n)if(n[E](A)){switch(la[A]){case U:u=+n[A]+H*h*o[A];break;case "colour":u="rgb("+[tb(ra(n[A].r+H*h*o[A].r)),tb(ra(n[A].g+
H*h*o[A].g)),tb(ra(n[A].b+H*h*o[A].b))].join()+")";break;case "path":u=[];e=0;for(g=n[A].length;e<g;e++){u[e]=[n[A][e][0]];l=1;for(x=n[A][e].length;l<x;l++)u[e][l]=+n[A][e][l]+H*h*o[A][e][l];u[e]=u[e].join(m)}u=u.join(m);break;case "transform":if(o[A].real){u=[];e=0;for(g=n[A].length;e<g;e++){u[e]=[n[A][e][0]];l=1;for(x=n[A][e].length;l<x;l++)u[e][l]=n[A][e][l]+H*h*o[A][e][l]}}else u=function(a){return+n[A][a]+H*h*o[A][a]},u=[["m",u(0),u(1),u(2),u(3),u(4),u(5)]];break;case "csv":if("clip-rect"==A){u=
[];for(e=4;e--;)u[e]=+n[A][e]+H*h*o[A][e]}break;default:g=[][C](n[A]);u=[];for(e=q.paper.customAttributes[A].length;e--;)u[e]=+g[e]+H*h*o[A][e]}v[A]=u}q.attr(v);(function(b,d,f){setTimeout(function(){a("raphael.anim.frame."+b,d,f)})})(q.id,q,f.anim)}else{(function(b,d,f){setTimeout(function(){a("raphael.anim.frame."+d.id,d,f);a("raphael.anim.finish."+d.id,d,f);j.is(b,"function")&&b.call(d)})})(f.callback,q,f.anim);q.attr(l);aa.splice(d--,1);if(1<f.repeat&&!f.next){for(w in l)l[E](w)&&(x[w]=f.totalOrigin[w]);
f.el.attr(x);k(f.anim,f.el,f.anim.percents[0],null,f.totalOrigin,f.repeat-1)}f.next&&!f.stop&&k(f.anim,f.el,f.next,null,f.totalOrigin,f.repeat)}}}j.svg&&q&&q.paper&&q.paper.safari();aa.length&&V(db)},tb=function(a){return 255<a?255:0>a?0:a};ca.animateWith=function(a,b,d,f,e,h){if(this.removed)return h&&h.call(this),this;d=d instanceof l?d:j.animation(d,f,e,h);k(d,this,d.percents[0],null,this.attr());d=0;for(f=aa.length;d<f;d++)if(aa[d].anim==b&&aa[d].el==a){aa[f-1].start=aa[d].start;break}return this};
ca.onAnimation=function(b){b?a.on("raphael.anim.frame."+this.id,b):a.unbind("raphael.anim.frame."+this.id);return this};l.prototype.delay=function(a){var b=new l(this.anim,this.ms);b.times=this.times;b.del=+a||0;return b};l.prototype.repeat=function(a){var b=new l(this.anim,this.ms);b.del=this.del;b.times=M.floor(H(a,0))||1;return b};j.animation=function(a,b,d,f){if(a instanceof l)return a;if(j.is(d,"function")||!d)f=f||d||null,d=null;var a=Object(a),b=+b||0,e={},h,g;for(g in a)a[E](g)&&(Y(g)!=g&&
Y(g)+"%"!=g)&&(h=!0,e[g]=a[g]);return h?(d&&(e.easing=d),f&&(e.callback=f),new l({100:e},b)):new l(a,b)};ca.animate=function(a,b,d,f){if(this.removed)return f&&f.call(this),this;a=a instanceof l?a:j.animation(a,b,d,f);k(a,this,a.percents[0],null,this.attr());return this};ca.setTime=function(a,b){a&&null!=b&&this.status(a,R(b,a.ms)/a.ms);return this};ca.status=function(a,b){var d=[],f=0,e,h;if(null!=b)return k(a,this,-1,R(b,1)),this;for(e=aa.length;f<e;f++)if(h=aa[f],h.el.id==this.id&&(!a||h.anim==
a)){if(a)return h.status;d.push({anim:h.anim,status:h.status})}return a?0:d};ca.pause=function(b){for(var d=0;d<aa.length;d++)if(aa[d].el.id==this.id&&(!b||aa[d].anim==b)&&!1!==a("raphael.anim.pause."+this.id,this,aa[d].anim))aa[d].paused=!0;return this};ca.resume=function(b){for(var d=0;d<aa.length;d++)if(aa[d].el.id==this.id&&(!b||aa[d].anim==b)){var f=aa[d];!1!==a("raphael.anim.resume."+this.id,this,f.anim)&&(delete f.paused,this.status(f.anim,f.status))}return this};ca.stop=function(b){for(var d=
0;d<aa.length;d++)aa[d].el.id==this.id&&(!b||aa[d].anim==b)&&!1!==a("raphael.anim.stop."+this.id,this,aa[d].anim)&&aa.splice(d--,1);return this};a.on("raphael.remove",n);a.on("raphael.clear",n);ca.toString=function(){return"Rapha\u00ebl\u2019s object"};var Ea=function(a){this.items=[];this.length=0;this.type="set";if(a)for(var b=0,d=a.length;b<d;b++)if(a[b]&&(a[b].constructor==ca.constructor||a[b].constructor==Ea))this[this.items.length]=this.items[this.items.length]=a[b],this.length++},ga=Ea.prototype;
ga.push=function(){for(var a,b,d=0,f=arguments.length;d<f;d++)if((a=arguments[d])&&(a.constructor==ca.constructor||a.constructor==Ea))b=this.items.length,this[b]=this.items[b]=a,this.length++;return this};ga.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};ga.forEach=function(a,b){for(var d=0,f=this.items.length;d<f&&!1!==a.call(b,this.items[d],d);d++);return this};for(var Gb in ca)ca[E](Gb)&&(ga[Gb]=function(a){return function(){var b=arguments;return this.forEach(function(d){d[a][A](d,
b)})}}(Gb));ga.attr=function(a,b){if(a&&j.is(a,Z)&&j.is(a[0],"object"))for(var d=0,f=a.length;d<f;d++)this.items[d].attr(a[d]);else{d=0;for(f=this.items.length;d<f;d++)this.items[d].attr(a,b)}return this};ga.clear=function(){for(;this.length;)this.pop()};ga.splice=function(a,b,d){var a=0>a?H(this.length+a,0):a,b=H(0,R(this.length-a,b)),f=[],e=[],h=[],g;for(g=2;g<arguments.length;g++)h.push(arguments[g]);for(g=0;g<b;g++)e.push(this[a+g]);for(;g<this.length-a;g++)f.push(this[a+g]);var j=h.length;for(g=
0;g<j+f.length;g++)this.items[a+g]=this[a+g]=g<j?h[g]:f[g-j];for(g=this.items.length=this.length-=b-j;this[g];)delete this[g++];return new Ea(e)};ga.exclude=function(a){for(var b=0,d=this.length;b<d;b++)if(this[b]==a)return this.splice(b,1),!0};ga.animate=function(a,b,d,f){(j.is(d,"function")||!d)&&(f=d||null);var e=this.items.length,h=e,g=this,k;if(!e)return this;f&&(k=function(){!--e&&f.call(g)});d=j.is(d,"string")?d:k;b=j.animation(a,b,d,k);for(a=this.items[--h].animate(b);h--;)this.items[h]&&
!this.items[h].removed&&this.items[h].animateWith(a,b,b);return this};ga.insertAfter=function(a){for(var b=this.items.length;b--;)this.items[b].insertAfter(a);return this};ga.getBBox=function(){for(var a=[],b=[],d=[],f=[],e=this.items.length;e--;)if(!this.items[e].removed){var h=this.items[e].getBBox();a.push(h.x);b.push(h.y);d.push(h.x+h.width);f.push(h.y+h.height)}a=R[A](0,a);b=R[A](0,b);d=H[A](0,d);f=H[A](0,f);return{x:a,y:b,x2:d,y2:f,width:d-a,height:f-b}};ga.clone=function(a){for(var a=this.paper.set(),
b=0,d=this.items.length;b<d;b++)a.push(this.items[b].clone());return a};ga.toString=function(){return"Rapha\u00ebl\u2018s set"};ga.glow=function(a){var b=this.paper.set();this.forEach(function(d){d=d.glow(a);null!=d&&d.forEach(function(a){b.push(a)})});return b};j.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},d=a.face["font-family"],f;for(f in a.face)a.face[E](f)&&(b.face[f]=a.face[f]);this.fonts[d]?this.fonts[d].push(b):this.fonts[d]=[b];if(!a.svg){b.face["units-per-em"]=
X(a.face["units-per-em"],10);for(var e in a.glyphs)if(a.glyphs[E](e)&&(d=a.glyphs[e],b.glyphs[e]={w:d.w,k:{},d:d.d&&"M"+d.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},d.k))for(var h in d.k)d[E](h)&&(b.glyphs[e].k[h]=d.k[h])}return a};y.getFont=function(a,b,d,f){f=f||"normal";d=d||"normal";b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400;if(j.fonts){var e=j.fonts[a];if(!e){var a=RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)",
"i"),h;for(h in j.fonts)if(j.fonts[E](h)&&a.test(h)){e=j.fonts[h];break}}var g;if(e){h=0;for(a=e.length;h<a&&!(g=e[h],g.face["font-weight"]==b&&(g.face["font-style"]==d||!g.face["font-style"])&&g.face["font-stretch"]==f);h++);}return g}};y.print=function(a,b,d,f,e,h,g){var h=h||"middle",g=H(R(g||0,1),-1),d=P(d)[J](""),k=0,n=0,o="";j.is(f,"string")&&(f=this.getFont(f));if(f)for(var e=(e||16)/f.face["units-per-em"],l=f.face.bbox[J](v),m=+l[0],q=l[3]-l[1],u=0,h=+l[1]+("baseline"==h?q+ +f.face.descent:
q/2),l=0,x=d.length;l<x;l++){if("\n"==d[l])n=A=k=0,u+=q;else var w=n&&f.glyphs[d[l-1]]||{},A=f.glyphs[d[l]],k=k+(n?(w.w||f.w)+(w.k&&w.k[d[l]]||0)+f.w*g:0),n=1;A&&A.d&&(o+=j.transformPath(A.d,["t",k*e,u*e,"s",e,e,m,h,"t",(a-m)/e,(b-h)/e]))}return this.path(o).attr({fill:"#000",stroke:"none"})};y.add=function(a){if(j.is(a,"array"))for(var b=this.set(),d=0,f=a.length,e;d<f;d++)e=a[d]||{},w[E](e.type)&&b.push(this[e.type]().attr(e));return b};j.format=function(a,b){var d=j.is(b,Z)?[0][C](b):arguments;
a&&j.is(a,"string")&&d.length-1&&(a=a.replace(z,function(a,b){return null==d[++b]?"":d[b]}));return a||""};var nb=/\{([^\}]+)\}/g,Ya=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;j.fullfill=function(a,b){return String(a).replace(nb,function(a,d){var f=b;d.replace(Ya,function(a,b,d,e,h){b=b||e;f&&(b in f&&(f=f[b]),"function"==typeof f&&h&&(f=f()))});return f=(null==f||f==b?a:f)+""})};j.ninja=function(){F?B.win.Raphael=t:delete Raphael;return j};j.st=ga;var Ba=document,ub=void 0,Za=function(){/in/.test(Ba.readyState)?
setTimeout(Za,9):j.eve("raphael.DOMload")};null==Ba.readyState&&Ba.addEventListener&&(Ba.addEventListener("DOMContentLoaded",ub=function(){Ba.removeEventListener("DOMContentLoaded",ub,!1);Ba.readyState="complete"},!1),Ba.readyState="loading");Za();F?B.win.Raphael=j:Raphael=j;a.on("raphael.DOMload",function(){x=true});return j});
(function(a,j){"function"===typeof define&&define.amd?require(["raphael"],j):a.Raphael&&j(a.Raphael)})(this,function(a){if(a.svg){var j=String,e=parseFloat,d=parseInt,g=Math,b=g.max,f=g.abs,h=g.pow,o=/[, ]+/,u=a.eve,q={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},l={};a.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};
var k=function(b,d){if(d){"string"==typeof b&&(b=k(b));for(var f in d)d.hasOwnProperty(f)&&("xlink:"==f.substring(0,6)?b.setAttributeNS("http://www.w3.org/1999/xlink",f.substring(6),j(d[f])):b.setAttribute(f,j(d[f])))}else b=a._g.doc.createElementNS("http://www.w3.org/2000/svg",b),b.style&&(b.style.webkitTapHighlightColor="rgba(0,0,0,0)");return b},n=function(d,n){var o="linear",l=d.id+n,q=0.5,v=0.5,u=d.node,x=d.paper,w=u.style,y=a._g.doc.getElementById(l);if(!y){n=j(n).replace(a._radial_gradient,
function(a,b,d){o="radial";b&&d&&(q=e(b),v=e(d),a=2*(0.5<v)-1,0.25<h(q-0.5,2)+h(v-0.5,2)&&(v=g.sqrt(0.25-h(q-0.5,2))*a+0.5)&&0.5!=v&&(v=v.toFixed(5)-1E-5*a));return""});n=n.split(/\s*\-\s*/);if("linear"==o){y=n.shift();y=-e(y);if(isNaN(y))return null;var H=[0,0,g.cos(a.rad(y)),g.sin(a.rad(y))],y=1/(b(f(H[2]),f(H[3]))||1);H[2]*=y;H[3]*=y;0>H[2]&&(H[0]=-H[2],H[2]=0);0>H[3]&&(H[1]=-H[3],H[3]=0)}var t=a._parseDots(n);if(!t)return null;l=l.replace(/[\(\)\s,\xb0#]/g,"_");d.gradient&&l!=d.gradient.id&&(x.defs.removeChild(d.gradient),
delete d.gradient);if(!d.gradient){y=k(o+"Gradient",{id:l});d.gradient=y;k(y,"radial"==o?{fx:q,fy:v}:{x1:H[0],y1:H[1],x2:H[2],y2:H[3],gradientTransform:d.matrix.invert()});x.defs.appendChild(y);x=0;for(H=t.length;x<H;x++)y.appendChild(k("stop",{offset:t[x].offset?t[x].offset:x?"100%":"0%","stop-color":t[x].color||"#fff"}))}}k(u,{fill:"url(#"+l+")",opacity:1,"fill-opacity":1});w.fill="";w.opacity=1;return w.fillOpacity=1},x=function(a){var b=a.getBBox(1);k(a.pattern,{patternTransform:a.matrix.invert()+
" translate("+b.x+","+b.y+")"})},v=function(b,d,f){if("path"==b.type){for(var e=j(d).toLowerCase().split("-"),h=b.paper,g=f?"end":"start",n=b.node,o=b.attrs,v=o["stroke-width"],u=e.length,x="classic",w,y,t=3,G=3,z=5;u--;)switch(e[u]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":x=e[u];break;case "wide":G=5;break;case "narrow":G=2;break;case "long":t=5;break;case "short":t=2}"open"==x?(t+=2,G+=2,z+=2,w=1,y=f?4:1,e={fill:"none",stroke:o.stroke}):(y=w=t/2,e={fill:o.stroke,
stroke:"none"});b._.arrows?f?(b._.arrows.endPath&&l[b._.arrows.endPath]--,b._.arrows.endMarker&&l[b._.arrows.endMarker]--):(b._.arrows.startPath&&l[b._.arrows.startPath]--,b._.arrows.startMarker&&l[b._.arrows.startMarker]--):b._.arrows={};if("none"!=x){var u="raphael-marker-"+x,B="raphael-marker-"+g+x+t+G;a._g.doc.getElementById(u)?l[u]++:(h.defs.appendChild(k(k("path"),{"stroke-linecap":"round",d:q[x],id:u})),l[u]=1);var E=a._g.doc.getElementById(B);E?(l[B]++,t=E.getElementsByTagName("use")[0]):
(E=k(k("marker"),{id:B,markerHeight:G,markerWidth:t,orient:"auto",refX:y,refY:G/2}),t=k(k("use"),{"xlink:href":"#"+u,transform:(f?"rotate(180 "+t/2+" "+G/2+") ":"")+"scale("+t/z+","+G/z+")","stroke-width":(1/((t/z+G/z)/2)).toFixed(4)}),E.appendChild(t),h.defs.appendChild(E),l[B]=1);k(t,e);h=w*("diamond"!=x&&"oval"!=x);f?(f=b._.arrows.startdx*v||0,v=a.getTotalLength(o.path)-h*v):(f=h*v,v=a.getTotalLength(o.path)-(b._.arrows.enddx*v||0));e={};e["marker-"+g]="url(#"+B+")";if(v||f)e.d=Raphael.getSubpath(o.path,
f,v);k(n,e);b._.arrows[g+"Path"]=u;b._.arrows[g+"Marker"]=B;b._.arrows[g+"dx"]=h;b._.arrows[g+"Type"]=x;b._.arrows[g+"String"]=d}else f?(f=b._.arrows.startdx*v||0,v=a.getTotalLength(o.path)-f):(f=0,v=a.getTotalLength(o.path)-(b._.arrows.enddx*v||0)),b._.arrows[g+"Path"]&&k(n,{d:Raphael.getSubpath(o.path,f,v)}),delete b._.arrows[g+"Path"],delete b._.arrows[g+"Marker"],delete b._.arrows[g+"dx"],delete b._.arrows[g+"Type"],delete b._.arrows[g+"String"];for(e in l)l.hasOwnProperty(e)&&!l[e]&&(b=a._g.doc.getElementById(e))&&
b.parentNode.removeChild(b)}},w={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},z=function(a,b,d){if(b=w[j(b).toLowerCase()]){for(var f=a.attrs["stroke-width"]||"1",d={round:f,square:f,butt:0}[a.attrs["stroke-linecap"]||d["stroke-linecap"]]||0,e=[],h=b.length;h--;)e[h]=b[h]*f+(h%2?1:-1)*d;k(a.node,{"stroke-dasharray":e.join(",")})}},E=function(e,h){var g=e.node,l=e.attrs,q=g.style.visibility;
g.style.visibility="hidden";for(var u in h)if(h.hasOwnProperty(u)&&a._availableAttrs.hasOwnProperty(u)){var w=h[u];l[u]=w;switch(u){case "blur":e.blur(w);break;case "href":case "title":case "target":var y=g.parentNode;if("a"!=y.tagName.toLowerCase()){var t=k("a");y.insertBefore(t,g);t.appendChild(g);y=t}"target"==u?y.setAttributeNS("http://www.w3.org/1999/xlink","show","blank"==w?"new":w):y.setAttributeNS("http://www.w3.org/1999/xlink",u,w);break;case "cursor":g.style.cursor=w;break;case "transform":e.transform(w);
break;case "arrow-start":v(e,w);break;case "arrow-end":v(e,w,1);break;case "clip-rect":y=j(w).split(o);if(4==y.length){e.clip&&e.clip.parentNode.parentNode.removeChild(e.clip.parentNode);var t=k("clipPath"),G=k("rect");t.id=a.createUUID();k(G,{x:y[0],y:y[1],width:y[2],height:y[3]});t.appendChild(G);e.paper.defs.appendChild(t);k(g,{"clip-path":"url(#"+t.id+")"});e.clip=G}if(!w&&(w=g.getAttribute("clip-path")))(w=a._g.doc.getElementById(w.replace(/(^url\(#|\)$)/g,"")))&&w.parentNode.removeChild(w),
k(g,{"clip-path":""}),delete e.clip;break;case "path":"path"==e.type&&(k(g,{d:w?l.path=a._pathToAbsolute(w):"M0,0"}),e._.dirty=1,e._.arrows&&("startString"in e._.arrows&&v(e,e._.arrows.startString),"endString"in e._.arrows&&v(e,e._.arrows.endString,1)));break;case "width":if(g.setAttribute(u,w),e._.dirty=1,l.fx)u="x",w=l.x;else break;case "x":l.fx&&(w=-l.x-(l.width||0));case "rx":if("rx"==u&&"rect"==e.type)break;case "cx":g.setAttribute(u,w);e.pattern&&x(e);e._.dirty=1;break;case "height":if(g.setAttribute(u,
w),e._.dirty=1,l.fy)u="y",w=l.y;else break;case "y":l.fy&&(w=-l.y-(l.height||0));case "ry":if("ry"==u&&"rect"==e.type)break;case "cy":g.setAttribute(u,w);e.pattern&&x(e);e._.dirty=1;break;case "r":"rect"==e.type?k(g,{rx:w,ry:w}):g.setAttribute(u,w);e._.dirty=1;break;case "src":"image"==e.type&&g.setAttributeNS("http://www.w3.org/1999/xlink","href",w);break;case "stroke-width":if(1!=e._.sx||1!=e._.sy)w/=b(f(e._.sx),f(e._.sy))||1;e.paper._vbSize&&(w*=e.paper._vbSize);g.setAttribute(u,w);l["stroke-dasharray"]&&
z(e,l["stroke-dasharray"],h);e._.arrows&&("startString"in e._.arrows&&v(e,e._.arrows.startString),"endString"in e._.arrows&&v(e,e._.arrows.endString,1));break;case "stroke-dasharray":z(e,w,h);break;case "fill":var H=j(w).match(a._ISURL);if(H){var t=k("pattern"),R=k("image");t.id=a.createUUID();k(t,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});k(R,{x:0,y:0,"xlink:href":H[1]});t.appendChild(R);(function(b){a._preload(H[1],function(){var a=this.offsetWidth,d=this.offsetHeight;k(b,{width:a,
height:d});k(R,{width:a,height:d});e.paper.safari()})})(t);e.paper.defs.appendChild(t);k(g,{fill:"url(#"+t.id+")"});e.pattern=t;e.pattern&&x(e);break}y=a.getRGB(w);if(y.error){if(("circle"==e.type||"ellipse"==e.type||"r"!=j(w).charAt())&&n(e,w)){if("opacity"in l||"fill-opacity"in l)if(y=a._g.doc.getElementById(g.getAttribute("fill").replace(/^url\(#|\)$/g,"")))y=y.getElementsByTagName("stop"),k(y[y.length-1],{"stop-opacity":("opacity"in l?l.opacity:1)*("fill-opacity"in l?l["fill-opacity"]:1)});l.gradient=
w;l.fill="none";break}}else delete h.gradient,delete l.gradient,!a.is(l.opacity,"undefined")&&a.is(h.opacity,"undefined")&&k(g,{opacity:l.opacity}),!a.is(l["fill-opacity"],"undefined")&&a.is(h["fill-opacity"],"undefined")&&k(g,{"fill-opacity":l["fill-opacity"]});y.hasOwnProperty("opacity")&&k(g,{"fill-opacity":1<y.opacity?y.opacity/100:y.opacity});case "stroke":y=a.getRGB(w);g.setAttribute(u,y.hex);"stroke"==u&&y.hasOwnProperty("opacity")&&k(g,{"stroke-opacity":1<y.opacity?y.opacity/100:y.opacity});
"stroke"==u&&e._.arrows&&("startString"in e._.arrows&&v(e,e._.arrows.startString),"endString"in e._.arrows&&v(e,e._.arrows.endString,1));break;case "gradient":("circle"==e.type||"ellipse"==e.type||"r"!=j(w).charAt())&&n(e,w);break;case "opacity":l.gradient&&!l.hasOwnProperty("stroke-opacity")&&k(g,{"stroke-opacity":1<w?w/100:w});case "fill-opacity":if(l.gradient){if(y=a._g.doc.getElementById(g.getAttribute("fill").replace(/^url\(#|\)$/g,"")))y=y.getElementsByTagName("stop"),k(y[y.length-1],{"stop-opacity":w});
break}default:"font-size"==u&&(w=d(w,10)+"px"),y=u.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()}),g.style[y]=w,e._.dirty=1,g.setAttribute(u,w)}}if(!("text"!=e.type||!h.hasOwnProperty("text")&&!h.hasOwnProperty("font")&&!h.hasOwnProperty("font-size")&&!h.hasOwnProperty("x")&&!h.hasOwnProperty("y"))){u=e.attrs;w=e.node;y=w.firstChild?d(a._g.doc.defaultView.getComputedStyle(w.firstChild,"").getPropertyValue("font-size"),10):10;if(h.hasOwnProperty("text")){for(u.text=h.text;w.firstChild;)w.removeChild(w.firstChild);
for(var t=j(h.text).split("\n"),l=[],N=0,E=t.length;N<E;N++)G=k("tspan"),N&&k(G,{dy:y*B,x:u.x}),G.appendChild(a._g.doc.createTextNode(t[N])),w.appendChild(G),l[N]=G}else{l=w.getElementsByTagName("tspan");N=0;for(E=l.length;N<E;N++)N?k(l[N],{dy:y*B,x:u.x}):k(l[0],{dy:0})}k(w,{x:u.x,y:u.y});e._.dirty=1;w=e._getBBox();(u=u.y-(w.y+w.height/2))&&a.is(u,"finite")&&k(l[0],{dy:u})}g.style.visibility=q},B=1.2,F=function(b,d){this[0]=this.node=b;b.raphael=!0;this.id=a._oid++;b.raphaelid=this.id;this.matrix=
a.matrix();this.realPath=null;this.paper=d;this.attrs=this.attrs||{};this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!d.bottom&&(d.bottom=this);(this.prev=d.top)&&(d.top.next=this);d.top=this;this.next=null},t=a.el;F.prototype=t;t.constructor=F;a._engine.path=function(a,b){var d=k("path");b.canvas&&b.canvas.appendChild(d);d=new F(d,b);d.type="path";E(d,{fill:"none",stroke:"#000",path:a});return d};t.rotate=function(a,b,d){if(this.removed)return this;a=j(a).split(o);a.length-1&&(b=e(a[1]),
d=e(a[2]));a=e(a[0]);null==d&&(b=d);if(null==b||null==d)d=this.getBBox(1),b=d.x+d.width/2,d=d.y+d.height/2;this.transform(this._.transform.concat([["r",a,b,d]]));return this};t.scale=function(a,b,d,f){if(this.removed)return this;a=j(a).split(o);a.length-1&&(b=e(a[1]),d=e(a[2]),f=e(a[3]));a=e(a[0]);null==b&&(b=a);null==f&&(d=f);if(null==d||null==f)var h=this.getBBox(1);d=null==d?h.x+h.width/2:d;f=null==f?h.y+h.height/2:f;this.transform(this._.transform.concat([["s",a,b,d,f]]));return this};t.translate=
function(a,b){if(this.removed)return this;a=j(a).split(o);a.length-1&&(b=e(a[1]));a=e(a[0])||0;this.transform(this._.transform.concat([["t",a,+b||0]]));return this};t.transform=function(b){var d=this._;if(null==b)return d.transform;a._extractTransform(this,b);this.clip&&k(this.clip,{transform:this.matrix.invert()});this.pattern&&x(this);this.node&&k(this.node,{transform:this.matrix});if(1!=d.sx||1!=d.sy)b=this.attrs.hasOwnProperty("stroke-width")?this.attrs["stroke-width"]:1,this.attr({"stroke-width":b});
return this};t.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this};t.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this};t.remove=function(){if(!this.removed&&this.node.parentNode){var b=this.paper;b.__set__&&b.__set__.exclude(this);u.unbind("raphael.*.*."+this.id);this.gradient&&b.defs.removeChild(this.gradient);a._tear(this,b);"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):
this.node.parentNode.removeChild(this.node);for(var d in this)this[d]="function"==typeof this[d]?a._removedFactory(d):null;this.removed=!0}};t._getBBox=function(){if("none"==this.node.style.display){this.show();var a=!0}var b={};try{b=this.node.getBBox()}catch(d){}finally{b=b||{}}a&&this.hide();return b};t.attr=function(b,d){if(this.removed)return this;if(null==b){var f={},e;for(e in this.attrs)this.attrs.hasOwnProperty(e)&&(f[e]=this.attrs[e]);f.gradient&&"none"==f.fill&&(f.fill=f.gradient)&&delete f.gradient;
f.transform=this._.transform;return f}if(null==d&&a.is(b,"string")){if("fill"==b&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==b)return this._.transform;e=b.split(o);for(var f={},h=0,g=e.length;h<g;h++)b=e[h],f[b]=b in this.attrs?this.attrs[b]:a.is(this.paper.customAttributes[b],"function")?this.paper.customAttributes[b].def:a._availableAttrs[b];return g-1?f:f[e[0]]}if(null==d&&a.is(b,"array")){f={};h=0;for(g=b.length;h<g;h++)f[b[h]]=this.attr(b[h]);return f}null!=
d?(f={},f[b]=d):null!=b&&a.is(b,"object")&&(f=b);for(h in f)u("raphael.attr."+h+"."+this.id,this,f[h]);for(h in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(h)&&f.hasOwnProperty(h)&&a.is(this.paper.customAttributes[h],"function"))for(g in e=this.paper.customAttributes[h].apply(this,[].concat(f[h])),this.attrs[h]=f[h],e)e.hasOwnProperty(g)&&(f[g]=e[g]);E(this,f);return this};t.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?
this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var b=this.paper;b.top!=this&&a._tofront(this,b);return this};t.toBack=function(){if(this.removed)return this;var b=this.node.parentNode;"a"==b.tagName.toLowerCase()?b.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):b.firstChild!=this.node&&b.insertBefore(this.node,this.node.parentNode.firstChild);a._toback(this,this.paper);return this};t.insertAfter=
function(b){if(this.removed)return this;var d=b.node||b[b.length-1].node;d.nextSibling?d.parentNode.insertBefore(this.node,d.nextSibling):d.parentNode.appendChild(this.node);a._insertafter(this,b,this.paper);return this};t.insertBefore=function(b){if(this.removed)return this;var d=b.node||b[0].node;d.parentNode.insertBefore(this.node,d);a._insertbefore(this,b,this.paper);return this};t.blur=function(b){if(0!==+b){var d=k("filter"),f=k("feGaussianBlur");this.attrs.blur=b;d.id=a.createUUID();k(f,{stdDeviation:+b||
1.5});d.appendChild(f);this.paper.defs.appendChild(d);this._blur=d;k(this.node,{filter:"url(#"+d.id+")"})}else this._blur&&(this._blur.parentNode.removeChild(this._blur),delete this._blur,delete this.attrs.blur),this.node.removeAttribute("filter")};a._engine.circle=function(a,b,d,f){var e=k("circle");a.canvas&&a.canvas.appendChild(e);a=new F(e,a);a.attrs={cx:b,cy:d,r:f,fill:"none",stroke:"#000"};a.type="circle";k(e,a.attrs);return a};a._engine.rect=function(a,b,d,f,e,h){var g=k("rect");a.canvas&&
a.canvas.appendChild(g);a=new F(g,a);a.attrs={x:b,y:d,width:f,height:e,r:h||0,rx:h||0,ry:h||0,fill:"none",stroke:"#000"};a.type="rect";k(g,a.attrs);return a};a._engine.ellipse=function(a,b,d,f,e){var h=k("ellipse");a.canvas&&a.canvas.appendChild(h);a=new F(h,a);a.attrs={cx:b,cy:d,rx:f,ry:e,fill:"none",stroke:"#000"};a.type="ellipse";k(h,a.attrs);return a};a._engine.image=function(a,b,d,f,e,h){var g=k("image");k(g,{x:d,y:f,width:e,height:h,preserveAspectRatio:"none"});g.setAttributeNS("http://www.w3.org/1999/xlink",
"href",b);a.canvas&&a.canvas.appendChild(g);a=new F(g,a);a.attrs={x:d,y:f,width:e,height:h,src:b};a.type="image";return a};a._engine.text=function(b,d,f,e){var h=k("text");b.canvas&&b.canvas.appendChild(h);b=new F(h,b);b.attrs={x:d,y:f,"text-anchor":"middle",text:e,font:a._availableAttrs.font,stroke:"none",fill:"#000"};b.type="text";E(b,b.attrs);return b};a._engine.setSize=function(a,b){this.width=a||this.width;this.height=b||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",
this.height);this._viewBox&&this.setViewBox.apply(this,this._viewBox);return this};a._engine.create=function(){var b=a._getContainer.apply(0,arguments),d=b&&b.container,f=b.x,e=b.y,h=b.width,b=b.height;if(!d)throw Error("SVG container not found.");var g=k("svg"),j,f=f||0,e=e||0,h=h||512,b=b||342;k(g,{height:b,version:1.1,width:h,xmlns:"http://www.w3.org/2000/svg"});1==d?(g.style.cssText="overflow:hidden;position:absolute;left:"+f+"px;top:"+e+"px",a._g.doc.body.appendChild(g),j=1):(g.style.cssText=
"overflow:hidden;position:relative",d.firstChild?d.insertBefore(g,d.firstChild):d.appendChild(g));d=new a._Paper;d.width=h;d.height=b;d.canvas=g;d.clear();d._left=d._top=0;j&&(d.renderfix=function(){});d.renderfix();return d};a._engine.setViewBox=function(a,d,f,e,h){u("raphael.setViewBox",this,this._viewBox,[a,d,f,e,h]);var g=b(f/this.width,e/this.height),j=this.top,n=h?"meet":"xMinYMin",l;null==a?(this._vbSize&&(g=1),delete this._vbSize,l="0 0 "+this.width+" "+this.height):(this._vbSize=g,l=a+" "+
d+" "+f+" "+e);for(k(this.canvas,{viewBox:l,preserveAspectRatio:n});g&&j;)n="stroke-width"in j.attrs?j.attrs["stroke-width"]:1,j.attr({"stroke-width":n}),j._.dirty=1,j._.dirtyT=1,j=j.prev;this._viewBox=[a,d,f,e,!!h];return this};a.prototype.renderfix=function(){var a=this.canvas,b=a.style,d;try{d=a.getScreenCTM()||a.createSVGMatrix()}catch(f){d=a.createSVGMatrix()}a=-d.e%1;d=-d.f%1;if(a||d)if(a&&(this._left=(this._left+a)%1,b.left=this._left+"px"),d)this._top=(this._top+d)%1,b.top=this._top+"px"};
a.prototype.clear=function(){a.eve("raphael.clear",this);for(var b=this.canvas;b.firstChild;)b.removeChild(b.firstChild);this.bottom=this.top=null;(this.desc=k("desc")).appendChild(a._g.doc.createTextNode("Created with Rapha\u00ebl "+a.version));b.appendChild(this.desc);b.appendChild(this.defs=k("defs"))};a.prototype.remove=function(){u("raphael.remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]="function"==typeof this[b]?a._removedFactory(b):
null};var G=a.st,y;for(y in t)t.hasOwnProperty(y)&&!G.hasOwnProperty(y)&&(G[y]=function(a){return function(){var b=arguments;return this.forEach(function(d){d[a].apply(d,b)})}}(y))}});
(function(a,j){"function"===typeof define&&define.amd?require(["raphael"],j):a.Raphael&&j(a.Raphael)})(this,function(a){if(a.vml){var j=String,e=parseFloat,d=Math,g=d.round,b=d.max,f=d.min,h=d.abs,o=/[, ]+/,u=a.eve,q={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},l=/([clmz]),?([^clmz]*)/gi,k=/ progid:\S+Blur\([^\)]+\)/g,n=/-?[^,\s-]+/g,x={path:1,rect:1,image:1},v={circle:1,ellipse:1},w=function(b,d,f){var e=a.matrix();e.rotate(-b,0.5,0.5);return{dx:e.x(d,f),dy:e.y(d,f)}},z=function(a,b,d,f,e,g){var j=
a._,k=a.matrix,n=j.fillpos,a=a.node,l=a.style,o=1,q="",v=21600/b,u=21600/d;l.visibility="hidden";if(b&&d){a.coordsize=h(v)+" "+h(u);l.rotation=g*(0>b*d?-1:1);g&&(e=w(g,f,e),f=e.dx,e=e.dy);0>b&&(q+="x");0>d&&(q+=" y")&&(o=-1);l.flip=q;a.coordorigin=f*-v+" "+e*-u;if(n||j.fillsize)f=(f=a.getElementsByTagName("fill"))&&f[0],a.removeChild(f),n&&(e=w(g,k.x(n[0],n[1]),k.y(n[0],n[1])),f.position=e.dx*o+" "+e.dy*o),j.fillsize&&(f.size=j.fillsize[0]*h(b)+" "+j.fillsize[1]*h(d)),a.appendChild(f);l.visibility=
"visible"}};a.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+this.version};var E=function(a,b,d){for(var b=j(b).toLowerCase().split("-"),d=d?"end":"start",f=b.length,e="classic",h="medium",g="medium";f--;)switch(b[f]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":e=b[f];break;case "wide":case "narrow":g=b[f];break;case "long":case "short":h=b[f]}a=a.node.getElementsByTagName("stroke")[0];a[d+"arrow"]=
e;a[d+"arrowlength"]=h;a[d+"arrowwidth"]=g},B=function(h,k){h.attrs=h.attrs||{};var u=h.node,w=h.attrs,y=u.style,t=x[h.type]&&(k.x!=w.x||k.y!=w.y||k.width!=w.width||k.height!=w.height||k.cx!=w.cx||k.cy!=w.cy||k.rx!=w.rx||k.ry!=w.ry||k.r!=w.r),A=v[h.type]&&(w.cx!=k.cx||w.cy!=k.cy||w.r!=k.r||w.rx!=k.rx||w.ry!=k.ry),I;for(I in k)k.hasOwnProperty(I)&&(w[I]=k[I]);t&&(w.path=a._getPath[h.type](h),h._.dirty=1);k.href&&(u.href=k.href);k.title&&(u.title=k.title);k.target&&(u.target=k.target);k.cursor&&(y.cursor=
k.cursor);"blur"in k&&h.blur(k.blur);if(k.path&&"path"==h.type||t){y=~j(w.path).toLowerCase().indexOf("r")?a._pathToAbsolute(w.path):w.path;t=/[ahqstv]/ig;I=a._pathToAbsolute;j(y).match(t)&&(I=a._path2curve);t=/[clmz]/g;if(I==a._pathToAbsolute&&!j(y).match(t))y=j(y).replace(l,function(a,b,d){var f=[],e=b.toLowerCase()=="m",h=q[b];d.replace(n,function(a){if(e&&f.length==2){h=h+(f+q[b=="m"?"l":"L"]);f=[]}f.push(g(a*21600))});return h+f});else{for(var t=I(y),M,y=[],H=0,R=t.length;H<R;H++){I=t[H];M=t[H][0].toLowerCase();
"z"==M&&(M="x");for(var N=1,B=I.length;N<B;N++)M+=g(21600*I[N])+(N!=B-1?",":"");y.push(M)}y=y.join(" ")}u.path=y;"image"==h.type&&(h._.fillpos=[w.x,w.y],h._.fillsize=[w.width,w.height],z(h,1,1,0,0,0))}"transform"in k&&h.transform(k.transform);A&&(A=+w.cx,y=+w.cy,t=+w.rx||+w.r||0,I=+w.ry||+w.r||0,u.path=a.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",g(21600*(A-t)),g(21600*(y-I)),g(21600*(A+t)),g(21600*(y+I)),g(21600*A)));if("clip-rect"in k&&(A=j(k["clip-rect"]).split(o),4==A.length&&(A[2]=+A[2]+ +A[0],
A[3]=+A[3]+ +A[1],y=u.clipRect||a._g.doc.createElement("div"),t=y.style,t.clip=a.format("rect({1}px {2}px {3}px {0}px)",A),u.clipRect||(t.position="absolute",t.top=0,t.left=0,t.width=h.paper.width+"px",t.height=h.paper.height+"px",u.parentNode.insertBefore(y,u),y.appendChild(u),u.clipRect=y)),!k["clip-rect"]))u.clipRect&&(u.clipRect.style.clip="auto");h.textpath&&(A=h.textpath.style,k.font&&(A.font=k.font),k["font-family"]&&(A.fontFamily='"'+k["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,
"")+'"'),k["font-size"]&&(A.fontSize=k["font-size"]),k["font-weight"]&&(A.fontWeight=k["font-weight"]),k["font-style"]&&(A.fontStyle=k["font-style"]));"arrow-start"in k&&E(h,k["arrow-start"]);"arrow-end"in k&&E(h,k["arrow-end"],1);if(null!=k.opacity||null!=k["stroke-width"]||null!=k.fill||null!=k.src||null!=k.stroke||null!=k["stroke-width"]||null!=k["stroke-opacity"]||null!=k["fill-opacity"]||null!=k["stroke-dasharray"]||null!=k["stroke-miterlimit"]||null!=k["stroke-linejoin"]||null!=k["stroke-linecap"]){A=
(A=u.getElementsByTagName("fill"))&&A[0];!A&&(A=G("fill"));"image"==h.type&&k.src&&(A.src=k.src);k.fill&&(A.on=!0);if(null==A.on||"none"==k.fill||null===k.fill)A.on=!1;if(A.on&&k.fill)if(y=j(k.fill).match(a._ISURL)){A.parentNode==u&&u.removeChild(A);A.rotate=!0;A.src=y[1];A.type="tile";var F=h.getBBox(1);A.position=F.x+" "+F.y;h._.fillpos=[F.x,F.y];a._preload(y[1],function(){h._.fillsize=[this.offsetWidth,this.offsetHeight]})}else{A.color=a.getRGB(k.fill).hex;A.src="";A.type="solid";if(y=a.getRGB(k.fill).error)if(y=
h.type in{circle:1,ellipse:1}||"r"!=j(k.fill).charAt())a:{y=h;I=k.fill;t=A;y.attrs=y.attrs||{};var U=Math.pow,Z="linear",fa=".5 .5";y.attrs.gradient=I;I=j(I).replace(a._radial_gradient,function(a,b,f){Z="radial";if(b&&f){b=e(b);f=e(f);U(b-0.5,2)+U(f-0.5,2)>0.25&&(f=d.sqrt(0.25-U(b-0.5,2))*((f>0.5)*2-1)+0.5);fa=b+" "+f}return""});I=I.split(/\s*\-\s*/);if("linear"==Z&&(F=I.shift(),F=-e(F),isNaN(F))){y=null;break a}if(I=a._parseDots(I)){y=y.shape||y.node;if(I.length){y.removeChild(t);t.on=!0;t.method=
"none";t.color=I[0].color;t.color2=I[I.length-1].color;M=[];H=0;for(R=I.length;H<R;H++)I[H].offset&&M.push(I[H].offset+" "+I[H].color);t.colors=M.length?M.join():"0% "+t.color;"radial"==Z?(t.type="gradientTitle",t.focus="100%",t.focussize="0 0",t.focusposition=fa,t.angle=0):(t.type="gradient",t.angle=(270-F)%360);y.appendChild(t)}y=1}else y=null}y&&(w.fill="none",w.gradient=k.fill,A.rotate=!1)}if("fill-opacity"in k||"opacity"in k)y=((+w["fill-opacity"]+1||2)-1)*((+w.opacity+1||2)-1)*((+a.getRGB(k.fill).o+
1||2)-1),y=f(b(y,0),1),A.opacity=y,A.src&&(A.color="none");u.appendChild(A);F=u.getElementsByTagName("stroke")&&u.getElementsByTagName("stroke")[0];A=!1;!F&&(A=F=G("stroke"));if(k.stroke&&"none"!=k.stroke||k["stroke-width"]||null!=k["stroke-opacity"]||k["stroke-dasharray"]||k["stroke-miterlimit"]||k["stroke-linejoin"]||k["stroke-linecap"])F.on=!0;("none"==k.stroke||null===k.stroke||null==F.on||0==k.stroke||0==k["stroke-width"])&&(F.on=!1);y=a.getRGB(k.stroke);F.on&&k.stroke&&(F.color=y.hex);y=((+w["stroke-opacity"]+
1||2)-1)*((+w.opacity+1||2)-1)*((+y.o+1||2)-1);t=0.75*(e(k["stroke-width"])||1);y=f(b(y,0),1);null==k["stroke-width"]&&(t=w["stroke-width"]);k["stroke-width"]&&(F.weight=t);t&&1>t&&(y*=t)&&(F.weight=1);F.opacity=y;k["stroke-linejoin"]&&(F.joinstyle=k["stroke-linejoin"]||"miter");F.miterlimit=k["stroke-miterlimit"]||8;k["stroke-linecap"]&&(F.endcap="butt"==k["stroke-linecap"]?"flat":"square"==k["stroke-linecap"]?"square":"round");k["stroke-dasharray"]&&(y={"-":"shortdash",".":"shortdot","-.":"shortdashdot",
"-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},F.dashstyle=y.hasOwnProperty(k["stroke-dasharray"])?y[k["stroke-dasharray"]]:"");A&&u.appendChild(F)}if("text"==h.type){h.paper.canvas.style.display="";u=h.paper.span;F=w.font&&w.font.match(/\d+(?:\.\d*)?(?=px)/);y=u.style;w.font&&(y.font=w.font);w["font-family"]&&(y.fontFamily=w["font-family"]);w["font-weight"]&&(y.fontWeight=w["font-weight"]);w["font-style"]&&(y.fontStyle=
w["font-style"]);F=e(w["font-size"]||F&&F[0])||10;y.fontSize=100*F+"px";h.textpath.string&&(u.innerHTML=j(h.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));u=u.getBoundingClientRect();h.W=w.w=(u.right-u.left)/100;h.H=w.h=(u.bottom-u.top)/100;h.X=w.x;h.Y=w.y+h.H/2;("x"in k||"y"in k)&&(h.path.v=a.format("m{0},{1}l{2},{1}",g(21600*w.x),g(21600*w.y),g(21600*w.x)+1));u="x y text font font-family font-weight font-style font-size".split(" ");F=0;for(A=u.length;F<A;F++)if(u[F]in
k){h._.dirty=1;break}switch(w["text-anchor"]){case "start":h.textpath.style["v-text-align"]="left";h.bbx=h.W/2;break;case "end":h.textpath.style["v-text-align"]="right";h.bbx=-h.W/2;break;default:h.textpath.style["v-text-align"]="center",h.bbx=0}h.textpath.style["v-text-kern"]=!0}},F=function(b,d){this[0]=this.node=b;b.raphael=!0;this.id=a._oid++;b.raphaelid=this.id;this.Y=this.X=0;this.attrs={};this.paper=d;this.matrix=a.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1};!d.bottom&&
(d.bottom=this);(this.prev=d.top)&&(d.top.next=this);d.top=this;this.next=null},t=a.el;F.prototype=t;t.constructor=F;t.transform=function(b){if(null==b)return this._.transform;var d=this.paper._viewBoxShift,f=d?"s"+[d.scale,d.scale]+"-1-1t"+[d.dx,d.dy]:"",e;d&&(e=b=j(b).replace(/\.{3}|\u2026/g,this._.transform||""));a._extractTransform(this,f+b);var d=this.matrix.clone(),h=this.skew,b=this.node,f=~j(this.attrs.fill).indexOf("-"),g=!j(this.attrs.fill).indexOf("url(");d.translate(-0.5,-0.5);g||f||"image"==
this.type?(h.matrix="1 0 0 1",h.offset="0 0",h=d.split(),f&&h.noRotation||!h.isSimple?(b.style.filter=d.toFilter(),f=this.getBBox(),h=this.getBBox(1),d=f.x-h.x,f=f.y-h.y,b.coordorigin=-21600*d+" "+-21600*f,z(this,1,1,d,f,0)):(b.style.filter="",z(this,h.scalex,h.scaley,h.dx,h.dy,h.rotate))):(b.style.filter="",h.matrix=j(d),h.offset=d.offset());e&&(this._.transform=e);return this};t.rotate=function(a,b,d){if(this.removed)return this;if(null!=a){a=j(a).split(o);a.length-1&&(b=e(a[1]),d=e(a[2]));a=e(a[0]);
null==d&&(b=d);if(null==b||null==d)d=this.getBBox(1),b=d.x+d.width/2,d=d.y+d.height/2;this._.dirtyT=1;this.transform(this._.transform.concat([["r",a,b,d]]));return this}};t.translate=function(a,b){if(this.removed)return this;a=j(a).split(o);a.length-1&&(b=e(a[1]));a=e(a[0])||0;b=+b||0;this._.bbox&&(this._.bbox.x+=a,this._.bbox.y+=b);this.transform(this._.transform.concat([["t",a,b]]));return this};t.scale=function(a,b,d,f){if(this.removed)return this;a=j(a).split(o);a.length-1&&(b=e(a[1]),d=e(a[2]),
f=e(a[3]),isNaN(d)&&(d=null),isNaN(f)&&(f=null));a=e(a[0]);null==b&&(b=a);null==f&&(d=f);if(null==d||null==f)var h=this.getBBox(1);d=null==d?h.x+h.width/2:d;f=null==f?h.y+h.height/2:f;this.transform(this._.transform.concat([["s",a,b,d,f]]));this._.dirtyT=1;return this};t.hide=function(){!this.removed&&(this.node.style.display="none");return this};t.show=function(){!this.removed&&(this.node.style.display="");return this};t._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,
y:this.Y-this.H,width:this.W,height:this.H}};t.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this);a.eve.unbind("raphael.*.*."+this.id);a._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this)this[b]="function"==typeof this[b]?a._removedFactory(b):null;this.removed=!0}};t.attr=function(b,d){if(this.removed)return this;if(null==b){var f={},e;for(e in this.attrs)this.attrs.hasOwnProperty(e)&&
(f[e]=this.attrs[e]);f.gradient&&"none"==f.fill&&(f.fill=f.gradient)&&delete f.gradient;f.transform=this._.transform;return f}if(null==d&&a.is(b,"string")){if("fill"==b&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;e=b.split(o);for(var f={},h=0,g=e.length;h<g;h++)b=e[h],f[b]=b in this.attrs?this.attrs[b]:a.is(this.paper.customAttributes[b],"function")?this.paper.customAttributes[b].def:a._availableAttrs[b];return g-1?f:f[e[0]]}if(this.attrs&&null==d&&a.is(b,"array")){f=
{};h=0;for(g=b.length;h<g;h++)f[b[h]]=this.attr(b[h]);return f}null!=d&&(f={},f[b]=d);null==d&&a.is(b,"object")&&(f=b);for(h in f)u("raphael.attr."+h+"."+this.id,this,f[h]);if(f){for(h in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(h)&&f.hasOwnProperty(h)&&a.is(this.paper.customAttributes[h],"function"))for(g in e=this.paper.customAttributes[h].apply(this,[].concat(f[h])),this.attrs[h]=f[h],e)e.hasOwnProperty(g)&&(f[g]=e[g]);f.text&&"text"==this.type&&(this.textpath.string=
f.text);B(this,f)}return this};t.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node);this.paper&&this.paper.top!=this&&a._tofront(this,this.paper);return this};t.toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),a._toback(this,this.paper));return this};t.insertAfter=function(b){if(this.removed)return this;b.constructor==a.st.constructor&&(b=b[b.length-1]);
b.node.nextSibling?b.node.parentNode.insertBefore(this.node,b.node.nextSibling):b.node.parentNode.appendChild(this.node);a._insertafter(this,b,this.paper);return this};t.insertBefore=function(b){if(this.removed)return this;b.constructor==a.st.constructor&&(b=b[0]);b.node.parentNode.insertBefore(this.node,b.node);a._insertbefore(this,b,this.paper);return this};t.blur=function(b){var d=this.node.runtimeStyle,f=d.filter,f=f.replace(k,"");0!==+b?(this.attrs.blur=b,d.filter=f+"  progid:DXImageTransform.Microsoft.Blur(pixelradius="+
(+b||1.5)+")",d.margin=a.format("-{0}px 0 0 -{0}px",g(+b||1.5))):(d.filter=f,d.margin=0,delete this.attrs.blur)};a._engine.path=function(a,b){var d=G("shape");d.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";d.coordsize="21600 21600";d.coordorigin=b.coordorigin;var f=new F(d,b),e={fill:"none",stroke:"#000"};a&&(e.path=a);f.type="path";f.path=[];f.Path="";B(f,e);b.canvas.appendChild(d);e=G("skew");e.on=!0;d.appendChild(e);f.skew=e;f.transform("");return f};a._engine.rect=function(b,
d,f,e,h,g){var k=a._rectPath(d,f,e,h,g),b=b.path(k),j=b.attrs;b.X=j.x=d;b.Y=j.y=f;b.W=j.width=e;b.H=j.height=h;j.r=g;j.path=k;b.type="rect";return b};a._engine.ellipse=function(a,b,d,f,e){a=a.path();a.X=b-f;a.Y=d-e;a.W=2*f;a.H=2*e;a.type="ellipse";B(a,{cx:b,cy:d,rx:f,ry:e});return a};a._engine.circle=function(a,b,d,f){a=a.path();a.X=b-f;a.Y=d-f;a.W=a.H=2*f;a.type="circle";B(a,{cx:b,cy:d,r:f});return a};a._engine.image=function(b,d,f,e,h,g){var k=a._rectPath(f,e,h,g),b=b.path(k).attr({stroke:"none"}),
j=b.attrs,n=b.node,l=n.getElementsByTagName("fill")[0];j.src=d;b.X=j.x=f;b.Y=j.y=e;b.W=j.width=h;b.H=j.height=g;j.path=k;b.type="image";l.parentNode==n&&n.removeChild(l);l.rotate=!0;l.src=d;l.type="tile";b._.fillpos=[f,e];b._.fillsize=[h,g];n.appendChild(l);z(b,1,1,0,0,0);return b};a._engine.text=function(b,d,f,e){var h=G("shape"),k=G("path"),n=G("textpath"),d=d||0,f=f||0,e=e||"";k.v=a.format("m{0},{1}l{2},{1}",g(21600*d),g(21600*f),g(21600*d)+1);k.textpathok=!0;n.string=j(e);n.on=!0;h.style.cssText=
"position:absolute;left:0;top:0;width:1px;height:1px";h.coordsize="21600 21600";h.coordorigin="0 0";var l=new F(h,b),o={fill:"#000",stroke:"none",font:a._availableAttrs.font,text:e};l.shape=h;l.path=k;l.textpath=n;l.type="text";l.attrs.text=j(e);l.attrs.x=d;l.attrs.y=f;l.attrs.w=1;l.attrs.h=1;B(l,o);h.appendChild(n);h.appendChild(k);b.canvas.appendChild(h);b=G("skew");b.on=!0;h.appendChild(b);l.skew=b;l.transform("");return l};a._engine.setSize=function(b,d){var f=this.canvas.style;this.width=b;this.height=
d;b==+b&&(b+="px");d==+d&&(d+="px");f.width=b;f.height=d;f.clip="rect(0 "+b+" "+d+" 0)";this._viewBox&&a._engine.setViewBox.apply(this,this._viewBox);return this};a._engine.setViewBox=function(d,f,e,h,g){a.eve("raphael.setViewBox",this,this._viewBox,[d,f,e,h,g]);var k=this.width,j=this.height,n=1/b(e/k,h/j),l,o;g&&(l=j/h,o=k/e,e*l<k&&(d-=(k-e*l)/2/l),h*o<j&&(f-=(j-h*o)/2/o));this._viewBox=[d,f,e,h,!!g];this._viewBoxShift={dx:-d,dy:-f,scale:n};this.forEach(function(a){a.transform("...")});return this};
var G;a._engine.initWin=function(a){var b=a.document;b.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!b.namespaces.rvml&&b.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),G=function(a){return b.createElement("<rvml:"+a+' class="rvml">')}}catch(d){G=function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}};a._engine.initWin(a._g.win);a._engine.create=function(){var b=a._getContainer.apply(0,arguments),d=b.container,f=b.height,
e=b.width,h=b.x,b=b.y;if(!d)throw Error("VML container not found.");var g=new a._Paper,k=g.canvas=a._g.doc.createElement("div"),j=k.style,h=h||0,b=b||0,e=e||512,f=f||342;g.width=e;g.height=f;e==+e&&(e+="px");f==+f&&(f+="px");g.coordsize="21600000 21600000";g.coordorigin="0 0";g.span=a._g.doc.createElement("span");g.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";k.appendChild(g.span);j.cssText=a.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",
e,f);1==d?(a._g.doc.body.appendChild(k),j.left=h+"px",j.top=b+"px",j.position="absolute"):d.firstChild?d.insertBefore(k,d.firstChild):d.appendChild(k);g.renderfix=function(){};return g};a.prototype.clear=function(){a.eve("raphael.clear",this);this.canvas.innerHTML="";this.span=a._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};a.prototype.remove=
function(){a.eve("raphael.remove",this);this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]="function"==typeof this[b]?a._removedFactory(b):null;return!0};var y=a.st,A;for(A in t)t.hasOwnProperty(A)&&!y.hasOwnProperty(A)&&(y[A]=function(a){return function(){var b=arguments;return this.forEach(function(d){d[a].apply(d,b)})}}(A))}});!window.WebSocket&&window.MozWebSocket&&(window.WebSocket=window.MozWebSocket);
var swfobject=function(){function a(){if(!I){try{var a=t.getElementsByTagName("body")[0].appendChild(t.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}I=true;for(var a=A.length,d=0;d<a;d++)A[d]()}}function j(a){I?a():A[A.length]=a}function e(a){if(typeof F.addEventListener!=w)F.addEventListener("load",a,false);else if(typeof t.addEventListener!=w)t.addEventListener("load",a,false);else if(typeof F.attachEvent!=w){var b=F;b.attachEvent("onload",a);m[m.length]=[b,"onload",a]}else if(typeof F.onload==
"function"){var d=F.onload;F.onload=function(){d();a()}}else F.onload=a}function d(){var a=C.length;if(a>0)for(var d=0;d<a;d++){var e=C[d].id,j=C[d].callbackFn,n={success:false,id:e};if(L.pv[0]>0){var o=l(e);if(o)if(k(C[d].swfVersion)&&!(L.wk&&L.wk<312)){x(e,true);if(j){n.success=true;n.ref=g(e);j(n)}}else if(C[d].expressInstall&&b()){n={};n.data=C[d].expressInstall;n.width=o.getAttribute("width")||"0";n.height=o.getAttribute("height")||"0";if(o.getAttribute("class"))n.styleclass=o.getAttribute("class");
if(o.getAttribute("align"))n.align=o.getAttribute("align");for(var q={},o=o.getElementsByTagName("param"),u=o.length,v=0;v<u;v++)o[v].getAttribute("name").toLowerCase()!="movie"&&(q[o[v].getAttribute("name")]=o[v].getAttribute("value"));f(n,q,e,j)}else{h(o);j&&j(n)}}else{x(e,true);if(j){if((e=g(e))&&typeof e.SetVariable!=w){n.success=true;n.ref=e}j(n)}}}}function g(a){var b=null;if((a=l(a))&&a.nodeName=="OBJECT")if(typeof a.SetVariable!=w)b=a;else(a=a.getElementsByTagName(z)[0])&&(b=a);return b}function b(){return!M&&
k("6.0.65")&&(L.win||L.mac)&&!(L.wk&&L.wk<312)}function f(a,b,d,f){M=true;T=f||null;Q={success:false,id:d};var e=l(d);if(e){if(e.nodeName=="OBJECT"){P=o(e);J=null}else{P=e;J=d}a.id=B;if(typeof a.width==w||!/%$/.test(a.width)&&parseInt(a.width,10)<310)a.width="310";if(typeof a.height==w||!/%$/.test(a.height)&&parseInt(a.height,10)<137)a.height="137";t.title=t.title.slice(0,47)+" - Flash Player Installation";f=L.ie&&L.win?"ActiveX":"PlugIn";f="MMredirectURL="+F.location.toString().replace(/&/g,"%26")+
"&MMplayerType="+f+"&MMdoctitle="+t.title;b.flashvars=typeof b.flashvars!=w?b.flashvars+("&"+f):f;if(L.ie&&L.win&&e.readyState!=4){f=t.createElement("div");d=d+"SWFObjectNew";f.setAttribute("id",d);e.parentNode.insertBefore(f,e);e.style.display="none";(function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)})()}u(a,b,d)}}function h(a){if(L.ie&&L.win&&a.readyState!=4){var b=t.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(o(a),b);a.style.display=
"none";(function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(o(a),a)}function o(a){var b=t.createElement("div");if(L.win&&L.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(z)[0])if(a=a.childNodes)for(var d=a.length,f=0;f<d;f++)!(a[f].nodeType==1&&a[f].nodeName=="PARAM")&&a[f].nodeType!=8&&b.appendChild(a[f].cloneNode(true));return b}function u(a,b,d){var f,e=l(d);if(L.wk&&L.wk<312)return f;if(e){if(typeof a.id==w)a.id=
d;if(L.ie&&L.win){var h="",g;for(g in a)if(a[g]!=Object.prototype[g])g.toLowerCase()=="data"?b.movie=a[g]:g.toLowerCase()=="styleclass"?h=h+(' class="'+a[g]+'"'):g.toLowerCase()!="classid"&&(h=h+(" "+g+'="'+a[g]+'"'));g="";for(var k in b)b[k]!=Object.prototype[k]&&(g=g+('<param name="'+k+'" value="'+b[k]+'" />'));e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+h+">"+g+"</object>";K[K.length]=a.id;f=l(a.id)}else{k=t.createElement(z);k.setAttribute("type",E);for(var j in a)a[j]!=
Object.prototype[j]&&(j.toLowerCase()=="styleclass"?k.setAttribute("class",a[j]):j.toLowerCase()!="classid"&&k.setAttribute(j,a[j]));for(h in b)if(b[h]!=Object.prototype[h]&&h.toLowerCase()!="movie"){a=k;g=h;j=b[h];d=t.createElement("param");d.setAttribute("name",g);d.setAttribute("value",j);a.appendChild(d)}e.parentNode.replaceChild(k,e);f=k}}return f}function q(a){var b=l(a);if(b&&b.nodeName=="OBJECT")if(L.ie&&L.win){b.style.display="none";(function(){if(b.readyState==4){var d=l(a);if(d){for(var f in d)typeof d[f]==
"function"&&(d[f]=null);d.parentNode.removeChild(d)}}else setTimeout(arguments.callee,10)})()}else b.parentNode.removeChild(b)}function l(a){var b=null;try{b=t.getElementById(a)}catch(d){}return b}function k(a){var b=L.pv,a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?true:false}function n(a,b,d,f){if(!L.ie||!L.mac){var e=t.getElementsByTagName("head")[0];if(e){d=d&&typeof d=="string"?
d:"screen";if(f)R=H=null;if(!H||R!=d){f=t.createElement("style");f.setAttribute("type","text/css");f.setAttribute("media",d);H=e.appendChild(f);L.ie&&(L.win&&typeof t.styleSheets!=w&&t.styleSheets.length>0)&&(H=t.styleSheets[t.styleSheets.length-1]);R=d}L.ie&&L.win?H&&typeof H.addRule==z&&H.addRule(a,b):H&&typeof t.createTextNode!=w&&H.appendChild(t.createTextNode(a+" {"+b+"}"))}}}function x(a,b){if(N){var d=b?"visible":"hidden";I&&l(a)?l(a).style.visibility=d:n("#"+a,"visibility:"+d)}}function v(a){return/[\\\"<>\.;]/.exec(a)!=
null&&typeof encodeURIComponent!=w?encodeURIComponent(a):a}var w="undefined",z="object",E="application/x-shockwave-flash",B="SWFObjectExprInst",F=window,t=document,G=navigator,y=false,A=[function(){if(y){var a=t.getElementsByTagName("body")[0],b=t.createElement(z);b.setAttribute("type",E);var f=a.appendChild(b);if(f){var e=0;(function(){if(typeof f.GetVariable!=w){var h=f.GetVariable("$version");if(h){h=h.split(" ")[1].split(",");L.pv=[parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10)]}}else if(e<
10){e++;setTimeout(arguments.callee,10);return}a.removeChild(b);f=null;d()})()}else d()}else d()}],C=[],K=[],m=[],P,J,T,Q,I=false,M=false,H,R,N=true,L,W=typeof t.getElementById!=w&&typeof t.getElementsByTagName!=w&&typeof t.createElement!=w,U=G.userAgent.toLowerCase(),Z=G.platform.toLowerCase(),fa=Z?/win/.test(Z):/win/.test(U),Z=Z?/mac/.test(Z):/mac/.test(U),U=/webkit/.test(U)?parseFloat(U.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ha=!+"\v1",ia=[0,0,0],ja=null;if(typeof G.plugins!=w&&typeof G.plugins["Shockwave Flash"]==
z){if((ja=G.plugins["Shockwave Flash"].description)&&!(typeof G.mimeTypes!=w&&G.mimeTypes[E]&&!G.mimeTypes[E].enabledPlugin)){y=true;ha=false;ja=ja.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ia[0]=parseInt(ja.replace(/^(.*)\..*$/,"$1"),10);ia[1]=parseInt(ja.replace(/^.*\.(.*)\s.*$/,"$1"),10);ia[2]=/[a-zA-Z]/.test(ja)?parseInt(ja.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof F.ActiveXObject!=w)try{var ra=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(ra)if(ja=ra.GetVariable("$version")){ha=
true;ja=ja.split(" ")[1].split(",");ia=[parseInt(ja[0],10),parseInt(ja[1],10),parseInt(ja[2],10)]}}catch(Y){}L={w3:W,pv:ia,wk:U,ie:ha,win:fa,mac:Z};if(L.w3){(typeof t.readyState!=w&&t.readyState=="complete"||typeof t.readyState==w&&(t.getElementsByTagName("body")[0]||t.body))&&a();if(!I){typeof t.addEventListener!=w&&t.addEventListener("DOMContentLoaded",a,false);if(L.ie&&L.win){t.attachEvent("onreadystatechange",function(){if(t.readyState=="complete"){t.detachEvent("onreadystatechange",arguments.callee);
a()}});F==top&&function(){if(!I){try{t.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}a()}}()}L.wk&&function(){I||(/loaded|complete/.test(t.readyState)?a():setTimeout(arguments.callee,0))}();e(a)}}L.ie&&L.win&&window.attachEvent("onunload",function(){for(var a=m.length,b=0;b<a;b++)m[b][0].detachEvent(m[b][1],m[b][2]);a=K.length;for(b=0;b<a;b++)q(K[b]);for(var d in L)L[d]=null;L=null;for(var f in swfobject)swfobject[f]=null;swfobject=null});return{registerObject:function(a,
b,d,f){if(L.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=d;e.callbackFn=f;C[C.length]=e;x(a,false)}else f&&f({success:false,id:a})},getObjectById:function(a){if(L.w3)return g(a)},embedSWF:function(a,d,e,h,g,n,l,o,q,v){var m={success:false,id:d};if(L.w3&&!(L.wk&&L.wk<312)&&a&&d&&e&&h&&g){x(d,false);j(function(){e=e+"";h=h+"";var j={};if(q&&typeof q===z)for(var y in q)j[y]=q[y];j.data=a;j.width=e;j.height=h;y={};if(o&&typeof o===z)for(var H in o)y[H]=o[H];if(l&&typeof l===z)for(var t in l)y.flashvars=
typeof y.flashvars!=w?y.flashvars+("&"+t+"="+l[t]):t+"="+l[t];if(k(g)){H=u(j,y,d);j.id==d&&x(d,true);m.success=true;m.ref=H}else{if(n&&b()){j.data=n;f(j,y,d,v);return}x(d,true)}v&&v(m)})}else v&&v(m)},switchOffAutoHideShow:function(){N=false},ua:L,getFlashPlayerVersion:function(){return{major:L.pv[0],minor:L.pv[1],release:L.pv[2]}},hasFlashPlayerVersion:k,createSWF:function(a,b,d){if(L.w3)return u(a,b,d)},showExpressInstall:function(a,d,e,h){L.w3&&b()&&f(a,d,e,h)},removeSWF:function(a){L.w3&&q(a)},
createCSS:function(a,b,d,f){L.w3&&n(a,b,d,f)},addDomLoadEvent:j,addLoadEvent:e,getQueryParamValue:function(a){var b=t.location.search||t.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return v(b);for(var b=b.split("&"),d=0;d<b.length;d++)if(b[d].substring(0,b[d].indexOf("="))==a)return v(b[d].substring(b[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(M){var a=l(B);if(a&&P){a.parentNode.replaceChild(P,a);if(J){x(J,true);if(L.ie&&L.win)P.style.display="block"}T&&
T(Q)}M=false}}}}();
(function(){function a(){}if(!window.WebSocket){var j=window.console;if(!j||!j.log||!j.error)j={log:function(){},error:function(){}};if(swfobject.hasFlashPlayerVersion("10.0.0")){location.protocol=="file:"&&j.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://...");WebSocket=function(a,d,g,b,f){var h=this;h.__id=WebSocket.__nextId++;WebSocket.__instances[h.__id]=h;h.readyState=WebSocket.CONNECTING;h.bufferedAmount=
0;setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(h.__id,a,d,g||null,b||0,f||null)})},0)};WebSocket.prototype.send=function(a){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";a=WebSocket.__flash.send(this.__id,encodeURIComponent(a));if(a<0)return true;this.bufferedAmount=this.bufferedAmount+a;return false};WebSocket.prototype.close=function(){if(!(this.readyState==WebSocket.CLOSED||this.readyState==WebSocket.CLOSING)){this.readyState=
WebSocket.CLOSING;WebSocket.__flash.close(this.__id)}};WebSocket.prototype.addEventListener=function(a,d){if(!("__events"in this))this.__events={};if(!(a in this.__events)){this.__events[a]=[];if("function"==typeof this["on"+a]){this.__events[a].defaultHandler=this["on"+a];this["on"+a]=this.__createEventHandler(this,a)}}this.__events[a].push(d)};WebSocket.prototype.removeEventListener=function(a,d){if(!("__events"in this))this.__events={};if(a in this.__events)for(var g=this.__events.length;g>-1;--g)if(d===
this.__events[a][g]){this.__events[a].splice(g,1);break}};WebSocket.prototype.dispatchEvent=function(a){if(!("__events"in this))throw"UNSPECIFIED_EVENT_TYPE_ERR";if(!(a.type in this.__events))throw"UNSPECIFIED_EVENT_TYPE_ERR";for(var d=0,g=this.__events[a.type].length;d<g;++d){this.__events[a.type][d](a);if(a.cancelBubble)break}false!==a.returnValue&&"function"==typeof this.__events[a.type].defaultHandler&&this.__events[a.type].defaultHandler(a)};WebSocket.prototype.__handleEvent=function(a){if("readyState"in
a)this.readyState=a.readyState;try{if(a.type=="open"){if(this.onopen)this.onopen()}else if(a.type=="close"){if(this.onclose)this.onclose()}else if(a.type=="error"){if(this.onerror)this.onerror(a)}else if(a.type=="message"){if(this.onmessage){var d=decodeURIComponent(a.message),g;if(window.MessageEvent&&!window.opera){g=document.createEvent("MessageEvent");g.initMessageEvent("message",false,false,d,null,null,window,null)}else g={data:d};this.onmessage(g)}}else throw"unknown event type: "+a.type;}catch(b){j.error(b)}};
WebSocket.prototype.__createEventHandler=function(e,d){return function(g){var b=new a;b.initEvent(d,true,true);b.target=b.currentTarget=e;for(var f in g)b[f]=g[f];e.dispatchEvent(b,arguments)}};WebSocket.CONNECTING=0;WebSocket.OPEN=1;WebSocket.CLOSING=2;WebSocket.CLOSED=3;WebSocket.__flash=null;WebSocket.__instances={};WebSocket.__tasks=[];WebSocket.__nextId=0;WebSocket.__initialize=function(){if(!WebSocket.__flash){if(WebSocket.__swfLocation)window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation;
if(window.WEB_SOCKET_SWF_LOCATION){var a=document.createElement("div");a.id="webSocketContainer";a.style.position="absolute";if(WebSocket.__isFlashLite()){a.style.left="0px";a.style.top="0px"}else{a.style.left="-100px";a.style.top="-100px"}var d=document.createElement("div");d.id="webSocketFlash";a.appendChild(d);document.body.appendChild(a);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:true,swliveconnect:true,allowScriptAccess:"always"},null,
function(a){a.success||j.error("[WebSocket] swfobject.embedSWF failed")})}else j.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")}};WebSocket.loadFlashPolicyFile=function(a){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(a)})};WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash");WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);
for(var a=0;a<WebSocket.__tasks.length;++a)WebSocket.__tasks[a]();WebSocket.__tasks=[]},0)};WebSocket.__onFlashEvent=function(){setTimeout(function(){for(var a=WebSocket.__flash.receiveEvents(),d=0;d<a.length;++d)WebSocket.__instances[a[d].webSocketId].__handleEvent(a[d])},0);return true};WebSocket.__log=function(a){j.log(decodeURIComponent(a))};WebSocket.__error=function(a){j.error(decodeURIComponent(a))};WebSocket.__addTask=function(a){WebSocket.__flash?a():WebSocket.__tasks.push(a)};WebSocket.__isFlashLite=
function(){if(!window.navigator||!window.navigator.mimeTypes)return false;var a=window.navigator.mimeTypes["application/x-shockwave-flash"];return!a||!a.enabledPlugin||!a.enabledPlugin.filename?false:a.enabledPlugin.filename.match(/flashlite/i)?true:false};a.prototype.cancelable=true;a.prototype.cancelBubble=false;a.prototype.preventDefault=function(){if(this.cancelable)this.returnValue=false};a.prototype.stopPropagation=function(){this.cancelBubble=true};a.prototype.initEvent=function(a,d,g){this.type=
a;this.cancelable=g;this.timeStamp=new Date};window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},false):window.attachEvent("onload",function(){WebSocket.__initialize()}))}else j.error("Flash Player >= 10.0.0 is required.")}})();
window.Modernizr=function(a,j,e){function d(a,b){for(var d in a){var f=a[d];if(!~(""+f).indexOf("-")&&o[f]!==e)return b=="pfx"?f:true}return false}function g(a,b,f){var h=a.charAt(0).toUpperCase()+a.slice(1),g=(a+" "+u.join(h+" ")+h).split(" ");if(typeof b==="string"||typeof b==="undefined")return d(g,b);g=(a+" "+q.join(h+" ")+h).split(" ");a:{var a=g,j;for(j in a){h=b[a[j]];if(h!==e){if(f===false){b=a[j];break a}if(typeof h==="function"){b=h.bind(f||b);break a}b=h;break a}}b=false}return b}var b=
{},f=j.documentElement,h=j.createElement("modernizr"),o=h.style,u=["Webkit","Moz","O","ms"],q=["webkit","moz","o","ms"],h={},l=[],k=l.slice,n,x=function(a,b,d,e){var h,g,k=j.createElement("div"),n=j.body,l=n||j.createElement("body");if(parseInt(d,10))for(;d--;){h=j.createElement("div");h.id=e?e[d]:"modernizr"+(d+1);k.appendChild(h)}d=['&#173;<style id="smodernizr">',a,"</style>"].join("");k.id="modernizr";(n?k:l).innerHTML=(n?k:l).innerHTML+d;l.appendChild(k);if(!n){l.style.background="";l.style.overflow=
"hidden";g=f.style.overflow;f.style.overflow="hidden";f.appendChild(l)}a=b(k,a);if(n)k.parentNode.removeChild(k);else{l.parentNode.removeChild(l);f.style.overflow=g}return!!a},v={}.hasOwnProperty,w;w=typeof v!=="undefined"&&typeof v.call!=="undefined"?function(a,b){return v.call(a,b)}:function(a,b){return b in a&&typeof a.constructor.prototype[b]==="undefined"};if(!Function.prototype.bind)Function.prototype.bind=function(a){var b=this;if(typeof b!="function")throw new TypeError;var d=k.call(arguments,
1),f=function(){if(this instanceof f){var e=function(){};e.prototype=b.prototype;var e=new e,h=b.apply(e,d.concat(k.call(arguments)));return Object(h)===h?h:e}return b.apply(a,d.concat(k.call(arguments)))};return f};h.websockets=function(){return"WebSocket"in a||"MozWebSocket"in a};h.cssanimations=function(){return g("animationName")};h.csstransforms3d=function(){var a=!!g("perspective");a&&"webkitPerspective"in f.style&&x("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",
function(b){a=b.offsetLeft===9&&b.offsetHeight===3});return a};h.csstransitions=function(){return g("transition")};for(var z in h)if(w(h,z)){n=z.toLowerCase();b[n]=h[z]();l.push((b[n]?"":"no-")+n)}b.addTest=function(a,d){if(typeof a=="object")for(var h in a)w(a,h)&&b.addTest(h,a[h]);else{a=a.toLowerCase();if(b[a]!==e)return b;d=typeof d=="function"?d():d;if(typeof enableClasses!=="undefined"&&enableClasses)f.className=f.className+(" "+(d?"":"no-")+a);b[a]=d}return b};o.cssText="";h=null;b._version=
"2.6.2";b._prefixes=["","-webkit-","-moz-","-o-","-ms-"];b._domPrefixes=q;b._cssomPrefixes=u;b.mq=function(b){var d=a.matchMedia||a.msMatchMedia;if(d)return d(b).matches;var f;x("@media "+b+" { #modernizr { position: absolute; } }",function(b){f=(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle).position=="absolute"});return f};b.testProp=function(a){return d([a])};b.testAllProps=g;b.testStyles=x;b.prefixed=function(a,b,d){return b?g(a,b,d):g(a,"pfx")};return b}(this,this.document);
Modernizr.addTest("cssfilters",function(){var a=document.createElement("div");a.style.cssText=Modernizr._prefixes.join("filter:blur(2px); ");return!!a.style.length&&(document.documentMode===void 0||document.documentMode>9)});
var key,_,_active_combos,_add_key_to_sequence,_add_to_active_combos,_allow_key_repeat,_bind_key_events,_bug_catcher,_change_keycodes_by_browser,_cmd_bug_check,_combo_defaults,_compare_arrays,_convert_key_to_readable,_convert_to_shifted_key,_decide_meta_key,_event_classname,_fire,_get_active_combos,_get_possible_sequences,_get_potential_combos,_get_sequence,_handle_combo_down,_handle_combo_up,_init,_key_down,_key_up,_keycode_alternate_names,_keycode_dictionary,_keycode_shifted_keys,_keys_down,_keys_remain,
_log_error,_match_combo_arrays,_metakey,_modifier_event_mapping,_modifier_keys,_prevent_capture,_prevent_default,_ready,_receive_input,_registered_combos,_remove_from_active_combos,_sequence,_sequence_timer,_unregister_combo,_valid_keys,_validate_combo,__indexOf=[].indexOf||function(a){for(var j=0,e=this.length;j<e;j++)if(j in this&&this[j]===a)return j;return-1},__hasProp={}.hasOwnProperty;_registered_combos=[];_sequence=[];_sequence_timer=null;_keys_down=[];_active_combos=[];_prevent_capture=!1;
_event_classname="keypress_events";_metakey="ctrl";_modifier_keys="meta alt option ctrl shift cmd".split(" ");_valid_keys=[];_combo_defaults={keys:[],count:0};_log_error=function(){return console.log.apply(console,arguments)};_compare_arrays=function(a,j){var e,d,g;if(a.length!==j.length)return false;d=0;for(g=a.length;d<g;d++){e=a[d];if(!(__indexOf.call(j,e)>=0))return false}d=0;for(g=j.length;d<g;d++){e=j[d];if(!(__indexOf.call(a,e)>=0))return false}return true};
_prevent_default=function(a,j){if((j||keypress.suppress_event_defaults)&&!keypress.force_event_defaults)return a.preventDefault()};_allow_key_repeat=function(a){if(a.prevent_repeat)return false;if(typeof a.on_keydown==="function")return true};_keys_remain=function(a){var j,e,d,g;g=a.keys;e=0;for(d=g.length;e<d;e++){a=g[e];if(__indexOf.call(_keys_down,a)>=0){j=true;break}}return j};
_fire=function(a,j,e){typeof j["on_"+a]==="function"&&_prevent_default(e,j["on_"+a].call(j["this"],e,j.count)===false);if(a==="release")j.count=0;if(a==="keyup")return j.keyup_fired=true};
_match_combo_arrays=function(a,j,e){var d,g,b,f;e==null&&(e=false);d=[];b=0;for(f=j.length;b<f;b++){g=j[b];if(!j.is_sequence)if(g.is_ordered){a.join("")===g.keys.join("")&&d.push(g);e&&a.join("")===g.keys.slice(0,a.length).join("")&&d.push(g)}else{_compare_arrays(a,g.keys)&&d.push(g);e&&_compare_arrays(a,g.keys.slice(0,a.length))&&d.push(g)}}return d};_cmd_bug_check=function(a){return __indexOf.call(_keys_down,"cmd")>=0&&__indexOf.call(a,"cmd")<0?false:true};
_get_active_combos=function(a){var j,e,d,g,b,f,h;g=[];e=_keys_down.filter(function(b){return b!==a});e.push(a);d=_match_combo_arrays(e,_registered_combos);d.length&&_cmd_bug_check(e)&&(g=d);j=false;f=0;for(h=g.length;f<h;f++){d=g[f];d.is_exclusive&&(j=true)}b=function(a){var d,f,e,h,n,x,v;d=h=0;for(v=a.length;0<=v?h<v:h>v;d=0<=v?++h:--h){e=a.slice();e.splice(d,1);if(e.length){f=_match_combo_arrays(e,_registered_combos);n=0;for(x=f.length;n<x;n++){d=f[n];(!j||!d.is_exclusive)&&g.push(d)}b(e)}}};b(e);
return g};_get_potential_combos=function(a){var j,e,d,g;e=[];d=0;for(g=_registered_combos.length;d<g;d++){j=_registered_combos[d];j.is_sequence||__indexOf.call(j.keys,a)>=0&&_cmd_bug_check(j.keys)&&e.push(j)}return e};
_add_to_active_combos=function(a){var j,e,d,g,b,f,h,o,u;b=false;if(__indexOf.call(_active_combos,a)>=0)return false;if(_active_combos.length){d=f=0;for(u=_active_combos.length;0<=u?f<u:f>u;d=0<=u?++f:--f){j=_active_combos[d];if(j.is_exclusive&&a.is_exclusive){e=j.keys.slice();h=0;for(o=e.length;h<o;h++){j=e[h];g=true;if(__indexOf.call(a.keys,j)<0){g=false;break}}if(g){_active_combos.splice(d,1,a);b=true;break}}}}b||_active_combos.unshift(a);return true};
_remove_from_active_combos=function(a){var j,e,d,g;e=d=0;for(g=_active_combos.length;0<=g?d<g:d>g;e=0<=g?++d:--d){j=_active_combos[e];if(j===a){_active_combos.splice(e,1);break}}};_add_key_to_sequence=function(a,j){var e,d,g,b;_sequence.push(a);d=_get_possible_sequences();if(d.length){g=0;for(b=d.length;g<b;g++){e=d[g];_prevent_default(j,e.prevent_default)}_sequence_timer&&clearTimeout(_sequence_timer);_sequence_timer=setTimeout(function(){return _sequence=[]},800)}else _sequence=[]};
_get_possible_sequences=function(){var a,j,e,d,g,b,f,h,o,u,q;d=[];b=0;for(o=_registered_combos.length;b<o;b++){a=_registered_combos[b];j=f=1;for(u=_sequence.length;1<=u?f<=u:f>=u;j=1<=u?++f:--f){g=_sequence.slice(-j);if(a.is_sequence){if(__indexOf.call(a.keys,"shift")<0){g=g.filter(function(a){return a!=="shift"});if(!g.length)continue}j=h=0;for(q=g.length;0<=q?h<q:h>q;j=0<=q?++h:--h)if(a.keys[j]===g[j])e=true;else{e=false;break}e&&d.push(a)}}}return d};
_get_sequence=function(a){var j,e,d,g,b,f,h,o,u,q,l;f=0;for(u=_registered_combos.length;f<u;f++){j=_registered_combos[f];if(j.is_sequence){e=h=1;for(q=_sequence.length;1<=q?h<=q:h>=q;e=1<=q?++h:--h){b=_sequence.filter(function(a){return __indexOf.call(j.keys,"shift")>=0?true:a!=="shift"}).slice(-e);if(j.keys.length===b.length){e=o=0;for(l=b.length;0<=l?o<l:o>l;e=0<=l?++o:--o){g=b[e];if(!(__indexOf.call(j.keys,"shift")<0&&g==="shift")&&!(a==="shift"&&__indexOf.call(j.keys,"shift")<0))if(j.keys[e]===
g)d=true;else{d=false;break}}}}if(d)return j}}return false};_convert_to_shifted_key=function(a,j){var e;if(!j.shiftKey)return false;e=_keycode_shifted_keys[a];return e!=null?e:false};
_handle_combo_down=function(a,j,e){if(__indexOf.call(a.keys,j)<0)return false;_prevent_default(e,a&&a.prevent_default);if(__indexOf.call(_keys_down,j)>=0&&!_allow_key_repeat(a))return false;_add_to_active_combos(a,j);a.keyup_fired=false;if(a.is_counting&&typeof a.on_keydown==="function")a.count=a.count+1;return _fire("keydown",a,e)};
_key_down=function(a,j){var e,d,g,b;(d=_convert_to_shifted_key(a,j))&&(a=d);_add_key_to_sequence(a,j);(d=_get_sequence(a))&&_fire("keydown",d,j);for(e in _modifier_event_mapping){d=_modifier_event_mapping[e];if(j[d]){e==="meta"&&(e=_metakey);e===a||__indexOf.call(_keys_down,e)>=0||_keys_down.push(e)}}for(e in _modifier_event_mapping){d=_modifier_event_mapping[e];e==="meta"&&(e=_metakey);if(e!==a&&__indexOf.call(_keys_down,e)>=0&&!j[d]){d=g=0;for(b=_keys_down.length;0<=b?g<b:g>b;d=0<=b?++g:--g)_keys_down[d]===
e&&_keys_down.splice(d,1)}}d=_get_active_combos(a);g=0;for(b=d.length;g<b;g++){e=d[g];_handle_combo_down(e,a,j)}d=_get_potential_combos(a);if(d.length){g=0;for(b=d.length;g<b;g++){e=d[g];_prevent_default(j,e.prevent_default)}}__indexOf.call(_keys_down,a)<0&&_keys_down.push(a)};
_handle_combo_up=function(a,j){var e;e=_keys_remain(a);if(!a.keyup_fired&&(!a.is_counting||a.is_counting&&e)){_fire("keyup",a,j);if(a.is_counting&&typeof a.on_keyup==="function"&&typeof a.on_keydown!=="function")a.count=a.count+1}if(!e){a.is_counting&&_fire("release",a,j);_remove_from_active_combos(a)}};
_key_up=function(a,j){var e,d,g,b,f,h;d=a;(g=_convert_to_shifted_key(a,j))&&(a=g);g=_keycode_shifted_keys[d];j.shiftKey?g&&__indexOf.call(_keys_down,g)>=0||(a=d):d&&__indexOf.call(_keys_down,d)>=0||(a=g);(b=_get_sequence(a))&&_fire("keyup",b,j);if(__indexOf.call(_keys_down,a)<0)return false;b=f=0;for(h=_keys_down.length;0<=h?f<h:f>h;b=0<=h?++f:--f)if((e=_keys_down[b])===a||e===g||e===d){_keys_down.splice(b,1);break}d=_active_combos.length;g=[];b=0;for(f=_active_combos.length;b<f;b++){e=_active_combos[b];
__indexOf.call(e.keys,a)>=0&&g.push(e)}b=0;for(f=g.length;b<f;b++){e=g[b];_handle_combo_up(e,j)}if(d>1){d=0;for(b=_active_combos.length;d<b;d++){e=_active_combos[d];e===void 0||__indexOf.call(g,e)>=0||_keys_remain(e)||_remove_from_active_combos(e)}}};_receive_input=function(a,j){var e;if(_prevent_capture)_keys_down.length&&(_keys_down=[]);else if(j||_keys_down.length)if(e=_convert_key_to_readable(a.keyCode))return j?_key_down(e,a):_key_up(e,a)};
_unregister_combo=function(a){var j,e,d,g;g=[];j=e=0;for(d=_registered_combos.length;0<=d?e<d:e>d;j=0<=d?++e:--e)if(a===_registered_combos[j]){_registered_combos.splice(j,1);break}else g.push(void 0);return g};
_validate_combo=function(a){var j,e,d,g,b;a.keys.length||_log_error("You're trying to bind a combo with no keys.");e=g=0;for(b=a.keys.length;0<=b?g<b:g>b;e=0<=b?++g:--g){d=a.keys[e];(j=_keycode_alternate_names[d])&&(d=a.keys[e]=j);d==="meta"&&a.keys.splice(e,1,_metakey);d==="cmd"&&_log_error('Warning: use the "meta" key rather than "cmd" for Windows compatibility')}b=a.keys;j=0;for(g=b.length;j<g;j++){d=b[j];if(__indexOf.call(_valid_keys,d)<0){_log_error('Do not recognize the key "'+d+'"');return false}}if(__indexOf.call(a.keys,
"meta")>=0||__indexOf.call(a.keys,"cmd")>=0){j=a.keys.slice();g=0;for(b=_modifier_keys.length;g<b;g++){d=_modifier_keys[g];(e=j.indexOf(d))>-1&&j.splice(e,1)}j.length>1&&_log_error("META and CMD key combos cannot have more than 1 non-modifier keys",a,j)}return true};_decide_meta_key=function(){navigator.userAgent.indexOf("Mac OS X")!==-1&&(_metakey="cmd")};
_bug_catcher=function(a){var j;if(__indexOf.call(_keys_down,"cmd")>=0&&(j=_convert_key_to_readable(a.keyCode))!=="cmd"&&j!=="shift"&&j!=="alt"&&j!=="caps"&&j!=="tab")return _receive_input(a,false)};_change_keycodes_by_browser=function(){navigator.userAgent.indexOf("Opera")!==-1&&(_keycode_dictionary["17"]="cmd")};
_bind_key_events=function(){document.body.onkeydown=function(a){_receive_input(a,true);return _bug_catcher(a)};document.body.onkeyup=function(a){return _receive_input(a,false)};return window.onblur=function(){var a,j,e;j=0;for(e=_keys_down.length;j<e;j++){a=_keys_down[j];_key_up(a,{})}_keys_down=[];return[]}};_init=function(){_decide_meta_key();return _change_keycodes_by_browser()};window.keypress={};keypress.force_event_defaults=!1;keypress.suppress_event_defaults=!1;
keypress.reset=function(){_registered_combos=[]};keypress.combo=function(a,j,e){e==null&&(e=false);return keypress.register_combo({keys:a,on_keydown:j,prevent_default:e})};keypress.counting_combo=function(a,j,e){e==null&&(e=false);return keypress.register_combo({keys:a,is_counting:true,is_ordered:true,on_keydown:j,prevent_default:e})};keypress.sequence_combo=function(a,j,e){e==null&&(e=false);return keypress.register_combo({keys:a,on_keydown:j,is_sequence:true,prevent_default:e})};
keypress.register_combo=function(a){var j,e;if(typeof a.keys==="string")a.keys=a.keys.split(" ");for(j in _combo_defaults)if(__hasProp.call(_combo_defaults,j)){e=_combo_defaults[j];a[j]==null&&(a[j]=e)}if(_validate_combo(a)){_registered_combos.push(a);return true}};keypress.register_many=function(a){var j,e,d,g;g=[];e=0;for(d=a.length;e<d;e++){j=a[e];g.push(keypress.register_combo(j))}return g};
keypress.unregister_combo=function(a){var j,e,d;if(!a)return false;if(a.keys)return _unregister_combo(a);d=[];j=0;for(e=_registered_combos.length;j<e;j++)(a=_registered_combos[j])&&(_compare_arrays(keys,a.keys)?d.push(_unregister_combo(a)):d.push(void 0));return d};keypress.unregister_many=function(a){var j,e,d,g;g=[];e=0;for(d=a.length;e<d;e++){j=a[e];g.push(keypress.unregister_combo(j))}return g};keypress.listen=function(){return _prevent_capture=false};
keypress.stop_listening=function(){return _prevent_capture=true};_convert_key_to_readable=function(a){return _keycode_dictionary[a]};_modifier_event_mapping={meta:"metaKey",ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey"};_keycode_alternate_names={control:"ctrl",command:"cmd","break":"pause",windows:"cmd",option:"alt",caps_lock:"caps",apostrophe:"'",semicolon:";",tilde:"~",accent:"`",scroll_lock:"scroll",num_lock:"num"};
_keycode_shifted_keys={"/":"?",".":">",",":"<","'":'"',";":":","[":"{","]":"}","\\":"|","`":"~","=":"+","-":"_",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(","0":")"};
_keycode_dictionary={"0":"\\",8:"backspace",9:"tab",12:"num",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",
89:"y",90:"z",91:"cmd",92:"cmd",93:"cmd",96:"num_0",97:"num_1",98:"num_2",99:"num_3",100:"num_4",101:"num_5",102:"num_6",103:"num_7",104:"num_8",105:"num_9",106:"num_multiply",107:"num_add",108:"num_enter",109:"num_subtract",110:"num_decimal",111:"num_divide",124:"print",144:"num",145:"scroll",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"cmd",57392:"ctrl",63289:"num"};for(_ in _keycode_dictionary)key=_keycode_dictionary[_],_valid_keys.push(key);
for(_ in _keycode_shifted_keys)key=_keycode_shifted_keys[_],_valid_keys.push(key);_init();_ready=function(a){return/in/.test(document.readyState)?setTimeout(function(){return _ready(a)},9):a()};_ready(_bind_key_events);
(function(a,j){function e(a,b,d){if(d===j&&a.nodeType===1){d="data-"+b.replace(Sb,"-$1").toLowerCase();d=a.getAttribute(d);if(typeof d==="string"){try{d=d==="true"?true:d==="false"?false:d==="null"?null:m.isNumeric(d)?+d:xa.test(d)?m.parseJSON(d):d}catch(f){}m.data(a,b,d)}else d=j}return d}function d(a){for(var b in a)if(!(b==="data"&&m.isEmptyObject(a[b]))&&b!=="toJSON")return false;return true}function g(a,b,d){var f=b+"defer",e=b+"queue",h=b+"mark",g=m._data(a,f);g&&((d==="queue"||!m._data(a,e))&&
(d==="mark"||!m._data(a,h)))&&setTimeout(function(){if(!m._data(a,e)&&!m._data(a,h)){m.removeData(a,f,true);g.fire()}},0)}function b(){return false}function f(){return true}function h(a,b,d){b=b||0;if(m.isFunction(b))return m.grep(a,function(a,f){return!!b.call(a,f,a)===d});if(b.nodeType)return m.grep(a,function(a){return a===b===d});if(typeof b==="string"){var f=m.grep(a,function(a){return a.nodeType===1});if(xc.test(b))return m.filter(b,f,!d);b=m.filter(b,f)}return m.grep(a,function(a){return m.inArray(a,
b)>=0===d})}function o(a){var b=cc.split("|"),a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function u(a,b){if(b.nodeType===1&&m.hasData(a)){var d,f,e;f=m._data(a);var h=m._data(b,f),g=f.events;if(g){delete h.handle;h.events={};for(d in g){f=0;for(e=g[d].length;f<e;f++)m.event.add(b,d,g[d][f])}}if(h.data)h.data=m.extend({},h.data)}}function q(a,b){var d;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes();b.mergeAttributes&&b.mergeAttributes(a);
d=b.nodeName.toLowerCase();if(d==="object")b.outerHTML=a.outerHTML;else if(d==="input"&&(a.type==="checkbox"||a.type==="radio")){if(a.checked)b.defaultChecked=b.checked=a.checked;if(b.value!==a.value)b.value=a.value}else if(d==="option")b.selected=a.defaultSelected;else if(d==="input"||d==="textarea")b.defaultValue=a.defaultValue;else if(d==="script"&&b.text!==a.text)b.text=a.text;b.removeAttribute(m.expando);b.removeAttribute("_submit_attached");b.removeAttribute("_change_attached")}}function l(a){return typeof a.getElementsByTagName!==
"undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!=="undefined"?a.querySelectorAll("*"):[]}function k(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function n(a){var b=(a.nodeName||"").toLowerCase();b==="input"?k(a):b!=="script"&&typeof a.getElementsByTagName!=="undefined"&&m.grep(a.getElementsByTagName("input"),k)}function x(a,b,d){var f=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0;if(f>0){if(d!=="border")for(;e<4;e=e+2){d||(f=f-(parseFloat(m.css(a,
"padding"+Ra[e]))||0));f=d==="margin"?f+(parseFloat(m.css(a,d+Ra[e]))||0):f-(parseFloat(m.css(a,"border"+Ra[e]+"Width"))||0)}return f+"px"}f=cb(a,b);if(f<0||f==null)f=a.style[b];if(Rb.test(f))return f;f=parseFloat(f)||0;if(d)for(;e<4;e=e+2){f=f+(parseFloat(m.css(a,"padding"+Ra[e]))||0);d!=="padding"&&(f=f+(parseFloat(m.css(a,"border"+Ra[e]+"Width"))||0));d==="margin"&&(f=f+(parseFloat(m.css(a,d+Ra[e]))||0))}return f+"px"}function v(a){return function(b,d){if(typeof b!=="string"){d=b;b="*"}if(m.isFunction(d))for(var f=
b.toLowerCase().split(kc),e=0,h=f.length,g,j;e<h;e++){g=f[e];(j=/^\+/.test(g))&&(g=g.substr(1)||"*");g=a[g]=a[g]||[];g[j?"unshift":"push"](d)}}}function w(a,b,d,f,e,h){e=e||b.dataTypes[0];h=h||{};h[e]=true;for(var e=a[e],g=0,k=e?e.length:0,n=a===Wb,l;g<k&&(n||!l);g++){l=e[g](b,d,f);if(typeof l==="string")if(!n||h[l])l=j;else{b.dataTypes.unshift(l);l=w(a,b,d,f,l,h)}}if((n||!l)&&!h["*"])l=w(a,b,d,f,"*",h);return l}function z(a,b){var d,f,e=m.ajaxSettings.flatOptions||{};for(d in b)b[d]!==j&&((e[d]?
a:f||(f={}))[d]=b[d]);f&&m.extend(true,a,f)}function E(a,b,d,f){if(m.isArray(b))m.each(b,function(b,e){d||Mc.test(a)?f(a,e):E(a+"["+(typeof e==="object"?b:"")+"]",e,d,f)});else if(!d&&m.type(b)==="object")for(var e in b)E(a+"["+e+"]",b[e],d,f);else f(a,b)}function B(){try{return new a.XMLHttpRequest}catch(b){}}function F(){setTimeout(t,0);return Ib=m.now()}function t(){Ib=j}function G(a,b){var d={};m.each(Jb.concat.apply([],Jb.slice(0,b)),function(){d[this]=a});return d}function y(a){if(!Xb[a]){var b=
C.body,d=m("<"+a+">").appendTo(b),f=d.css("display");d.remove();if(f==="none"||f===""){if(!Ia){Ia=C.createElement("iframe");Ia.frameBorder=Ia.width=Ia.height=0}b.appendChild(Ia);if(!ob||!Ia.createElement){ob=(Ia.contentWindow||Ia.contentDocument).document;ob.write((m.support.boxModel?"<!doctype html>":"")+"<html><body>");ob.close()}d=ob.createElement(a);ob.body.appendChild(d);f=m.css(d,"display");b.removeChild(Ia)}Xb[a]=f}return Xb[a]}function A(a){return m.isWindow(a)?a:a.nodeType===9?a.defaultView||
a.parentWindow:false}var C=a.document,K=a.location,m,P=function(){if(!J.isReady){try{C.documentElement.doScroll("left")}catch(a){setTimeout(P,1);return}J.ready()}},J=function(a,b){return new J.fn.init(a,b,I)},T=a.jQuery,Q=a.$,I,M=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,H=/\S/,R=/^\s+/,N=/\s+$/,L=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,W=/^[\],:{}\s]*$/,U=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,Z=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,fa=/(?:^|:|,)(?:\s*\[)+/g,ha=/(webkit)[ \/]([\w.]+)/,
ia=/(opera)(?:.*version)?[ \/]([\w.]+)/,ja=/(msie) ([\w.]+)/,ra=/(mozilla)(?:.*? rv:([\w.]+))?/,Y=/-([a-z]|[0-9])/ig,X=/^-ms-/,da=function(a,b){return(b+"").toUpperCase()},ba=a.navigator.userAgent,la,ea,na,Ga=Object.prototype.toString,za=Object.prototype.hasOwnProperty,Aa=Array.prototype.push,ma=Array.prototype.slice,sa=String.prototype.trim,ta=Array.prototype.indexOf,va={};J.fn=J.prototype={constructor:J,init:function(a,b,d){var f;if(!a)return this;if(a.nodeType){this.context=this[0]=a;this.length=
1;return this}if(a==="body"&&!b&&C.body){this.context=C;this[0]=C.body;this.selector=a;this.length=1;return this}if(typeof a==="string"){if((f=a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?[null,a,null]:M.exec(a))&&(f[1]||!b)){if(f[1]){d=(b=b instanceof J?b[0]:b)?b.ownerDocument||b:C;if(a=L.exec(a))if(J.isPlainObject(b)){a=[C.createElement(a[1])];J.fn.attr.call(a,b,true)}else a=[d.createElement(a[1])];else{a=J.buildFragment([f[1]],[d]);a=(a.cacheable?J.clone(a.fragment):a.fragment).childNodes}return J.merge(this,
a)}if((b=C.getElementById(f[2]))&&b.parentNode){if(b.id!==f[2])return d.find(a);this.length=1;this[0]=b}this.context=C;this.selector=a;return this}return!b||b.jquery?(b||d).find(a):this.constructor(b).find(a)}if(J.isFunction(a))return d.ready(a);if(a.selector!==j){this.selector=a.selector;this.context=a.context}return J.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return ma.call(this,0)},get:function(a){return a==null?this.toArray():
a<0?this[this.length+a]:this[a]},pushStack:function(a,b,d){var f=this.constructor();J.isArray(a)?Aa.apply(f,a):J.merge(f,a);f.prevObject=this;f.context=this.context;if(b==="find")f.selector=this.selector+(this.selector?" ":"")+d;else if(b)f.selector=this.selector+"."+b+"("+d+")";return f},each:function(a,b){return J.each(this,a,b)},ready:function(a){J.bindReady();ea.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},
slice:function(){return this.pushStack(ma.apply(this,arguments),"slice",ma.call(arguments).join(","))},map:function(a){return this.pushStack(J.map(this,function(b,d){return a.call(b,d,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:Aa,sort:[].sort,splice:[].splice};J.fn.init.prototype=J.fn;J.extend=J.fn.extend=function(){var a,b,d,f,e,h=arguments[0]||{},g=1,k=arguments.length,n=false;if(typeof h==="boolean"){n=h;h=arguments[1]||{};g=2}typeof h!=="object"&&!J.isFunction(h)&&
(h={});if(k===g){h=this;--g}for(;g<k;g++)if((a=arguments[g])!=null)for(b in a){d=h[b];f=a[b];if(h!==f)if(n&&f&&(J.isPlainObject(f)||(e=J.isArray(f)))){if(e){e=false;d=d&&J.isArray(d)?d:[]}else d=d&&J.isPlainObject(d)?d:{};h[b]=J.extend(n,d,f)}else f!==j&&(h[b]=f)}return h};J.extend({noConflict:function(b){if(a.$===J)a.$=Q;if(b&&a.jQuery===J)a.jQuery=T;return J},isReady:false,readyWait:1,holdReady:function(a){a?J.readyWait++:J.ready(true)},ready:function(a){if(a===true&&!--J.readyWait||a!==true&&!J.isReady){if(!C.body)return setTimeout(J.ready,
1);J.isReady=true;if(!(a!==true&&--J.readyWait>0)){ea.fireWith(C,[J]);J.fn.trigger&&J(C).trigger("ready").off("ready")}}},bindReady:function(){if(!ea){ea=J.Callbacks("once memory");if(C.readyState==="complete")return setTimeout(J.ready,1);if(C.addEventListener){C.addEventListener("DOMContentLoaded",na,false);a.addEventListener("load",J.ready,false)}else if(C.attachEvent){C.attachEvent("onreadystatechange",na);a.attachEvent("onload",J.ready);var b=false;try{b=a.frameElement==null}catch(d){}C.documentElement.doScroll&&
b&&P()}}},isFunction:function(a){return J.type(a)==="function"},isArray:Array.isArray||function(a){return J.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):va[Ga.call(a)]||"object"},isPlainObject:function(a){if(!a||J.type(a)!=="object"||a.nodeType||J.isWindow(a))return false;try{if(a.constructor&&!za.call(a,"constructor")&&!za.call(a.constructor.prototype,"isPrototypeOf"))return false}catch(b){return false}for(var d in a);
return d===j||za.call(a,d)},isEmptyObject:function(a){for(var b in a)return false;return true},error:function(a){throw Error(a);},parseJSON:function(b){if(typeof b!=="string"||!b)return null;b=J.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(W.test(b.replace(U,"@").replace(Z,"]").replace(fa,"")))return(new Function("return "+b))();J.error("Invalid JSON: "+b)},parseXML:function(b){if(typeof b!=="string"||!b)return null;var d,f;try{if(a.DOMParser){f=new DOMParser;d=f.parseFromString(b,"text/xml")}else{d=
new ActiveXObject("Microsoft.XMLDOM");d.async="false";d.loadXML(b)}}catch(e){d=j}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&J.error("Invalid XML: "+b);return d},noop:function(){},globalEval:function(b){b&&H.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(X,"ms-").replace(Y,da)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,b,d){var f,e=0,h=a.length,g=h===j||J.isFunction(a);
if(d)if(g)for(f in a){if(b.apply(a[f],d)===false)break}else for(;e<h;){if(b.apply(a[e++],d)===false)break}else if(g)for(f in a){if(b.call(a[f],f,a[f])===false)break}else for(;e<h;)if(b.call(a[e],e,a[e++])===false)break;return a},trim:sa?function(a){return a==null?"":sa.call(a)}:function(a){return a==null?"":a.toString().replace(R,"").replace(N,"")},makeArray:function(a,b){var d=b||[];if(a!=null){var f=J.type(a);a.length==null||f==="string"||f==="function"||f==="regexp"||J.isWindow(a)?Aa.call(d,a):
J.merge(d,a)}return d},inArray:function(a,b,d){var f;if(b){if(ta)return ta.call(b,a,d);f=b.length;for(d=d?d<0?Math.max(0,f+d):d:0;d<f;d++)if(d in b&&b[d]===a)return d}return-1},merge:function(a,b){var d=a.length,f=0;if(typeof b.length==="number")for(var e=b.length;f<e;f++)a[d++]=b[f];else for(;b[f]!==j;)a[d++]=b[f++];a.length=d;return a},grep:function(a,b,d){for(var f=[],e,d=!!d,h=0,g=a.length;h<g;h++){e=!!b(a[h],h);d!==e&&f.push(a[h])}return f},map:function(a,b,d){var f,e,h=[],g=0,k=a.length;if(a instanceof
J||k!==j&&typeof k==="number"&&(k>0&&a[0]&&a[k-1]||k===0||J.isArray(a)))for(;g<k;g++){f=b(a[g],g,d);f!=null&&(h[h.length]=f)}else for(e in a){f=b(a[e],e,d);f!=null&&(h[h.length]=f)}return h.concat.apply([],h)},guid:1,proxy:function(a,b){if(typeof b==="string")var d=a[b],b=a,a=d;if(!J.isFunction(a))return j;var f=ma.call(arguments,2),d=function(){return a.apply(b,f.concat(ma.call(arguments)))};d.guid=a.guid=a.guid||d.guid||J.guid++;return d},access:function(a,b,d,f,e,h,g){var k,n=d==null,l=0,o=a.length;
if(d&&typeof d==="object"){for(l in d)J.access(a,b,l,d[l],1,h,f);e=1}else if(f!==j){k=g===j&&J.isFunction(f);if(n)if(k){k=b;b=function(a,b,d){return k.call(J(a),d)}}else{b.call(a,f);b=null}if(b)for(;l<o;l++)b(a[l],d,k?f.call(a[l],l,b(a[l],d)):f,g);e=1}return e?a:n?b.call(a):o?b(a[0],d):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();a=ha.exec(a)||ia.exec(a)||ja.exec(a)||a.indexOf("compatible")<0&&ra.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},sub:function(){function a(b,
d){return new a.fn.init(b,d)}J.extend(true,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(d,f){f&&(f instanceof J&&!(f instanceof a))&&(f=a(f));return J.fn.init.call(this,d,f,b)};a.fn.init.prototype=a.fn;var b=a(C);return a},browser:{}});J.each(["Boolean","Number","String","Function","Array","Date","RegExp","Object"],function(a,b){va["[object "+b+"]"]=b.toLowerCase()});la=J.uaMatch(ba);if(la.browser){J.browser[la.browser]=true;J.browser.version=
la.version}if(J.browser.webkit)J.browser.safari=true;if(H.test("\u00a0")){R=/^[\s\xA0]+/;N=/[\s\xA0]+$/}I=J(C);C.addEventListener?na=function(){C.removeEventListener("DOMContentLoaded",na,false);J.ready()}:C.attachEvent&&(na=function(){if(C.readyState==="complete"){C.detachEvent("onreadystatechange",na);J.ready()}});m=J;var Fa={};m.Callbacks=function(a){var b;if(a){if(!(b=Fa[a])){b=a;var d=Fa[b]={},f,e;b=b.split(/\s+/);f=0;for(e=b.length;f<e;f++)d[b[f]]=true;b=d}}else b={};var a=b,h=[],g=[],k,n,l,
o,q,u,v=function(b){var d,f,e,g;d=0;for(f=b.length;d<f;d++){e=b[d];g=m.type(e);g==="array"?v(e):g==="function"&&(!a.unique||!w.has(e))&&h.push(e)}},x=function(b,d){d=d||[];k=!a.memory||[b,d];l=n=true;u=o||0;o=0;for(q=h.length;h&&u<q;u++)if(h[u].apply(b,d)===false&&a.stopOnFalse){k=true;break}l=false;if(h)if(a.once)k===true?w.disable():h=[];else if(g&&g.length){k=g.shift();w.fireWith(k[0],k[1])}},w={add:function(){if(h){var a=h.length;v(arguments);if(l)q=h.length;else if(k&&k!==true){o=a;x(k[0],k[1])}}return this},
remove:function(){if(h)for(var b=arguments,d=0,f=b.length;d<f;d++)for(var e=0;e<h.length;e++)if(b[d]===h[e]){if(l&&e<=q){q--;e<=u&&u--}h.splice(e--,1);if(a.unique)break}return this},has:function(a){if(h)for(var b=0,d=h.length;b<d;b++)if(a===h[b])return true;return false},empty:function(){h=[];return this},disable:function(){h=g=k=j;return this},disabled:function(){return!h},lock:function(){g=j;(!k||k===true)&&w.disable();return this},locked:function(){return!g},fireWith:function(b,d){g&&(l?a.once||
g.push([b,d]):(!a.once||!k)&&x(b,d));return this},fire:function(){w.fireWith(this,arguments);return this},fired:function(){return!!n}};return w};var qa=[].slice;m.extend({Deferred:function(a){var b=m.Callbacks("once memory"),d=m.Callbacks("once memory"),f=m.Callbacks("memory"),e="pending",h={resolve:b,reject:d,notify:f},g={done:b.add,fail:d.add,progress:f.add,state:function(){return e},isResolved:b.fired,isRejected:d.fired,then:function(a,b,d){k.done(a).fail(b).progress(d);return this},always:function(){k.done.apply(k,
arguments).fail.apply(k,arguments);return this},pipe:function(a,b,d){return m.Deferred(function(f){m.each({done:[a,"resolve"],fail:[b,"reject"],progress:[d,"notify"]},function(a,b){var d=b[0],e=b[1],h;if(m.isFunction(d))k[a](function(){if((h=d.apply(this,arguments))&&m.isFunction(h.promise))h.promise().then(f.resolve,f.reject,f.notify);else f[e+"With"](this===k?f:this,[h])});else k[a](f[e])})}).promise()},promise:function(a){if(a==null)a=g;else for(var b in g)a[b]=g[b];return a}},k=g.promise({}),
j;for(j in h){k[j]=h[j].fire;k[j+"With"]=h[j].fireWith}k.done(function(){e="resolved"},d.disable,f.lock).fail(function(){e="rejected"},b.disable,f.lock);a&&a.call(k,k);return k},when:function(a){function b(a){return function(b){f[a]=arguments.length>1?qa.call(arguments,0):b;--k||j.resolveWith(j,f)}}function d(a){return function(b){g[a]=arguments.length>1?qa.call(arguments,0):b;j.notifyWith(n,g)}}var f=qa.call(arguments,0),e=0,h=f.length,g=Array(h),k=h,j=h<=1&&a&&m.isFunction(a.promise)?a:m.Deferred(),
n=j.promise();if(h>1){for(;e<h;e++)f[e]&&f[e].promise&&m.isFunction(f[e].promise)?f[e].promise().then(b(e),j.reject,d(e)):--k;k||j.resolveWith(j,f)}else j!==a&&j.resolveWith(j,h?[a]:[]);return n}});var Ha=m,wa;var ka,Ja,Ca,eb,fb,oa,Ka,Ta,Ua,gb,La,S=C.createElement("div");S.setAttribute("className","t");S.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";Ja=S.getElementsByTagName("*");Ca=S.getElementsByTagName("a")[0];if(!Ja||!Ja.length||
!Ca)wa={};else{eb=C.createElement("select");fb=eb.appendChild(C.createElement("option"));oa=S.getElementsByTagName("input")[0];ka={leadingWhitespace:S.firstChild.nodeType===3,tbody:!S.getElementsByTagName("tbody").length,htmlSerialize:!!S.getElementsByTagName("link").length,style:/top/.test(Ca.getAttribute("style")),hrefNormalized:Ca.getAttribute("href")==="/a",opacity:/^0.55/.test(Ca.style.opacity),cssFloat:!!Ca.style.cssFloat,checkOn:oa.value==="on",optSelected:fb.selected,getSetAttribute:S.className!==
"t",enctype:!!C.createElement("form").enctype,html5Clone:C.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,pixelMargin:true};m.boxModel=ka.boxModel=C.compatMode==="CSS1Compat";oa.checked=true;ka.noCloneChecked=oa.cloneNode(true).checked;eb.disabled=true;ka.optDisabled=!fb.disabled;try{delete S.test}catch(Ab){ka.deleteExpando=
false}if(!S.addEventListener&&S.attachEvent&&S.fireEvent){S.attachEvent("onclick",function(){ka.noCloneEvent=false});S.cloneNode(true).fireEvent("onclick")}oa=C.createElement("input");oa.value="t";oa.setAttribute("type","radio");ka.radioValue=oa.value==="t";oa.setAttribute("checked","checked");oa.setAttribute("name","t");S.appendChild(oa);Ka=C.createDocumentFragment();Ka.appendChild(S.lastChild);ka.checkClone=Ka.cloneNode(true).cloneNode(true).lastChild.checked;ka.appendChecked=oa.checked;Ka.removeChild(oa);
Ka.appendChild(S);if(S.attachEvent)for(gb in{submit:1,change:1,focusin:1}){Ua="on"+gb;La=Ua in S;if(!La){S.setAttribute(Ua,"return;");La=typeof S[Ua]==="function"}ka[gb+"Bubbles"]=La}Ka.removeChild(S);Ka=eb=fb=S=oa=null;m(function(){var b,d,f,e,h=C.getElementsByTagName("body")[0];if(h){b=C.createElement("div");b.style.cssText="padding:0;margin:0;border:0;visibility:hidden;width:0;height:0;position:static;top:0;margin-top:1px";h.insertBefore(b,h.firstChild);S=C.createElement("div");b.appendChild(S);
S.innerHTML="<table><tr><td style='padding:0;margin:0;border:0;display:none'></td><td>t</td></tr></table>";Ta=S.getElementsByTagName("td");La=Ta[0].offsetHeight===0;Ta[0].style.display="";Ta[1].style.display="none";ka.reliableHiddenOffsets=La&&Ta[0].offsetHeight===0;if(a.getComputedStyle){S.innerHTML="";d=C.createElement("div");d.style.width="0";d.style.marginRight="0";S.style.width="2px";S.appendChild(d);ka.reliableMarginRight=(parseInt((a.getComputedStyle(d,null)||{marginRight:0}).marginRight,10)||
0)===0}if(typeof S.style.zoom!=="undefined"){S.innerHTML="";S.style.width=S.style.padding="1px";S.style.border=0;S.style.overflow="hidden";S.style.display="inline";S.style.zoom=1;ka.inlineBlockNeedsLayout=S.offsetWidth===3;S.style.display="block";S.style.overflow="visible";S.innerHTML="<div style='width:5px;'></div>";ka.shrinkWrapBlocks=S.offsetWidth!==3}S.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:0;visibility:hidden;";S.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;display:block;'><div style='padding:0;margin:0;border:0;display:block;overflow:hidden;'></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
d=S.firstChild;f=d.firstChild;e=d.nextSibling.firstChild.firstChild;e={doesNotAddBorder:f.offsetTop!==5,doesAddBorderForTableAndCells:e.offsetTop===5};f.style.position="fixed";f.style.top="20px";e.fixedPosition=f.offsetTop===20||f.offsetTop===15;f.style.position=f.style.top="";d.style.overflow="hidden";d.style.position="relative";e.subtractsBorderForOverflowNotVisible=f.offsetTop===-5;e.doesNotIncludeMarginInBodyOffset=h.offsetTop!==1;if(a.getComputedStyle){S.style.marginTop="1%";ka.pixelMargin=(a.getComputedStyle(S,
null)||{marginTop:0}).marginTop!=="1%"}if(typeof b.style.zoom!=="undefined")b.style.zoom=1;h.removeChild(b);S=null;m.extend(ka,e)}});wa=ka}Ha.support=wa;var xa=/^(?:\{.*\}|\[.*\])$/,Sb=/([A-Z])/g;m.extend({cache:{},uuid:0,expando:"jQuery"+(m.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(a){a=a.nodeType?m.cache[a[m.expando]]:a[m.expando];return!!a&&!d(a)},data:function(a,b,d,f){if(m.acceptData(a)){var e;
e=m.expando;var h=typeof b==="string",g=a.nodeType,k=g?m.cache:a,n=g?a[e]:a[e]&&e,l=b==="events";if(n&&k[n]&&(l||f||k[n].data)||!(h&&d===j)){n||(g?a[e]=n=++m.uuid:n=e);if(!k[n]){k[n]={};if(!g)k[n].toJSON=m.noop}if(typeof b==="object"||typeof b==="function")f?k[n]=m.extend(k[n],b):k[n].data=m.extend(k[n].data,b);e=a=k[n];if(!f){if(!a.data)a.data={};a=a.data}d!==j&&(a[m.camelCase(b)]=d);if(l&&!a[b])return e.events;if(h){d=a[b];d==null&&(d=a[m.camelCase(b)])}else d=a;return d}}},removeData:function(a,
b,f){if(m.acceptData(a)){var e,h,g,k=m.expando,j=a.nodeType,n=j?m.cache:a,l=j?a[k]:k;if(n[l]){if(b)if(e=f?n[l]:n[l].data){if(!m.isArray(b))if(b in e)b=[b];else{b=m.camelCase(b);b=b in e?[b]:b.split(" ")}h=0;for(g=b.length;h<g;h++)delete e[b[h]];if(!(f?d:m.isEmptyObject)(e))return}if(!f){delete n[l].data;if(!d(n[l]))return}m.support.deleteExpando||!n.setInterval?delete n[l]:n[l]=null;j&&(m.support.deleteExpando?delete a[k]:a.removeAttribute?a.removeAttribute(k):a[k]=null)}}},_data:function(a,b,d){return m.data(a,
b,d,true)},acceptData:function(a){if(a.nodeName){var b=m.noData[a.nodeName.toLowerCase()];if(b)return!(b===true||a.getAttribute("classid")!==b)}return true}});m.fn.extend({data:function(a,b){var d,f,h,g,k,n=this[0],l=0,o=null;if(a===j){if(this.length){o=m.data(n);if(n.nodeType===1&&!m._data(n,"parsedAttrs")){h=n.attributes;for(k=h.length;l<k;l++){g=h[l].name;if(g.indexOf("data-")===0){g=m.camelCase(g.substring(5));e(n,g,o[g])}}m._data(n,"parsedAttrs",true)}}return o}if(typeof a==="object")return this.each(function(){m.data(this,
a)});d=a.split(".",2);d[1]=d[1]?"."+d[1]:"";f=d[1]+"!";return m.access(this,function(b){if(b===j){o=this.triggerHandler("getData"+f,[d[0]]);if(o===j&&n){o=m.data(n,a);o=e(n,a,o)}return o===j&&d[1]?this.data(d[0]):o}d[1]=b;this.each(function(){var e=m(this);e.triggerHandler("setData"+f,d);m.data(this,a,b);e.triggerHandler("changeData"+f,d)})},null,b,arguments.length>1,null,false)},removeData:function(a){return this.each(function(){m.removeData(this,a)})}});m.extend({_mark:function(a,b){if(a){b=(b||
"fx")+"mark";m._data(a,b,(m._data(a,b)||0)+1)}},_unmark:function(a,b,d){if(a!==true){d=b;b=a;a=false}if(b){var d=d||"fx",f=d+"mark";if(a=a?0:(m._data(b,f)||1)-1)m._data(b,f,a);else{m.removeData(b,f,true);g(b,d,"mark")}}},queue:function(a,b,d){var f;if(a){b=(b||"fx")+"queue";f=m._data(a,b);d&&(!f||m.isArray(d)?f=m._data(a,b,m.makeArray(d)):f.push(d));return f||[]}},dequeue:function(a,b){var b=b||"fx",d=m.queue(a,b),f=d.shift(),e={};f==="inprogress"&&(f=d.shift());if(f){b==="fx"&&d.unshift("inprogress");
m._data(a,b+".run",e);f.call(a,function(){m.dequeue(a,b)},e)}if(!d.length){m.removeData(a,b+"queue "+b+".run",true);g(a,b,"queue")}}});m.fn.extend({queue:function(a,b){var d=2;if(typeof a!=="string"){b=a;a="fx";d--}return arguments.length<d?m.queue(this[0],a):b===j?this:this.each(function(){var d=m.queue(this,a,b);a==="fx"&&d[0]!=="inprogress"&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},delay:function(a,b){a=m.fx?m.fx.speeds[a]||a:a;return this.queue(b||
"fx",function(b,d){var f=setTimeout(b,a);d.stop=function(){clearTimeout(f)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){function d(){--g||f.resolveWith(e,[e])}if(typeof a!=="string"){b=a;a=j}for(var a=a||"fx",f=m.Deferred(),e=this,h=e.length,g=1,k=a+"defer",n=a+"queue",l=a+"mark",o;h--;)if(o=m.data(e[h],k,j,true)||(m.data(e[h],n,j,true)||m.data(e[h],l,j,true))&&m.data(e[h],k,m.Callbacks("once memory"),true)){g++;o.add(d)}d();return f.promise(b)}});var qb=/[\n\t\r]/g,
Va=/\s+/,Bb=/\r/g,hb=/^(?:button|input)$/i,zb=/^(?:button|input|object|select|textarea)$/i,Sa=/^a(?:rea)?$/i,Wa=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Cb=m.support.getSetAttribute,ya,rb,yb;m.fn.extend({attr:function(a,b){return m.access(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})},prop:function(a,b){return m.access(this,m.prop,a,b,arguments.length>
1)},removeProp:function(a){a=m.propFix[a]||a;return this.each(function(){try{this[a]=j;delete this[a]}catch(b){}})},addClass:function(a){var b,d,f,e,h,g,k;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(a&&typeof a==="string"){b=a.split(Va);d=0;for(f=this.length;d<f;d++){e=this[d];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{h=" "+e.className+" ";g=0;for(k=b.length;g<k;g++)~h.indexOf(" "+b[g]+" ")||(h=h+(b[g]+" "));e.className=
m.trim(h)}}}return this},removeClass:function(a){var b,d,f,e,h,g,k;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a==="string"||a===j){b=(a||"").split(Va);d=0;for(f=this.length;d<f;d++){e=this[d];if(e.nodeType===1&&e.className)if(a){h=(" "+e.className+" ").replace(qb," ");g=0;for(k=b.length;g<k;g++)h=h.replace(" "+b[g]+" "," ");e.className=m.trim(h)}else e.className=""}}return this},toggleClass:function(a,b){var d=typeof a,f=typeof b===
"boolean";return m.isFunction(a)?this.each(function(d){m(this).toggleClass(a.call(this,d,this.className,b),b)}):this.each(function(){if(d==="string")for(var e,h=0,g=m(this),k=b,j=a.split(Va);e=j[h++];){k=f?k:!g.hasClass(e);g[k?"addClass":"removeClass"](e)}else if(d==="undefined"||d==="boolean"){this.className&&m._data(this,"__className__",this.className);this.className=this.className||a===false?"":m._data(this,"__className__")||""}})},hasClass:function(a){for(var a=" "+a+" ",b=0,d=this.length;b<d;b++)if(this[b].nodeType===
1&&(" "+this[b].className+" ").replace(qb," ").indexOf(a)>-1)return true;return false},val:function(a){var b,d,f,e=this[0];if(arguments.length){f=m.isFunction(a);return this.each(function(d){var e=m(this);if(this.nodeType===1){d=f?a.call(this,d,e.val()):a;d==null?d="":typeof d==="number"?d=d+"":m.isArray(d)&&(d=m.map(d,function(a){return a==null?"":a+""}));b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()];if(!b||!("set"in b)||b.set(this,d,"value")===j)this.value=d}})}if(e){if((b=m.valHooks[e.type]||
m.valHooks[e.nodeName.toLowerCase()])&&"get"in b&&(d=b.get(e,"value"))!==j)return d;d=e.value;return typeof d==="string"?d.replace(Bb,""):d==null?"":d}}});m.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,d,f=a.selectedIndex,e=[],h=a.options,g=a.type==="select-one";if(f<0)return null;a=g?f:0;for(d=g?f+1:h.length;a<d;a++){b=h[a];if(b.selected&&(m.support.optDisabled?!b.disabled:b.getAttribute("disabled")===null)&&
(!b.parentNode.disabled||!m.nodeName(b.parentNode,"optgroup"))){b=m(b).val();if(g)return b;e.push(b)}}return g&&!e.length&&h.length?m(h[f]).val():e},set:function(a,b){var d=m.makeArray(b);m(a).find("option").each(function(){this.selected=m.inArray(m(this).val(),d)>=0});if(!d.length)a.selectedIndex=-1;return d}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(a,b,d,f){var e,h,g=a.nodeType;if(a&&!(g===3||g===8||g===2)){if(f&&b in m.attrFn)return m(a)[b](d);
if(typeof a.getAttribute==="undefined")return m.prop(a,b,d);if(f=g!==1||!m.isXMLDoc(a)){b=b.toLowerCase();h=m.attrHooks[b]||(Wa.test(b)?rb:ya)}if(d!==j)if(d===null)m.removeAttr(a,b);else{if(h&&"set"in h&&f&&(e=h.set(a,d,b))!==j)return e;a.setAttribute(b,""+d);return d}else{if(h&&"get"in h&&f&&(e=h.get(a,b))!==null)return e;e=a.getAttribute(b);return e===null?j:e}}},removeAttr:function(a,b){var d,f,e,h,g,k=0;if(b&&a.nodeType===1){f=b.toLowerCase().split(Va);for(h=f.length;k<h;k++)if(e=f[k]){d=m.propFix[e]||
e;(g=Wa.test(e))||m.attr(a,e,"");a.removeAttribute(Cb?e:d);g&&d in a&&(a[d]=false)}}},attrHooks:{type:{set:function(a,b){if(hb.test(a.nodeName)&&a.parentNode)m.error("type property can't be changed");else if(!m.support.radioValue&&b==="radio"&&m.nodeName(a,"input")){var d=a.value;a.setAttribute("type",b);if(d)a.value=d;return b}}},value:{get:function(a,b){return ya&&m.nodeName(a,"button")?ya.get(a,b):b in a?a.value:null},set:function(a,b,d){if(ya&&m.nodeName(a,"button"))return ya.set(a,b,d);a.value=
b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,b,d){var f,e,h;h=a.nodeType;if(a&&!(h===3||h===8||h===2)){if(h=h!==1||!m.isXMLDoc(a)){b=m.propFix[b]||b;e=m.propHooks[b]}return d!==j?e&&"set"in e&&(f=e.set(a,d,b))!==j?f:a[b]=d:e&&"get"in e&&(f=e.get(a,b))!==
null?f:a[b]}},propHooks:{tabIndex:{get:function(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?parseInt(b.value,10):zb.test(a.nodeName)||Sa.test(a.nodeName)&&a.href?0:j}}}});m.attrHooks.tabindex=m.propHooks.tabIndex;rb={get:function(a,b){var d,f=m.prop(a,b);return f===true||typeof f!=="boolean"&&(d=a.getAttributeNode(b))&&d.nodeValue!==false?b.toLowerCase():j},set:function(a,b,d){if(b===false)m.removeAttr(a,d);else{b=m.propFix[d]||d;b in a&&(a[b]=true);a.setAttribute(d,d.toLowerCase())}return d}};
if(!Cb){yb={name:true,id:true,coords:true};ya=m.valHooks.button={get:function(a,b){var d;return(d=a.getAttributeNode(b))&&(yb[b]?d.nodeValue!=="":d.specified)?d.nodeValue:j},set:function(a,b,d){var f=a.getAttributeNode(d);if(!f){f=C.createAttribute(d);a.setAttributeNode(f)}return f.nodeValue=b+""}};m.attrHooks.tabindex.set=ya.set;m.each(["width","height"],function(a,b){m.attrHooks[b]=m.extend(m.attrHooks[b],{set:function(a,d){if(d===""){a.setAttribute(b,"auto");return d}}})});m.attrHooks.contenteditable=
{get:ya.get,set:function(a,b,d){b===""&&(b="false");ya.set(a,b,d)}}}m.support.hrefNormalized||m.each(["href","src","width","height"],function(a,b){m.attrHooks[b]=m.extend(m.attrHooks[b],{get:function(a){a=a.getAttribute(b,2);return a===null?j:a}})});if(!m.support.style)m.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||j},set:function(a,b){return a.style.cssText=""+b}};if(!m.support.optSelected)m.propHooks.selected=m.extend(m.propHooks.selected,{get:function(a){if(a=a.parentNode){a.selectedIndex;
a.parentNode&&a.parentNode.selectedIndex}return null}});if(!m.support.enctype)m.propFix.enctype="encoding";m.support.checkOn||m.each(["radio","checkbox"],function(){m.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}});m.each(["radio","checkbox"],function(){m.valHooks[this]=m.extend(m.valHooks[this],{set:function(a,b){if(m.isArray(b))return a.checked=m.inArray(m(a).val(),b)>=0}})});var pa=/^(?:textarea|input|select)$/i,ib=/^([^\.]*)?(?:\.(.+))?$/,Db=/(?:^|\s)hover(\.\S+)?\b/,
jb=/^key/,Tb=/^(?:mouse|contextmenu)|click/,Eb=/^(?:focusinfocus|focusoutblur)$/,Ub=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,Vb=function(a){if(a=Ub.exec(a)){a[1]=(a[1]||"").toLowerCase();a[3]=a[3]&&RegExp("(?:^|\\s)"+a[3]+"(?:\\s|$)")}return a},sb=function(a){return m.event.special.hover?a:a.replace(Db,"mouseenter$1 mouseleave$1")};m.event={add:function(a,b,d,f,e){var h,g,k,n,l,o,q,u,v;if(!(a.nodeType===3||a.nodeType===8||!b||!d||!(h=m._data(a)))){if(d.handler){q=d;d=q.handler;e=q.selector}if(!d.guid)d.guid=
m.guid++;k=h.events;if(!k)h.events=k={};g=h.handle;if(!g){h.handle=g=function(a){return typeof m!=="undefined"&&(!a||m.event.triggered!==a.type)?m.event.dispatch.apply(g.elem,arguments):j};g.elem=a}b=m.trim(sb(b)).split(" ");for(h=0;h<b.length;h++){n=ib.exec(b[h])||[];l=n[1];o=(n[2]||"").split(".").sort();v=m.event.special[l]||{};l=(e?v.delegateType:v.bindType)||l;v=m.event.special[l]||{};n=m.extend({type:l,origType:n[1],data:f,handler:d,guid:d.guid,selector:e,quick:e&&Vb(e),namespace:o.join(".")},
q);u=k[l];if(!u){u=k[l]=[];u.delegateCount=0;if(!v.setup||v.setup.call(a,f,o,g)===false)a.addEventListener?a.addEventListener(l,g,false):a.attachEvent&&a.attachEvent("on"+l,g)}if(v.add){v.add.call(a,n);if(!n.handler.guid)n.handler.guid=d.guid}e?u.splice(u.delegateCount++,0,n):u.push(n);m.event.global[l]=true}a=null}},global:{},remove:function(a,b,d,f,e){var h=m.hasData(a)&&m._data(a),g,k,j,n,l,o,q,u,v,x;if(h&&(q=h.events)){b=m.trim(sb(b||"")).split(" ");for(g=0;g<b.length;g++){k=ib.exec(b[g])||[];
j=n=k[1];k=k[2];if(j){u=m.event.special[j]||{};j=(f?u.delegateType:u.bindType)||j;v=q[j]||[];l=v.length;k=k?RegExp("(^|\\.)"+k.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(o=0;o<v.length;o++){x=v[o];if((e||n===x.origType)&&(!d||d.guid===x.guid)&&(!k||k.test(x.namespace))&&(!f||f===x.selector||f==="**"&&x.selector)){v.splice(o--,1);x.selector&&v.delegateCount--;u.remove&&u.remove.call(a,x)}}if(v.length===0&&l!==v.length){(!u.teardown||u.teardown.call(a,k)===false)&&m.removeEvent(a,j,
h.handle);delete q[j]}}else for(j in q)m.event.remove(a,j+b[g],d,f,true)}if(m.isEmptyObject(q)){if(b=h.handle)b.elem=null;m.removeData(a,["events","handle"],true)}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(b,d,f,e){if(!f||!(f.nodeType===3||f.nodeType===8)){var h=b.type||b,g=[],k,n,l,o,q;if(!Eb.test(h+m.event.triggered)){if(h.indexOf("!")>=0){h=h.slice(0,-1);k=true}if(h.indexOf(".")>=0){g=h.split(".");h=g.shift();g.sort()}if(f&&!m.event.customEvent[h]||m.event.global[h]){b=
typeof b==="object"?b[m.expando]?b:new m.Event(h,b):new m.Event(h);b.type=h;b.isTrigger=true;b.exclusive=k;b.namespace=g.join(".");b.namespace_re=b.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.)?")+"(\\.|$)"):null;k=h.indexOf(":")<0?"on"+h:"";if(f){b.result=j;if(!b.target)b.target=f;d=d!=null?m.makeArray(d):[];d.unshift(b);l=m.event.special[h]||{};if(!(l.trigger&&l.trigger.apply(f,d)===false)){q=[[f,l.bindType||h]];if(!e&&!l.noBubble&&!m.isWindow(f)){o=l.delegateType||h;g=Eb.test(o+h)?f:f.parentNode;
for(n=null;g;g=g.parentNode){q.push([g,o]);n=g}n&&n===f.ownerDocument&&q.push([n.defaultView||n.parentWindow||a,o])}for(n=0;n<q.length&&!b.isPropagationStopped();n++){g=q[n][0];b.type=q[n][1];(o=(m._data(g,"events")||{})[b.type]&&m._data(g,"handle"))&&o.apply(g,d);(o=k&&g[k])&&(m.acceptData(g)&&o.apply(g,d)===false)&&b.preventDefault()}b.type=h;if(!e&&!b.isDefaultPrevented()&&(!l._default||l._default.apply(f.ownerDocument,d)===false)&&!(h==="click"&&m.nodeName(f,"a"))&&m.acceptData(f))if(k&&f[h]&&
(h!=="focus"&&h!=="blur"||b.target.offsetWidth!==0)&&!m.isWindow(f)){(n=f[k])&&(f[k]=null);m.event.triggered=h;f[h]();m.event.triggered=j;n&&(f[k]=n)}return b.result}}else{f=m.cache;for(n in f)f[n].events&&f[n].events[h]&&m.event.trigger(b,d,f[n].handle.elem,true)}}}}},dispatch:function(b){var b=m.event.fix(b||a.event),d=(m._data(this,"events")||{})[b.type]||[],f=d.delegateCount,e=[].slice.call(arguments,0),h=!b.exclusive&&!b.namespace,g=m.event.special[b.type]||{},k=[],n,l,o,q,u,v,x;e[0]=b;b.delegateTarget=
this;if(!(g.preDispatch&&g.preDispatch.call(this,b)===false)){if(f&&!(b.button&&b.type==="click")){o=m(this);o.context=this.ownerDocument||this;for(l=b.target;l!=this;l=l.parentNode||this)if(l.disabled!==true){u={};v=[];o[0]=l;for(n=0;n<f;n++){q=d[n];x=q.selector;if(u[x]===j){var w=u,y=x,H;if(q.quick){H=q.quick;var t=l.attributes||{};H=(!H[1]||l.nodeName.toLowerCase()===H[1])&&(!H[2]||(t.id||{}).value===H[2])&&(!H[3]||H[3].test((t["class"]||{}).value))}else H=o.is(x);w[y]=H}u[x]&&v.push(q)}v.length&&
k.push({elem:l,matches:v})}}d.length>f&&k.push({elem:this,matches:d.slice(f)});for(n=0;n<k.length&&!b.isPropagationStopped();n++){f=k[n];b.currentTarget=f.elem;for(d=0;d<f.matches.length&&!b.isImmediatePropagationStopped();d++){q=f.matches[d];if(h||!b.namespace&&!q.namespace||b.namespace_re&&b.namespace_re.test(q.namespace)){b.data=q.data;b.handleObj=q;q=((m.event.special[q.origType]||{}).handle||q.handler).apply(f.elem,e);if(q!==j){b.result=q;if(q===false){b.preventDefault();b.stopPropagation()}}}}}g.postDispatch&&
g.postDispatch.call(this,b);return b.result}},props:["attrChange","attrName","relatedNode","srcElement","altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","relatedTarget","shiftKey","target","timeStamp","view","which"],fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){if(a.which==null)a.which=b.charCode!=null?b.charCode:b.keyCode;return a}},mouseHooks:{props:["button","buttons","clientX","clientY","fromElement","offsetX","offsetY","pageX",
"pageY","screenX","screenY","toElement"],filter:function(a,b){var d,f,e=b.button,h=b.fromElement;if(a.pageX==null&&b.clientX!=null){d=a.target.ownerDocument||C;f=d.documentElement;d=d.body;a.pageX=b.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0);a.pageY=b.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0)}if(!a.relatedTarget&&h)a.relatedTarget=h===a.target?b.toElement:h;if(!a.which&&e!==j)a.which=e&1?1:e&2?3:e&4?2:0;return a}},fix:function(a){if(a[m.expando])return a;
var b,d,f=a,e=m.event.fixHooks[a.type]||{},h=e.props?this.props.concat(e.props):this.props,a=m.Event(f);for(b=h.length;b;){d=h[--b];a[d]=f[d]}if(!a.target)a.target=f.srcElement||C;if(a.target.nodeType===3)a.target=a.target.parentNode;if(a.metaKey===j)a.metaKey=a.ctrlKey;return e.filter?e.filter(a,f):a},special:{ready:{setup:m.bindReady},load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,d){if(m.isWindow(this))this.onbeforeunload=d},
teardown:function(a,b){if(this.onbeforeunload===b)this.onbeforeunload=null}}},simulate:function(a,b,d,f){a=m.extend(new m.Event,d,{type:a,isSimulated:true,originalEvent:{}});f?m.event.trigger(a,null,b):m.event.dispatch.call(b,a);a.isDefaultPrevented()&&d.preventDefault()}};m.event.handle=m.event.dispatch;m.removeEvent=C.removeEventListener?function(a,b,d){a.removeEventListener&&a.removeEventListener(b,d,false)}:function(a,b,d){a.detachEvent&&a.detachEvent("on"+b,d)};m.Event=function(a,d){if(!(this instanceof
m.Event))return new m.Event(a,d);if(a&&a.type){this.originalEvent=a;this.type=a.type;this.isDefaultPrevented=a.defaultPrevented||a.returnValue===false||a.getPreventDefault&&a.getPreventDefault()?f:b}else this.type=a;d&&m.extend(this,d);this.timeStamp=a&&a.timeStamp||m.now();this[m.expando]=true};m.Event.prototype={preventDefault:function(){this.isDefaultPrevented=f;var a=this.originalEvent;if(a)a.preventDefault?a.preventDefault():a.returnValue=false},stopPropagation:function(){this.isPropagationStopped=
f;var a=this.originalEvent;if(a){a.stopPropagation&&a.stopPropagation();a.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=f;this.stopPropagation()},isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b};m.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var d=a.relatedTarget,f=a.handleObj,e;if(!d||d!==this&&!m.contains(this,d)){a.type=f.origType;e=f.handler.apply(this,
arguments);a.type=b}return e}}});if(!m.support.submitBubbles)m.event.special.submit={setup:function(){if(m.nodeName(this,"form"))return false;m.event.add(this,"click._submit keypress._submit",function(a){a=a.target;if((a=m.nodeName(a,"input")||m.nodeName(a,"button")?a.form:j)&&!a._submit_attached){m.event.add(a,"submit._submit",function(a){a._submit_bubble=true});a._submit_attached=true}})},postDispatch:function(a){if(a._submit_bubble){delete a._submit_bubble;this.parentNode&&!a.isTrigger&&m.event.simulate("submit",
this.parentNode,a,true)}},teardown:function(){if(m.nodeName(this,"form"))return false;m.event.remove(this,"._submit")}};if(!m.support.changeBubbles)m.event.special.change={setup:function(){if(pa.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){m.event.add(this,"propertychange._change",function(a){if(a.originalEvent.propertyName==="checked")this._just_changed=true});m.event.add(this,"click._change",function(a){if(this._just_changed&&!a.isTrigger){this._just_changed=false;m.event.simulate("change",
this,a,true)}})}return false}m.event.add(this,"beforeactivate._change",function(a){a=a.target;if(pa.test(a.nodeName)&&!a._change_attached){m.event.add(a,"change._change",function(a){this.parentNode&&(!a.isSimulated&&!a.isTrigger)&&m.event.simulate("change",this.parentNode,a,true)});a._change_attached=true}})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){m.event.remove(this,
"._change");return pa.test(this.nodeName)}};m.support.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,f=function(a){m.event.simulate(b,a.target,m.event.fix(a),true)};m.event.special[b]={setup:function(){d++===0&&C.addEventListener(a,f,true)},teardown:function(){--d===0&&C.removeEventListener(a,f,true)}}});m.fn.extend({on:function(a,d,f,e,h){var g,k;if(typeof a==="object"){if(typeof d!=="string"){f=f||d;d=j}for(k in a)this.on(k,d,f,a[k],h);return this}if(f==null&&e==
null){e=d;f=d=j}else if(e==null)if(typeof d==="string"){e=f;f=j}else{e=f;f=d;d=j}if(e===false)e=b;else if(!e)return this;if(h===1){g=e;e=function(a){m().off(a);return g.apply(this,arguments)};e.guid=g.guid||(g.guid=m.guid++)}return this.each(function(){m.event.add(this,a,e,f,d)})},one:function(a,b,d,f){return this.on(a,b,d,f,1)},off:function(a,d,f){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;m(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);
return this}if(typeof a==="object"){for(e in a)this.off(e,d,a[e]);return this}if(d===false||typeof d==="function"){f=d;d=j}f===false&&(f=b);return this.each(function(){m.event.remove(this,a,f,d)})},bind:function(a,b,d){return this.on(a,null,b,d)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,d){m(this.context).on(a,this.selector,b,d);return this},die:function(a,b){m(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,d,f){return this.on(b,a,d,f)},undelegate:function(a,
b,d){return arguments.length==1?this.off(a,"**"):this.off(b,a,d)},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return m.event.trigger(a,b,this[0],true)},toggle:function(a){var b=arguments,d=a.guid||m.guid++,f=0,e=function(d){var e=(m._data(this,"lastToggle"+a.guid)||0)%f;m._data(this,"lastToggle"+a.guid,e+1);d.preventDefault();return b[e].apply(this,arguments)||false};for(e.guid=d;f<b.length;)b[f++].guid=d;return this.click(e)},
hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});m.each(["blur","focus","focusin","focusout","load","resize","scroll","unload","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","change","select","submit","keydown","keypress","keyup","error","contextmenu"],function(a,b){m.fn[b]=function(a,d){if(d==null){d=a;a=null}return arguments.length>0?this.on(b,null,a,d):this.trigger(b)};m.attrFn&&(m.attrFn[b]=true);if(jb.test(b))m.event.fixHooks[b]=
m.event.keyHooks;if(Tb.test(b))m.event.fixHooks[b]=m.event.mouseHooks});var Da=function(a,b,d,f,e,h){for(var e=0,g=f.length;e<g;e++){var k=f[e];if(k){for(var j=false,k=k[a];k;){if(k[ca]===d){j=f[k.sizset];break}if(k.nodeType===1&&!h){k[ca]=d;k.sizset=e}if(k.nodeName.toLowerCase()===b){j=k;break}k=k[a]}f[e]=j}}},kb=function(a,b,d,f,e,h){for(var e=0,g=f.length;e<g;e++){var k=f[e];if(k){for(var j=false,k=k[a];k;){if(k[ca]===d){j=f[k.sizset];break}if(k.nodeType===1){if(!h){k[ca]=d;k.sizset=e}if(typeof b!==
"string"){if(k===b){j=true;break}}else if(O.filter(b,[k]).length>0){j=k;break}}k=k[a]}f[e]=j}}},Xa=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,ca="sizcache"+(Math.random()+"").replace(".",""),lb=0,Ma=Object.prototype.toString,Oa=false,mb=true,Na=/\\/g,Fb=/\r\n/g,Pa=/\W/;[0,0].sort(function(){mb=false;return 0});var O=function(a,b,d,f){var d=d||[],e=b=b||C;if(b.nodeType!==1&&b.nodeType!==9)return[];if(!a||typeof a!==
"string")return d;var h,g,k,j,n,l=true,o=O.isXML(b),q=[],u=a;do{Xa.exec("");if(h=Xa.exec(u)){u=h[3];q.push(h[1]);if(h[2]){j=h[3];break}}}while(h);if(q.length>1&&db.exec(a))if(q.length===2&&V.relative[q[0]])g=ac(q[0]+q[1],b,f);else for(g=V.relative[q[0]]?[b]:O(q.shift(),b);q.length;){a=q.shift();V.relative[a]&&(a=a+q.shift());g=ac(a,g,f)}else{if(!f&&q.length>1&&b.nodeType===9&&!o&&V.match.ID.test(q[0])&&!V.match.ID.test(q[q.length-1])){h=O.find(q.shift(),b,o);b=h.expr?O.filter(h.expr,h.set)[0]:h.set[0]}if(b){h=
f?{expr:q.pop(),set:ga(f)}:O.find(q.pop(),q.length===1&&(q[0]==="~"||q[0]==="+")&&b.parentNode?b.parentNode:b,o);g=h.expr?O.filter(h.expr,h.set):h.set;for(q.length>0?k=ga(g):l=false;q.length;){h=n=q.pop();V.relative[n]?h=q.pop():n="";h==null&&(h=b);V.relative[n](k,h,o)}}else k=[]}k||(k=g);k||O.error(n||a);if(Ma.call(k)==="[object Array]")if(l)if(b&&b.nodeType===1)for(a=0;k[a]!=null;a++)k[a]&&(k[a]===true||k[a].nodeType===1&&O.contains(b,k[a]))&&d.push(g[a]);else for(a=0;k[a]!=null;a++)k[a]&&k[a].nodeType===
1&&d.push(g[a]);else d.push.apply(d,k);else ga(k,d);if(j){O(j,e,d,f);O.uniqueSort(d)}return d};O.uniqueSort=function(a){if(nb){Oa=mb;a.sort(nb);if(Oa)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a};O.matches=function(a,b){return O(a,null,null,b)};O.matchesSelector=function(a,b){return O(b,null,null,[a]).length>0};O.find=function(a,b,d){var f,e,h,g,k,j;if(!a)return[];e=0;for(h=V.order.length;e<h;e++){k=V.order[e];if(g=V.leftMatch[k].exec(a)){j=g[1];g.splice(1,1);if(j.substr(j.length-
1)!=="\\"){g[1]=(g[1]||"").replace(Na,"");f=V.find[k](g,b,d);if(f!=null){a=a.replace(V.match[k],"");break}}}}f||(f=typeof b.getElementsByTagName!=="undefined"?b.getElementsByTagName("*"):[]);return{set:f,expr:a}};O.filter=function(a,b,d,f){for(var e,h,g,k,n,l,o,q,u=a,v=[],x=b,w=b&&b[0]&&O.isXML(b[0]);a&&b.length;){for(g in V.filter)if((e=V.leftMatch[g].exec(a))!=null&&e[2]){l=V.filter[g];n=e[1];h=false;e.splice(1,1);if(n.substr(n.length-1)!=="\\"){x===v&&(v=[]);if(V.preFilter[g])if(e=V.preFilter[g](e,
x,d,v,f,w)){if(e===true)continue}else h=k=true;if(e)for(o=0;(n=x[o])!=null;o++)if(n){k=l(n,e,o,x);q=f^k;if(d&&k!=null)q?h=true:x[o]=false;else if(q){v.push(n);h=true}}if(k!==j){d||(x=v);a=a.replace(V.match[g],"");if(!h)return[];break}}}if(a===u)if(h==null)O.error(a);else break;u=a}return x};O.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};var aa=O.getText=function(a){var b,d;b=a.nodeType;var f="";if(b)if(b===1||b===9||b===11){if(typeof a.textContent==="string")return a.textContent;
if(typeof a.innerText==="string")return a.innerText.replace(Fb,"");for(a=a.firstChild;a;a=a.nextSibling)f=f+aa(a)}else{if(b===3||b===4)return a.nodeValue}else for(b=0;d=a[b];b++)d.nodeType!==8&&(f=f+aa(d));return f},V=O.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,
TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var d=
typeof b==="string",f=d&&!Pa.test(b),d=d&&!f;f&&(b=b.toLowerCase());for(var f=0,e=a.length,h;f<e;f++)if(h=a[f]){for(;(h=h.previousSibling)&&h.nodeType!==1;);a[f]=d||h&&h.nodeName.toLowerCase()===b?h||false:h===b}d&&O.filter(b,a,true)},">":function(a,b){var d,f=typeof b==="string",e=0,h=a.length;if(f&&!Pa.test(b))for(b=b.toLowerCase();e<h;e++){if(d=a[e]){d=d.parentNode;a[e]=d.nodeName.toLowerCase()===b?d:false}}else{for(;e<h;e++)(d=a[e])&&(a[e]=f?d.parentNode:d.parentNode===b);f&&O.filter(b,a,true)}},
"":function(a,b,d){var f,e=lb++,h=kb;if(typeof b==="string"&&!Pa.test(b)){f=b=b.toLowerCase();h=Da}h("parentNode",b,e,a,f,d)},"~":function(a,b,d){var f,e=lb++,h=kb;if(typeof b==="string"&&!Pa.test(b)){f=b=b.toLowerCase();h=Da}h("previousSibling",b,e,a,f,d)}},find:{ID:function(a,b,d){if(typeof b.getElementById!=="undefined"&&!d)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if(typeof b.getElementsByName!=="undefined"){for(var d=[],f=b.getElementsByName(a[1]),e=0,h=f.length;e<
h;e++)f[e].getAttribute("name")===a[1]&&d.push(f[e]);return d.length===0?null:d}},TAG:function(a,b){if(typeof b.getElementsByTagName!=="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,d,f,e,h){a=" "+a[1].replace(Na,"")+" ";if(h)return a;for(var h=0,g;(g=b[h])!=null;h++)g&&(e^(g.className&&(" "+g.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?d||f.push(g):d&&(b[h]=false));return false},ID:function(a){return a[1].replace(Na,"")},TAG:function(a){return a[1].replace(Na,
"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||O.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}else a[2]&&O.error(a[0]);a[0]=lb++;return a},ATTR:function(a,b,d,f,e,h){b=a[1]=a[1].replace(Na,"");!h&&V.attrMap[b]&&(a[1]=V.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(Na,"");a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,d,f,
e){if(a[1]==="not")if((Xa.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=O(a[3],null,null,b);else{a=O.filter(a[3],b,d,1^e);d||f.push.apply(f,a);return false}else if(V.match.POS.test(a[0])||V.match.CHILD.test(a[0]))return true;return a},POS:function(a){a.unshift(true);return a}},filters:{enabled:function(a){return a.disabled===false&&a.type!=="hidden"},disabled:function(a){return a.disabled===true},checked:function(a){return a.checked===true},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;
return a.selected===true},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,d){return!!O(d[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),d=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===d&&(b===d||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()===
"input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},
focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,d,f){return b===f.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,d){return b<d[3]-0},gt:function(a,b,d){return b>d[3]-0},nth:function(a,b,d){return d[3]-0===b},eq:function(a,b,d){return d[3]-0===b}},filter:{PSEUDO:function(a,b,d,f){var e=b[1],h=V.filters[e];if(h)return h(a,d,b,f);if(e==="contains")return(a.textContent||a.innerText||
aa([a])||"").indexOf(b[3])>=0;if(e==="not"){b=b[3];d=0;for(f=b.length;d<f;d++)if(b[d]===a)return false;return true}O.error(e)},CHILD:function(a,b){var d,f,e,h,g,k;d=b[1];k=a;switch(d){case "only":case "first":for(;k=k.previousSibling;)if(k.nodeType===1)return false;if(d==="first")return true;k=a;case "last":for(;k=k.nextSibling;)if(k.nodeType===1)return false;return true;case "nth":d=b[2];f=b[3];if(d===1&&f===0)return true;e=b[0];if((h=a.parentNode)&&(h[ca]!==e||!a.nodeIndex)){g=0;for(k=h.firstChild;k;k=
k.nextSibling)if(k.nodeType===1)k.nodeIndex=++g;h[ca]=e}k=a.nodeIndex-f;return d===0?k===0:k%d===0&&k/d>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var d=b[1],d=O.attr?O.attr(a,d):V.attrHandle[d]?V.attrHandle[d](a):a[d]!=null?a[d]:a.getAttribute(d),f=d+"",e=b[2],h=b[4];return d==
null?e==="!=":!e&&O.attr?d!=null:e==="="?f===h:e==="*="?f.indexOf(h)>=0:e==="~="?(" "+f+" ").indexOf(h)>=0:!h?f&&d!==false:e==="!="?f!==h:e==="^="?f.indexOf(h)===0:e==="$="?f.substr(f.length-h.length)===h:e==="|="?f===h||f.substr(0,h.length+1)===h+"-":false},POS:function(a,b,d,f){var e=V.setFilters[b[2]];if(e)return e(a,d,b,f)}}},db=V.match.POS,tb=function(a,b){return"\\"+(b-0+1)},Ea;for(Ea in V.match){V.match[Ea]=RegExp(V.match[Ea].source+/(?![^\[]*\])(?![^\(]*\))/.source);V.leftMatch[Ea]=RegExp(/(^(?:.|\r|\n)*?)/.source+
V.match[Ea].source.replace(/\\(\d+)/g,tb))}V.match.globalPOS=db;var ga=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(C.documentElement.childNodes,0)[0].nodeType}catch(Gb){ga=function(a,b){var d=0,f=b||[];if(Ma.call(a)==="[object Array]")Array.prototype.push.apply(f,a);else if(typeof a.length==="number")for(var e=a.length;d<e;d++)f.push(a[d]);else for(;a[d];d++)f.push(a[d]);return f}}var nb,Ya;if(C.documentElement.compareDocumentPosition)nb=
function(a,b){if(a===b){Oa=true;return 0}return!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1};else{nb=function(a,b){if(a===b){Oa=true;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var d,f,e=[],h=[];d=a.parentNode;f=b.parentNode;var g=d;if(d===f)return Ya(a,b);if(d){if(!f)return 1}else return-1;for(;g;){e.unshift(g);g=g.parentNode}for(g=f;g;){h.unshift(g);g=g.parentNode}d=e.length;f=h.length;for(g=
0;g<d&&g<f;g++)if(e[g]!==h[g])return Ya(e[g],h[g]);return g===d?Ya(a,h[g],-1):Ya(e[g],b,1)};Ya=function(a,b,d){if(a===b)return d;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1}}var Ba=C.createElement("div"),ub="script"+(new Date).getTime(),Za=C.documentElement;Ba.innerHTML="<a name='"+ub+"'/>";Za.insertBefore(Ba,Za.firstChild);if(C.getElementById(ub)){V.find.ID=function(a,b,d){if(typeof b.getElementById!=="undefined"&&!d)return(b=b.getElementById(a[1]))?b.id===a[1]||typeof b.getAttributeNode!==
"undefined"&&b.getAttributeNode("id").nodeValue===a[1]?[b]:j:[]};V.filter.ID=function(a,b){var d=typeof a.getAttributeNode!=="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&d&&d.nodeValue===b}}Za.removeChild(Ba);var Za=Ba=null,Qa=C.createElement("div");Qa.appendChild(C.createComment(""));if(Qa.getElementsByTagName("*").length>0)V.find.TAG=function(a,b){var d=b.getElementsByTagName(a[1]);if(a[1]==="*"){for(var f=[],e=0;d[e];e++)d[e].nodeType===1&&f.push(d[e]);d=f}return d};Qa.innerHTML=
"<a href='#'></a>";if(Qa.firstChild&&typeof Qa.firstChild.getAttribute!=="undefined"&&Qa.firstChild.getAttribute("href")!=="#")V.attrHandle.href=function(a){return a.getAttribute("href",2)};Qa=null;if(C.querySelectorAll){var Mb=O,vb=C.createElement("div");vb.innerHTML="<p class='TEST'></p>";if(!(vb.querySelectorAll&&vb.querySelectorAll(".TEST").length===0)){var O=function(a,b,d,f){b=b||C;if(!f&&!O.isXML(b)){var e=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(a);if(e&&(b.nodeType===1||b.nodeType===9)){if(e[1])return ga(b.getElementsByTagName(a),
d);if(e[2]&&V.find.CLASS&&b.getElementsByClassName)return ga(b.getElementsByClassName(e[2]),d)}if(b.nodeType===9){if(a==="body"&&b.body)return ga([b.body],d);if(e&&e[3]){var h=b.getElementById(e[3]);if(h&&h.parentNode){if(h.id===e[3])return ga([h],d)}else return ga([],d)}try{return ga(b.querySelectorAll(a),d)}catch(g){}}else if(b.nodeType===1&&b.nodeName.toLowerCase()!=="object"){var e=b,k=(h=b.getAttribute("id"))||"__sizzle__",j=b.parentNode,n=/^\s*[+~]/.test(a);h?k=k.replace(/'/g,"\\$&"):b.setAttribute("id",
k);if(n&&j)b=b.parentNode;try{if(!n||j)return ga(b.querySelectorAll("[id='"+k+"'] "+a),d)}catch(l){}finally{h||e.removeAttribute("id")}}}return Mb(a,b,d,f)},Nb;for(Nb in Mb)O[Nb]=Mb[Nb];vb=null}}var wb=C.documentElement,xb=wb.matchesSelector||wb.mozMatchesSelector||wb.webkitMatchesSelector||wb.msMatchesSelector;if(xb){var tc=!xb.call(C.createElement("div"),"div"),$b=false;try{xb.call(C.documentElement,"[test!='']:sizzle")}catch(ad){$b=true}O.matchesSelector=function(a,b){b=b.replace(/\=\s*([^'"\]]*)\s*\]/g,
"='$1']");if(!O.isXML(a))try{if($b||!V.match.PSEUDO.test(b)&&!/!=/.test(b)){var d=xb.call(a,b);if(d||!tc||a.document&&a.document.nodeType!==11)return d}}catch(f){}return O(b,null,null,[a]).length>0}}var bb=C.createElement("div");bb.innerHTML="<div class='test e'></div><div class='test'></div>";if(bb.getElementsByClassName&&bb.getElementsByClassName("e").length!==0){bb.lastChild.className="e";if(bb.getElementsByClassName("e").length!==1){V.order.splice(1,0,"CLASS");V.find.CLASS=function(a,b,d){if(typeof b.getElementsByClassName!==
"undefined"&&!d)return b.getElementsByClassName(a[1])};bb=null}}O.contains=C.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):true)}:C.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(){return false};O.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":false};var ac=function(a,b,d){for(var f,e=[],h="",b=b.nodeType?[b]:b;f=V.match.PSEUDO.exec(a);){h=h+f[0];a=a.replace(V.match.PSEUDO,
"")}a=V.relative[a]?a+"*":a;f=0;for(var g=b.length;f<g;f++)O(a,b[f],e,d);return O.filter(h,e)};O.attr=m.attr;O.selectors.attrMap={};m.find=O;m.expr=O.selectors;m.expr[":"]=m.expr.filters;m.unique=O.uniqueSort;m.text=O.getText;m.isXMLDoc=O.isXML;m.contains=O.contains;var uc=/Until$/,vc=/^(?:parents|prevUntil|prevAll)/,wc=/,/,xc=/^.[^:#\[\.,]*$/,yc=Array.prototype.slice,bc=m.expr.match.globalPOS,zc={children:true,contents:true,next:true,prev:true};m.fn.extend({find:function(a){var b=this,d,f;if(typeof a!==
"string")return m(a).filter(function(){d=0;for(f=b.length;d<f;d++)if(m.contains(b[d],this))return true});var e=this.pushStack("","find",a),h,g,k;d=0;for(f=this.length;d<f;d++){h=e.length;m.find(a,this[d],e);if(d>0)for(g=h;g<e.length;g++)for(k=0;k<h;k++)if(e[k]===e[g]){e.splice(g--,1);break}}return e},has:function(a){var b=m(a);return this.filter(function(){for(var a=0,d=b.length;a<d;a++)if(m.contains(this,b[a]))return true})},not:function(a){return this.pushStack(h(this,a,false),"not",a)},filter:function(a){return this.pushStack(h(this,
a,true),"filter",a)},is:function(a){return!!a&&(typeof a==="string"?bc.test(a)?m(a,this.context).index(this[0])>=0:m.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var d=[],f,e,h=this[0];if(m.isArray(a)){for(e=1;h&&h.ownerDocument&&h!==b;){for(f=0;f<a.length;f++)m(h).is(a[f])&&d.push({selector:a[f],elem:h,level:e});h=h.parentNode;e++}return d}var g=bc.test(a)||typeof a!=="string"?m(a,b||this.context):0;f=0;for(e=this.length;f<e;f++)for(h=this[f];h;)if(g?g.index(h)>-1:m.find.matchesSelector(h,
a)){d.push(h);break}else{h=h.parentNode;if(!h||!h.ownerDocument||h===b||h.nodeType===11)break}d=d.length>1?m.unique(d):d;return this.pushStack(d,"closest",a)},index:function(a){return!a?this[0]&&this[0].parentNode?this.prevAll().length:-1:typeof a==="string"?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var d=typeof a==="string"?m(a,b):m.makeArray(a&&a.nodeType?[a]:a),f=m.merge(this.get(),d);return this.pushStack(!d[0]||!d[0].parentNode||d[0].parentNode.nodeType===11||
!f[0]||!f[0].parentNode||f[0].parentNode.nodeType===11?f:m.unique(f))},andSelf:function(){return this.add(this.prevObject)}});m.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,d){return m.dir(a,"parentNode",d)},next:function(a){return m.nth(a,2,"nextSibling")},prev:function(a){return m.nth(a,2,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,
"previousSibling")},nextUntil:function(a,b,d){return m.dir(a,"nextSibling",d)},prevUntil:function(a,b,d){return m.dir(a,"previousSibling",d)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.makeArray(a.childNodes)}},function(a,b){m.fn[a]=function(d,f){var e=m.map(this,b,d);uc.test(a)||(f=d);f&&typeof f==="string"&&(e=m.filter(f,
e));e=this.length>1&&!zc[a]?m.unique(e):e;if((this.length>1||wc.test(f))&&vc.test(a))e=e.reverse();return this.pushStack(e,a,yc.call(arguments).join(","))}});m.extend({filter:function(a,b,d){d&&(a=":not("+a+")");return b.length===1?m.find.matchesSelector(b[0],a)?[b[0]]:[]:m.find.matches(a,b)},dir:function(a,b,d){for(var f=[],a=a[b];a&&a.nodeType!==9&&(d===j||a.nodeType!==1||!m(a).is(d));){a.nodeType===1&&f.push(a);a=a[b]}return f},nth:function(a,b,d){for(var b=b||1,f=0;a;a=a[d])if(a.nodeType===1&&
++f===b)break;return a},sibling:function(a,b){for(var d=[];a;a=a.nextSibling)a.nodeType===1&&a!==b&&d.push(a);return d}});var cc="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ac=/ jQuery\d+="(?:\d+|null)"/g,Ob=/^\s+/,dc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,ec=/<([\w:]+)/,Bc=/<tbody/i,Cc=/<|&#?\w+;/,Dc=/<(?:script|style)/i,Ec=/<(?:script|object|embed|option|style)/i,
fc=RegExp("<(?:"+cc+")[\\s/>]","i"),gc=/checked\s*(?:[^=]|=\s*.checked.)/i,hc=/\/(java|ecma)script/i,Fc=/^\s*<!(?:\[CDATA\[|\-\-)/,ua={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Pb=o(C);ua.optgroup=ua.option;ua.tbody=
ua.tfoot=ua.colgroup=ua.caption=ua.thead;ua.th=ua.td;if(!m.support.htmlSerialize)ua._default=[1,"div<div>","</div>"];m.fn.extend({text:function(a){return m.access(this,function(a){return a===j?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||C).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&b.insertBefore(this[0]);
b.map(function(){for(var a=this;a.firstChild&&a.firstChild.nodeType===1;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return m.isFunction(a)?this.each(function(b){m(this).wrapInner(a.call(this,b))}):this.each(function(){var b=m(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(d){m(this).wrapAll(b?a.call(this,d):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||
m(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=m.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,
"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,m.clean(arguments));return a}},remove:function(a,b){for(var d=0,f;(f=this[d])!=null;d++)if(!a||m.filter(a,[f]).length){if(!b&&f.nodeType===1){m.cleanData(f.getElementsByTagName("*"));m.cleanData([f])}f.parentNode&&f.parentNode.removeChild(f)}return this},
empty:function(){for(var a=0,b;(b=this[a])!=null;a++)for(b.nodeType===1&&m.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);return this},clone:function(a,b){a=a==null?false:a;b=b==null?a:b;return this.map(function(){return m.clone(this,a,b)})},html:function(a){return m.access(this,function(a){var b=this[0]||{},d=0,f=this.length;if(a===j)return b.nodeType===1?b.innerHTML.replace(Ac,""):null;if(typeof a==="string"&&!Dc.test(a)&&(m.support.leadingWhitespace||!Ob.test(a))&&
!ua[(ec.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(dc,"<$1></$2>");try{for(;d<f;d++){b=this[d]||{};if(b.nodeType===1){m.cleanData(b.getElementsByTagName("*"));b.innerHTML=a}}b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(m.isFunction(a))return this.each(function(b){var d=m(this),f=d.html();d.replaceWith(a.call(this,b,f))});typeof a!=="string"&&(a=m(a).detach());return this.each(function(){var b=this.nextSibling,
d=this.parentNode;m(this).remove();b?m(b).before(a):m(d).append(a)})}return this.length?this.pushStack(m(m.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,true)},domManip:function(a,b,d){var f,e,h,g=a[0],k=[];if(!m.support.checkClone&&arguments.length===3&&typeof g==="string"&&gc.test(g))return this.each(function(){m(this).domManip(a,b,d,true)});if(m.isFunction(g))return this.each(function(f){var e=m(this);a[0]=g.call(this,f,b?e.html():j);e.domManip(a,b,d)});if(this[0]){f=
g&&g.parentNode;f=m.support.parentNode&&f&&f.nodeType===11&&f.childNodes.length===this.length?{fragment:f}:m.buildFragment(a,this,k);h=f.fragment;if(e=h.childNodes.length===1?h=h.firstChild:h.firstChild){b=b&&m.nodeName(e,"tr");e=0;for(var n=this.length,l=n-1;e<n;e++)d.call(b?m.nodeName(this[e],"table")?this[e].getElementsByTagName("tbody")[0]||this[e].appendChild(this[e].ownerDocument.createElement("tbody")):this[e]:this[e],f.cacheable||n>1&&e<l?m.clone(h,true,true):h)}k.length&&m.each(k,function(a,
b){b.src?m.ajax({type:"GET",global:false,url:b.src,async:false,dataType:"script"}):m.globalEval((b.text||b.textContent||b.innerHTML||"").replace(Fc,"/*$0*/"));b.parentNode&&b.parentNode.removeChild(b)})}return this}});m.buildFragment=function(a,b,d){var f,e,h,g,k=a[0];b&&b[0]&&(g=b[0].ownerDocument||b[0]);g.createDocumentFragment||(g=C);if(a.length===1&&typeof k==="string"&&k.length<512&&g===C&&k.charAt(0)==="<"&&!Ec.test(k)&&(m.support.checkClone||!gc.test(k))&&(m.support.html5Clone||!fc.test(k))){e=
true;(h=m.fragments[k])&&h!==1&&(f=h)}if(!f){f=g.createDocumentFragment();m.clean(a,g,f,d)}e&&(m.fragments[k]=h?f:1);return{fragment:f,cacheable:e}};m.fragments={};m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(d){var f=[],d=m(d),e=this.length===1&&this[0].parentNode;if(e&&e.nodeType===11&&e.childNodes.length===1&&d.length===1){d[b](this[0]);return this}for(var e=0,h=d.length;e<h;e++){var g=(e>0?this.clone(true):
this).get();m(d[e])[b](g);f=f.concat(g)}return this.pushStack(f,a,d.selector)}});m.extend({clone:function(a,b,d){var f,e,h;if(m.support.html5Clone||m.isXMLDoc(a)||!fc.test("<"+a.nodeName+">"))f=a.cloneNode(true);else{f=C.createElement("div");Pb.appendChild(f);f.innerHTML=a.outerHTML;f=f.firstChild}var g=f;if((!m.support.noCloneEvent||!m.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!m.isXMLDoc(a)){q(a,g);f=l(a);e=l(g);for(h=0;f[h];++h)e[h]&&q(f[h],e[h])}if(b){u(a,g);if(d){f=l(a);e=l(g);
for(h=0;f[h];++h)u(f[h],e[h])}}return g},clean:function(a,b,d,f){var e,h=[],b=b||C;typeof b.createElement==="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||C);for(var g=0,k;(k=a[g])!=null;g++){typeof k==="number"&&(k=k+"");if(k){if(typeof k==="string")if(Cc.test(k)){k=k.replace(dc,"<$1></$2>");e=(ec.exec(k)||["",""])[1].toLowerCase();var j=ua[e]||ua._default,l=j[0],q=b.createElement("div"),u=Pb.childNodes;b===C?Pb.appendChild(q):o(b).appendChild(q);for(q.innerHTML=j[1]+k+j[2];l--;)q=q.lastChild;
if(!m.support.tbody){l=Bc.test(k);j=e==="table"&&!l?q.firstChild&&q.firstChild.childNodes:j[1]==="<table>"&&!l?q.childNodes:[];for(e=j.length-1;e>=0;--e)m.nodeName(j[e],"tbody")&&!j[e].childNodes.length&&j[e].parentNode.removeChild(j[e])}!m.support.leadingWhitespace&&Ob.test(k)&&q.insertBefore(b.createTextNode(Ob.exec(k)[0]),q.firstChild);k=q.childNodes;if(q){q.parentNode.removeChild(q);if(u.length>0)(q=u[u.length-1])&&q.parentNode&&q.parentNode.removeChild(q)}}else k=b.createTextNode(k);var v;if(!m.support.appendChecked)if(k[0]&&
typeof(v=k.length)==="number")for(e=0;e<v;e++)n(k[e]);else n(k);k.nodeType?h.push(k):h=m.merge(h,k)}}if(d){a=function(a){return!a.type||hc.test(a.type)};for(g=0;h[g];g++){b=h[g];if(f&&m.nodeName(b,"script")&&(!b.type||hc.test(b.type)))f.push(b.parentNode?b.parentNode.removeChild(b):b);else{if(b.nodeType===1){k=m.grep(b.getElementsByTagName("script"),a);h.splice.apply(h,[g+1,0].concat(k))}d.appendChild(b)}}}return h},cleanData:function(a){for(var b,d,f=m.cache,e=m.event.special,h=m.support.deleteExpando,
g=0,k;(k=a[g])!=null;g++)if(!k.nodeName||!m.noData[k.nodeName.toLowerCase()])if(d=k[m.expando]){if((b=f[d])&&b.events){for(var j in b.events)e[j]?m.event.remove(k,j):m.removeEvent(k,j,b.handle);if(b.handle)b.handle.elem=null}h?delete k[m.expando]:k.removeAttribute&&k.removeAttribute(m.expando);delete f[d]}}});var Qb=/alpha\([^)]*\)/i,Gc=/opacity=([^)]*)/,Hc=/([A-Z]|^ms)/g,Ic=/^[\-+]?(?:\d*\.)?\d+$/i,Rb=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,Jc=/^([\-+])=([\-+.\de]+)/,Kc=/^margin/,Lc={position:"absolute",
visibility:"hidden",display:"block"},Ra=["Top","Right","Bottom","Left"],cb,ic,jc;m.fn.css=function(a,b){return m.access(this,function(a,b,d){return d!==j?m.style(a,b,d):m.css(a,b)},a,b,arguments.length>1)};m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var d=cb(a,"opacity");return d===""?"1":d}return a.style.opacity}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":m.support.cssFloat?"cssFloat":"styleFloat"},
style:function(a,b,d,f){if(a&&!(a.nodeType===3||a.nodeType===8||!a.style)){var e,h=m.camelCase(b),g=a.style,k=m.cssHooks[h],b=m.cssProps[h]||h;if(d!==j){f=typeof d;if(f==="string"&&(e=Jc.exec(d))){d=+(e[1]+1)*+e[2]+parseFloat(m.css(a,b));f="number"}if(!(d==null||f==="number"&&isNaN(d))){f==="number"&&!m.cssNumber[h]&&(d=d+"px");if(!k||!("set"in k)||(d=k.set(a,d))!==j)try{g[b]=d}catch(n){}}}else return k&&"get"in k&&(e=k.get(a,false,f))!==j?e:g[b]}},css:function(a,b,d){var f,e,b=m.camelCase(b);e=m.cssHooks[b];
b=m.cssProps[b]||b;b==="cssFloat"&&(b="float");if(e&&"get"in e&&(f=e.get(a,true,d))!==j)return f;if(cb)return cb(a,b)},swap:function(a,b,d){var f={},e;for(e in b){f[e]=a.style[e];a.style[e]=b[e]}d=d.call(a);for(e in b)a.style[e]=f[e];return d}});m.curCSS=m.css;C.defaultView&&C.defaultView.getComputedStyle&&(ic=function(a,b){var d,f,e,h=a.style,b=b.replace(Hc,"-$1").toLowerCase();if((f=a.ownerDocument.defaultView)&&(e=f.getComputedStyle(a,null))){d=e.getPropertyValue(b);d===""&&!m.contains(a.ownerDocument.documentElement,
a)&&(d=m.style(a,b))}if(!m.support.pixelMargin&&e&&Kc.test(b)&&Rb.test(d)){f=h.width;h.width=d;d=e.width;h.width=f}return d});C.documentElement.currentStyle&&(jc=function(a,b){var d,f,e=a.currentStyle&&a.currentStyle[b],h=a.style;if(e==null&&h&&(d=h[b]))e=d;if(Rb.test(e)){d=h.left;if(f=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;h.left=b==="fontSize"?"1em":e;e=h.pixelLeft+"px";h.left=d;if(f)a.runtimeStyle.left=f}return e===""?"auto":e});cb=ic||jc;m.each(["height","width"],
function(a,b){m.cssHooks[b]={get:function(a,d,f){if(d)return a.offsetWidth!==0?x(a,b,f):m.swap(a,Lc,function(){return x(a,b,f)})},set:function(a,b){return Ic.test(b)?b+"px":b}}});if(!m.support.opacity)m.cssHooks.opacity={get:function(a,b){return Gc.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var d=a.style,f=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+b*100+")":"",h=f&&f.filter||d.filter||"";d.zoom=1;if(b>=1&&m.trim(h.replace(Qb,
""))===""){d.removeAttribute("filter");if(f&&!f.filter)return}d.filter=Qb.test(h)?h.replace(Qb,e):h+" "+e}};m(function(){if(!m.support.reliableMarginRight)m.cssHooks.marginRight={get:function(a,b){return m.swap(a,{display:"inline-block"},function(){return b?cb(a,"margin-right"):a.style.marginRight})}}});if(m.expr&&m.expr.filters){m.expr.filters.hidden=function(a){var b=a.offsetHeight;return a.offsetWidth===0&&b===0||!m.support.reliableHiddenOffsets&&(a.style&&a.style.display||m.css(a,"display"))===
"none"};m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)}}m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(d){for(var f=typeof d==="string"?d.split(" "):[d],e={},d=0;d<4;d++)e[a+Ra[d]+b]=f[d]||f[d-2]||f[0];return e}}});var Nc=/%20/g,Mc=/\[\]$/,lc=/\r?\n/g,Oc=/#.*$/,Pc=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Qc=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Rc=/^(?:GET|HEAD)$/,Sc=
/^\/\//,mc=/\?/,Tc=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Uc=/^(?:select|textarea)/i,kc=/\s+/,Vc=/([?&])_=[^&]*/,nc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,oc=m.fn.load,Wb={},pc={},$a,ab,qc=["*/"]+["*"];try{$a=K.href}catch(bd){$a=C.createElement("a");$a.href="";$a=$a.href}ab=nc.exec($a.toLowerCase())||[];m.fn.extend({load:function(a,b,d){if(typeof a!=="string"&&oc)return oc.apply(this,arguments);if(!this.length)return this;var f=a.indexOf(" ");if(f>=0)var e=a.slice(f,a.length),
a=a.slice(0,f);f="GET";if(b)if(m.isFunction(b)){d=b;b=j}else if(typeof b==="object"){b=m.param(b,m.ajaxSettings.traditional);f="POST"}var h=this;m.ajax({url:a,type:f,dataType:"html",data:b,complete:function(a,b,f){f=a.responseText;if(a.isResolved()){a.done(function(a){f=a});h.html(e?m("<div>").append(f.replace(Tc,"")).find(e):f)}d&&h.each(d,[f,b,a])}});return this},serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?
m.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Uc.test(this.nodeName)||Qc.test(this.type))}).map(function(a,b){var d=m(this).val();return d==null?null:m.isArray(d)?m.map(d,function(a){return{name:b.name,value:a.replace(lc,"\r\n")}}):{name:b.name,value:d.replace(lc,"\r\n")}}).get()}});m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}});m.each(["get","post"],
function(a,b){m[b]=function(a,d,f,e){if(m.isFunction(d)){e=e||f;f=d;d=j}return m.ajax({type:b,url:a,data:d,success:f,dataType:e})}});m.extend({getScript:function(a,b){return m.get(a,j,b,"script")},getJSON:function(a,b,d){return m.get(a,b,d,"json")},ajaxSetup:function(a,b){if(b)z(a,m.ajaxSettings);else{b=a;a=m.ajaxSettings}z(a,b);return a},ajaxSettings:{url:$a,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(ab[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",
processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":qc},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":true,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:v(Wb),ajaxTransport:v(pc),ajax:function(a,b){function d(a,b,o,q){if(t!==2){t=2;H&&clearTimeout(H);x=j;u=
q||"";I.readyState=a>0?4:0;var v,w,y,q=b;if(o){var A=f,R=I,z=A.contents,N=A.dataTypes,M=A.responseFields,B,C,X,L;for(C in M)C in o&&(R[M[C]]=o[C]);for(;N[0]==="*";){N.shift();B===j&&(B=A.mimeType||R.getResponseHeader("content-type"))}if(B)for(C in z)if(z[C]&&z[C].test(B)){N.unshift(C);break}if(N[0]in o)X=N[0];else{for(C in o){if(!N[0]||A.converters[C+" "+N[0]]){X=C;break}L||(L=C)}X=X||L}if(X){X!==N[0]&&N.unshift(X);o=o[X]}else o=void 0}else o=j;if(a>=200&&a<300||a===304){if(f.ifModified){if(B=I.getResponseHeader("Last-Modified"))m.lastModified[l]=
B;if(B=I.getResponseHeader("Etag"))m.etag[l]=B}if(a===304){q="notmodified";v=true}else try{B=f;B.dataFilter&&(o=B.dataFilter(o,B.dataType));var E=B.dataTypes;C={};var F,J,K=E.length,Hb,P=E[0],da,fa,W,ba,T;for(F=1;F<K;F++){if(F===1)for(J in B.converters)typeof J==="string"&&(C[J.toLowerCase()]=B.converters[J]);da=P;P=E[F];if(P==="*")P=da;else if(da!=="*"&&da!==P){fa=da+" "+P;W=C[fa]||C["* "+P];if(!W){T=j;for(ba in C){Hb=ba.split(" ");if(Hb[0]===da||Hb[0]==="*")if(T=C[Hb[1]+" "+P]){ba=C[ba];ba===true?
W=T:T===true&&(W=ba);break}}}!W&&!T&&m.error("No conversion from "+fa.replace(" "," to "));W!==true&&(o=W?W(o):T(ba(o)))}}w=o;q="success";v=true}catch(ha){q="parsererror";y=ha}}else{y=q;if(!q||a){q="error";a<0&&(a=0)}}I.status=a;I.statusText=""+(b||q);v?g.resolveWith(e,[w,q,I]):g.rejectWith(e,[I,q,y]);I.statusCode(n);n=j;G&&h.trigger("ajax"+(v?"Success":"Error"),[I,f,v?w:y]);k.fireWith(e,[I,q]);if(G){h.trigger("ajaxComplete",[I,f]);--m.active||m.event.trigger("ajaxStop")}}}if(typeof a==="object"){b=
a;a=j}var b=b||{},f=m.ajaxSetup({},b),e=f.context||f,h=e!==f&&(e.nodeType||e instanceof m)?m(e):m.event,g=m.Deferred(),k=m.Callbacks("once memory"),n=f.statusCode||{},l,o={},q={},u,v,x,H,y,t=0,G,A,I={readyState:0,setRequestHeader:function(a,b){if(!t){var d=a.toLowerCase(),a=q[d]=q[d]||a;o[a]=b}return this},getAllResponseHeaders:function(){return t===2?u:null},getResponseHeader:function(a){var b;if(t===2){if(!v)for(v={};b=Pc.exec(u);)v[b[1].toLowerCase()]=b[2];b=v[a.toLowerCase()]}return b===j?null:
b},overrideMimeType:function(a){if(!t)f.mimeType=a;return this},abort:function(a){a=a||"abort";x&&x.abort(a);d(0,a);return this}};g.promise(I);I.success=I.done;I.error=I.fail;I.complete=k.add;I.statusCode=function(a){if(a){var b;if(t<2)for(b in a)n[b]=[n[b],a[b]];else{b=a[I.status];I.then(b,b)}}return this};f.url=((a||f.url)+"").replace(Oc,"").replace(Sc,ab[1]+"//");f.dataTypes=m.trim(f.dataType||"*").toLowerCase().split(kc);if(f.crossDomain==null){y=nc.exec(f.url.toLowerCase());f.crossDomain=!(!y||
!(y[1]!=ab[1]||y[2]!=ab[2]||(y[3]||(y[1]==="http:"?80:443))!=(ab[3]||(ab[1]==="http:"?80:443))))}if(f.data&&f.processData&&typeof f.data!=="string")f.data=m.param(f.data,f.traditional);w(Wb,f,b,I);if(t===2)return false;G=f.global;f.type=f.type.toUpperCase();f.hasContent=!Rc.test(f.type);G&&m.active++===0&&m.event.trigger("ajaxStart");if(!f.hasContent){if(f.data){f.url=f.url+((mc.test(f.url)?"&":"?")+f.data);delete f.data}l=f.url;if(f.cache===false){y=m.now();var R=f.url.replace(Vc,"$1_="+y);f.url=
R+(R===f.url?(mc.test(f.url)?"&":"?")+"_="+y:"")}}(f.data&&f.hasContent&&f.contentType!==false||b.contentType)&&I.setRequestHeader("Content-Type",f.contentType);if(f.ifModified){l=l||f.url;m.lastModified[l]&&I.setRequestHeader("If-Modified-Since",m.lastModified[l]);m.etag[l]&&I.setRequestHeader("If-None-Match",m.etag[l])}I.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+(f.dataTypes[0]!=="*"?", "+qc+"; q=0.01":""):f.accepts["*"]);for(A in f.headers)I.setRequestHeader(A,
f.headers[A]);if(f.beforeSend&&(f.beforeSend.call(e,I,f)===false||t===2)){I.abort();return false}for(A in{success:1,error:1,complete:1})I[A](f[A]);if(x=w(pc,f,b,I)){I.readyState=1;G&&h.trigger("ajaxSend",[I,f]);f.async&&f.timeout>0&&(H=setTimeout(function(){I.abort("timeout")},f.timeout));try{t=1;x.send(o,d)}catch(z){if(t<2)d(-1,z);else throw z;}}else d(-1,"No Transport");return I},param:function(a,b){var d=[],f=function(a,b){b=m.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};
if(b===j)b=m.ajaxSettings.traditional;if(m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){f(this.name,this.value)});else for(var e in a)E(e,a[e],b,f);return d.join("&").replace(Nc,"+")}});m.extend({active:0,lastModified:{},etag:{}});var Wc=m.now(),Kb=/(\=)\?(&|$)|\?\?/i;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return m.expando+"_"+Wc++}});m.ajaxPrefilter("json jsonp",function(b,d,f){d=typeof b.data==="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);
if(b.dataTypes[0]==="jsonp"||b.jsonp!==false&&(Kb.test(b.url)||d&&Kb.test(b.data))){var e,h=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,g=a[h],k=b.url,j=b.data,n="$1"+h+"$2";if(b.jsonp!==false){k=k.replace(Kb,n);if(b.url===k){d&&(j=j.replace(Kb,n));b.data===j&&(k=k+((/\?/.test(k)?"&":"?")+b.jsonp+"="+h))}}b.url=k;b.data=j;a[h]=function(a){e=[a]};f.always(function(){a[h]=g;if(e&&m.isFunction(g))a[h](e[0])});b.converters["script json"]=function(){e||m.error(h+" was not called");
return e[0]};b.dataTypes[0]="json";return"script"}});m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){m.globalEval(a);return a}}});m.ajaxPrefilter("script",function(a){if(a.cache===j)a.cache=false;if(a.crossDomain){a.type="GET";a.global=false}});m.ajaxTransport("script",function(a){if(a.crossDomain){var b,d=C.head||C.getElementsByTagName("head")[0]||
C.documentElement;return{send:function(f,e){b=C.createElement("script");b.async="async";if(a.scriptCharset)b.charset=a.scriptCharset;b.src=a.url;b.onload=b.onreadystatechange=function(a,f){if(f||!b.readyState||/loaded|complete/.test(b.readyState)){b.onload=b.onreadystatechange=null;d&&b.parentNode&&d.removeChild(b);b=j;f||e(200,"success")}};d.insertBefore(b,d.firstChild)},abort:function(){if(b)b.onload(0,1)}}}});var Yb=a.ActiveXObject?function(){for(var a in pb)pb[a](0,1)}:false,Xc=0,pb;m.ajaxSettings.xhr=
a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&B()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(d){}b=void 0}return b}:B;var Zb=m.ajaxSettings.xhr();m.extend(m.support,{ajax:!!Zb,cors:!!Zb&&"withCredentials"in Zb});m.support.ajax&&m.ajaxTransport(function(b){if(!b.crossDomain||m.support.cors){var d;return{send:function(f,e){var h=b.xhr(),g,k;b.username?h.open(b.type,b.url,b.async,b.username,b.password):h.open(b.type,b.url,b.async);if(b.xhrFields)for(k in b.xhrFields)h[k]=
b.xhrFields[k];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType);!b.crossDomain&&!f["X-Requested-With"]&&(f["X-Requested-With"]="XMLHttpRequest");try{for(k in f)h.setRequestHeader(k,f[k])}catch(n){}h.send(b.hasContent&&b.data||null);d=function(a,f){var k,n,l,o,q;try{if(d&&(f||h.readyState===4)){d=j;if(g){h.onreadystatechange=m.noop;Yb&&delete pb[g]}if(f)h.readyState!==4&&h.abort();else{k=h.status;l=h.getAllResponseHeaders();o={};if((q=h.responseXML)&&q.documentElement)o.xml=q;try{o.text=
h.responseText}catch(v){}try{n=h.statusText}catch(u){n=""}!k&&b.isLocal&&!b.crossDomain?k=o.text?200:404:k===1223&&(k=204)}}}catch(x){f||e(-1,x)}o&&e(k,n,o,l)};if(!b.async||h.readyState===4)d();else{g=++Xc;if(Yb){if(!pb){pb={};m(a).unload(Yb)}pb[g]=d}h.onreadystatechange=d}},abort:function(){d&&d(0,1)}}}});var Xb={},Ia,ob,Yc=/^(?:toggle|show|hide)$/,Zc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,Lb,Jb=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft",
"paddingRight"],["opacity"]],Ib;m.fn.extend({show:function(a,b,d){if(a||a===0)return this.animate(G("show",3),a,b,d);for(var d=0,f=this.length;d<f;d++){a=this[d];if(a.style){b=a.style.display;if(!m._data(a,"olddisplay")&&b==="none")b=a.style.display="";(b===""&&m.css(a,"display")==="none"||!m.contains(a.ownerDocument.documentElement,a))&&m._data(a,"olddisplay",y(a.nodeName))}}for(d=0;d<f;d++){a=this[d];if(a.style){b=a.style.display;if(b===""||b==="none")a.style.display=m._data(a,"olddisplay")||""}}return this},
hide:function(a,b,d){if(a||a===0)return this.animate(G("hide",3),a,b,d);for(var d=0,f=this.length;d<f;d++){a=this[d];if(a.style){b=m.css(a,"display");b!=="none"&&!m._data(a,"olddisplay")&&m._data(a,"olddisplay",b)}}for(d=0;d<f;d++)if(this[d].style)this[d].style.display="none";return this},_toggle:m.fn.toggle,toggle:function(a,b,d){var f=typeof a==="boolean";m.isFunction(a)&&m.isFunction(b)?this._toggle.apply(this,arguments):a==null||f?this.each(function(){var b=f?a:m(this).is(":hidden");m(this)[b?
"show":"hide"]()}):this.animate(G("toggle",3),a,b,d);return this},fadeTo:function(a,b,d,f){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,d,f)},animate:function(a,b,d,f){function e(){h.queue===false&&m._mark(this);var b=m.extend({},h),d=this.nodeType===1,f=d&&m(this).is(":hidden"),g,k,j,n,l;b.animatedProperties={};for(j in a){g=m.camelCase(j);if(j!==g){a[g]=a[j];delete a[j]}if((k=m.cssHooks[g])&&"expand"in k){n=k.expand(a[g]);delete a[g];for(j in n)j in a||(a[j]=
n[j])}}for(g in a){k=a[g];if(m.isArray(k)){b.animatedProperties[g]=k[1];k=a[g]=k[0]}else b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(k==="hide"&&f||k==="show"&&!f)return b.complete.call(this);if(d&&(g==="height"||g==="width")){b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(m.css(this,"display")==="inline"&&m.css(this,"float")==="none")!m.support.inlineBlockNeedsLayout||y(this.nodeName)==="inline"?this.style.display="inline-block":
this.style.zoom=1}}if(b.overflow!=null)this.style.overflow="hidden";for(j in a){d=new m.fx(this,b,j);k=a[j];if(Yc.test(k))if(g=m._data(this,"toggle"+j)||(k==="toggle"?f?"show":"hide":0)){m._data(this,"toggle"+j,g==="show"?"hide":"show");d[g]()}else d[k]();else{g=Zc.exec(k);n=d.cur();if(g){k=parseFloat(g[2]);l=g[3]||(m.cssNumber[j]?"":"px");if(l!=="px"){m.style(this,j,(k||1)+l);n=(k||1)/d.cur()*n;m.style(this,j,n+l)}g[1]&&(k=(g[1]==="-="?-1:1)*k+n);d.custom(n,k,l)}else d.custom(n,k,"")}}return true}
var h=m.speed(b,d,f);if(m.isEmptyObject(a))return this.each(h.complete,[false]);a=m.extend({},a);return h.queue===false?this.each(e):this.queue(h.queue,e)},stop:function(a,b,d){if(typeof a!=="string"){d=b;b=a;a=j}b&&a!==false&&this.queue(a||"fx",[]);return this.each(function(){var b,f=false,e=m.timers,h=m._data(this);d||m._unmark(true,this);if(a==null)for(b in h){if(h[b]&&h[b].stop&&b.indexOf(".run")===b.length-4){var g=h[b];m.removeData(this,b,true);g.stop(d)}}else if(h[b=a+".run"]&&h[b].stop){h=
h[b];m.removeData(this,b,true);h.stop(d)}for(b=e.length;b--;)if(e[b].elem===this&&(a==null||e[b].queue===a)){if(d)e[b](true);else e[b].saveState();f=true;e.splice(b,1)}(!d||!f)&&m.dequeue(this,a)})}});m.each({slideDown:G("show",1),slideUp:G("hide",1),slideToggle:G("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,d,f){return this.animate(b,a,d,f)}});m.extend({speed:function(a,b,d){var f=a&&typeof a==="object"?m.extend({},a):
{complete:d||!d&&b||m.isFunction(a)&&a,duration:a,easing:d&&b||b&&!m.isFunction(b)&&b};f.duration=m.fx.off?0:typeof f.duration==="number"?f.duration:f.duration in m.fx.speeds?m.fx.speeds[f.duration]:m.fx.speeds._default;if(f.queue==null||f.queue===true)f.queue="fx";f.old=f.complete;f.complete=function(a){m.isFunction(f.old)&&f.old.call(this);f.queue?m.dequeue(this,f.queue):a!==false&&m._unmark(this)};return f},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+0.5}},
timers:[],fx:function(a,b,d){this.options=b;this.elem=a;this.prop=d;b.orig=b.orig||{}}});m.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(m.fx.step[this.prop]||m.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=m.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,b,d){function f(a){return e.step(a)}
var e=this,h=m.fx;this.startTime=Ib||F();this.end=b;this.now=this.start=a;this.pos=this.state=0;this.unit=d||this.unit||(m.cssNumber[this.prop]?"":"px");f.queue=this.options.queue;f.elem=this.elem;f.saveState=function(){m._data(e.elem,"fxshow"+e.prop)===j&&(e.options.hide?m._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&m._data(e.elem,"fxshow"+e.prop,e.end))};f()&&(m.timers.push(f)&&!Lb)&&(Lb=setInterval(h.tick,h.interval))},show:function(){var a=m._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=
a||m.style(this.elem,this.prop);this.options.show=true;a!==j?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());m(this.elem).show()},hide:function(){this.options.orig[this.prop]=m._data(this.elem,"fxshow"+this.prop)||m.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(a){var b,d=Ib||F(),f=true,e=this.elem,h=this.options;if(a||d>=h.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();h.animatedProperties[this.prop]=
true;for(b in h.animatedProperties)h.animatedProperties[b]!==true&&(f=false);if(f){h.overflow!=null&&!m.support.shrinkWrapBlocks&&m.each(["","X","Y"],function(a,b){e.style["overflow"+b]=h.overflow[a]});h.hide&&m(e).hide();if(h.hide||h.show)for(b in h.animatedProperties){m.style(e,b,h.orig[b]);m.removeData(e,"fxshow"+b,true);m.removeData(e,"toggle"+b,true)}if(a=h.complete){h.complete=false;a.call(e)}}return false}if(h.duration==Infinity)this.now=d;else{a=d-this.startTime;this.state=a/h.duration;this.pos=
m.easing[h.animatedProperties[this.prop]](this.state,a,0,1,h.duration);this.now=this.start+(this.end-this.start)*this.pos}this.update();return true}};m.extend(m.fx,{tick:function(){for(var a,b=m.timers,d=0;d<b.length;d++){a=b[d];!a()&&b[d]===a&&b.splice(d--,1)}b.length||m.fx.stop()},interval:13,stop:function(){clearInterval(Lb);Lb=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){m.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=
a.now+a.unit:a.elem[a.prop]=a.now}}});m.each(Jb.concat.apply([],Jb),function(a,b){b.indexOf("margin")&&(m.fx.step[b]=function(a){m.style(a.elem,b,Math.max(0,a.now)+a.unit)})});if(m.expr&&m.expr.filters)m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var rc,$c=/^t(?:able|d|h)$/i,sc=/^(?:body|html)$/i;rc="getBoundingClientRect"in C.documentElement?function(a,b,d,f){try{f=a.getBoundingClientRect()}catch(e){}if(!f||!m.contains(d,a))return f?{top:f.top,
left:f.left}:{top:0,left:0};a=b.body;b=A(b);return{top:f.top+(b.pageYOffset||m.support.boxModel&&d.scrollTop||a.scrollTop)-(d.clientTop||a.clientTop||0),left:f.left+(b.pageXOffset||m.support.boxModel&&d.scrollLeft||a.scrollLeft)-(d.clientLeft||a.clientLeft||0)}}:function(a,b,d){var f,e=a.offsetParent,h=b.body;f=(b=b.defaultView)?b.getComputedStyle(a,null):a.currentStyle;for(var g=a.offsetTop,k=a.offsetLeft;(a=a.parentNode)&&a!==h&&a!==d;){if(m.support.fixedPosition&&f.position==="fixed")break;f=b?
b.getComputedStyle(a,null):a.currentStyle;g=g-a.scrollTop;k=k-a.scrollLeft;if(a===e){g=g+a.offsetTop;k=k+a.offsetLeft;if(m.support.doesNotAddBorder&&(!m.support.doesAddBorderForTableAndCells||!$c.test(a.nodeName))){g=g+(parseFloat(f.borderTopWidth)||0);k=k+(parseFloat(f.borderLeftWidth)||0)}e=a.offsetParent}if(m.support.subtractsBorderForOverflowNotVisible&&f.overflow!=="visible"){g=g+(parseFloat(f.borderTopWidth)||0);k=k+(parseFloat(f.borderLeftWidth)||0)}}if(f.position==="relative"||f.position===
"static"){g=g+h.offsetTop;k=k+h.offsetLeft}if(m.support.fixedPosition&&f.position==="fixed"){g=g+Math.max(d.scrollTop,h.scrollTop);k=k+Math.max(d.scrollLeft,h.scrollLeft)}return{top:g,left:k}};m.fn.offset=function(a){if(arguments.length)return a===j?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b=this[0],d=b&&b.ownerDocument;return!d?null:b===d.body?m.offset.bodyOffset(b):rc(b,d,d.documentElement)};m.offset={bodyOffset:function(a){var b=a.offsetTop,d=a.offsetLeft;if(m.support.doesNotIncludeMarginInBodyOffset){b=
b+(parseFloat(m.css(a,"marginTop"))||0);d=d+(parseFloat(m.css(a,"marginLeft"))||0)}return{top:b,left:d}},setOffset:function(a,b,d){var f=m.css(a,"position");if(f==="static")a.style.position="relative";var e=m(a),h=e.offset(),g=m.css(a,"top"),k=m.css(a,"left"),j={},n={};if((f==="absolute"||f==="fixed")&&m.inArray("auto",[g,k])>-1){n=e.position();f=n.top;k=n.left}else{f=parseFloat(g)||0;k=parseFloat(k)||0}m.isFunction(b)&&(b=b.call(a,d,h));if(b.top!=null)j.top=b.top-h.top+f;if(b.left!=null)j.left=b.left-
h.left+k;"using"in b?b.using.call(a,j):e.css(j)}};m.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),d=this.offset(),f=sc.test(b[0].nodeName)?{top:0,left:0}:b.offset();d.top=d.top-(parseFloat(m.css(a,"marginTop"))||0);d.left=d.left-(parseFloat(m.css(a,"marginLeft"))||0);f.top=f.top+(parseFloat(m.css(b[0],"borderTopWidth"))||0);f.left=f.left+(parseFloat(m.css(b[0],"borderLeftWidth"))||0);return{top:d.top-f.top,left:d.left-f.left}},offsetParent:function(){return this.map(function(){for(var a=
this.offsetParent||C.body;a&&!sc.test(a.nodeName)&&m.css(a,"position")==="static";)a=a.offsetParent;return a})}});m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var d=/Y/.test(b);m.fn[a]=function(f){return m.access(this,function(a,f,e){var h=A(a);if(e===j)return h?b in h?h[b]:m.support.boxModel&&h.document.documentElement[f]||h.document.body[f]:a[f];h?h.scrollTo(!d?e:m(h).scrollLeft(),d?e:m(h).scrollTop()):a[f]=e},a,f,arguments.length,null)}});m.each({Height:"height",Width:"width"},
function(a,b){var d="client"+a,f="scroll"+a,e="offset"+a;m.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(m.css(a,b,"padding")):this[b]():null};m.fn["outer"+a]=function(a){var d=this[0];return d?d.style?parseFloat(m.css(d,b,a?"margin":"border")):this[b]():null};m.fn[b]=function(a){return m.access(this,function(a,b,h){if(m.isWindow(a)){b=a.document;a=b.documentElement[d];return m.support.boxModel&&a||b.body&&b.body[d]||a}if(a.nodeType===9){b=a.documentElement;return b[d]>=b[f]?
b[d]:Math.max(a.body[f],b[f],a.body[e],b[e])}if(h===j){a=m.css(a,b);b=parseFloat(a);return m.isNumeric(b)?b:a}m(a).css(b,h)},b,a,arguments.length,null)}});a.jQuery=a.$=m;typeof define==="function"&&(define.amd&&define.amd.jQuery)&&define("jquery",[],function(){return m})})(window);
(function(a){function j(b,d,f,e){e={data:e||e===0||e===false?e:d?d.data:{},_wrap:d?d._wrap:null,tmpl:null,parent:d||null,nodes:[],calls:o,nest:u,wrap:q,html:l,update:k};b&&a.extend(e,b,{nodes:[],parent:d});if(f){e.tmpl=f;e._ctnt=e._ctnt||e.tmpl(a,e);e.key=++F;(G.length?z:w)[F]=e}return e}function e(b,f,g){var k,g=g?a.map(g,function(a){return typeof a==="string"?b.key?a.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+x+'="'+b.key+'" $2'):a:e(a,b,a._ctnt)}):b;if(f)return g;g=g.join("");g.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,
function(b,f,e,g){k=a(e).get();h(k);f&&(k=d(f).concat(k));g&&(k=k.concat(d(g)))});return k?k:d(g)}function d(b){var d=document.createElement("div");d.innerHTML=b;return a.makeArray(d.childNodes)}function g(b){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+a.trim(b).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,
function(b,d,e,h,g,k,j){b=a.tmpl.tag[e];if(!b)throw"Unknown template tag: "+e;e=b._default||[];if(k&&!/\w$/.test(g)){g=g+k;k=""}if(g){g=f(g);j=j?","+f(j)+")":k?")":"";j=k?g.indexOf(".")>-1?g+f(k):"("+g+").call($item"+j:g;k=k?j:"(typeof("+g+")==='function'?("+g+").call($item):("+g+"))"}else k=j=e.$1||"null";h=f(h);return"');"+b[d?"close":"open"].split("$notnull_1").join(g?"typeof("+g+")!=='undefined' && ("+g+")!=null":"true").split("$1a").join(k).split("$1").join(j).split("$2").join(h||e.$2||"")+"__.push('"})+
"');}return __;")}function b(b,d){b._wrap=e(b,true,a.isArray(d)?d:[v.test(d)?d:a(d).html()]).join("")}function f(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function h(b){function d(b){function e(a){a=a+f;n=g[a]=g[a]||j(n,w[n.parent.key+f]||n.parent)}var h,k=b,n,l;if(l=b.getAttribute(x)){for(;k.parentNode&&(k=k.parentNode).nodeType===1&&!(h=k.getAttribute(x)););if(h!==l){k=k.parentNode?k.nodeType===11?0:k.getAttribute(x)||0:0;if(!(n=w[l])){n=z[l];n=j(n,w[k]||z[k]);n.key=++F;w[F]=
n}t&&e(l)}b.removeAttribute(x)}else if(t&&(n=a.data(b,"tmplItem"))){e(n.key);w[n.key]=n;k=(k=a.data(b.parentNode,"tmplItem"))?k.key:0}if(n){for(h=n;h&&h.key!=k;){h.nodes.push(b);h=h.parent}delete n._ctnt;delete n._wrap;a.data(b,"tmplItem",n)}}var f="_"+t,e,h,g={},k,n,l;k=0;for(n=b.length;k<n;k++)if((e=b[k]).nodeType===1){h=e.getElementsByTagName("*");for(l=h.length-1;l>=0;l--)d(h[l]);d(e)}}function o(a,b,d,f){if(!a)return G.pop();G.push({_:a,tmpl:b,item:this,data:d,options:f})}function u(b,d,f){return a.tmpl(a.template(b),
d,f,this)}function q(b,d){var f=b.options||{};f.wrapped=d;return a.tmpl(a.template(b.tmpl),b.data,f,b.item)}function l(b,d){var f=this._wrap;return a.map(a(a.isArray(f)?f.join(""):f).filter(b||"*"),function(a){if(d)a=a.innerText||a.textContent;else{var b;if(!(b=a.outerHTML)){b=document.createElement("div");b.appendChild(a.cloneNode(true));b=b.innerHTML}a=b}return a})}function k(){var b=this.nodes;a.tmpl(null,null,null,this).insertBefore(b[0]);a(b).remove()}var n=a.fn.domManip,x="_tmplitem",v=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,
w={},z={},E,B={key:0,data:{}},F=0,t=0,G=[];a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,d){a.fn[b]=function(f){var e=[],f=a(f),h,g,k;h=this.length===1&&this[0].parentNode;E=w||{};if(h&&h.nodeType===11&&h.childNodes.length===1&&f.length===1){f[d](this[0]);e=this}else{g=0;for(k=f.length;g<k;g++){t=g;h=(g>0?this.clone(true):this).get();a(f[g])[d](h);e=e.concat(h)}t=0;e=this.pushStack(e,b,f.selector)}f=E;E=null;a.tmpl.complete(f);
return e}});a.fn.extend({tmpl:function(b,d,f){return a.tmpl(this[0],b,d,f)},tmplItem:function(){return a.tmplItem(this[0])},template:function(b){return a.template(b,this[0])},domManip:function(b,d,f,e){if(b[0]&&a.isArray(b[0])){for(var h=a.makeArray(arguments),g=b[0],k=g.length,j=0,l;j<k&&!(l=a.data(g[j++],"tmplItem")););l&&t&&(h[2]=function(b){a.tmpl.afterManip(this,b,f)});n.apply(this,h)}else n.apply(this,arguments);t=0;E||a.tmpl.complete(w);return this}});a.extend({tmpl:function(d,f,h,g){var k=
!g;if(k){g=B;d=a.template[d]||a.template(null,d);z={}}else if(!d){d=g.tmpl;w[g.key]=g;g.nodes=[];g.wrapped&&b(g,g.wrapped);return a(e(g,null,g.tmpl(a,g)))}if(!d)return[];typeof f==="function"&&(f=f.call(g||{}));h&&h.wrapped&&b(h,h.wrapped);f=a.isArray(f)?a.map(f,function(a){return a?j(h,g,d,a):null}):[j(h,g,d,f)];return k?a(e(g,null,f)):f},tmplItem:function(b){var d;for(b instanceof a&&(b=b[0]);b&&b.nodeType===1&&!(d=a.data(b,"tmplItem"))&&(b=b.parentNode););return d||B},template:function(b,d){if(d){typeof d===
"string"?d=g(d):d instanceof a&&(d=d[0]||{});d.nodeType&&(d=a.data(d,"tmpl")||a.data(d,"tmpl",g(d.innerHTML)));return typeof b==="string"?a.template[b]=d:d}return b?typeof b!=="string"?a.template(null,b):a.template[b]||a.template(null,v.test(b)?b:a(b)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});a.extend(a.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},
open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){w={}},afterManip:function(b,
d,f){var e=d.nodeType===11?a.makeArray(d.childNodes):d.nodeType===1?[d]:[];f.call(b,d);h(e);t++}})})(jQuery);$.template("widget_feedback",'<div class="pane feedback">    <section>        <div class="form">            <div class="titles">                <p>From:</p>                <p>Subject:</p>            </div>            <div class="values">                <p>${name}</p>                <p>${subject}</p>            </div>            <textarea></textarea>        </div>        <div class="sent">            <h1>Thanks, your feedback has been sent.</h1>        </div>    </section>    <button type="submit" class="send btn btn-submit full">send feedback</button></div>');
$.template("tvmode_reel_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p><strong>Not so fast....</strong></p>        <p>Advanced TV is only available on the Business and Enterprise plans. Upgrade now to unlock this and other cool features.</p>        <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">            <strong>Upgrade my plan</strong>            <span>30 day money back guarantee</span>        </a>    </div></article>');
$.template("widget_webhook",'<li class="webhook">    <h3>Webhooks URL</h3>    <div class="mod-webhook">        <p class="description">Webhooks let you get real-time notifications in your widget. <a class="docs" href="${webhook_doc_url}" target="_blank">See how</a></p>        <input class="url" type="text" value="${url_pattern}${content.webhook_key}" readonly="readonly">    </div></li>');$.template("plan_invoice_item",'<li class="invoice-item">    <div class="description">        <span class="invoice-id">Invoice #${invoice_number}</span><br />        <span class="invoice-date">${date}</span>    </div>    <a href="${url}" class="pdf btn btn-ico-action no-link">        <i class="icon-doc-pdf"></i>        <span>Print<br>invoice</span>    </a></li>');
$.template("subscription",'<div class="subscription pane"><section>    <div class=\'form\'>        <h3>your current plan:</h3>        {{tmpl($data, $item) "plan_info"}}        {{tmpl($data, $item) "coupon_info"}}        {{if has_trial_expired === false}}            <h3 class="title">your payment data:</h3>        {{else}}            <h3 class="title trial">                Place your order to continue using Ducksboard            </h3>        {{/if}}        <ul class="server-errors"></ul>        <fieldset id="billing-info" class="recurly"></fieldset>        <h3>Do you have a VAT number?</h3>        <div class=\'recurly vat-info\'>        </div>        <div class="tos">            <input id="tos_check" type="checkbox"/>            <label id="accept_tos" for="tos_check">I accept the <a href="http://ducksboard.com/terms-of-service/" target="_blank" class="tos_link">Terms of Service</a><span class="and"> and </span><a href="http://ducksboard.com/privacy-policy/" target="_blank" class="pp_link">Privacy Policy</a></label>        </div>    </div>    <div class="loading-plans-info">        <h3>Loading plans...</h3>    </div>    <div class="plans-info">        {{tmpl($data, $item) "plan_list"}}    </div>    {{tmpl($data, $item) "confirmation_info"}}    <div class="sent">        <h1>Thanks, your subscription has been processed correctly.</h1>    </div></section><button type="submit" class="send btn btn-submit full has_children"><span>{{html submit_html}}</span></button></div>');
$.template("widget_embed",'<li class="embed">    <h3>EMBED THIS WIDGET ON ANY WEBSITE</h3>    <div class="mod-embed disabled">        <p class="description">You can insert this widget into any web page, just enable embedding and copy the snippet.</p>        <a href="#" class="enable"><span>Enable embedding</span></a>    </div>    <div class="mod-embed enabled">        <p class="description">Place this snippet into any web page.</p>        <div class="snippet"></div>    </div></li>');
$.template("widget_notifications_slider",'<div class="m-notifications-list">    <strong class="title">YOUR ALERTS</strong>    <div class="slidster">        <div class="viewport">            <ul>            </ul>        </div>    </div></div>');$.template("confirmation",'<div class="confirmation ${confirmation_class}">    <p>${text}</p>    <div class="actions">        <a href="#" class="conf_continue ${continue_css_class} no-link">{{if continue_icon}}<i class="${continue_icon}"></i>{{/if}}<span>${continue_text}</span></a>        <a href="#" class="conf_discard ${discard_css_class} no-link"><span>${discard_text}</span></a>    </div></div>');
$.template("slot_image_full_item",'<div class="picture ${klass}" style="background-image: url(\'${source}\')">    <div class="caption">${caption}</div></div>');$.template("directory_custom_googlespreadsheets",'<a href="#directory/service/googlespreadsheets" class="googlespreadsheets custom">    <h4>Your Spreadsheets</h4>    <p>Feed your widget from your Google Spreadsheets account.</p></a>');$.template("widget_accounts",'<section class="account pane">    <div class="choices">        <h1>        {{if is_new}}        Choose the account you want to link to this widget:        {{else}}        Account used by this widget:        {{/if}}        </h1>        <ul></ul>        {{if is_new}}        <a class="new">Or add<br />another account</a>        {{/if}}    </div>    <div class="loading">        <h1>Please wait while the newly linked account is being created...</h1>    </div>    {{if is_new}}    <div class="form">        <a class="cancel" href="#">cancel</a>        <input type="button" class="send" value="connect" />    </div>    {{/if}}</section>');
$.template("dashboard_current",'<a id="change-dashboard">    <span>${label}</span></a>');$.template("directory_group_detail",'<li>    <div class="kind m-widget-preview">        <h2>${name}</h2>        <p class="description">{{html description}}</p>        {{if many_kinds}}            {{if has_choices}}            <select data-placeholder="${choice_question}" class="kinds">                <option></option>                {{each(i, k) kinds}}                <option value="${k.kind}">${k.choice_answer}</option>                {{/each}}            </select>            {{else}}            <h3>Choose one version:</h3>            <ul class="kinds"></ul>            {{/if}}        {{/if}}        {{if needs_upgrade}}            <a class="add">Upgrade your account</a>        {{else}}            {{if many_kinds}}<a class="add disabled" disabled="disabled">            {{else}}<a class="add">{{/if}}Add this widget</a>        {{/if}}    </div></li>');
$.template("timespans_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p><strong>Not so fast...</strong></p>        <p>Your free trial is limited to 30 days data retention. Upgrade to any of the premium plans to get unlimited data retention, and unlock many other features.</p>        <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">            <strong>Upgrade my plan</strong>            <span>30 day money back guarantee</span>        </a>    </div></article>');
$.template("slot_counter_box",'<section class="slot s-counter-box ${data_source_kind}">    <p class="value">...</p>    <p class="subtitle">${subtitle}</p></section>');$.template("widget",'<article class="widget w${width}x${height} w${width}xh w${height}xv ${css_classes} ${kind}">    <div class="inner">        <header>            <h4>${title}</h4>        </header>    </div></article>');$.template("widget_notifications_fake",'<div class="m-notifications-list">    <strong class="title">EXAMPLES OF ALERTS</strong>    <ul>        <li class="m-notification disabled">            <p><em class="clause">if</em> <strong class="condition">Daily sales rises over 1,000</strong></p>            <p><em class="clause">then</em> <strong class="type send_mail" title="Send via email"></strong> <strong class="condition">sales@ducksboard.com</strong></p>        </li>        <li class="m-notification disabled"><p><em class="clause">if</em> <strong class="condition">Twitter followers falls under 2,450</strong></p>            <p><em class="clause">then</em> <strong class="type send_mail" title="Send via email"></strong> <strong class="condition">socialmedia@ducksboard.com</strong></p>        </li>        <li class="m-notification disabled">            <p><em class="clause">if</em> <strong class="condition">Conversion rate falls under 2%</strong></p>            <p><em class="clause">then</em> <strong class="type webhook" title="Webhook"></strong> <strong class="condition">http://push.mycompany.com</strong></p>        </li>    </ul></div>');
$.template("plan_info",'{{if plan_exceeded }}<div class="current plan-item exceeded">  We do not offer plans for more than ${max_dashboards_num}  dashboards. Please delete ${to_delete} or contact us for a quote.</div>{{else}}<div class="current plan-item">    {{if plan}}        <span class="name">${plan.name}</span>        <span class="total cost">            {{if is_eu}}${totals.stages.before_vat_eur}{{else}}${totals.stages.usd_now}{{/if}}{{if plan.payment_frequency === \'monthly\'}}<span class="monthly">/mo</span>{{else}}<span class="yearly">/year</span>{{/if}}        </span>        {{if has_recurly_account_expired === false}}        <span class="link">{{if $item.plan_list}}keep this plan{{else}}change it?{{/if}}</span>        {{/if}}        <span class="loading-text">loading</span>        {{if totals.vat}}            <span class="vat">21% VAT will be added to your bill</span>        {{/if}}    {{/if}}</div>{{/if}}');
$.template("account_api_key",'<div class="api-key pane"><section>    <h1>You can use your API key to control every part of the dashboard</h1>    <a class="docs" target="_blank" href="http://dev.ducksboard.com/apidoc/">Check out our API documentation!</a></section><div class="button-wrap">    <button type="submit" class="reset btn btn-submit full">generate new key</button></div></div>');$.template("widget_notifications",'<section class="notifications pane loading">    <div class="notifications-main-view">        <h1>Alerts get you notified when something important happens:</h1>        <div class="actions">            <a href="#" class="btn btn-ico-action lightdark no-link button-new">                <i class="icon-plus"></i>                <span>NEW<br>ALERT</span>            </a>        </div>        <div class="failure">            <div>                <h2>OOOPS :(</h2>                <p>                    We weren\'t able to obtain widget\'s alerts                    from server.                </p>                <a>C\'mon, try again</a>            </div>        </div>        <div class="m-notifications-list"></div>    </div></section>');
$.template("plan_invoices",'<div class="pane invoices">    <section>        <h1>Invoices</h1>        <ul class="invoice-list"></ul>        <div class="failure">            <div>                <h2>OOOPS :(</h2>                <p>                    We weren\'t able to obtain your invoices                    from the service.                </p>                <a>C\'mon, try again</a>            </div>        </div>    </section></div>');$.template("dashboard_github_create",'<article class="service-board-setup github {{if from_wizard_dashboard}}modal-wizard{{/if}}">    <header>        {{if from_wizard_dashboard}}            <a class="close" href="#wizard/dashboard/choose_service">BACK TO SERVICES LISTING</a>        {{else}}            {{if has_dashboards}}            <a class="close" href="#">Not right now</a>            {{else}}            <a class="close" href="/accounts/logout">Logout</a>            {{/if}}        {{/if}}    </header>    <section>        <span class="logo serv-logo github"></span>        <p class="description">${kind.description}</p>        <form>            {{if has_services}}            <fieldset class="accounts">                <legend>Select the github account you want to use</legend>                <ul class="services">                    <li>                        <a class="btn btn-service github new"><i class="icon-plus"></i><span>Link a new one</span></a>                    </li>                </ul>            </fieldset>            {{/if}}            <fieldset class="credentials">                <legend>Connect your github account</legend>                <input type="button" class="connect" value="go to the authentication page" />            </fieldset>            <fieldset class="loading">              <legend>Please wait while the newly linked account is being created...</legend>            </fieldset>            <div class="failure">              <h2>OOOPS :(</h2>              <p>                We weren\'t able to obtain the required information                from the service. Are you sure you granted us access?              </p>              <a>C\'mon, try again</a>            </div>            <fieldset class="setup">                <legend>Which repository do you want the dashboard for?</legend>                <input type="button" class="create" value="ok!" />                <input class="repo-placeholder" />                {{if !from_wizard_dashboard}}                <input type="text" class="field-label" placeholder="Dashboard name" />                {{/if}}            </fieldset>        </form>    </section></article>');
$.template("widget_data_api_fieldset",'{{if has_multiple_slots}}<a class="edit">Edit</a>{{/if}}<fieldset></fieldset>');$.template("tvmode_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p>            <strong>TV Mode is not available in the (Personal) Ducksboard Basic plan.</strong>        </p>        <p>            Upgrade now to unlock this and other cool features like Alerts, real-time monitoring and enhanced analytics.        </p>        <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">            <strong>Upgrade your account</strong>            <span>30 day money back guarantee</span>        </a>    </div></article>');
$.template("slot_iframe_item",'<iframe class="${klass}" src="${source}" scrolling="no" sandbox="allow-scripts allow-same-origin allow-forms allow-top-navigation" />');$.template("welcome_widget",'<li class="welcome-widget not-draggable">    <article class="widget no-border w1x2 post-it" style="display: block;">        <div class="inner">            <p>Welcome!</p>            {{if plan_label === \'whitelabel\' }}            <p>You are creating a dashboard for your client.<br />Remember you can customize the background image and create as many widgets as you need.<br />Don\'t forget to give your client their username and password so that they can access their gorgeous dashboard!</p>            {{else}}            <p>This is your empty dashboard, brimming with possibility.<br>Why don\'t you grab some widgets and light this thing up?<br><br><a href="#directory">Create a widget now!</a></p>            {{/if}}            <p class="ttr">The ducks</p>        </div>    </article></li>');
$.template("custom_widget_count_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p><strong>Hold on a second...</strong></p>        <p>We love that you love to make your own widgets.</p>        <p>You have, however, reached your plans\'s limit for custom widgets. Upgrade your plan to unlock this and other advanced features.</p>        {{if upgrade_possible}}            <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">                <strong>Upgrade my plan</strong>                <span>30 day money back guarantee</span>            </a>        {{else}}            <a class="btn-upsell" href="mailto:contact@ducksboard.com">                <strong>Contact us</strong>            </a>        {{/if}}    </div></article>');
$.template("slot_leaderboard_item",'<tr>    <td><div title="${name}">${name}</div></td>    {{each values}}        <td class="value"><div title="${$value}">${$value}</div></td>    {{/each}}</tr>');$.template("slot_iframe",'<section class="slot s-iframe ${data_source_kind}">    <div class="iframe border"></div>    <div class="actions">        <span class="dragger btn btn btn-ico-trans"><i class="icon-move"></i><span class="accessible">Drag</span></span>        <a href="#settings/widget/id" class="settings btn btn-ico-trans"><i class="icon-settings"></i><span class="accessible">Settings</span></a>    </div>    <span class="fake-border border-left"></span>    <span class="fake-border border-top"></span>    <span class="fake-border border-right"></span>    <span class="fake-border border-bottom"></span>    <span class="helper-layer"></span>    <div class="iframe">        <iframe class="empty" src="" scrolling="no"></iframe>    </div></section>');
$.template("gridster_container",'<li data-col="${col}" data-row="${row}" data-sizex="${sizex}" data-sizey="${sizey}"></li>');$.template("dashboard_zendesk_create",'<article class="service-board-setup zendesk {{if from_wizard_dashboard}}modal-wizard{{/if}}">    <header>        {{if from_wizard_dashboard}}            <a class="close" href="#wizard/dashboard/choose_service">BACK TO SERVICES LISTING</a>        {{else}}            {{if has_dashboards}}            <a class="close" href="#">Not right now</a>            {{else}}            <a class="close" href="/accounts/logout">Logout</a>            {{/if}}        {{/if}}    </header>    <section>        <span class="logo serv-logo zendesk"></span>        <p class="description">${kind.description}</p>        <form>            {{if has_services}}            <fieldset class="accounts">                <legend>Select the Zendesk account you want to use</legend>                <ul class="services">                    <li>                        <a class="btn btn-service zendesk new"><i class="icon-plus"></i><span>Link a new one</span></a>                    </li>                </ul>            </fieldset>            {{/if}}            <fieldset class="credentials">                <legend>Connect your Zendesk account</legend>                <input type="button" class="connect" value="connect" />            </fieldset>            <fieldset class="setup">                <legend>Which group and tags do you want the dashboard for?</legend>                <input type="button" class="create small" value="ok!" />                <input class="groups-placeholder" />                {{if !from_wizard_dashboard}}                <input type="text" class="field-label" placeholder="Dashboard name" />                {{/if}}            </fieldset>        </form>    </section></article>');
$.template("slot_counter_subtitle",'<section class="slot counter-subtitle ${data_source_kind}">    <p class="value">...</p>    <p class="subtitle">${subtitle}</p></section>');$.template("dashboard_settings",'<article id="dashboard-preferences">    <header{{if is_new}} class="new"{{/if}}>        <section class="title">            <h1>${label}</h1>            <fieldset>                <input type="text" class="field-label" name="label" placeholder="dashboard name" maxlength="60" value="${label}" />                <input class="save" type="button" value="save" />            </fieldset>        </section>        <a class="btn btn-ico-action rename">            <i class="icon-edit"></i>            <span>Change<br>name</span>        </a>        {{if !is_last}}        <a href="#" class="btn btn-ico-action delete{{if is_new}} disabled{{/if}}">            <i class="icon-trash"></i>            <span>Delete<br>dashboard</span>        </a>        {{/if}}        <a class="close" href="#">close</a>    </header>    <nav class="sidebar">        {{if !is_new}}        <a><span>Share this<br/>dashboard</span></a>        {{/if}}        {{if is_editable}}        <a><span>Backgrounds</span></a>        {{/if}}        {{if is_editable}}        <a><span>TV mode reel</span></a>        {{/if}}    </nav>    {{if !is_new}}    <section class="pane access-tokens">        <h1>You can share the generated links to give others read-only access to this dashboard.</h1>        <ul></ul>    </section>    {{/if}}    <section class="pane backgrounds">        <ul></ul>    </section>    <section class="pane tvmode-reel">    </section></article>');
$.template("directory_latest",'<div class="m-latest-widgets slidster">    <strong class="title">Check our latest widgets</strong>    <div class="viewport">        <ul>            {{each(i, widget) widgets}}                <li>                    <a href="#directory/${widget.service}/${widget.group}" class="serv-sq-logo ${widget.service}">                        <strong>${widget.name}</strong>                        <span>${widget.description}</span>                    </a>                </li>            {{/each}}        </ul>    </div></div>');
$.template("plan_item",'<li class="plan-item">    <span class="plan-name">${name}</span><br />    <span class="plan-description">${description}</span><br />    <span class="plan-interval">${payment_frequency}</span><br />    <span class="invoice-total">${subtotal} USD<span class="vat_num"> + ${vat_percent}% VAT = $${total} USD</span></span></li>');$.template("notifications",'{{if subscriber_kind === \'whitelabel\' }}    {{if readonly === false && clients === true }}     <li class="notification login_as">        <a href="access/login-as/">            View the dashboard as your client        </a>        <a href="#" class="close">Dismiss</a>    </li>    {{else}}        <li class="notification empty"></li>    {{/if}}{{else current_is_serviceboard === true && signup }}     <li class="notification signup">        <a href="#new/dashboard/default">            Ready to explore? Start creating <strong>your own dashboards</strong>        </a>        <a href="#" class="close">Dismiss</a>    </li>{{else current_is_serviceboard === false && current_is_chromeboard === false && has_trial_expired === true }}    <li class="notification trial-expired">        <a href="#trial-expired">your trial has sadly come to an end</a>    </li>{{else current_is_serviceboard === false && current_is_chromeboard === false && has_recurly_account_expired}}    <li class="notification subscription-expired">        <a href="#subscription-expired">account disabled due to billing issues</a>    </li>{{else current_is_serviceboard === false && current_is_chromeboard === false && trial_expiration_date }}    <li class="notification subscription">        <a href="#settings/account/subscription">            your trial ends on ${trial_expiration_date}, <span>upgrade now!</span>        </a>    </li>{{else current_is_serviceboard === false && current_is_chromeboard === false && signup }}     <li class="notification signup">        <a href="#settings/dashboard">            Did you know you can <strong>share this dashboard?</strong>        </a>        <a href="#" class="close">Dismiss</a>    </li>{{else}}    <li class="notification empty"></li>{{/if}}');
$.template("services_settings",'<div class="services pane">    <section class="account-list">        <h1>External accounts</h1>        <ul></ul>    </section>    <section class="form">        <a class="cancel" href="#">cancel</a>        <input type="button" class="send" value="connect" />    </section></div>');$.template("directory_custom_categories",'<article id="directory-custom" class="m-directory">    <header>        <hgroup>            <h1>Add a custom widget</h1>            <h3>Track your own data with our pre-made widgets</h3>        </hgroup>        <a class="close" href="#">close</a>    </header>    <ul>        {{each(i, category) categories}}        <li class="${category.id}">            <a href="#custom/${category.id}">${category.name}</a>            <p class="description">${category.description}</p>        </li>        {{/each}}    </ul>    <a class="back" href="#directory">Go back to widgets for internet services</a></article>');
$.template("slot_leaderboard_trend_item",'<tr>    <td><div title="${name}">${name}</div></td>    {{each values}}        <td class="value"><div title="${$value}">${$value}</div></td>    {{/each}}    <td class="trend">        <span class="${trend}">${trend}</span>    </td></tr>');$.template("dashboard_analytics_create",'<article class="service-board-setup analytics {{if from_wizard_dashboard}}modal-wizard{{/if}}">    <header>        {{if from_wizard_dashboard}}            <a class="close" href="#wizard/dashboard/choose_service">BACK TO SERVICES LISTING</a>        {{else}}            {{if has_dashboards}}            <a class="close" href="#">Not right now</a>            {{else}}            <a class="close" href="/accounts/logout">Logout</a>            {{/if}}        {{/if}}    </header>    <section>        <span class="logo serv-logo analytics"></span>        <p class="description">${kind.description}</p>        <form>            {{if has_services}}            <fieldset class="accounts">                <legend>Select the Analytics account you want to use</legend>                <ul class="services">                    <li>                        <a class="btn btn-service analytics new"><i class="icon-plus"></i><span>Link a new one</span></a>                    </li>                </ul>            </fieldset>            {{/if}}            <fieldset class="credentials">                <legend>Connect your Analytics account</legend>                <input type="button" class="connect" value="go to the authentication page" />            </fieldset>            <fieldset class="loading">              <legend>Please wait while the newly linked account is being created...</legend>            </fieldset>            <div class="failure">              <h2>OOOPS :(</h2>              <p>                We weren\'t able to obtain the required information                from the service. Are you sure you granted us access?              </p>              <a>C\'mon, try again</a>            </div>            <fieldset class="setup">                <legend>Which property do you want the dashboard for?</legend>                <input type="button" class="create small" value="ok!" />                <input class="properties-placeholder" />                {{if !from_wizard_dashboard}}                <input type="text" class="field-label" placeholder="Dashboard name" />                {{/if}}            </fieldset>        </form>    </section></article>');
$.template("directory_group_detail_sizes",'<select class="size">    {{each(i, size) sizes}}    <option value="${size[0]}x${size[1]}">    Size: ${size[0]} column{{if size[0] > 1}}s{{/if}}    / ${size[1]} row{{if size[1] > 1}}s{{/if}}    </option>    {{/each}}</select>');$.template("new_access_token",'<fieldset class="token-data">    <input type="text" class="field-description" name="description" placeholder="description" />    <input type="password" class="field-password" name="password" placeholder="optional password" />    <button type="submit" class="create btn btn-text-dark">create</button></fieldset>');
$.template("account_settings",'<article id="account-preferences">    <header>        <hgroup>        {{if has_trial_expired === false}}            <h1>Account Preferences</h1>        {{else}}            <h1>Trial period expired</h1>        {{/if}}        </hgroup>        <a class="close" href="#">close</a>    </header>    <nav class="sidebar"></nav>    <section class="placeholder pane"></section></article>');$.template("slot_line_chart_header_legend",'<span class="legend label-${layout}">${subtitle} </span>');
$.template("directory_custom_detail",'<article id="custom-detail" class="m-directory custom-widget-detail">    <header>        <hgroup>            <h1>Add a custom widget</h1>        </hgroup>        <a class="close" href="#">close</a>        <a class="back" href="#custom">Go back to the widgets</a>    </header>    <nav>        <a class="previous"></a>        <a class="next"></a>    </nav>    <div class="groups slidster">        <div class="viewport">            <ul></ul>        </div>    </div></article>');
$.template("slot_chart",'<section class="slot s-chart s-single-line ${data_source_kind}">    <p class="value"></p>    <p class="subtitle">${subtitle}</p></section>');$.template("slot_timeline_item",'<li>    {{if image}}        <figure>        {{if $item.is_color($item.data)}}            <span style="background-color: ${image};"></span>        {{else}}            <img src="${image}" alt="${name}" />        {{/if}}        </figure>    {{/if}}    <div class="body">        <span class="title">            ${title}            <time class="time" datetime="${time}"></time>        </span>        <div class="content"><p>${content}</p></div>    </div></li>');
$.template("input_date",'<div class="datepicker-wrap">    <input type="text" class="field-${name}" value="${value}" {{if placeholder}}placeholder="${placeholder}"{{/if}} {{if maxlength}}maxlength="${maxlength}"{{/if}} />    <span class="add-on tip"><i class="icon-th"></i></span></div>');$.template("dashboard_salesforce_create",'<article class="service-board-setup salesforce {{if from_wizard_dashboard}}modal-wizard{{/if}}">    <header>        {{if from_wizard_dashboard}}            <a class="close" href="#wizard/dashboard/choose_service">BACK TO SERVICES LISTING</a>        {{else}}            {{if has_dashboards}}            <a class="close" href="#">Not right now</a>            {{else}}            <a class="close" href="/accounts/logout">Logout</a>            {{/if}}        {{/if}}    </header>    <section>        <span class="logo serv-logo salesforce"></span>        <p class="description">${kind.description}</p>        <form>            {{if has_services}}            <fieldset class="accounts">                <legend>Select the salesforce account you want to use</legend>                <ul class="services">                    <li>                        <a class="btn btn-service salesforce new"><i class="icon-plus"></i><span>Link a new one</span></a>                    </li>                </ul>            </fieldset>            {{/if}}            <fieldset class="credentials">                <legend>Connect your salesforce account</legend>                <input type="button" class="connect" value="go to the authentication page" />            </fieldset>            <fieldset class="loading">              <legend>Please wait while the newly linked account is being created...</legend>            </fieldset>            <div class="failure">              <h2>OOOPS :(</h2>              <p>                We weren\'t able to obtain the required information                from the service. Are you sure you granted us access?              </p>              <a>C\'mon, try again</a>            </div>            <fieldset class="setup">                <legend>Create your dashboard!</legend>                <input type="button" class="create small" value="ok!" />                {{if !from_wizard_dashboard}}                <input type="text" class="field-label" placeholder="Dashboard name" />                {{/if}}            </fieldset>        </form>    </section></article>');
$.template("slot_status",'<section class="slot s-status ${data_source_kind}">    <p class="${subtitle_size}">        <strong class="subtitle">${subtitle}</strong>        <time class="time"></time>    </p>    <strong class="status" data-status="${status}">${status}</strong></section>');$.template("widget_appearance",'<section class="appearance pane">    <h1 class="hidden">Choose colors and text for your widget.</h1>    <div class="edit-appearance">        <div class="editor m-widget-edit-positions ${kind}"></div>    {{if has_timespans}}    <div class="extras timespan">      <strong class="title">Timeframe?</strong>    </div>    {{/if}}</section>');
$.template("wizard_manual_setup",'<article class="modal-wizard">    <h1>Manual setup</h1>    <a href="#" class="close">close</a>    <div class="m-text">        <ul>            <li>Easily add ready made widgets</li>            <li>Organize your widgets on Dashboards</li>            <li>Share your Dashboards</li>        </ul>    </div>    <a href="#directory" class="btn btn-submit hovered">Open widgets directory &raquo;</a></article>');$.template("confirmation_info",'<div class="confirm">    <a class="cancel" href="#">cancel</a>    {{if previous_plan}}    <h1>Here are the details of your plan change:</h1>    <p>Your current plan</p>    <div class="current preview plan-item">      <span class="name">${previous_plan.name}</span>      <a class="link" href="http://ducksboard.com/pricing" target="_blank">See plan details</a>      <span class="total cost">            {{if is_eu}}${previous_totals.stages.eur_now}{{else}}${previous_totals.stages.usd_now}{{/if}}{{if previous_plan.payment_frequency === \'monthly\'}}<span class="monthly">/mo</span>{{else}}<span class="yearly">/year</span>{{/if}}      </span>      {{if previous_totals.vat}}          <span class="vat">VAT included</span>      {{/if}}    </div>    <p>Your new plan</p>    <div class="preview plan-item">      <span class="name">${plan.name}</span>      <a class="link" href="http://ducksboard.com/pricing" target="_blank">See plan details</a>      <span class="total cost">            {{if is_eu}}${totals.stages.eur_now}{{else}}${totals.stages.usd_now}{{/if}}{{if plan.payment_frequency === \'monthly\'}}<span class="monthly">/mo</span>{{else}}<span class="yearly">/year</span>{{/if}}      </span>      {{if totals.vat}}          <span class="vat">VAT included</span>      {{/if}}    </div>    <p>{{if previous_plan.code === plan.code}}The payment frequency will be adjusted at the end of the current billing cycle.{{else}}The change will take place immediately and we will prorate the subscription cost.{{/if}}</p>    {{else}}    <h1>        Almost there! Here are the details of your <b>${plan.payment_frequency}</b> subscription to the ${plan.name} plan:    </h1>    <p class="features">        <strong>This plan includes:</strong><br/>        ${plan.description}    </p>    <table>        <tbody>            {{if totals}}                <tr class="first">                    <td>Plan price</td>                    <td class="num">                        {{if is_eu}}                            ${totals.eur_plan}                        {{else}}                            ${totals.usd_plan}                        {{/if}}                    </td>                </tr>                {{if coupon }}                    <tr>                        <td>Coupon: ${coupon_description}</td>                        <td class="num">                            {{if is_eu}}                                ${totals.eur_coupon}                            {{else}}                                ${totals.usd_coupon}                            {{/if}}                        </td>                    </tr>                {{/if}}                <tr>                    <td>VAT</td>                    <td class="num">                        {{if totals.vat}}                            ${totals.vat}                        {{else}}                            0                        {{/if}}                    </td>                </tr>                <tr class="total">                    <td>TOTAL</td>                    <td class="num">                    {{if is_eu}}                        ${totals.stages.eur_now}                    {{else}}                        ${totals.stages.usd_now}                    {{/if}}                    </td>                </tr>            {{/if}}        </tbody>    </table>    {{/if}}</div>');
$.template("dashboard_twitter_create",'<article class="service-board-setup twitter {{if from_wizard_dashboard}}modal-wizard{{/if}}">    <header>        {{if from_wizard_dashboard}}            <a class="close" href="#wizard/dashboard/choose_service">BACK TO SERVICES LISTING</a>        {{else}}            {{if has_dashboards}}            <a class="close" href="#">Not right now</a>            {{else}}            <a class="close" href="/accounts/logout">Logout</a>            {{/if}}        {{/if}}    </header>    <section>        <span class="logo serv-logo twitter"></span>        <p class="description">${kind.description}</p>        <form>            {{if has_services}}            <fieldset class="accounts">                <legend>Select the twitter account you want to use</legend>                <ul class="services">                    <li>                        <a class="btn btn-service twitter new"><i class="icon-plus"></i><span>Link a new one</span></a>                    </li>                </ul>            </fieldset>            {{/if}}            <fieldset class="credentials">                <legend>Connect your twitter account</legend>                <input type="button" class="connect" value="go to the authentication page" />            </fieldset>            <fieldset class="loading">              <legend>Please wait while the newly linked account is being created...</legend>            </fieldset>            <div class="failure">              <h2>OOOPS :(</h2>              <p>                We weren\'t able to obtain the required information                from the service. Are you sure you granted us access?              </p>              <a>C\'mon, try again</a>            </div>            <fieldset class="setup">                <legend>Create your dashboard!</legend>                <input type="button" class="create small" value="ok!" />                {{if !from_wizard_dashboard}}                <input type="text" class="field-label" placeholder="Dashboard name" />                {{/if}}            </fieldset>        </form>    </section></article>');
$.template("widget_notification_form",'<div class="notification-form">    <a href="#" class="back">Go back to the list</a>    <h1>Alerts get you notified when something important happens:</h1>    <strong class="title">{{if edition}}Edit alert{{else}}Create a new alert{{/if}}</strong>    <form class="m-notification-form" action="" method="post" accept-charset="utf-8">        <fieldset>            <div class="if">                <strong>if</strong>                <select class="field-layout" {{if edition }}disabled="disabled"{{/if}}>                    {{each(i, s) slots}}                    <option value="${s.layout}" {{if s.layout === $data.layout }}selected="selected"{{/if}}>${s.subtitle}</option>                    {{/each}}                </select>                <select class="field-condition_kind"></select>                <div class=\'condition-params\'></div>            </div>            <div class="then">                <strong>then</strong>                <select class="field-action_kind">                    {{each(i, k) action_kinds}}                    <option value="${k.kind}" {{if k.kind === $data.action_kind }}selected="selected"{{/if}}>${k.display_name}</option>                    {{/each}}                </select>                <div class=\'action-params\'></div>            </div>        </fieldset>        <button type="submit">Save alert</button>    </form>    <div class="server-error"></div></div>');
$.template("select_timezones",'<select class="field-timezone">    <optgroup label="most used">    {{each(i, timezone) most_used_timezones}}        <option value="${timezone}" {{if $data.value === timezone}}selected="selected"{{/if}}>${timezone}</option>    {{/each}}    </optgroup>    <optgroup label="all timezones">    {{each(i, timezone) timezones}}        <option value="${timezone}" {{if $data.value === timezone}}selected="selected"{{/if}}>${timezone}</option>    {{/each}}    </optgroup></select>');
$.template("widget_advanced",'<section class="advanced pane">    <h1>These settings are aimed at technical users. Check the documentation when in doubt.</h1>    <div class="scroller">        <ul class="subsections"></ul>    </div></section>');$.template("slot_counter_pin",'<section class="slot s-counter-pin ${data_source_kind}">    <p class="value">...</p>    <p class="subtitle">${subtitle}</p></section>');$.template("slot_leaderboard_status_item",'<tr>    <td><div title="${name}">${name}</div></td>    {{each values}}        <td class="value"><div title="${$value}">${$value}</div></td>    {{/each}}    <td class="status">        <span class="${status}">${status}</span>    </td></tr>');
$.template("slot_counter_bar",'<section class="slot s-counter-bar ${data_source_kind}">    <p class="value">...</p>    <p class="subtitle">${subtitle}</p></section>');$.template("slot_timeline",'<section class="slot s-timeline ${data_source_kind}">    <ul>        <li class="placeholder">No data yet</li>    </ul></section>');$.template("directory_group_item",'<a href="#directory/${service}/${group}" class="${service}{{if needs_upgrade}} disabled{{/if}}">    <span class="images images-${total_images}">    {{each(i, img) images}}        <img src="/static/dashboard/img/previews/${img}.png"/>    {{/each}}    </span>    <h4>${name}</h4>    <p>${description}</p></a>');
$.template("background_item",'<li {{if user_managed}} class="custom" {{/if}}>    <a{{if is_current}} class="selected"{{/if}}>        {{if user_managed}}            <div class="background custom preview">                <span class="placeholder">YOUR WALLPAPER</span>                <span class="upload-bar"></span>                <span class="upload-percent"></span>                <span class="loading"></span>            </div>        {{else}}        <div class="background ${slug} preview" />        {{/if}}        <div class="label">            {{if user_managed}}                {{if can_upload_background}}                <label for="upload-file-1">{{if uploaded_background}}CHANGE{{else}}UPLOAD A NEW ONE{{/if}}</label>                <span class="file">                    <input type="file" id="upload-file-1" value="" accept="image/*">                </span>                {{else}}                <span class="upgrade">{{if uploaded_background}}CHANGE{{else}}UPLOAD A NEW ONE{{/if}}</span>                {{/if}}            {{else}}                ${label}            {{/if}}        </div>    </a></li>');
$.template("input_textarea",'<textarea class="field-${name}" {{if placeholder}}placeholder="${placeholder}"{{/if}} >${value}</textarea>');$.template("widget_notification_item",'<div class="m-notification">    <div>        <p><em class="clause">if</em> <strong class="condition">${condition}</strong></p>        <p><em class="clause">then</em> <strong class="type ${action_kind}" title="${action_name}"></strong>        <strong class="condition" title="${action}">${action}</strong></p>    </div>    <div class="actions">        <a href="" class="button-delete btn btn-ico-action-medium no-link">            <i class="icon-small icon-trash"></i>            <span>Delete</span>        </a>        <a href="" data-icon="edit" class="button-edit btn btn-ico-action-medium no-link">            <i class="icon-small icon-edit"></i>            <span>Edit</span>        </a>    </div></div>');
$.template("directory_group_detail_item",'<li>    <a class="${kind} m-widget-kind-icon"></a></li>');$.template("integration_ticket",'<article id="integration-ticket">    <header>        <hgroup>            <h1>New support ticket</h1>        </hgroup>        <a class="close" href="#directory">go back to the widgets</a>    </header>    <section>        <div class="form">            <dl>                <dt>from:</dt>                <dd>${name}</dd>                <dt>to:</dt>                <dd>support@ducksboard.com</dd>                <dt>subject:</dt>                <dd class="subject">Integration request</dd>            </dl>            <textarea placeholder="what widget would you like to see?"></textarea>        </div>        <div class="sent">            <h1>Thanks, your request has been received!</h1>        </div>    </section>    <button type="submit" class="send btn btn-submit full">create request</button></article>');
$.template("hidden",'<input type="hidden" class="field-${name}" value="${value}"  />');$.template("widget_embed_snippet",'<div class="snippet">    <input class="embed-code" type="text" value=\'<iframe src="${url}" width="${width}" height="${height}" frameborder="0" scrolling="no" style="border: ${border}; border-radius: ${border_radius}; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box;"></iframe>\' disabled="disabled">    <div class="actions">        <a href="#" class="disable btn btn-action lightdark no-link">            <span>Disable<br>embedding</span>        </a>        {{if has_flash}}        <div class="copy">            <div class="zeroclipboard-container">            <a class="btn btn-ico-action lightdark no-link">                <i class="icon-copy-to-clipboard icon-small"></i>                <span>Copy<br>snippet</span>            </a>            </div>        </div>        {{/if}}    </div></div>');
$.template("wizard_what_is_next",'<article class="modal-wizard whats-next">    <h1>Done! What is next?</h1>    <a class="close" href="#">close</a>    <div class="m-text">        <ul>            <li>Add/remove widgets</li>            <li>Add new dashboards to organize your widgets</li>            <li>Share your dashboards</li>        </ul>    </div>    <a href="#dashboard/${slug}" class="btn btn-submit hovered">Go to my dashboard</a></article>');$.template("slot_funnel",'<section class="slot s-funnel ${data_source_kind}">    <table class="funnel">        <colgroup>            <col class="step" />            <col class="percent" />        </colgroup>        <thead>            <tr>                <th>Step</th>                <th>Percent</th>            </tr>        </thead>        <tbody class="folded"></tbody>    </table>    <p>        <em class="subtitle"></em>        <strong class="value"></strong>    </p></section>');
$.template("post-it","<textarea>Welcome![br][br]Why don't you add some more widgets?.[br]You can also customize and share your dashboard once it's ready.[br][br][appurl href=https://app.ducksboard.com/#directory]Create a widget now![/appurl][br]</textarea>");$.template("trial_expired",'<article id="trial-expired">    <header>        <hgroup>            <h1>Your trial has sadly come to an end</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        {{if from_notification }}        <p>Sorry, this feature is not available for your current account plan. {{if is_whitelabel }}<a href="https://whitelabel.ducksboard.local/#subscription" target="_blank">{{else}}<a href="#settings/account/subscription">{{/if}}Upgrade</a> your account plan to access many more features and make the most out of your dashboard!</p>        {{else}}        <p>Your free trial period is over, but your widgets will be updated daily. Unfortunately, you can no longer create new widgets or dashboards, neither will TV Mode or sharing be functional.</p>        <p>If you want all these features back, upgrade your account <a href="#settings/account/subscription">here</a>!</p>        {{/if}}        {{if is_whitelabel }}        <a class="btn-upsell" href="https://whitelabel.ducksboard.local/#subscription" target="_blank">        {{else}}        <a class="btn-upsell" href="#settings/account/subscription">        {{/if}}            <strong>Upgrade your account</strong>            <span>30 day money back guarantee</span>        </a>    </div></article>');
$.template("select_multiple",'<select multiple class="field-${name} ${klass}"        {{if load_service_params}}data-placeholder="Loading..."{{/if}}        {{if placeholder}}data-default-text="${placeholder}"{{else}}data-default-text="Select some options"{{/if}}>    {{each(i, option) options}}    <option value="${option.value}" {{if $.inArray(option.value, $data.value) >= 0 }}selected="selected"{{/if}}>${option.display_name}</option>    {{/each}}</select>');$.template("wizard_connect",'<article class="modal-wizard">\t<header>\t\t<hgroup>\t\t\t<h1>Upgrade required</h1>\t\t</hgroup>\t\t<a class="close" href="#wizard/dashboard/choose_service">BACK TO SERVICES LISTING</a>\t</header>\t<div class="content">\t\t<strong class="serv-logo ${$value}">${$value}</strong>\t\t<strong class="label">CONNECT YOUR MAILCHIMP ACCOUNT</strong>\t\t<strong class="label">IF YOU DON\u2019T HAVE AN ACCOUNT...</strong>\t\t<a href="#" class="btn-fake-fill">fill with dummy data</a>\t</div></article>');
$.template("slot_image_item",'<img src="${source}" class="${klass}" />');$.template("select_months",'<select class="field-month">    <option value="1"{{if $data.value === "1"}} selected="selected"{{/if}}>January</option>    <option value="2"{{if $data.value === "2"}} selected="selected"{{/if}}>February</option>    <option value="3"{{if $data.value === "3"}} selected="selected"{{/if}}>March</option>    <option value="4"{{if $data.value === "4"}} selected="selected"{{/if}}>April</option>    <option value="5"{{if $data.value === "5"}} selected="selected"{{/if}}>May</option>    <option value="6"{{if $data.value === "6"}} selected="selected"{{/if}}>June</option>    <option value="7"{{if $data.value === "7"}} selected="selected"{{/if}}>July</option>    <option value="8"{{if $data.value === "8"}} selected="selected"{{/if}}>August</option>    <option value="9"{{if $data.value === "9"}} selected="selected"{{/if}}>September</option>    <option value="10"{{if $data.value === "10"}} selected="selected"{{/if}}>October</option>    <option value="11"{{if $data.value === "11"}} selected="selected"{{/if}}>November</option>    <option value="12"{{if $data.value === "12"}} selected="selected"{{/if}}>December</option></select>');
$.template("dashboards_list",'<ul id="dashboards-list" class="contextual">    {{if !readonly }}        {{each kinds}}        <li class="new ${$value.id}">            <a href="#new/dashboard/${$value.id}" class="btn btn-ico-option">                {{if $value.id == \'default\'}}                    <i class="icon-plus-2"></i>                {{/if}}                <span>Add a ${$value.get(\'name\')} dashboard</span>            </a>        </li>        {{/each}}    {{/if}}</ul>');
$.template("access_token",'<li>    <a href="${link}" target="_blank" class="link{{if has_password}} protected{{/if}}">        <div class="description">${description}{{if has_password}} <i class="icon-lock"></i>{{/if}}</div>    </a>    <a href="#" class="delete btn btn-ico-action-medium btn-light no-link">        <i class="icon-trash icon-small"></i>        <span>Delete</span>    </a>    {{if has_flash}}    <div class="copy">        <div class="zeroclipboard-container"></div>        <a class="btn btn-ico-action-medium btn-light no-link">            <i class="icon-copy-to-clipboard icon-small"></i>            <span>Copy<br>link</span>        </a>    </div>    {{/if}}</li>');
$.template("coupon_info",'<div class="coupon-info">    {{if discount_applied }}        <div class="applied">            coupon applied<br/>            <span class="link">remove it?</span>        </div>    {{else}}        {{if !coupon_error }}            <a class="show">i have a coupon code</a>        {{else}}            <div class="invalid show">                Invalid/Expired code<br/>                <span>Please check and try again</span>            </div>        {{/if}}        <div class="apply">            <input type="text" class="field-coupon_code" value="" placeholder="Code" />            <a>apply</a>        </div>    {{/if}}</div>');
$.template("directory_service_widgets",'<article id="directory" class="m-directory service-widgets">    <header>        <hgroup>            <h1>${name} widgets</h1>        </hgroup>        <a class="close" href="#">close</a>        <a class="back" href="#directory">Go back to the services</a>    </header>    {{if description && external_service && !using_service}}    <div class="service-description">        <span class="serv-logo ${id}"></span>        <p>${description}</p>        {{if signup_url}}        <a href="${signup_url}" target="_blank" class="btn-try">            {{if button_text}}                ${button_text}            {{else}}                Try ${name}            {{/if}}        </a>        {{/if}}    </div>    {{/if}}    <div class="groups slidster">        <div class="viewport">            <ul>            </ul>        </div>    </div></article>');
$.template("slot_countdown",'<section class="slot s-time-until ${data_source_kind}">    <p class="event"></p>    <p class="countdown"></p></section>');$.template("directory_services",'<article id="directory" class="m-directory directory-index">    <header>        <hgroup>            <h1>Add a widget</h1>            <a class="close" href="#">close</a>            {{if plan === \'developer\'}}                <h3>You\'re using a Developer Account. You can create unlimited custom widgets using our API as well as Github widgets in a dashboard.  If you\'d like to enjoy the widgets marketplace or create more dashboards, please <a href="#settings/account/subscription">upgrade your account</a>.</h3>            {{else}}                {{if has_trial_account === false && has_premium_directory === false}}                <h3>Some of the services are not allowed in your current plan. If you\'d like to unlock all the widgets, please <a href="#settings/account/subscription">upgrade your account</a>.</h3>                {{else}}                    <h3>                        We have ${total} widgets, search or browse to find the ones you need.<br>                        <a class="integration-request" href="#integration"><span>Missing a widget?</span> tell us and we\'ll add it</a>                    </h3>                {{/if}}            {{/if}}        </hgroup>    </header>    <form class="filters">        <div class="field-input">            <i class="icon-tip light icon-search"></i>            <input type="text" id="directory-search" class="search" placeholder="search here">        </div>        <select class="category">            <option value="all">All Categories</option>            {{each(i, category) categories}}            <option value="${category.id}">${category.name}</option>            {{/each}}        </select>    </form>    <div class="groups slidster">        <div class="viewport">            <ul></ul>        </div>    </div>    <nav class="other-sections">        <a href="#custom" class="btn-section customs">            <strong>Show your own Data</strong>            <span>Use our custom widgets to display your own numbers</span>        </a>        <\!-- <a href="#kpi" class="btn-section kpis">            <strong>KPI widgets</strong>            <span>Use APIs to show your own data</span>        </a> --\>    </nav>    <div class="latest-widgets"></div></article>');
$.template("upload_error",'<div class="error" style="display: none;">    <p>${errors}</p>    {{if details}}<span>${details}</span>{{/if}}    <a href="#">Retry</a></div>');$.template("service_selectable",'<li>    <a class="{{if in_dashboard_creation}}btn btn-service ${service}{{/if}} {{if selected}}selected{{/if}}">        {{if !in_dashboard_creation}}            <i class="icon-user"></i>        {{/if}}        <span>{{html username_multiline}}</span>    </a></li>');$.template("tvmode_notice",'<p class="display-notice ${size}">Press ESC to exit TV mode</p>');
$.template("api_key",'<div class="api-key"><span>Your API key</span><input type="text" readonly value="${api_key}"></div>');$.template("slot_counter_trend",'<section class="slot s-counter-trend ${data_source_kind}">    <p class="value"></p>    <p class="subtitle">${subtitle}</p>    <p class="delta"></p></section>');$.template("account_creds",'<div class="pane account">    <section>        <fieldset>            <input type="text" class="field-first_name" name="first_name" placeholder="your new first name" value="${first_name}" maxlength="80" />            <input type="text" class="field-last_name" name="first_name" placeholder="your new last name" value="${last_name}" maxlength="80" />            <input type="text" class="field-email" name="email" placeholder="your new email" value="${email}" maxlength="80" />            <input type="text" class="field-company" name="company" placeholder="your company name" value="${company}" maxlength="80" />            <input type="text" class="field-position" name="position" placeholder="your position" value="${position}" maxlength="80" />            {{tmpl "select_countries"}}            {{tmpl "select_timezones"}}            <input type="password" class="field-current_password" name="current_password" placeholder="current password" maxlength="180" />            <input type="password" class="field-new_password" name="new_password" placeholder="new password" maxlength="180" />        </fieldset>    </section>    <button type="submit" class="save btn btn-submit full">save settings for your account</button></div>');
$.template("directory_custom_item",'<a href="#custom/${id}" class="${id}">    <h4>${name}</h4>    <p>${description}</p></a>');$.template("slot_completion_gauge",'<section class="slot s-completion s-completion-gauge ${data_source_kind}">    <p class="value">...</p>    <p class="subtitle">${subtitle}</p>    <ol class="refs"></ol></section>');$.template("directory_services_page","<li></li>");$.template("dashboard",'<div class="dashboard ${kind.kind}">    <ol class="gridster"></ol></div>');
$.template("input_password",'{{if tooltip}}<div class="tip-input tip-${name}-container">        <input type="password" class="field-${name}" value="${value}" {{if placeholder}}placeholder="${placeholder}"{{/if}} />        <input type="button" class="tip" value="tip" tabindex="9999" />        <div class="tooltip">            <span>{{html tooltip}}</span>            <a class="close-tooltip">close</a>        </div>    </div>{{else}}    <input type="password" class="field-${name}" value="${value}" {{if placeholder}}placeholder="${placeholder}"{{/if}} />{{/if}}');
$.template("widget_data_api",'<section class="data-api pane">    <div class="editor m-widget-edit-positions ${kind}"></div>    <div class="extras api-key">      <strong class="title">YOUR API KEY</strong>      <a href="http://{{if wiki_url}}dev.ducksboard.com/${wiki_url}{{else}}doc.ducksboard.com{{/if}}" target="_blank" class="docs">API documentation</a>      <input type="text" readonly="" value="${api_key}">    </div></section>');$.template("directory_services_item",'<a href="#directory/service/${id}" class="${id} {{if needs_upgrade}} disabled{{/if}}">    <h4 class="serv-logo ${id}">${needs_upgrade} ${name}</h4></a>');
(function(a,j,e){function d(a,b){this.options=e.extend({},g,b);this.options.start_at=parseInt(this.options.start_at);this.current=this.options.start_at;this.$el=a instanceof e?a:e(a);this.el=a[0];this.$viewport=this.$el.find(".viewport");this.$slider=this.$viewport.find("> ul");this.$el.data("slidster",this);this.init()}var g={pager_insertion:"append",pager_info:true,pager_info_item:"widgets",pager_info_insertion:"append",loop:true,items_per_slide:3,start_at:1,on_slide_show:null,arrows:{next:{css_class:"next",
html:"Next"},prev:{css_class:"prev",html:"Prev"}}},b=Modernizr.csstransforms3d,a=d.prototype;a.init=function(){this.$all_items=this.$items=this.$slider.find("> li");if(!(this.$items.length<=0)){this.items=this.$items.length;this.item_width=this.$items.outerWidth(true);this.items_width=this.items*this.item_width;this.viewport_width=this.$viewport.width();this.item_margin=parseInt(this.$items.css("margin-right"));this.items_per_slide=Math.max(1,Math.floor(this.viewport_width/this.item_width));this.all_items_per_slide=
Math.ceil(this.viewport_width/this.item_width);this.slides=Math.ceil(this.items/this.items_per_slide);this.slide_width=this.items_per_slide*this.item_width;this.real_slide_width=this.all_items_per_slide*this.item_width;this.elements=this.$items.children().length;this.max_width=this.items_width-this.item_margin;this.max_left=-(this.max_width-this.viewport_width);if(this.loop=this.options.loop&&this.max_width>this.viewport_width){this.$appended=this.$items.slice(0,this.all_items_per_slide);this.$preppended=
this.$items.slice(this.items-this.all_items_per_slide,this.items);this.$preppended_clone=this.$preppended.clone().prependTo(this.$slider);this.$appended_clone=this.$appended.clone().appendTo(this.$slider);this.$all_items=this.$items.add(this.$appended_clone).add(this.$preppended_clone);this.max_left=-(this.max_width-this.viewport_width+this.real_slide_width)}this.pager();this.events();var a=this.get_offset(this.options.start_at||1);b?this.$slider.css("transform","translate3d("+a+"px, 0, 0)"):this.$slider.css("left",
a);this.options.start_at===1&&this.slides>1&&this.$el.addClass("first-item");this.$el.addClass("ready")}};a.events=function(){this.$next.on("click",e.proxy(this.next,this));this.$prev.on("click",e.proxy(this.prev,this));this.$anchors.on("click",e.proxy(this.go,this))};a.pager=function(){this.$controls&&this.$controls.remove();var a="";this.$prev=e('<a href="#" class="'+this.options.arrows.prev.css_class+'">'+this.options.arrows.prev.html+"</a>");this.$next=e('<a href="#" class="'+this.options.arrows.next.css_class+
'">'+this.options.arrows.next.html+"</a>");for(var b=0;b<this.slides;b++)a=a+('<a href="#"><span>'+(b+1)+"</span></a>");this.$controls=e('<div class="controls">'+a+"</div>");this.$anchors=this.$controls.find("a");this.$controls.append(this.$next).prepend(this.$prev);this.$controls.insertAfter(this.$viewport);this.options.pager_info&&this.pager_counter();return this};a.pager_counter=function(){var a='<div class="pager-info"><span class="current">'+(this.slides?this.current:0)+'</span><span class="total"> of '+
this.slides+"</span> "+('<span class="elements">('+this.elements+" "+this.options.pager_info_item+")</span>")+"</div>";if(this.$pager_info){var b=this.$pager_info;this.$pager_info=e(a);b.replaceWith(this.$pager_info)}else this.$pager_info=e(a).insertAfter(this.$controls);if(this.slides<=1){this.$pager_info.hide();this.$controls&&this.$controls.hide()}else{this.$pager_info.show();this.$controls&&this.$controls.show()}return this};a.go=function(a){a.target&&(a=this.$anchors.index(a.currentTarget)+1);
if(this.loop){a>this.slides+1&&(a=this.slides+1);a<0&&(a=0)}else a=this.get_index(a);this.displace_to(a);this.current=this.get_index(a);this.options.pager_info&&this.pager_counter();this.$el.removeClass("first-item last-item");if(this.slides<=1)return this;a===1||a===this.slides+1?this.$el.addClass("first-item"):(a===this.slides||a===0)&&this.$el.addClass("last-item");return this};a.displace_to=function(a){var d=this.get_offset(a),g=a===0,j=a===this.slides+1;this.$slider.addClass("animation");a=function(){var a;
this.$slider.removeClass("animation");if(this.loop){if(g){a=this.get_offset(this.slides);b?this.$slider.css("transform","translate3d("+a+"px, 0, 0)"):this.$slider.css("left",a);this.current=this.slides}else if(j){a=this.get_offset(1);b?this.$slider.css("transform","translate3d("+a+"px, 0, 0)"):this.$slider.css("left",a);this.current=1}this.options.on_slide_show&&this.options.on_slide_show.call(this,this.current,g,j);this.options.pager_info&&this.pager_counter()}};if(b){this.$slider.transEnd("slidster",
e.proxy(a,this));this.$slider.css("transform","translate3d("+d+"px, 0, 0)")}else this.$slider.animate({left:d},500,e.proxy(a,this))};a.get_offset=function(a){var b=this.loop?-((a-1)*this.slide_width)-this.real_slide_width:-((a-1)*this.slide_width),b=Math.max(this.max_left,b);b>0&&(b=0);if(this.loop){a==0&&(b=-(this.real_slide_width-this.$viewport.width()-this.item_margin));a==this.slides+1&&(b=-(this.max_width+this.slide_width+(this.all_items_per_slide-this.items_per_slide)*this.item_width))}return b};
a.get_index=function(a){a>this.slides&&(a=this.slides);a<1&&(a=1);return a};a.next=function(a){a&&a.target&&a.preventDefault();this.go(this.current+1);return this};a.prev=function(a){a&&a.target&&a.preventDefault();this.go(this.current-1);return this};a.add=function(a){this.$slider.append(a);this.refresh();return this};a.add_item=function(a,b){var d=this.$items.last(),g=d.children().length;g>0&&g<b?d.append(a):this.add(e("<li />").append(a));this.refresh();return this};a.remove=function(a){this.$el.find(a).remove();
this.refresh();return this};a.remove_item=function(a){a.siblings().length===0?a.parent().remove():a.remove();this.refresh();return this};a.empty=function(){this.$slider.empty();return this};a.destroy=function(){this.$slider.empty();return this};a.refresh=function(){this.$preppended_clone&&this.$preppended_clone.remove();this.$appended_clone&&this.$appended_clone.remove();this.init();return this};a.search=function(a){this.$items_back||(this.$items_back=this.$items);if(a&&a.length){var b=this.$items_back.clone().children(':icontains("'+
a+'")'),d=1,g,j=e([]);b.each(e.proxy(function(a,f){d===1&&(g=e("<li></li>"));g=g.prepend(f);if(a===b.length-1||d===this.options.items_per_slide){j=j.add(g);d=0}d++},this));this.empty();this.add(j)}else{this.empty();this.add(this.$items_back)}};e.fn.Slidster=d})(window,document,jQuery);
(function(a){function j(d,b,f){var e=f.relative?d.position().top:d.offset().top,j=f.relative?d.position().left:d.offset().left,u=f.position[0],e=e-(b.outerHeight()-f.offset[0]),j=j+(d.outerWidth()+f.offset[1]);/iPad/i.test(navigator.userAgent)&&(e=e-a(window).scrollTop());var q=b.outerHeight()+d.outerHeight();u=="center"&&(e=e+q/2);u=="bottom"&&(e=e+q);u=f.position[1];d=b.outerWidth()+d.outerWidth();u=="center"&&(j=j-d/2);u=="left"&&(j=j-d);return{top:e,left:j}}function e(e,b){var f=this,h=e.add(f),
o,u=0,q=0,l=e.attr("title"),k=e.attr("data-tooltip"),n=d[b.effect],x,v=e.is(":input"),w=v&&e.is(":checkbox, :radio, select, :button, :submit"),z=e.attr("type"),E=b.events[z]||b.events[v?w?"widget":"input":"def"];if(!n)throw'Nonexistent effect "'+b.effect+'"';E=E.split(/,\s*/);if(E.length!=2)throw"Tooltip: bad events configuration for "+z;e.bind(E[0],function(a){clearTimeout(u);b.predelay?q=setTimeout(function(){f.show(a)},b.predelay):f.show(a)}).bind(E[1],function(a){clearTimeout(q);b.delay?u=setTimeout(function(){f.hide(a)},
b.delay):f.hide(a)});if(l&&b.cancelDefault){e.removeAttr("title");e.data("title",l)}a.extend(f,{show:function(d){if(!o){if(k)o=a(k);else if(b.tip)o=a(b.tip).eq(0);else if(l)o=a(b.layout).addClass(b.tipClass).appendTo(document.body).hide().append(l);else{o=e.next();o.length||(o=e.parent().next())}if(!o.length)throw"Cannot find tooltip for "+e;}if(f.isShown())return f;o.stop(true,true);var v=j(e,o,b);b.tip&&o.html(e.data("title"));d=a.Event();d.type="onBeforeShow";h.trigger(d,[v]);if(d.isDefaultPrevented())return f;
v=j(e,o,b);o.css({position:"absolute",top:v.top,left:v.left});x=true;n[0].call(f,function(){d.type="onShow";x="full";h.trigger(d)});v=b.events.tooltip.split(/,\s*/);if(!o.data("__set")){o.unbind(v[0]).bind(v[0],function(){clearTimeout(u);clearTimeout(q)});v[1]&&!e.is("input:not(:checkbox, :radio), textarea")&&o.unbind(v[1]).bind(v[1],function(a){a.relatedTarget!=e[0]&&e.trigger(E[1].split(" ")[0])});b.tip||o.data("__set",true)}return f},hide:function(e){if(!o||!f.isShown())return f;e=a.Event();e.type=
"onBeforeHide";h.trigger(e);if(!e.isDefaultPrevented()){x=false;d[b.effect][1].call(f,function(){e.type="onHide";h.trigger(e)});return f}},isShown:function(a){return a?x=="full":x},getConf:function(){return b},getTip:function(){return o},getTrigger:function(){return e}});a.each(["onHide","onBeforeShow","onShow","onBeforeHide"],function(d,e){a.isFunction(b[e])&&a(f).bind(e,b[e]);f[e]=function(b){b&&a(f).bind(e,b);return f}})}a.tools=a.tools||{version:"@VERSION"};a.tools.tooltip={conf:{effect:"toggle",
fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,fadeIE:false,position:["top","center"],offset:[0,0],relative:false,cancelDefault:true,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(a,b,f){d[a]=[b,f]}};var d={toggle:[function(a){var b=this.getConf(),d=this.getTip(),b=b.opacity;b<1&&d.css({opacity:b});d.show();a.call()},function(a){this.getTip().hide();a.call()}],
fade:[function(d){var b=this.getConf();if(!a.browser.msie||b.fadeIE)this.getTip().fadeTo(b.fadeInSpeed,b.opacity,d);else{this.getTip().show();d()}},function(d){var b=this.getConf();if(!a.browser.msie||b.fadeIE)this.getTip().fadeOut(b.fadeOutSpeed,d);else{this.getTip().hide();d()}}]};a.fn.tooltip=function(d){var b=this.data("tooltip");if(b)return b;d=a.extend(true,{},a.tools.tooltip.conf,d);if(typeof d.position=="string")d.position=d.position.split(/,?\s/);this.each(function(){b=new e(a(this),d);a(this).data("tooltip",
b)});return d.api?b:this}})(jQuery);
(function(a){var j=a.tools.tooltip;j.dynamic={conf:{classNames:"top right bottom left"}};a.fn.dynamic=function(e){typeof e=="number"&&(e={speed:e});var e=a.extend({},j.dynamic.conf,e),d=a.extend(true,{},e),g=e.classNames.split(/\s/),b;this.each(function(){var f=a(this).tooltip().onBeforeShow(function(f,e){var j=this.getTip(),q=this.getConf();b||(b=[q.position[0],q.position[1],q.offset[0],q.offset[1],a.extend({},q)]);a.extend(q,b[4]);q.position=[b[0],b[1]];q.offset=[b[2],b[3]];j.css({visibility:"hidden",
position:"absolute",top:e.top,left:e.left}).show();var l=a.extend(true,{},d),k;k=a(window);var n=k.width()+k.scrollLeft(),x=k.height()+k.scrollTop();k=[j.offset().top<=k.scrollTop(),n<=j.offset().left+j.width(),x<=j.offset().top+j.height(),k.scrollLeft()>=j.offset().left];a:{for(n=k.length;n--;)if(k[n]){n=false;break a}n=true}if(!n){if(k[2]){a.extend(q,l.top);q.position[0]="top";j.addClass(g[0])}if(k[3]){a.extend(q,l.right);q.position[1]="right";j.addClass(g[1])}if(k[0]){a.extend(q,l.bottom);q.position[0]=
"bottom";j.addClass(g[2])}if(k[1]){a.extend(q,l.left);q.position[1]="left";j.addClass(g[3])}if(k[0]||k[2])q.offset[0]=q.offset[0]*-1;if(k[1]||k[3])q.offset[1]=q.offset[1]*-1}j.css({visibility:"visible"}).hide()});f.onBeforeShow(function(){var a=this.getConf();this.getTip();setTimeout(function(){a.position=[b[0],b[1]];a.offset=[b[2],b[3]]},0)});f.onHide(function(){this.getTip().removeClass(e.classNames)});ret=f});return e.api?ret:this}})(jQuery);
(function(a){function j(d){this.input=d;d.attr("type")=="password"&&this.handlePassword();a(d[0].form).submit(function(){if(d.hasClass("placeholder")&&d[0].value==d.attr("placeholder"))d[0].value=""})}j.prototype={show:function(a){if(this.input[0].value===""||a&&this.valueIsPlaceholder()){if(this.isPassword)try{this.input[0].setAttribute("type","text")}catch(e){this.input.before(this.fakePassword.show()).hide()}this.input.addClass("placeholder");this.input[0].value=this.input.attr("placeholder")}},
hide:function(){if(this.valueIsPlaceholder()&&this.input.hasClass("placeholder")){this.input.removeClass("placeholder");this.input[0].value="";if(this.isPassword){try{this.input[0].setAttribute("type","password")}catch(a){}this.input.show();this.input[0].focus()}}},valueIsPlaceholder:function(){return this.input[0].value==this.input.attr("placeholder")},handlePassword:function(){var d=this.input;d.attr("realType","password");this.isPassword=true;if(a.browser.msie&&d[0].outerHTML){var e=a(d[0].outerHTML.replace(/type=(['"])?password\1/gi,
"type=$1text$1"));this.fakePassword=e.val(d.attr("placeholder")).addClass("placeholder").focus(function(){d.trigger("focus");a(this).hide()});a(d[0].form).submit(function(){e.remove();d.show()})}}};var e=!!("placeholder"in document.createElement("input"));a.fn.placeholder=function(){return e?this:this.each(function(){var d=a(this),e=new j(d);e.show(true);d.focus(function(){e.hide()});d.blur(function(){e.show(false)});if(a.browser.msie){a(window).load(function(){d.val()&&d.removeClass("placeholder");
e.show(true)});d.focus(function(){if(this.value==""){var a=this.createTextRange();a.collapse(true);a.moveStart("character",0);a.select()}})}})}})(jQuery);
$(function(){$(window).scroll(function(){D.u.hide_tooltips()});$(window).on("resize",_.throttle(function(){D.Display&&(_.include(["tv720","tv1080"],D.d.current.id)||D.bb.dashboards.length&&D.bb.dashboards.current.view.adjust_preferences_bar())},150));keypress.combo("escape",function(){D.d.switch_to(D.d.modes.pc,{user_triggered:true})},true);setInterval(function(){D.bb.account.get("readonly")||$.get("/refresh-session")},6048E5);D.bb.account.get("widget_token")||setTimeout(function(){var a=window.location.pathname+
"ping";$.get(a);setInterval(function(){$.get(a)},(55+Math.random()*10)*6E4)},3E3);var a="0deg";keypress.sequence_combo("up up down down left right left right b a",function(){a=a==="0deg"?"180deg":"0deg";$(".widget").transition({rotate:a});mixpanel.track("konami")});keypress.combo("alt t",function(){D.d.current===D.d.modes.tv?D.d.switch_to(D.d.modes.pc):D.Backbone.app.navigate("tvmode",true)});$(document).on("click",function(a){a.originalEvent||(a.originalEvent={});$(".contextual").not(a.originalEvent.$contextual).fadeOut(function(){var a=
$(this).data("cleanup");_.isFunction(a)&&a.call(this)})})});
(function(){var a=function(){this.options_index=0;this.parsed=[]};a.prototype.add_node=function(a){return a.nodeName.toUpperCase()==="OPTGROUP"?this.add_group(a):this.add_option(a)};a.prototype.add_group=function(a){var e,d,g,b,f,h;e=this.parsed.length;this.parsed.push({array_index:e,group:true,label:a.label,children:0,disabled:a.disabled});f=a.childNodes;h=[];g=0;for(b=f.length;g<b;g++){d=f[g];h.push(this.add_option(d,e,a.disabled))}return h};a.prototype.add_option=function(a,e,d){if(a.nodeName.toUpperCase()===
"OPTION"){if(a.text!==""){if(e!=null)this.parsed[e].children=this.parsed[e].children+1;this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:d===true?d:a.disabled,group_array_index:e,classes:a.className,style:a.style.cssText})}else this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:true});return this.options_index=this.options_index+1}};a.select_to_array=function(j){var e,
d,g,b;e=new a;b=j.childNodes;d=0;for(g=b.length;d<g;d++){j=b[d];e.add_node(j)}return e.parsed};this.SelectParser=a}).call(this);
(function(){var a=function(a,e){this.form_field=a;this.options=e!=null?e:{};this.is_multiple=this.form_field.multiple;this.set_default_text();this.set_default_values();this.setup();this.set_up_html();this.register_observers();this.finish_setup()};a.prototype.set_default_values=function(){this.results_showing=this.mouse_on_container=this.active_field=false;this.result_single_selected=this.result_highlighted=null;this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=
null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:false;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||false;this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:true;this.search_contains=this.options.search_contains||false;this.choices=0;this.single_backstroke_delete=this.options.single_backstroke_delete||false;this.max_selected_options=this.options.max_selected_options||
Infinity;return this.inherit_select_classes=this.options.inherit_select_classes||false};a.prototype.set_default_text=function(){this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option";return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||
this.options.no_results_text||"No results match"};a.prototype.mouse_enter=function(){return this.mouse_on_container=true};a.prototype.mouse_leave=function(){return this.mouse_on_container=false};a.prototype.input_focus=function(){var a=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return a.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()};a.prototype.input_blur=function(){var a=this;if(!this.mouse_on_container){this.active_field=false;
return setTimeout(function(){return a.blur_test()},100)}};a.prototype.result_add_option=function(a){var e,d;if(a.disabled)return"";a.dom_id=this.container_id+"_o_"+a.array_index;e=a.selected&&this.is_multiple?[]:["active-result"];a.selected&&e.push("result-selected");a.group_array_index!=null&&e.push("group-option");a.classes!==""&&e.push(a.classes);d=a.style.cssText!==""?' style="'+a.style+'"':"";return'<li id="'+a.dom_id+'" class="'+e.join(" ")+'"'+d+">"+a.html+"</li>"};a.prototype.results_update_field=
function(){this.is_multiple||this.results_reset_cleanup();this.result_clear_highlight();this.result_single_selected=null;return this.results_build()};a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()};a.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()};a.prototype.keyup_checker=function(a){var e,d;e=(d=a.which)!=null?d:a.keyCode;this.search_field_scale();switch(e){case 8:if(this.is_multiple&&
this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke){this.result_clear_highlight();return this.results_search()}break;case 13:a.preventDefault();if(this.results_showing)return this.result_select(a);break;case 27:this.results_showing&&this.results_hide();return true;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};a.prototype.generate_field_id=function(){var a;a=this.generate_random_id();return this.form_field.id=
a};a.prototype.generate_random_char=function(){var a;a=Math.floor(Math.random()*36);return"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".substring(a,a+1)};this.AbstractChosen=a}).call(this);
(function(){var a,j,e,d,g={}.hasOwnProperty;d=this;a=jQuery;a.fn.extend({chosen:function(b){return a.browser.msie&&(a.browser.version==="6.0"||a.browser.version==="7.0"&&document.documentMode===7)?this:this.each(function(){var d;d=a(this);if(!d.hasClass("chzn-done"))return d.data("chosen",new j(this,b))})}});var b=function(){return b.__super__.constructor.apply(this,arguments)},f=b,h=AbstractChosen,o=function(){this.constructor=f},u;for(u in h)g.call(h,u)&&(f[u]=h[u]);o.prototype=h.prototype;f.prototype=
new o;f.__super__=h.prototype;b.prototype.setup=function(){this.form_field_jq=a(this.form_field);this.current_value=this.form_field_jq.val();return this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")};b.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")};b.prototype.set_up_html=function(){var b,d;this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id();this.container_id=this.container_id+"_chzn";b=["chzn-container"];
b.push("chzn-container-"+(this.is_multiple?"multi":"single"));this.inherit_select_classes&&this.form_field.className&&b.push(this.form_field.className);this.is_rtl&&b.push("chzn-rtl");this.f_width=this.form_field_jq.outerWidth();b={id:this.container_id,"class":b.join(" "),style:"width: "+this.f_width+"px;",title:this.form_field.title};b=a("<div />",b);this.is_multiple?b.html('<ul class="chzn-choices"><li class="search-field"><input class="chzn-input" type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):
b.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input class="chzn-input" type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>');this.form_field_jq.hide().after(b);this.container=a("#"+this.container_id);this.dropdown=this.container.find("div.chzn-drop").first();b=this.container.height();d=this.f_width-e(this.dropdown);
this.dropdown.css({width:d+"px",top:b+"px"});this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chzn-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();if(this.is_multiple){this.search_choices=this.container.find("ul.chzn-choices").first();this.search_container=this.container.find("li.search-field").first()}else{this.search_container=this.container.find("div.chzn-search").first();this.selected_item=
this.container.find(".chzn-single").first();b=d-e(this.search_container)-e(this.search_field);this.search_field.css({width:b+"px"})}this.results_build();this.set_tab_index();return this.form_field_jq.trigger("liszt:ready",{chosen:this})};b.prototype.register_observers=function(){var a=this;this.container.mousedown(function(b){return a.container_mousedown(b)});this.container.mouseup(function(b){return a.container_mouseup(b)});this.container.mouseenter(function(b){return a.mouse_enter(b)});this.container.mouseleave(function(b){return a.mouse_leave(b)});
this.search_results.mouseup(function(b){return a.search_results_mouseup(b)});this.search_results.mouseover(function(b){return a.search_results_mouseover(b)});this.search_results.mouseout(function(b){return a.search_results_mouseout(b)});this.form_field_jq.bind("liszt:updated",function(b){return a.results_update_field(b)});this.form_field_jq.bind("liszt:activate",function(b){return a.activate_field(b)});this.form_field_jq.bind("liszt:open",function(b){return a.container_mousedown(b)});this.search_field.blur(function(b){return a.input_blur(b)});
this.search_field.keyup(function(b){return a.keyup_checker(b)});this.search_field.keydown(function(b){return a.keydown_checker(b)});this.search_field.focus(function(b){return a.input_focus(b)});return this.is_multiple?this.search_choices.click(function(b){return a.choices_click(b)}):this.container.click(function(a){return a.preventDefault()})};b.prototype.search_field_disabled=function(){if(this.is_disabled=this.form_field_jq[0].disabled){this.container.addClass("chzn-disabled");this.search_field[0].disabled=
true;this.is_multiple||this.selected_item.unbind("focus.chzn");return this.close_field()}this.container.removeClass("chzn-disabled");this.search_field[0].disabled=false;if(!this.is_multiple)return this.selected_item.bind("focus.chzn",a.proxy(this.activate_field,this))};b.prototype.container_mousedown=function(b){var d;if(!this.is_disabled){d=b!=null?a(b.target).hasClass("search-choice-close"):false;b&&(b.type==="mousedown"&&!this.results_showing)&&b.preventDefault();if(!this.pending_destroy_click&&
!d){if(this.active_field){if(!this.is_multiple&&b&&(a(b.target)[0]===this.selected_item[0]||a(b.target).parents("a.chzn-single").length)){b.preventDefault();this.results_toggle()}}else{this.is_multiple&&this.search_field.val("");a(document).on("click.chzn",a.proxy(this.test_active_click,this));this.results_show()}return this.activate_field()}return this.pending_destroy_click=false}};b.prototype.container_mouseup=function(a){if(a.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(a)};
b.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()};b.prototype.close_field=function(){a(document).off("click.chzn");this.active_field=false;this.results_hide();this.container.removeClass("chzn-container-active");this.winnow_results_clear();this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};b.prototype.activate_field=function(){this.container.addClass("chzn-container-active");this.active_field=
true;this.search_field.val(this.search_field.val());return this.search_field.focus()};b.prototype.test_active_click=function(b){return a(b.target).parents("#"+this.container_id).length?this.active_field=true:this.close_field()};b.prototype.results_build=function(){var a,b,f,e,h;this.parsing=true;this.results_data=d.SelectParser.select_to_array(this.form_field);if(this.is_multiple&&this.choices>0){this.search_choices.find("li.search-choice").remove();this.choices=0}else if(!this.is_multiple){this.selected_item.addClass("chzn-default").find("span").text(this.default_text);
this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")}a="";h=this.results_data;f=0;for(e=h.length;f<e;f++){b=h[f];if(b.group)a=a+this.result_add_group(b);else if(!b.empty){a=a+this.result_add_option(b);if(b.selected&&this.is_multiple)this.choice_build(b);else if(b.selected&&!this.is_multiple){this.selected_item.removeClass("chzn-default").find("span").text(b.text);
this.allow_single_deselect&&this.single_deselect_control_build()}}}this.search_field_disabled();this.show_search_field_default();this.search_field_scale();this.search_results.html(a);return this.parsing=false};b.prototype.result_add_group=function(b){if(b.disabled)return"";b.dom_id=this.container_id+"_g_"+b.array_index;return'<li id="'+b.dom_id+'" class="group-result">'+a("<div />").text(b.label).html()+"</li>"};b.prototype.result_do_highlight=function(a){var b,d,f,e;if(a.length){this.result_clear_highlight();
this.result_highlight=a;this.result_highlight.addClass("highlighted");d=parseInt(this.search_results.css("maxHeight"),10);e=this.search_results.scrollTop();f=d+e;b=this.result_highlight.position().top+this.search_results.scrollTop();a=b+this.result_highlight.outerHeight();if(a>=f)return this.search_results.scrollTop(a-d>0?a-d:0);if(b<e)return this.search_results.scrollTop(b)}};b.prototype.result_clear_highlight=function(){this.result_highlight&&this.result_highlight.removeClass("highlighted");return this.result_highlight=
null};b.prototype.results_show=function(){var a;if(this.is_multiple){if(this.max_selected_options<=this.choices){this.form_field_jq.trigger("liszt:maxselected",{chosen:this});return false}}else{this.selected_item.addClass("chzn-single-with-drop");this.result_single_selected&&this.result_do_highlight(this.result_single_selected)}a=this.is_multiple?this.container.height():this.container.height()-1;this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this});this.dropdown.css({top:a+"px",left:0});
this.results_showing=true;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};b.prototype.results_hide=function(){this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop");this.result_clear_highlight();this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this});this.dropdown.css({top:"-5000px"});return this.results_showing=false};b.prototype.set_tab_index=function(){var a;if(this.form_field_jq.attr("tabindex")){a=this.form_field_jq.attr("tabindex");
this.form_field_jq.attr("tabindex",-1);return this.search_field.attr("tabindex",a)}};b.prototype.show_search_field_default=function(){if(this.is_multiple&&this.choices<1&&!this.active_field){this.search_field.val(this.default_text);return this.search_field.addClass("default")}this.search_field.val("");return this.search_field.removeClass("default")};b.prototype.search_results_mouseup=function(b){var d;d=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first();
if(d.length){this.result_highlight=d;this.result_select(b);return this.search_field.focus()}};b.prototype.search_results_mouseover=function(b){if(b=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first())return this.result_do_highlight(b)};b.prototype.search_results_mouseout=function(b){if(a(b.target).hasClass("active-result"))return this.result_clear_highlight()};b.prototype.choices_click=function(b){b.preventDefault();if(this.active_field&&!a(b.target).hasClass("search-choice")&&
!this.results_showing)return this.results_show()};b.prototype.choice_build=function(b){var d,f=this;if(this.is_multiple&&this.max_selected_options<=this.choices){this.form_field_jq.trigger("liszt:maxselected",{chosen:this});return false}d=this.container_id+"_c_"+b.array_index;this.choices=this.choices+1;this.search_container.before(b.disabled?'<li class="search-choice search-choice-disabled" id="'+d+'"><span>'+b.html+"</span></li>":'<li class="search-choice" id="'+d+'"><span>'+b.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+
b.array_index+'"></a></li>');return a("#"+d).find("a").first().click(function(a){return f.choice_destroy_link_click(a)})};b.prototype.choice_destroy_link_click=function(b){b.preventDefault();if(this.is_disabled)return b.stopPropagation;this.pending_destroy_click=true;return this.choice_destroy(a(b.target))};b.prototype.choice_destroy=function(a){if(this.result_deselect(a.attr("rel"))){this.choices=this.choices-1;this.show_search_field_default();this.is_multiple&&(this.choices>0&&this.search_field.val().length<
1)&&this.results_hide();a.parents("li").first().remove();return this.search_field_scale()}};b.prototype.results_reset=function(){this.form_field.options[0].selected=true;this.selected_item.find("span").text(this.default_text);this.is_multiple||this.selected_item.addClass("chzn-default");this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()};b.prototype.results_reset_cleanup=function(){this.current_value=this.form_field_jq.val();
return this.selected_item.find("abbr").remove()};b.prototype.result_select=function(a){var b,d;if(this.result_highlight){b=this.result_highlight;d=b.attr("id");this.result_clear_highlight();if(this.is_multiple)this.result_deactivate(b);else{this.search_results.find(".result-selected").removeClass("result-selected");this.result_single_selected=b;this.selected_item.removeClass("chzn-default")}b.addClass("result-selected");b=d.substr(d.lastIndexOf("_")+1);b=this.results_data[b];b.selected=true;this.form_field.options[b.options_index].selected=
true;if(this.is_multiple)this.choice_build(b);else{this.selected_item.find("span").first().text(b.text);this.allow_single_deselect&&this.single_deselect_control_build()}(!a.metaKey&&!a.ctrlKey||!this.is_multiple)&&this.results_hide();this.search_field.val("");(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[b.options_index].value});this.current_value=this.form_field_jq.val();return this.search_field_scale()}};
b.prototype.result_activate=function(a){return a.addClass("active-result")};b.prototype.result_deactivate=function(a){return a.removeClass("active-result")};b.prototype.result_deselect=function(b){var d;d=this.results_data[b];if(this.form_field.options[d.options_index].disabled)return false;d.selected=false;this.form_field.options[d.options_index].selected=false;a("#"+this.container_id+"_o_"+b).removeClass("result-selected").addClass("active-result").show();this.result_clear_highlight();this.winnow_results();
this.form_field_jq.trigger("change",{deselected:this.form_field.options[d.options_index].value});this.search_field_scale();return true};b.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')};b.prototype.winnow_results=function(){var b,d,f,e,h,g,j,o,u,B,F,t,G,y,A;this.no_results_clear();o=0;u=this.search_field.val()===this.default_text?
"":a("<div/>").text(a.trim(this.search_field.val())).html();h=RegExp((this.search_contains?"":"^")+u.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");B=RegExp(u.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");A=this.results_data;F=0;for(G=A.length;F<G;F++){d=A[F];if(!d.disabled&&!d.empty)if(d.group)a("#"+d.dom_id).css("display","none");else if(!this.is_multiple||!d.selected){b=false;j=d.dom_id;g=a("#"+j);if(h.test(d.html)){b=true;o=o+1}else if(this.enable_split_word_search&&(d.html.indexOf(" ")>=0||
d.html.indexOf("[")===0)){e=d.html.replace(/\[|\]/g,"").split(" ");if(e.length){t=0;for(y=e.length;t<y;t++){f=e[t];if(h.test(f)){b=true;o=o+1}}}}if(b){if(u.length){b=d.html.search(B);f=d.html.substr(0,b+u.length)+"</em>"+d.html.substr(b+u.length);f=f.substr(0,b)+"<em>"+f.substr(b)}else f=d.html;g.html(f);this.result_activate(g);d.group_array_index!=null&&a("#"+this.results_data[d.group_array_index].dom_id).css("display","list-item")}else{this.result_highlight&&j===this.result_highlight.attr("id")&&
this.result_clear_highlight();this.result_deactivate(g)}}}return o<1&&u.length?this.no_results(u):this.winnow_results_set_highlight()};b.prototype.winnow_results_clear=function(){var b,d,f,e,h;this.search_field.val("");d=this.search_results.find("li");h=[];f=0;for(e=d.length;f<e;f++){b=d[f];b=a(b);b.hasClass("group-result")?h.push(b.css("display","auto")):!this.is_multiple||!b.hasClass("result-selected")?h.push(this.result_activate(b)):h.push(void 0)}return h};b.prototype.winnow_results_set_highlight=
function(){var a;if(!this.result_highlight){a=!this.is_multiple?this.search_results.find(".result-selected.active-result"):[];a=a.length?a.first():this.search_results.find(".active-result").first();if(a!=null)return this.result_do_highlight(a)}};b.prototype.no_results=function(b){var d;d=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');d.find("span").first().html(b);return this.search_results.append(d)};b.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};
b.prototype.keydown_arrow=function(){var b;if(this.result_highlight){if(this.results_showing)(b=this.result_highlight.nextAll("li.active-result").first())&&this.result_do_highlight(b)}else(b=this.search_results.find("li.active-result").first())&&this.result_do_highlight(a(b));if(!this.results_showing)return this.results_show()};b.prototype.keyup_arrow=function(){var a;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight){a=this.result_highlight.prevAll("li.active-result");
if(a.length)return this.result_do_highlight(a.first());this.choices>0&&this.results_hide();return this.result_clear_highlight()}};b.prototype.keydown_backstroke=function(){var a;if(this.pending_backstroke){this.choice_destroy(this.pending_backstroke.find("a").first());return this.clear_backstroke()}a=this.search_container.siblings("li.search-choice").last();if(a.length&&!a.hasClass("search-choice-disabled")){this.pending_backstroke=a;return this.single_backstroke_delete?this.keydown_backstroke():
this.pending_backstroke.addClass("search-choice-focus")}};b.prototype.clear_backstroke=function(){this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus");return this.pending_backstroke=null};b.prototype.keydown_checker=function(a){var b,d;b=(d=a.which)!=null?d:a.keyCode;this.search_field_scale();b!==8&&this.pending_backstroke&&this.clear_backstroke();switch(b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&
this.result_select(a);this.mouse_on_container=false;break;case 13:a.preventDefault();break;case 38:a.preventDefault();this.keyup_arrow();break;case 40:this.keydown_arrow()}};b.prototype.search_field_scale=function(){var b,d,f,e,h;if(this.is_multiple){d="position:absolute; left: -1000px; top: -1000px; display:none;";f=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];e=0;for(h=f.length;e<h;e++){b=f[e];d=d+(b+":"+this.search_field.css(b)+";")}b=a("<div />",
{style:d});b.text(this.search_field.val());a("body").append(b);d=b.width()+25;b.remove();d>this.f_width-10&&(d=this.f_width-10);this.search_field.css({width:d+"px"});b=this.container.height();return this.dropdown.css({top:b+"px"})}};b.prototype.generate_random_id=function(){var b;for(b="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();a("#"+b).length>0;)b=b+this.generate_random_char();return b};j=b;d.Chosen=j;e=function(a){return a.outerWidth()-a.width()};d.get_side_border_padding=
e}).call(this);
(function(){var a=jQuery,j=a.extend({},Chosen.prototype);a.extend(Chosen.prototype,{set_up_html:function(){var e;this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id();this.container_id=this.container_id+"_chzn";e=["chzn-container"];e.push("chzn-container-"+(this.is_multiple?"multi":"single"));this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className);this.is_rtl&&e.push("chzn-rtl");this.f_width=this.form_field_jq.outerWidth();e=
{id:this.container_id,"class":e.join(" "),style:"width: "+this.f_width+"px;",title:this.form_field.title};e=a("<div />",e);this.is_multiple?e.html('<ul class="chzn-choices"><li class="search-field"><input class="chzn-input" type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="top:-5000px;"><ul class="chzn-results"></ul></div>'):e.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+
this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="top:-5000px;"><div class="chzn-search"><input class="chzn-input" type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>');this.form_field_jq.hide().after(e);this.container=a("#"+this.container_id);this.dropdown=this.container.find("div.chzn-drop").first();this.container.height();e=this.f_width-get_side_border_padding(this.dropdown);this.dropdown.css({width:e+"px",left:0});this.search_field=this.container.find("input").first();
this.search_results=this.container.find("ul.chzn-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();if(this.is_multiple){this.search_choices=this.container.find("ul.chzn-choices").first();this.search_container=this.container.find("li.search-field").first()}else{this.search_container=this.container.find("div.chzn-search").first();this.selected_item=this.container.find(".chzn-single").first();e=e-get_side_border_padding(this.search_container)-
get_side_border_padding(this.search_field);this.search_field.css({width:e+"px"})}this.results_build();this.set_tab_index();this.form_field_jq.trigger("liszt:ready",{chosen:this});this.dropdown.appendTo("body");this.dropdown.addClass(this.container.attr("class"));this.is_multiple||this.search_field.css("width","");this.search_field.on("click",function(a){a.stopPropagation()})},register_observers:function(){var e=this;j.register_observers.call(this);this.dropdown.mouseenter(function(a){return e.mouse_enter(a)});
this.dropdown.mouseleave(function(a){return e.mouse_leave(a)});a(window).on("center.fb",a.proxy(this.set_position,this));a(window).on("resize.chosen scroll.chosen",_.debounce(a.proxy(this.set_position,this),20));this.container.closest(".scroller").on("scroll.chosen",_.debounce(a.proxy(this.close_field,this),70,true))},results_show:function(){if(this.is_multiple){if(this.max_selected_options<=this.choices){this.form_field_jq.trigger("liszt:maxselected",{chosen:this});return false}}else{this.selected_item.addClass("chzn-single-with-drop");
this.result_single_selected&&this.result_do_highlight(this.result_single_selected)}this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this});this.set_position(true);this.results_showing=true;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()},results_hide:function(){var a=this;this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop");this.result_clear_highlight();this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this});
this.dropdown.hide().css({top:"-5000px"});setTimeout(function(){a.dropdown.show()},0);return this.results_showing=false},set_position:function(a){if(this.results_showing||a===true){var a=this.container.offset(),d=this.is_multiple?this.container.height()-1:this.container.height();return this.dropdown.css({left:a.left,top:a.top+d})}},results_build:function(){var a,d,g,b,f;this.parsing=true;this.results_data=SelectParser.select_to_array(this.form_field);if(this.is_multiple&&this.choices>0){this.search_choices.find("li.search-choice").remove();
this.choices=0}else if(!this.is_multiple){this.selected_item.addClass("chzn-default").find("span").text(this.default_text);this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.dropdown.addClass("chzn-container-single-nosearch"):this.dropdown.removeClass("chzn-container-single-nosearch")}a="";f=this.results_data;g=0;for(b=f.length;g<b;g++){d=f[g];if(d.group)a=a+this.result_add_group(d);else if(!d.empty){a=a+this.result_add_option(d);if(d.selected&&this.is_multiple)this.choice_build(d);
else if(d.selected&&!this.is_multiple){this.selected_item.removeClass("chzn-default").find("span").text(d.text);this.allow_single_deselect&&this.single_deselect_control_build()}}}this.search_field_disabled();this.show_search_field_default();this.search_field_scale();this.search_results.html(a);return this.parsing=false},search_field_scale:function(){var e,d,g,b,f;if(this.is_multiple){d="position:absolute; left: -1000px; top: -1000px; display:none;";g=["font-size","font-style","font-weight","font-family",
"line-height","text-transform","letter-spacing"];b=0;for(f=g.length;b<f;b++){e=g[b];d=d+(e+":"+this.search_field.css(e)+";")}e=a("<div />",{style:d});e.text(this.search_field.val());a("body").append(e);d=e.width();e.remove();d>this.f_width-10&&(d=this.f_width-10);this.search_field.css({width:d+"px"});return this.set_position()}},winnow_results:function(){var e,d,g,b,f,h,j,u,q,l,k,n,x,v;this.no_results_clear();u=0;q=this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html();
f=RegExp(q.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");v=this.results_data;l=0;for(n=v.length;l<n;l++){d=v[l];if(!d.disabled&&!d.empty)if(d.group)a("#"+d.dom_id).css("display","none");else if(!this.is_multiple||!d.selected){e=false;j=d.dom_id;h=a("#"+j);if(f.test(d.html)){e=true;u=u+1}else if(this.enable_split_word_search&&(d.html.indexOf(" ")>=0||d.html.indexOf("[")===0)){b=d.html.replace(/\[|\]/g,"").split(" ");if(b.length){k=0;for(x=b.length;k<x;k++){g=b[k];if(f.test(g)){e=true;u=u+1}}}}if(e){if(q.length){e=
d.html.search(f);g=d.html.substr(0,e+q.length)+"</em>"+d.html.substr(e+q.length);g=g.substr(0,e)+"<em>"+g.substr(e)}else g=d.html;h.html(g);this.result_activate(h);d.group_array_index!=null&&a("#"+this.results_data[d.group_array_index].dom_id).css("display","list-item")}else{this.result_highlight&&j===this.result_highlight.attr("id")&&this.result_clear_highlight();this.result_deactivate(h)}}}return u<1&&q.length?this.no_results(q):this.winnow_results_set_highlight()}})}).call(this);
(function(a,j){a.fn.jPlayer=function(d){var e=typeof d==="string",b=Array.prototype.slice.call(arguments,1),f=this,d=!e&&b.length?a.extend.apply(null,[true,d].concat(b)):d;if(e&&d.charAt(0)==="_")return f;e?this.each(function(){var e=a.data(this,"jPlayer"),g=e&&a.isFunction(e[d])?e[d].apply(e,b):e;if(g!==e&&g!==j){f=g;return false}}):this.each(function(){var b=a.data(this,"jPlayer");b?b.option(d||{}):a.data(this,"jPlayer",new a.jPlayer(d,this))});return f};a.jPlayer=function(d,e){if(arguments.length){this.element=
a(e);this.options=a.extend(true,{},this.options,d);var b=this;this.element.bind("remove.jPlayer",function(){b.destroy()});this._init()}};a.jPlayer.emulateMethods="load play pause";a.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate";a.jPlayer.emulateOptions="muted volume";a.jPlayer.reservedEvent="ready flashreset resize repeat error warning";a.jPlayer.event={ready:"jPlayer_ready",flashreset:"jPlayer_flashreset",resize:"jPlayer_resize",repeat:"jPlayer_repeat",
click:"jPlayer_click",error:"jPlayer_error",warning:"jPlayer_warning",loadstart:"jPlayer_loadstart",progress:"jPlayer_progress",suspend:"jPlayer_suspend",abort:"jPlayer_abort",emptied:"jPlayer_emptied",stalled:"jPlayer_stalled",play:"jPlayer_play",pause:"jPlayer_pause",loadedmetadata:"jPlayer_loadedmetadata",loadeddata:"jPlayer_loadeddata",waiting:"jPlayer_waiting",playing:"jPlayer_playing",canplay:"jPlayer_canplay",canplaythrough:"jPlayer_canplaythrough",seeking:"jPlayer_seeking",seeked:"jPlayer_seeked",
timeupdate:"jPlayer_timeupdate",ended:"jPlayer_ended",ratechange:"jPlayer_ratechange",durationchange:"jPlayer_durationchange",volumechange:"jPlayer_volumechange"};a.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","ratechange"];a.jPlayer.pause=function(){a.each(a.jPlayer.prototype.instances,function(a,e){e.data("jPlayer").status.srcSet&&e.jPlayer("pause")})};a.jPlayer.timeFormat={showHour:false,showMin:true,showSec:true,padHour:false,
padMin:true,padSec:true,sepHour:":",sepMin:":",sepSec:""};a.jPlayer.convertTime=function(d){var e=new Date(d*1E3),b=e.getUTCHours(),d=e.getUTCMinutes(),e=e.getUTCSeconds(),b=a.jPlayer.timeFormat.padHour&&b<10?"0"+b:b,d=a.jPlayer.timeFormat.padMin&&d<10?"0"+d:d,e=a.jPlayer.timeFormat.padSec&&e<10?"0"+e:e;return(a.jPlayer.timeFormat.showHour?b+a.jPlayer.timeFormat.sepHour:"")+(a.jPlayer.timeFormat.showMin?d+a.jPlayer.timeFormat.sepMin:"")+(a.jPlayer.timeFormat.showSec?e+a.jPlayer.timeFormat.sepSec:
"")};a.jPlayer.uaBrowser=function(a){var a=a.toLowerCase(),e=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,f=/(mozilla)(?:.*? rv:([\w.]+))?/,a=/(webkit)[ \/]([\w.]+)/.exec(a)||e.exec(a)||b.exec(a)||a.indexOf("compatible")<0&&f.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};a.jPlayer.uaPlatform=function(a){var e=a.toLowerCase(),b=/(android)/,f=/(mobile)/,a=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(e)||[],e=/(ipad|playbook)/.exec(e)||!f.exec(e)&&b.exec(e)||
[];a[1]&&(a[1]=a[1].replace(/\s/g,"_"));return{platform:a[1]||"",tablet:e[1]||""}};a.jPlayer.browser={};a.jPlayer.platform={};var e=a.jPlayer.uaBrowser(navigator.userAgent);if(e.browser){a.jPlayer.browser[e.browser]=true;a.jPlayer.browser.version=e.version}e=a.jPlayer.uaPlatform(navigator.userAgent);if(e.platform){a.jPlayer.platform[e.platform]=true;a.jPlayer.platform.mobile=!e.tablet;a.jPlayer.platform.tablet=!!e.tablet}a.jPlayer.prototype={count:0,version:{script:"2.1.0",needFlash:"2.1.0",flash:"unknown"},
options:{swfPath:"js",solution:"html, flash",supplied:"mp3",preload:"metadata",volume:0.8,muted:false,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",currentTime:".jp-current-time",duration:".jp-duration",fullScreen:".jp-full-screen",
restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},fullScreen:false,autohide:{restored:false,full:true,fadeIn:200,fadeOut:600,hold:1E3},loop:false,repeat:function(d){d.jPlayer.options.loop?a(this).unbind(".jPlayerRepeat").bind(a.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){a(this).jPlayer("play")}):a(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullScreen:{msie:/msie [0-6]/,ipad:/ipad.*?os [0-4]/,iphone:/iphone/,
ipod:/ipod/,android_pad:/android [0-3](?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,webos:/webos/,playbook:/playbook/},verticalVolume:false,idPrefix:"jp",noConflict:"jQuery",emulateHtml:false,errorAlerts:false,warningAlerts:false},optionsAudio:{size:{width:"0px",height:"0px",
cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:true,format:{},formatType:"",waitForPlay:true,waitForLoad:true,srcSet:false,video:false,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:false},solution:{html:true,
flash:true},format:{mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:true,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:true,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis"',flashCanPlay:false,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:false,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:false,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:true,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',
flashCanPlay:true,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:false,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:false,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:true,media:"video"}},_init:function(){var d=this;this.element.empty();this.status=a.extend({},this.status);this.internal=a.extend({},this.internal);this.internal.domNode=this.element.get(0);this.formats=[];this.solutions=[];this.require={};this.htmlElement={};this.html=
{};this.html.audio={};this.html.video={};this.flash={};this.css={};this.css.cs={};this.css.jq={};this.ancestorJq=[];this.options.volume=this._limitValue(this.options.volume,0,1);a.each(this.options.supplied.toLowerCase().split(","),function(b,f){var e=f.replace(/^\s+|\s+$/g,"");if(d.format[e]){var g=false;a.each(d.formats,function(a,b){if(e===b){g=true;return false}});g||d.formats.push(e)}});a.each(this.options.solution.toLowerCase().split(","),function(b,f){var e=f.replace(/^\s+|\s+$/g,"");if(d.solution[e]){var g=
false;a.each(d.solutions,function(a,b){if(e===b){g=true;return false}});g||d.solutions.push(e)}});this.internal.instance="jp_"+this.count;this.instances[this.internal.instance]=this.element;this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count);this.internal.self=a.extend({},{id:this.element.attr("id"),jq:this.element});this.internal.audio=a.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:j});this.internal.video=a.extend({},{id:this.options.idPrefix+
"_video_"+this.count,jq:j});this.internal.flash=a.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:j,swf:this.options.swfPath+(this.options.swfPath.toLowerCase().slice(-4)!==".swf"?(this.options.swfPath&&this.options.swfPath.slice(-1)!=="/"?"/":"")+"Jplayer.swf":"")});this.internal.poster=a.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:j});a.each(a.jPlayer.event,function(a,b){if(d.options[a]!==j){d.element.bind(b+".jPlayer",d.options[a]);d.options[a]=j}});this.require.audio=
false;this.require.video=false;a.each(this.formats,function(a,b){d.require[d.format[b].media]=true});this.options=this.require.video?a.extend(true,{},this.optionsVideo,this.options):a.extend(true,{},this.optionsAudio,this.options);this._setSize();this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullScreen=this._uaBlocklist(this.options.noFullScreen);this.status.noVolume=this._uaBlocklist(this.options.noVolume);this._restrictNativeVideoControls();this.htmlElement.poster=
document.createElement("img");this.htmlElement.poster.id=this.internal.poster.id;this.htmlElement.poster.onload=function(){(!d.status.video||d.status.waitForPlay)&&d.internal.poster.jq.show()};this.element.append(this.htmlElement.poster);this.internal.poster.jq=a("#"+this.internal.poster.id);this.internal.poster.jq.css({width:this.status.width,height:this.status.height});this.internal.poster.jq.hide();this.internal.poster.jq.bind("click.jPlayer",function(){d._trigger(a.jPlayer.event.click)});this.html.audio.available=
false;if(this.require.audio){this.htmlElement.audio=document.createElement("audio");this.htmlElement.audio.id=this.internal.audio.id;this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)}this.html.video.available=false;if(this.require.video){this.htmlElement.video=document.createElement("video");this.htmlElement.video.id=this.internal.video.id;this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)}this.flash.available=
this._checkForFlash(10);this.html.canPlay={};this.flash.canPlay={};a.each(this.formats,function(a,b){d.html.canPlay[b]=d.html[d.format[b].media].available&&""!==d.htmlElement[d.format[b].media].canPlayType(d.format[b].codec);d.flash.canPlay[b]=d.format[b].flashCanPlay&&d.flash.available});this.html.desired=false;this.flash.desired=false;a.each(this.solutions,function(b,f){if(b===0)d[f].desired=true;else{var e=false,g=false;a.each(d.formats,function(a,b){d[d.solutions[0]].canPlay[b]&&(d.format[b].media===
"video"?g=true:e=true)});d[f].desired=d.require.audio&&!e||d.require.video&&!g}});this.html.support={};this.flash.support={};a.each(this.formats,function(a,b){d.html.support[b]=d.html.canPlay[b]&&d.html.desired;d.flash.support[b]=d.flash.canPlay[b]&&d.flash.desired});this.html.used=false;this.flash.used=false;a.each(this.solutions,function(b,f){a.each(d.formats,function(a,b){if(d[f].support[b]){d[f].used=true;return false}})});this._resetActive();this._resetGate();this._cssSelectorAncestor(this.options.cssSelectorAncestor);
if(!this.html.used&&!this.flash.used){this._error({type:a.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:a.jPlayer.errorMsg.NO_SOLUTION,hint:a.jPlayer.errorHint.NO_SOLUTION});this.css.jq.noSolution.length&&this.css.jq.noSolution.show()}else this.css.jq.noSolution.length&&this.css.jq.noSolution.hide();if(this.flash.used){var e,b="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+
"&muted="+this.options.muted;if(a.browser.msie&&Number(a.browser.version)<=8){b=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+b+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];e=document.createElement('<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0"></object>');
for(var f=0;f<b.length;f++)e.appendChild(document.createElement(b[f]))}else{f=function(a,b,d){var f=document.createElement("param");f.setAttribute("name",b);f.setAttribute("value",d);a.appendChild(f)};e=document.createElement("object");e.setAttribute("id",this.internal.flash.id);e.setAttribute("data",this.internal.flash.swf);e.setAttribute("type","application/x-shockwave-flash");e.setAttribute("width","1");e.setAttribute("height","1");f(e,"flashvars",b);f(e,"allowscriptaccess","always");f(e,"bgcolor",
this.options.backgroundColor);f(e,"wmode",this.options.wmode)}this.element.append(e);this.internal.flash.jq=a(e)}if(this.html.used){if(this.html.audio.available){this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio);this.element.append(this.htmlElement.audio);this.internal.audio.jq=a("#"+this.internal.audio.id)}if(this.html.video.available){this._addHtmlEventListeners(this.htmlElement.video,this.html.video);this.element.append(this.htmlElement.video);this.internal.video.jq=a("#"+this.internal.video.id);
this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",height:"0px"});this.internal.video.jq.bind("click.jPlayer",function(){d._trigger(a.jPlayer.event.click)})}}this.options.emulateHtml&&this._emulateHtmlBridge();this.html.used&&!this.flash.used&&setTimeout(function(){d.internal.ready=true;d.version.flash="n/a";d._trigger(a.jPlayer.event.repeat);d._trigger(a.jPlayer.event.ready)},100);this._updateNativeVideoControls();
this._updateInterface();this._updateButtons(false);this._updateAutohide();this._updateVolume(this.options.volume);this._updateMute(this.options.muted);this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();a.jPlayer.prototype.count++},destroy:function(){this.clearMedia();this._removeUiClass();this.css.jq.currentTime.length&&this.css.jq.currentTime.text("");this.css.jq.duration.length&&this.css.jq.duration.text("");a.each(this.css.jq,function(a,e){e.length&&e.unbind(".jPlayer")});this.internal.poster.jq.unbind(".jPlayer");
this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer");this.options.emulateHtml&&this._destroyHtmlBridge();this.element.removeData("jPlayer");this.element.unbind(".jPlayer");this.element.empty();delete this.instances[this.internal.instance]},enable:function(){},disable:function(){},_testCanPlayType:function(a){try{a.canPlayType(this.format.mp3.codec);return true}catch(e){return false}},_uaBlocklist:function(d){var e=navigator.userAgent.toLowerCase(),b=false;a.each(d,function(a,d){if(d&&
d.test(e)){b=true;return false}});return b},_restrictNativeVideoControls:function(){if(this.require.audio&&this.status.nativeVideoControls){this.status.nativeVideoControls=false;this.status.noFullScreen=true}},_updateNativeVideoControls:function(){if(this.html.video.available&&this.html.used){this.htmlElement.video.controls=this.status.nativeVideoControls;this._updateAutohide();if(this.status.nativeVideoControls&&this.require.video){this.internal.poster.jq.hide();this.internal.video.jq.css({width:this.status.width,
height:this.status.height})}else if(this.status.waitForPlay&&this.status.video){this.internal.poster.jq.show();this.internal.video.jq.css({width:"0px",height:"0px"})}}},_addHtmlEventListeners:function(d,e){var b=this;d.preload=this.options.preload;d.muted=this.options.muted;d.volume=this.options.volume;d.addEventListener("progress",function(){if(e.gate){b._getHtmlStatus(d);b._updateInterface();b._trigger(a.jPlayer.event.progress)}},false);d.addEventListener("timeupdate",function(){if(e.gate){b._getHtmlStatus(d);
b._updateInterface();b._trigger(a.jPlayer.event.timeupdate)}},false);d.addEventListener("durationchange",function(){if(e.gate){b.status.duration=this.duration;b._getHtmlStatus(d);b._updateInterface();b._trigger(a.jPlayer.event.durationchange)}},false);d.addEventListener("play",function(){if(e.gate){b._updateButtons(true);b._html_checkWaitForPlay();b._trigger(a.jPlayer.event.play)}},false);d.addEventListener("playing",function(){if(e.gate){b._updateButtons(true);b._seeked();b._trigger(a.jPlayer.event.playing)}},
false);d.addEventListener("pause",function(){if(e.gate){b._updateButtons(false);b._trigger(a.jPlayer.event.pause)}},false);d.addEventListener("waiting",function(){if(e.gate){b._seeking();b._trigger(a.jPlayer.event.waiting)}},false);d.addEventListener("seeking",function(){if(e.gate){b._seeking();b._trigger(a.jPlayer.event.seeking)}},false);d.addEventListener("seeked",function(){if(e.gate){b._seeked();b._trigger(a.jPlayer.event.seeked)}},false);d.addEventListener("volumechange",function(){if(e.gate){b.options.volume=
d.volume;b.options.muted=d.muted;b._updateMute();b._updateVolume();b._trigger(a.jPlayer.event.volumechange)}},false);d.addEventListener("suspend",function(){if(e.gate){b._seeked();b._trigger(a.jPlayer.event.suspend)}},false);d.addEventListener("ended",function(){if(e.gate){if(!a.jPlayer.browser.webkit)b.htmlElement.media.currentTime=0;b.htmlElement.media.pause();b._updateButtons(false);b._getHtmlStatus(d,true);b._updateInterface();b._trigger(a.jPlayer.event.ended)}},false);d.addEventListener("error",
function(){if(e.gate){b._updateButtons(false);b._seeked();if(b.status.srcSet){clearTimeout(b.internal.htmlDlyCmdId);b.status.waitForLoad=true;b.status.waitForPlay=true;b.status.video&&!b.status.nativeVideoControls&&b.internal.video.jq.css({width:"0px",height:"0px"});b._validString(b.status.media.poster)&&!b.status.nativeVideoControls&&b.internal.poster.jq.show();b.css.jq.videoPlay.length&&b.css.jq.videoPlay.show();b._error({type:a.jPlayer.error.URL,context:b.status.src,message:a.jPlayer.errorMsg.URL,
hint:a.jPlayer.errorHint.URL})}}},false);a.each(a.jPlayer.htmlEvent,function(f,h){d.addEventListener(this,function(){e.gate&&b._trigger(a.jPlayer.event[h])},false)})},_getHtmlStatus:function(a,e){var b=0,f=0,h=0,j=0;if(a.duration)this.status.duration=a.duration;b=a.currentTime;f=this.status.duration>0?100*b/this.status.duration:0;if(typeof a.seekable==="object"&&a.seekable.length>0){h=this.status.duration>0?100*a.seekable.end(a.seekable.length-1)/this.status.duration:100;j=100*a.currentTime/a.seekable.end(a.seekable.length-
1)}else{h=100;j=f}if(e)f=j=b=0;this.status.seekPercent=h;this.status.currentPercentRelative=j;this.status.currentPercentAbsolute=f;this.status.currentTime=b;this.status.readyState=a.readyState;this.status.networkState=a.networkState;this.status.playbackRate=a.playbackRate;this.status.ended=a.ended},_resetStatus:function(){this.status=a.extend({},this.status,a.jPlayer.prototype.status)},_trigger:function(d,e,b){d=a.Event(d);d.jPlayer={};d.jPlayer.version=a.extend({},this.version);d.jPlayer.options=
a.extend(true,{},this.options);d.jPlayer.status=a.extend(true,{},this.status);d.jPlayer.html=a.extend(true,{},this.html);d.jPlayer.flash=a.extend(true,{},this.flash);if(e)d.jPlayer.error=a.extend({},e);if(b)d.jPlayer.warning=a.extend({},b);this.element.trigger(d)},jPlayerFlashEvent:function(d,e){if(d===a.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var b=this.status.currentTime,f=this.status.paused;this.setMedia(this.status.media);b>0&&(f?this.pause(b):this.play(b))}this._trigger(a.jPlayer.event.flashreset)}}else{this.internal.ready=
true;this.internal.flash.jq.css({width:"0px",height:"0px"});this.version.flash=e.version;this.version.needFlash!==this.version.flash&&this._error({type:a.jPlayer.error.VERSION,context:this.version.flash,message:a.jPlayer.errorMsg.VERSION+this.version.flash,hint:a.jPlayer.errorHint.VERSION});this._trigger(a.jPlayer.event.repeat);this._trigger(d)}if(this.flash.gate)switch(d){case a.jPlayer.event.progress:this._getFlashStatus(e);this._updateInterface();this._trigger(d);break;case a.jPlayer.event.timeupdate:this._getFlashStatus(e);
this._updateInterface();this._trigger(d);break;case a.jPlayer.event.play:this._seeked();this._updateButtons(true);this._trigger(d);break;case a.jPlayer.event.pause:this._updateButtons(false);this._trigger(d);break;case a.jPlayer.event.ended:this._updateButtons(false);this._trigger(d);break;case a.jPlayer.event.click:this._trigger(d);break;case a.jPlayer.event.error:this.status.waitForLoad=true;this.status.waitForPlay=true;this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"});this._validString(this.status.media.poster)&&
this.internal.poster.jq.show();this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show();this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media);this._updateButtons(false);this._error({type:a.jPlayer.error.URL,context:e.src,message:a.jPlayer.errorMsg.URL,hint:a.jPlayer.errorHint.URL});break;case a.jPlayer.event.seeking:this._seeking();this._trigger(d);break;case a.jPlayer.event.seeked:this._seeked();this._trigger(d);break;case a.jPlayer.event.ready:break;
default:this._trigger(d)}return false},_getFlashStatus:function(a){this.status.seekPercent=a.seekPercent;this.status.currentPercentRelative=a.currentPercentRelative;this.status.currentPercentAbsolute=a.currentPercentAbsolute;this.status.currentTime=a.currentTime;this.status.duration=a.duration;this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=false},_updateButtons:function(a){if(a!==j){this.status.paused=!a;if(this.css.jq.play.length&&this.css.jq.pause.length)if(a){this.css.jq.play.hide();
this.css.jq.pause.show()}else{this.css.jq.play.show();this.css.jq.pause.hide()}}if(this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length)if(this.status.noFullScreen){this.css.jq.fullScreen.hide();this.css.jq.restoreScreen.hide()}else if(this.options.fullScreen){this.css.jq.fullScreen.hide();this.css.jq.restoreScreen.show()}else{this.css.jq.fullScreen.show();this.css.jq.restoreScreen.hide()}if(this.css.jq.repeat.length&&this.css.jq.repeatOff.length)if(this.options.loop){this.css.jq.repeat.hide();
this.css.jq.repeatOff.show()}else{this.css.jq.repeat.show();this.css.jq.repeatOff.hide()}},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%");this.css.jq.playBar.length&&this.css.jq.playBar.width(this.status.currentPercentRelative+"%");this.css.jq.currentTime.length&&this.css.jq.currentTime.text(a.jPlayer.convertTime(this.status.currentTime));this.css.jq.duration.length&&this.css.jq.duration.text(a.jPlayer.convertTime(this.status.duration))},
_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg")},_resetGate:function(){this.html.audio.gate=false;this.html.video.gate=false;this.flash.gate=false},_resetActive:function(){this.html.active=false;this.flash.active=false},setMedia:function(d){var e=this,b=false,f=this.status.media.poster!==d.poster;this._resetMedia();this._resetGate();this._resetActive();a.each(this.formats,
function(f,j){var u=e.format[j].media==="video";a.each(e.solutions,function(a,f){if(e[f].support[j]&&e._validString(d[j])){var h=f==="html";if(u){if(h){e.html.video.gate=true;e._html_setVideo(d);e.html.active=true}else{e.flash.gate=true;e._flash_setVideo(d);e.flash.active=true}e.css.jq.videoPlay.length&&e.css.jq.videoPlay.show();e.status.video=true}else{if(h){e.html.audio.gate=true;e._html_setAudio(d);e.html.active=true}else{e.flash.gate=true;e._flash_setAudio(d);e.flash.active=true}e.css.jq.videoPlay.length&&
e.css.jq.videoPlay.hide();e.status.video=false}b=true;return false}});if(b)return false});if(b){if((!this.status.nativeVideoControls||!this.html.video.gate)&&this._validString(d.poster))f?this.htmlElement.poster.src=d.poster:this.internal.poster.jq.show();this.status.srcSet=true;this.status.media=a.extend({},d);this._updateButtons(false);this._updateInterface()}else this._error({type:a.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:a.jPlayer.errorMsg.NO_SUPPORT,
hint:a.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus();this._updateButtons(false);this._updateInterface();this._seeked();this.internal.poster.jq.hide();clearTimeout(this.internal.htmlDlyCmdId);this.html.active?this._html_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia();this.html.active?this._html_clearMedia():this.flash.active&&this._flash_clearMedia();this._resetGate();this._resetActive()},load:function(){this.status.srcSet?
this.html.active?this._html_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},play:function(a){a=typeof a==="number"?a:NaN;this.status.srcSet?this.html.active?this._html_play(a):this.flash.active&&this._flash_play(a):this._urlNotSetError("play")},videoPlay:function(){this.play()},pause:function(a){a=typeof a==="number"?a:NaN;this.status.srcSet?this.html.active?this._html_pause(a):this.flash.active&&this._flash_pause(a):this._urlNotSetError("pause")},pauseOthers:function(){var d=
this;a.each(this.instances,function(a,b){d.element!==b&&b.data("jPlayer").status.srcSet&&b.jPlayer("pause")})},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(a){a=this._limitValue(a,0,100);this.status.srcSet?this.html.active?this._html_playHead(a):this.flash.active&&this._flash_playHead(a):this._urlNotSetError("playHead")},_muted:function(d){this.options.muted=d;this.html.used&&this._html_mute(d);
this.flash.used&&this._flash_mute(d);if(!this.html.video.gate&&!this.html.audio.gate){this._updateMute(d);this._updateVolume(this.options.volume);this._trigger(a.jPlayer.event.volumechange)}},mute:function(a){a=a===j?true:!!a;this._muted(a)},unmute:function(a){a=a===j?true:!!a;this._muted(!a)},_updateMute:function(a){if(a===j)a=this.options.muted;if(this.css.jq.mute.length&&this.css.jq.unmute.length)if(this.status.noVolume){this.css.jq.mute.hide();this.css.jq.unmute.hide()}else if(a){this.css.jq.mute.hide();
this.css.jq.unmute.show()}else{this.css.jq.mute.show();this.css.jq.unmute.hide()}},volume:function(d){d=this._limitValue(d,0,1);this.options.volume=d;this.html.used&&this._html_volume(d);this.flash.used&&this._flash_volume(d);if(!this.html.video.gate&&!this.html.audio.gate){this._updateVolume(d);this._trigger(a.jPlayer.event.volumechange)}},volumeBar:function(a){if(this.css.jq.volumeBar.length){var e=this.css.jq.volumeBar.offset(),b=a.pageX-e.left,f=this.css.jq.volumeBar.width(),a=this.css.jq.volumeBar.height()-
a.pageY+e.top,e=this.css.jq.volumeBar.height();this.options.verticalVolume?this.volume(a/e):this.volume(b/f)}this.options.muted&&this._muted(false)},volumeBarValue:function(a){this.volumeBar(a)},_updateVolume:function(a){if(a===j)a=this.options.volume;a=this.options.muted?0:a;if(this.status.noVolume){this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide();this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide();this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()}else{this.css.jq.volumeBar.length&&
this.css.jq.volumeBar.show();if(this.css.jq.volumeBarValue.length){this.css.jq.volumeBarValue.show();this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](a*100+"%")}this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show()}},volumeMax:function(){this.volume(1);this.options.muted&&this._muted(false)},_cssSelectorAncestor:function(d){var e=this;this.options.cssSelectorAncestor=d;this._removeUiClass();this.ancestorJq=d?a(d):[];d&&this.ancestorJq.length!==1&&this._warning({type:a.jPlayer.warning.CSS_SELECTOR_COUNT,
context:d,message:a.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:a.jPlayer.warningHint.CSS_SELECTOR_COUNT});this._addUiClass();a.each(this.options.cssSelector,function(a,d){e._cssSelector(a,d)})},_cssSelector:function(d,e){var b=this;if(typeof e==="string")if(a.jPlayer.prototype.options.cssSelector[d]){this.css.jq[d]&&this.css.jq[d].length&&this.css.jq[d].unbind(".jPlayer");this.options.cssSelector[d]=e;this.css.cs[d]=this.options.cssSelectorAncestor+
" "+e;this.css.jq[d]=e?a(this.css.cs[d]):[];this.css.jq[d].length&&this.css.jq[d].bind("click.jPlayer",function(f){b[d](f);a(this).blur();return false});e&&this.css.jq[d].length!==1&&this._warning({type:a.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[d],message:a.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[d].length+" found for "+d+" method.",hint:a.jPlayer.warningHint.CSS_SELECTOR_COUNT})}else this._warning({type:a.jPlayer.warning.CSS_SELECTOR_METHOD,context:d,message:a.jPlayer.warningMsg.CSS_SELECTOR_METHOD,
hint:a.jPlayer.warningHint.CSS_SELECTOR_METHOD});else this._warning({type:a.jPlayer.warning.CSS_SELECTOR_STRING,context:e,message:a.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:a.jPlayer.warningHint.CSS_SELECTOR_STRING})},seekBar:function(a){if(this.css.jq.seekBar){var e=this.css.jq.seekBar.offset(),a=a.pageX-e.left,e=this.css.jq.seekBar.width();this.playHead(100*a/e)}},playBar:function(a){this.seekBar(a)},repeat:function(){this._loop(true)},repeatOff:function(){this._loop(false)},_loop:function(d){if(this.options.loop!==
d){this.options.loop=d;this._updateButtons();this._trigger(a.jPlayer.event.repeat)}},currentTime:function(){},duration:function(){},gui:function(){},noSolution:function(){},option:function(d,e){var b=d;if(arguments.length===0)return a.extend(true,{},this.options);if(typeof d==="string"){var f=d.split(".");if(e===j){for(var b=a.extend(true,{},this.options),h=0;h<f.length;h++)if(b[f[h]]!==j)b=b[f[h]];else{this._warning({type:a.jPlayer.warning.OPTION_KEY,context:d,message:a.jPlayer.warningMsg.OPTION_KEY,
hint:a.jPlayer.warningHint.OPTION_KEY});return j}return b}for(var h=b={},o=0;o<f.length;o++)if(o<f.length-1){h[f[o]]={};h=h[f[o]]}else h[f[o]]=e}this._setOptions(b);return this},_setOptions:function(d){var e=this;a.each(d,function(a,d){e._setOption(a,d)});return this},_setOption:function(d,e){var b=this;switch(d){case "volume":this.volume(e);break;case "muted":this._muted(e);break;case "cssSelectorAncestor":this._cssSelectorAncestor(e);break;case "cssSelector":a.each(e,function(a,d){b._cssSelector(a,
d)});break;case "fullScreen":if(this.options[d]!==e){this._removeUiClass();this.options[d]=e;this._refreshSize()}break;case "size":!this.options.fullScreen&&this.options[d].cssClass!==e.cssClass&&this._removeUiClass();this.options[d]=a.extend({},this.options[d],e);this._refreshSize();break;case "sizeFull":this.options.fullScreen&&this.options[d].cssClass!==e.cssClass&&this._removeUiClass();this.options[d]=a.extend({},this.options[d],e);this._refreshSize();break;case "autohide":this.options[d]=a.extend({},
this.options[d],e);this._updateAutohide();break;case "loop":this._loop(e);break;case "nativeVideoControls":this.options[d]=a.extend({},this.options[d],e);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this._restrictNativeVideoControls();this._updateNativeVideoControls();break;case "noFullScreen":this.options[d]=a.extend({},this.options[d],e);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullScreen=this._uaBlocklist(this.options.noFullScreen);
this._restrictNativeVideoControls();this._updateButtons();break;case "noVolume":this.options[d]=a.extend({},this.options[d],e);this.status.noVolume=this._uaBlocklist(this.options.noVolume);this._updateVolume();this._updateMute();break;case "emulateHtml":if(this.options[d]!==e)(this.options[d]=e)?this._emulateHtmlBridge():this._destroyHtmlBridge()}return this},_refreshSize:function(){this._setSize();this._addUiClass();this._updateSize();this._updateButtons();this._updateAutohide();this._trigger(a.jPlayer.event.resize)},
_setSize:function(){if(this.options.fullScreen){this.status.width=this.options.sizeFull.width;this.status.height=this.options.sizeFull.height;this.status.cssClass=this.options.sizeFull.cssClass}else{this.status.width=this.options.size.width;this.status.height=this.options.size.height;this.status.cssClass=this.options.size.cssClass}this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&
this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height});!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&(this.flash.active&&this.status.video)&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},
_updateAutohide:function(){var a=this,e=function(){a.css.jq.gui.fadeIn(a.options.autohide.fadeIn,function(){clearTimeout(a.internal.autohideId);a.internal.autohideId=setTimeout(function(){a.css.jq.gui.fadeOut(a.options.autohide.fadeOut)},a.options.autohide.hold)})};if(this.css.jq.gui.length){this.css.jq.gui.stop(true,true);clearTimeout(this.internal.autohideId);this.element.unbind(".jPlayerAutohide");this.css.jq.gui.unbind(".jPlayerAutohide");if(this.status.nativeVideoControls)this.css.jq.gui.hide();
else if(this.options.fullScreen&&this.options.autohide.full||!this.options.fullScreen&&this.options.autohide.restored){this.element.bind("mousemove.jPlayer.jPlayerAutohide",e);this.css.jq.gui.bind("mousemove.jPlayer.jPlayerAutohide",e);this.css.jq.gui.hide()}else this.css.jq.gui.show()}},fullScreen:function(){this._setOption("fullScreen",true)},restoreScreen:function(){this._setOption("fullScreen",false)},_html_initMedia:function(){this.htmlElement.media.src=this.status.src;this.options.preload!==
"none"&&this._html_load();this._trigger(a.jPlayer.event.timeupdate)},_html_setAudio:function(d){var e=this;a.each(this.formats,function(a,f){if(e.html.support[f]&&d[f]){e.status.src=d[f];e.status.format[f]=true;e.status.formatType=f;return false}});this.htmlElement.media=this.htmlElement.audio;this._html_initMedia()},_html_setVideo:function(d){var e=this;a.each(this.formats,function(a,f){if(e.html.support[f]&&d[f]){e.status.src=d[f];e.status.format[f]=true;e.status.formatType=f;return false}});if(this.status.nativeVideoControls)this.htmlElement.video.poster=
this._validString(d.poster)?d.poster:"";this.htmlElement.media=this.htmlElement.video;this._html_initMedia()},_html_resetMedia:function(){if(this.htmlElement.media){this.htmlElement.media.id===this.internal.video.id&&!this.status.nativeVideoControls&&this.internal.video.jq.css({width:"0px",height:"0px"});this.htmlElement.media.pause()}},_html_clearMedia:function(){if(this.htmlElement.media){this.htmlElement.media.src="";this.htmlElement.media.load()}},_html_load:function(){if(this.status.waitForLoad){this.status.waitForLoad=
false;this.htmlElement.media.load()}clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(a){var e=this;this._html_load();this.htmlElement.media.play();if(!isNaN(a))try{this.htmlElement.media.currentTime=a}catch(b){this.internal.htmlDlyCmdId=setTimeout(function(){e.play(a)},100);return}this._html_checkWaitForPlay()},_html_pause:function(a){var e=this;a>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId);this.htmlElement.media.pause();if(!isNaN(a))try{this.htmlElement.media.currentTime=
a}catch(b){this.internal.htmlDlyCmdId=setTimeout(function(){e.pause(a)},100);return}a>0&&this._html_checkWaitForPlay()},_html_playHead:function(a){var e=this;this._html_load();try{if(typeof this.htmlElement.media.seekable==="object"&&this.htmlElement.media.seekable.length>0)this.htmlElement.media.currentTime=a*this.htmlElement.media.seekable.end(this.htmlElement.media.seekable.length-1)/100;else if(this.htmlElement.media.duration>0&&!isNaN(this.htmlElement.media.duration))this.htmlElement.media.currentTime=
a*this.htmlElement.media.duration/100;else throw"e";}catch(b){this.internal.htmlDlyCmdId=setTimeout(function(){e.playHead(a)},100);return}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){if(this.status.waitForPlay){this.status.waitForPlay=false;this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();if(this.status.video){this.internal.poster.jq.hide();this.internal.video.jq.css({width:this.status.width,height:this.status.height})}}},_html_volume:function(a){if(this.html.audio.available)this.htmlElement.audio.volume=
a;if(this.html.video.available)this.htmlElement.video.volume=a},_html_mute:function(a){if(this.html.audio.available)this.htmlElement.audio.muted=a;if(this.html.video.available)this.htmlElement.video.muted=a},_flash_setAudio:function(d){var e=this;try{a.each(this.formats,function(a,b){if(e.flash.support[b]&&d[b]){switch(b){case "m4a":case "fla":e._getMovie().fl_setAudio_m4a(d[b]);break;case "mp3":e._getMovie().fl_setAudio_mp3(d[b])}e.status.src=d[b];e.status.format[b]=true;e.status.formatType=b;return false}});
if(this.options.preload==="auto"){this._flash_load();this.status.waitForLoad=false}}catch(b){this._flashError(b)}},_flash_setVideo:function(d){var e=this;try{a.each(this.formats,function(a,b){if(e.flash.support[b]&&d[b]){switch(b){case "m4v":case "flv":e._getMovie().fl_setVideo_m4v(d[b])}e.status.src=d[b];e.status.format[b]=true;e.status.formatType=b;return false}});if(this.options.preload==="auto"){this._flash_load();this.status.waitForLoad=false}}catch(b){this._flashError(b)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",
height:"0px"});this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(a){this._flashError(a)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(a){this._flashError(a)}this.status.waitForLoad=false},_flash_play:function(a){try{this._getMovie().fl_play(a)}catch(e){this._flashError(e)}this.status.waitForLoad=false;this._flash_checkWaitForPlay()},_flash_pause:function(a){try{this._getMovie().fl_pause(a)}catch(e){this._flashError(e)}if(a>0){this.status.waitForLoad=
false;this._flash_checkWaitForPlay()}},_flash_playHead:function(a){try{this._getMovie().fl_play_head(a)}catch(e){this._flashError(e)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){if(this.status.waitForPlay){this.status.waitForPlay=false;this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();if(this.status.video){this.internal.poster.jq.hide();this.internal.flash.jq.css({width:this.status.width,height:this.status.height})}}},_flash_volume:function(a){try{this._getMovie().fl_volume(a)}catch(e){this._flashError(e)}},
_flash_mute:function(a){try{this._getMovie().fl_mute(a)}catch(e){this._flashError(e)}},_getMovie:function(){return document[this.internal.flash.id]},_checkForFlash:function(a){var e=false,b;if(window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+a);e=true}catch(f){}else if(navigator.plugins&&navigator.mimeTypes.length>0)(b=navigator.plugins["Shockwave Flash"])&&navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")>=a&&(e=true);return e},_validString:function(a){return a&&
typeof a==="string"},_limitValue:function(a,e,b){return a<e?e:a>b?b:a},_urlNotSetError:function(d){this._error({type:a.jPlayer.error.URL_NOT_SET,context:d,message:a.jPlayer.errorMsg.URL_NOT_SET,hint:a.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(d){var e;e=this.internal.ready?"FLASH_DISABLED":"FLASH";this._error({type:a.jPlayer.error[e],context:this.internal.flash.swf,message:a.jPlayer.errorMsg[e]+d.message,hint:a.jPlayer.errorHint[e]});this.internal.flash.jq.css({width:"1px",height:"1px"})},
_error:function(d){this._trigger(a.jPlayer.event.error,d);this.options.errorAlerts&&this._alert("Error!"+(d.message?"\n\n"+d.message:"")+(d.hint?"\n\n"+d.hint:"")+"\n\nContext: "+d.context)},_warning:function(d){this._trigger(a.jPlayer.event.warning,j,d);this.options.warningAlerts&&this._alert("Warning!"+(d.message?"\n\n"+d.message:"")+(d.hint?"\n\n"+d.hint:"")+"\n\nContext: "+d.context)},_alert:function(a){alert("jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+a)},_emulateHtmlBridge:function(){var d=
this;a.each(a.jPlayer.emulateMethods.split(/\s+/g),function(a,b){d.internal.domNode[b]=function(a){d[b](a)}});a.each(a.jPlayer.event,function(e,b){var f=true;a.each(a.jPlayer.reservedEvent.split(/\s+/g),function(a,b){if(b===e)return f=false});f&&d.element.bind(b+".jPlayer.jPlayerHtml",function(){d._emulateHtmlUpdate();var a=document.createEvent("Event");a.initEvent(e,false,true);d.internal.domNode.dispatchEvent(a)})})},_emulateHtmlUpdate:function(){var d=this;a.each(a.jPlayer.emulateStatus.split(/\s+/g),
function(a,b){d.internal.domNode[b]=d.status[b]});a.each(a.jPlayer.emulateOptions.split(/\s+/g),function(a,b){d.internal.domNode[b]=d.options[b]})},_destroyHtmlBridge:function(){var d=this;this.element.unbind(".jPlayerHtml");a.each((a.jPlayer.emulateMethods+" "+a.jPlayer.emulateStatus+" "+a.jPlayer.emulateOptions).split(/\s+/g),function(a,b){delete d.internal.domNode[b]})}};a.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",
URL_NOT_SET:"e_url_not_set",VERSION:"e_version"};a.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",
URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+a.jPlayer.prototype.version.script+" needs Jplayer.swf version "+a.jPlayer.prototype.version.needFlash+" but found "};a.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",
URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."};a.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"};a.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",
OPTION_KEY:"The option requested in jPlayer('option') is undefined."};a.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}})(jQuery);
(function(a){function j(b,d,h){var g=this,j=b.add(this),q=b.find(h.tabs),l=d.jquery?d:b.children(d),k;q.length||(q=b.children());l.length||(l=b.parent().find(d));l.length||(l=a(d));a.extend(this,{click:function(b,d){var f=q.eq(b);if(typeof b=="string"&&b.replace("#","")){f=q.filter("[href*='"+b.replace("#","")+"']");b=Math.max(q.index(f),0)}if(h.rotate){var l=q.length-1;if(b<0)return g.click(l,d);if(b>l)return g.click(0,d)}if(!f.length){if(k>=0)return g;b=h.initialIndex;f=q.eq(b)}if(b===k)return g;
d=d||a.Event();d.type="onBeforeClick";j.trigger(d,[b]);if(!d.isDefaultPrevented()){e[h.effect].call(g,b,function(){k=b;d.type="onClick";j.trigger(d,[b])});q.removeClass(h.current);f.addClass(h.current);return g}},getConf:function(){return h},getTabs:function(){return q},getPanes:function(){return l},getCurrentPane:function(){return l.eq(k)},getCurrentTab:function(){return q.eq(k)},getIndex:function(){return k},next:function(){return g.click(k+1)},prev:function(){return g.click(k-1)},destroy:function(){q.unbind(h.event).removeClass(h.current);
l.find("a[href^='#']").unbind("click.T");return g}});a.each(["onBeforeClick","onClick"],function(b,d){a.isFunction(h[d])&&a(g).bind(d,h[d]);g[d]=function(b){b&&a(g).bind(d,b);return g}});if(h.history&&a.fn.history){a.tools.history.init(q);h.event="history"}q.each(function(b){a(this).bind(h.event,function(a){g.click(b,a);return a.preventDefault()})});l.find("a[href^='#']").bind("click.T",function(b){g.click(a(this).attr("href"),b)});location.hash&&h.tabs=="a"&&b.find("[href='"+location.hash+"']").length?
g.click(location.hash):(h.initialIndex===0||h.initialIndex>0)&&g.click(h.initialIndex)}a.tools=a.tools||{version:"@VERSION"};a.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialIndex:0,event:"click",rotate:false,slideUpSpeed:400,slideDownSpeed:400,history:false},addEffect:function(a,d){e[a]=d}};var e={"default":function(a,d){this.getPanes().hide().eq(a).show();d.call()},fade:function(a,d){var e=this.getConf(),g=e.fadeOutSpeed,j=this.getPanes();g?
j.fadeOut(g):j.hide();j.eq(a).fadeIn(e.fadeInSpeed,d)},slide:function(a,d){var e=this.getConf();this.getPanes().slideUp(e.slideUpSpeed);this.getPanes().eq(a).slideDown(e.slideDownSpeed,d)},ajax:function(a,d){this.getPanes().eq(0).load(this.getTabs().eq(a).attr("href"),d)}},d,g;a.tools.tabs.addEffect("horizontal",function(b,f){if(!d){var e=this.getPanes().eq(b),j=this.getCurrentPane();g||(g=this.getPanes().eq(0).width());d=true;e.show();j.animate({width:0},{step:function(a){e.css("width",g-a)},complete:function(){a(this).hide();
f.call();d=false}});if(!j.length){f.call();d=false}}});a.fn.tabs=function(b,d){var e=this.data("tabs");if(e){e.destroy();this.removeData("tabs")}a.isFunction(d)&&(d={onBeforeClick:d});d=a.extend({},a.tools.tabs.conf,d);this.each(function(){e=new j(a(this),b,d);a(this).data("tabs",e)});return d.api?e:this}})(jQuery);
jQuery.cookie=function(a,j,e){if(typeof j!="undefined"){e=e||{};if(j===null){j="";e.expires=-1}var d="";if(e.expires&&(typeof e.expires=="number"||e.expires.toUTCString)){if(typeof e.expires=="number"){d=new Date;d.setTime(d.getTime()+e.expires*864E5)}else d=e.expires;d="; expires="+d.toUTCString()}var g=e.path?"; path="+e.path:"",b=e.domain?"; domain="+e.domain:"",e=e.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(j),d,g,b,e].join("")}else{j=null;if(document.cookie&&document.cookie!=
""){e=document.cookie.split(";");for(d=0;d<e.length;d++){g=jQuery.trim(e[d]);if(g.substring(0,a.length+1)==a+"="){j=decodeURIComponent(g.substring(a.length+1));break}}}return j}};
$(function(){$("html").ajaxSend(function(a,j,e){D.u.is_external(e.url)||j.setRequestHeader("X-CSRFToken",$.cookie("csrftoken"))});if(D.config){$('<div id="sound-player"></div>').appendTo("body");$("#sound-player").jPlayer({ready:function(){$(this).jPlayer("setMedia",{oga:D.config.update_sound_oga,mp3:D.config.update_sound_mp3}).data("ready",true)},swfPath:D.config.sound_player_swf,solution:$.browser.opera?"flash":"html,flash",supplied:"oga,mp3",preload:"auto"})}});
(function(a){function j(a){if(a in h.style)return a;var b=["Moz","Webkit","O","ms"],d=a.charAt(0).toUpperCase()+a.substr(1);if(a in h.style)return a;for(a=0;a<b.length;++a){var f=b[a]+d;if(f in h.style)return f}}function e(a){typeof a==="string"&&this.parse(a);return this}function d(b,d,e,h){var g=[];a.each(b,function(b){b=a.camelCase(b);b=a.transit.propertyMap[b]||a.cssProps[b]||b;b=b.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()});a.inArray(b,g)===-1&&g.push(b)});a.cssEase[e]&&(e=a.cssEase[e]);
var j=""+f(d)+" "+e;parseInt(h,10)>0&&(j=j+(" "+f(h)));var l=[];a.each(g,function(a,b){l.push(b+" "+j)});return l.join(", ")}function g(b,d){d||(a.cssNumber[b]=true);a.transit.propertyMap[b]=o.transform;a.cssHooks[b]={get:function(d){return a(d).css("transit:transform").get(b)},set:function(d,f){var e=a(d).css("transit:transform");e.setFromString(b,f);a(d).css({"transit:transform":e})}}}function b(a,b){return typeof a==="string"&&!a.match(/^[\-0-9\.]+$/)?a:""+a+b}function f(d){typeof d==="string"&&
(d=a.fx.speeds[d]||a.fx.speeds._default);return b(d,"ms")}a.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:true,useTransitionEnd:false};var h=document.createElement("div"),o={},u=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;o.transition=j("transition");o.transitionDelay=j("transitionDelay");o.transform=j("transform");
o.transformOrigin=j("transformOrigin");h.style[o.transform]="";h.style[o.transform]="rotateY(90deg)";o.transform3d=h.style[o.transform]!=="";var q=o.transitionEnd={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"}[o.transition]||null,l;for(l in o)o.hasOwnProperty(l)&&typeof a.support[l]==="undefined"&&(a.support[l]=o[l]);h=null;a.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",
snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",
easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};
a.cssHooks["transit:transform"]={get:function(b){return a(b).data("transform")||new e},set:function(b,d){var f=d;f instanceof e||(f=new e(f));b.style[o.transform]=o.transform==="WebkitTransform"&&!u?f.toString(true):f.toString();a(b).data("transform",f)}};a.cssHooks.transform={set:a.cssHooks["transit:transform"].set};if(a.fn.jquery<"1.8"){a.cssHooks.transformOrigin={get:function(a){return a.style[o.transformOrigin]},set:function(a,b){a.style[o.transformOrigin]=b}};a.cssHooks.transition={get:function(a){return a.style[o.transition]},
set:function(a,b){a.style[o.transition]=b}}}g("scale");g("translate");g("rotate");g("rotateX");g("rotateY");g("rotate3d");g("perspective");g("skewX");g("skewY");g("x",true);g("y",true);e.prototype={setFromString:function(a,b){var d=typeof b==="string"?b.split(","):b.constructor===Array?b:[b];d.unshift(a);e.prototype.set.apply(this,d)},set:function(a){var b=Array.prototype.slice.apply(arguments,[1]);this.setter[a]?this.setter[a].apply(this,b):this[a]=b.join(",")},get:function(a){return this.getter[a]?
this.getter[a].apply(this):this[a]||0},setter:{rotate:function(a){this.rotate=b(a,"deg")},rotateX:function(a){this.rotateX=b(a,"deg")},rotateY:function(a){this.rotateY=b(a,"deg")},scale:function(a,b){b===void 0&&(b=a);this.scale=a+","+b},skewX:function(a){this.skewX=b(a,"deg")},skewY:function(a){this.skewY=b(a,"deg")},perspective:function(a){this.perspective=b(a,"px")},x:function(a){this.set("translate",a,null)},y:function(a){this.set("translate",null,a)},translate:function(a,d){if(this._translateX===
void 0)this._translateX=0;if(this._translateY===void 0)this._translateY=0;if(a!==null&&a!==void 0)this._translateX=b(a,"px");if(d!==null&&d!==void 0)this._translateY=b(d,"px");this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var a=(this.scale||"1,1").split(",");a[0]&&(a[0]=parseFloat(a[0]));a[1]&&(a[1]=parseFloat(a[1]));return a[0]===a[1]?a[0]:a},rotate3d:function(){for(var a=(this.rotate3d||
"0,0,0,0deg").split(","),d=0;d<=3;++d)a[d]&&(a[d]=parseFloat(a[d]));a[3]&&(a[3]=b(a[3],"deg"));return a}},parse:function(a){var b=this;a.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(a,d,f){b.setFromString(d,f)})},toString:function(a){var b=[],d;for(d in this)if(this.hasOwnProperty(d)&&(o.transform3d||!(d==="rotateX"||d==="rotateY"||d==="perspective"||d==="transformOrigin")))d[0]!=="_"&&(a&&d==="scale"?b.push(d+"3d("+this[d]+",1)"):a&&d==="translate"?b.push(d+"3d("+this[d]+",0)"):b.push(d+"("+this[d]+
")"));return b.join(" ")}};a.fn.transition=a.fn.transit=function(b,e,h,g){var j=this,l=0,u=true;if(typeof e==="function"){g=e;e=void 0}if(typeof e==="object"){h=e.easing;l=e.delay||0;u=e.queue||true;g=e.complete;e=e.duration}if(typeof h==="function"){g=h;h=void 0}if(typeof b.easing!=="undefined"){h=b.easing;delete b.easing}if(typeof b.duration!=="undefined"){e=b.duration;delete b.duration}if(typeof b.complete!=="undefined"){g=b.complete;delete b.complete}if(typeof b.queue!=="undefined"){u=b.queue;
delete b.queue}if(typeof b.delay!=="undefined"){l=b.delay;delete b.delay}if(typeof e==="undefined")e=a.fx.speeds._default;if(typeof h==="undefined")h=a.cssEase._default;var e=f(e),B=d(b,e,h,l),F=a.transit.enabled&&o.transition?parseInt(e,10)+parseInt(l,10):0;if(F===0){e=u;h=function(a){j.css(b);g&&g.apply(j);a&&a()};e===true?j.queue(h):e?j.queue(e,h):h();return j}var t={},e=u,h=function(d){this.offsetWidth;var f=false,e=function(){f&&j.unbind(q,e);F>0&&j.each(function(){this.style[o.transition]=t[this]||
null});typeof g==="function"&&g.apply(j);typeof d==="function"&&d()};if(F>0&&q&&a.transit.useTransitionEnd){f=true;j.bind(q,e)}else window.setTimeout(e,F);j.each(function(){F>0&&(this.style[o.transition]=B);a(this).css(b)})};e===true?j.queue(h):e?j.queue(e,h):h();return this};a.transit.getTransitionValue=d})(jQuery);$.template("directory_serviceboard_notice",'<article id="notice-modal">    <header>        <hgroup>            <h1>Want to add new widgets?</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p><strong>Not a problem...</strong>        <p>Please add a new dashboard by clicking on the button below. You currently have a preset ${service} dashboard that doesn\'t allow any changes, so create a fresh new one, and monitor your world.</p>        <a class="btn-upsell" href="#new/dashboard/default">            <strong>Add a new Dashboard</strong>            <span>(you will be able to add any widgets here)</span>        </a>    </div></article>');
$.template("widget_fetching_data",'<div class="widget-fetching-data">    <div>        <h2>Fetching your data...</h2>        <p>This might take a few minutes, please bear with us. You can always <a href="#settings/widget/${widget_id}/feedback">contact us</a> if you need an extra hand.</p>    </div></div>');$.template("dashboard_to_copy_item",'<li id="${dashboard_id}">    <a href="" class="btn btn-ico-option">        <i class="icon-copy-from"></i>        <span>to dashboard<br/>${$item.truncate(30)}</span>    </a></li>');
(function(){var a=this,j=a._,e={},d=Array.prototype,g=Object.prototype,b=d.push,f=d.slice,h=d.concat,o=g.toString,u=g.hasOwnProperty,q=d.forEach,l=d.map,k=d.reduce,n=d.reduceRight,x=d.filter,v=d.every,w=d.some,z=d.indexOf,E=d.lastIndexOf,g=Array.isArray,B=Object.keys,F=Function.prototype.bind,t=function(a){if(a instanceof t)return a;if(!(this instanceof t))return new t(a);this._wrapped=a};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=t;exports._=
t}else a._=t;t.VERSION="1.4.4";var G=t.each=t.forEach=function(a,b,d){if(a!=null)if(q&&a.forEach===q)a.forEach(b,d);else if(a.length===+a.length)for(var f=0,h=a.length;f<h;f++){if(b.call(d,a[f],f,a)===e)break}else for(f in a)if(t.has(a,f)&&b.call(d,a[f],f,a)===e)break};t.map=t.collect=function(a,b,d){var f=[];if(a==null)return f;if(l&&a.map===l)return a.map(b,d);G(a,function(a,e,h){f[f.length]=b.call(d,a,e,h)});return f};t.reduce=t.foldl=t.inject=function(a,b,d,f){var e=arguments.length>2;a==null&&
(a=[]);if(k&&a.reduce===k){f&&(b=t.bind(b,f));return e?a.reduce(b,d):a.reduce(b)}G(a,function(a,h,g){if(e)d=b.call(f,d,a,h,g);else{d=a;e=true}});if(!e)throw new TypeError("Reduce of empty array with no initial value");return d};t.reduceRight=t.foldr=function(a,b,d,f){var e=arguments.length>2;a==null&&(a=[]);if(n&&a.reduceRight===n){f&&(b=t.bind(b,f));return e?a.reduceRight(b,d):a.reduceRight(b)}var h=a.length;if(h!==+h)var g=t.keys(a),h=g.length;G(a,function(k,j,n){j=g?g[--h]:--h;if(e)d=b.call(f,
d,a[j],j,n);else{d=a[j];e=true}});if(!e)throw new TypeError("Reduce of empty array with no initial value");return d};t.find=t.detect=function(a,b,d){var f;y(a,function(a,e,h){if(b.call(d,a,e,h)){f=a;return true}});return f};t.filter=t.select=function(a,b,d){var f=[];if(a==null)return f;if(x&&a.filter===x)return a.filter(b,d);G(a,function(a,e,h){b.call(d,a,e,h)&&(f[f.length]=a)});return f};t.reject=function(a,b,d){return t.filter(a,function(a,f,e){return!b.call(d,a,f,e)},d)};t.every=t.all=function(a,
b,d){b||(b=t.identity);var f=true;if(a==null)return f;if(v&&a.every===v)return a.every(b,d);G(a,function(a,h,g){if(!(f=f&&b.call(d,a,h,g)))return e});return!!f};var y=t.some=t.any=function(a,b,d){b||(b=t.identity);var f=false;if(a==null)return f;if(w&&a.some===w)return a.some(b,d);G(a,function(a,h,g){if(f||(f=b.call(d,a,h,g)))return e});return!!f};t.contains=t.include=function(a,b){return a==null?false:z&&a.indexOf===z?a.indexOf(b)!=-1:y(a,function(a){return a===b})};t.invoke=function(a,b){var d=
f.call(arguments,2),e=t.isFunction(b);return t.map(a,function(a){return(e?b:a[b]).apply(a,d)})};t.pluck=function(a,b){return t.map(a,function(a){return a[b]})};t.where=function(a,b,d){return t.isEmpty(b)?d?null:[]:t[d?"find":"filter"](a,function(a){for(var d in b)if(b[d]!==a[d])return false;return true})};t.findWhere=function(a,b){return t.where(a,b,true)};t.max=function(a,b,d){if(!b&&t.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&t.isEmpty(a))return-Infinity;var f=
{computed:-Infinity,value:-Infinity};G(a,function(a,e,h){e=b?b.call(d,a,e,h):a;e>=f.computed&&(f={value:a,computed:e})});return f.value};t.min=function(a,b,d){if(!b&&t.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&t.isEmpty(a))return Infinity;var f={computed:Infinity,value:Infinity};G(a,function(a,e,h){e=b?b.call(d,a,e,h):a;e<f.computed&&(f={value:a,computed:e})});return f.value};t.shuffle=function(a){var b,d=0,f=[];G(a,function(a){b=t.random(d++);f[d-1]=f[b];f[b]=
a});return f};var A=function(a){return t.isFunction(a)?a:function(b){return b[a]}};t.sortBy=function(a,b,d){var f=A(b);return t.pluck(t.map(a,function(a,b,e){return{value:a,index:b,criteria:f.call(d,a,b,e)}}).sort(function(a,b){var d=a.criteria,f=b.criteria;if(d!==f){if(d>f||d===void 0)return 1;if(d<f||f===void 0)return-1}return a.index<b.index?-1:1}),"value")};var C=function(a,b,d,f){var e={},h=A(b||t.identity);G(a,function(b,g){var k=h.call(d,b,g,a);f(e,k,b)});return e};t.groupBy=function(a,b,d){return C(a,
b,d,function(a,b,d){(t.has(a,b)?a[b]:a[b]=[]).push(d)})};t.countBy=function(a,b,d){return C(a,b,d,function(a,b){t.has(a,b)||(a[b]=0);a[b]++})};t.sortedIndex=function(a,b,d,f){for(var d=d==null?t.identity:A(d),b=d.call(f,b),e=0,h=a.length;e<h;){var g=e+h>>>1;d.call(f,a[g])<b?e=g+1:h=g}return e};t.toArray=function(a){return!a?[]:t.isArray(a)?f.call(a):a.length===+a.length?t.map(a,t.identity):t.values(a)};t.size=function(a){return a==null?0:a.length===+a.length?a.length:t.keys(a).length};t.first=t.head=
t.take=function(a,b,d){return a==null?void 0:b!=null&&!d?f.call(a,0,b):a[0]};t.initial=function(a,b,d){return f.call(a,0,a.length-(b==null||d?1:b))};t.last=function(a,b,d){return a==null?void 0:b!=null&&!d?f.call(a,Math.max(a.length-b,0)):a[a.length-1]};t.rest=t.tail=t.drop=function(a,b,d){return f.call(a,b==null||d?1:b)};t.compact=function(a){return t.filter(a,t.identity)};var K=function(a,d,f){G(a,function(a){t.isArray(a)?d?b.apply(f,a):K(a,d,f):f.push(a)});return f};t.flatten=function(a,b){return K(a,
b,[])};t.without=function(a){return t.difference(a,f.call(arguments,1))};t.uniq=t.unique=function(a,b,d,f){if(t.isFunction(b)){f=d;d=b;b=false}var d=d?t.map(a,d,f):a,e=[],h=[];G(d,function(d,f){if(b?!f||h[h.length-1]!==d:!t.contains(h,d)){h.push(d);e.push(a[f])}});return e};t.union=function(){return t.uniq(h.apply(d,arguments))};t.intersection=function(a){var b=f.call(arguments,1);return t.filter(t.uniq(a),function(a){return t.every(b,function(b){return t.indexOf(b,a)>=0})})};t.difference=function(a){var b=
h.apply(d,f.call(arguments,1));return t.filter(a,function(a){return!t.contains(b,a)})};t.zip=function(){for(var a=f.call(arguments),b=t.max(t.pluck(a,"length")),d=Array(b),e=0;e<b;e++)d[e]=t.pluck(a,""+e);return d};t.object=function(a,b){if(a==null)return{};for(var d={},f=0,e=a.length;f<e;f++)b?d[a[f]]=b[f]:d[a[f][0]]=a[f][1];return d};t.indexOf=function(a,b,d){if(a==null)return-1;var f=0,e=a.length;if(d)if(typeof d=="number")f=d<0?Math.max(0,e+d):d;else{f=t.sortedIndex(a,b);return a[f]===b?f:-1}if(z&&
a.indexOf===z)return a.indexOf(b,d);for(;f<e;f++)if(a[f]===b)return f;return-1};t.lastIndexOf=function(a,b,d){if(a==null)return-1;var f=d!=null;if(E&&a.lastIndexOf===E)return f?a.lastIndexOf(b,d):a.lastIndexOf(b);for(d=f?d:a.length;d--;)if(a[d]===b)return d;return-1};t.range=function(a,b,d){if(arguments.length<=1){b=a||0;a=0}for(var d=arguments[2]||1,f=Math.max(Math.ceil((b-a)/d),0),e=0,h=Array(f);e<f;){h[e++]=a;a=a+d}return h};t.bind=function(a,b){if(a.bind===F&&F)return F.apply(a,f.call(arguments,
1));var d=f.call(arguments,2);return function(){return a.apply(b,d.concat(f.call(arguments)))}};t.partial=function(a){var b=f.call(arguments,1);return function(){return a.apply(this,b.concat(f.call(arguments)))}};t.bindAll=function(a){var b=f.call(arguments,1);b.length===0&&(b=t.functions(a));G(b,function(b){a[b]=t.bind(a[b],a)});return a};t.memoize=function(a,b){var d={};b||(b=t.identity);return function(){var f=b.apply(this,arguments);return t.has(d,f)?d[f]:d[f]=a.apply(this,arguments)}};t.delay=
function(a,b){var d=f.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},b)};t.defer=function(a){return t.delay.apply(t,[a,1].concat(f.call(arguments,1)))};t.throttle=function(a,b){var d,f,e,h,g=0,k=function(){g=new Date;e=null;h=a.apply(d,f)};return function(){var j=new Date,n=b-(j-g);d=this;f=arguments;if(n<=0){clearTimeout(e);e=null;g=j;h=a.apply(d,f)}else e||(e=setTimeout(k,n));return h}};t.debounce=function(a,b,d){var f,e;return function(){var h=this,g=arguments,k=d&&!f;clearTimeout(f);
f=setTimeout(function(){f=null;d||(e=a.apply(h,g))},b);k&&(e=a.apply(h,g));return e}};t.once=function(a){var b=false,d;return function(){if(b)return d;b=true;d=a.apply(this,arguments);a=null;return d}};t.wrap=function(a,d){return function(){var f=[a];b.apply(f,arguments);return d.apply(this,f)}};t.compose=function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;d>=0;d--)b=[a[d].apply(this,b)];return b[0]}};t.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,
arguments)}};t.keys=B||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],d;for(d in a)t.has(a,d)&&(b[b.length]=d);return b};t.values=function(a){var b=[],d;for(d in a)t.has(a,d)&&b.push(a[d]);return b};t.pairs=function(a){var b=[],d;for(d in a)t.has(a,d)&&b.push([d,a[d]]);return b};t.invert=function(a){var b={},d;for(d in a)t.has(a,d)&&(b[a[d]]=d);return b};t.functions=t.methods=function(a){var b=[],d;for(d in a)t.isFunction(a[d])&&b.push(d);return b.sort()};t.extend=function(a){G(f.call(arguments,
1),function(b){if(b)for(var d in b)a[d]=b[d]});return a};t.pick=function(a){var b={},e=h.apply(d,f.call(arguments,1));G(e,function(d){d in a&&(b[d]=a[d])});return b};t.omit=function(a){var b={},e=h.apply(d,f.call(arguments,1)),g;for(g in a)t.contains(e,g)||(b[g]=a[g]);return b};t.defaults=function(a){G(f.call(arguments,1),function(b){if(b)for(var d in b)a[d]==null&&(a[d]=b[d])});return a};t.clone=function(a){return!t.isObject(a)?a:t.isArray(a)?a.slice():t.extend({},a)};t.tap=function(a,b){b(a);return a};
var m=function(a,b,d,f){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a instanceof t)a=a._wrapped;if(b instanceof t)b=b._wrapped;var e=o.call(a);if(e!=o.call(b))return false;switch(e){case "[object String]":return a==String(b);case "[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==+b;case "[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!=
"object"||typeof b!="object")return false;for(var h=d.length;h--;)if(d[h]==a)return f[h]==b;d.push(a);f.push(b);var h=0,g=true;if(e=="[object Array]"){h=a.length;if(g=h==b.length)for(;h--;)if(!(g=m(a[h],b[h],d,f)))break}else{var e=a.constructor,k=b.constructor;if(e!==k&&(!t.isFunction(e)||!(e instanceof e&&t.isFunction(k)&&k instanceof k)))return false;for(var j in a)if(t.has(a,j)){h++;if(!(g=t.has(b,j)&&m(a[j],b[j],d,f)))break}if(g){for(j in b)if(t.has(b,j)&&!h--)break;g=!h}}d.pop();f.pop();return g};
t.isEqual=function(a,b){return m(a,b,[],[])};t.isEmpty=function(a){if(a==null)return true;if(t.isArray(a)||t.isString(a))return a.length===0;for(var b in a)if(t.has(a,b))return false;return true};t.isElement=function(a){return!!(a&&a.nodeType===1)};t.isArray=g||function(a){return o.call(a)=="[object Array]"};t.isObject=function(a){return a===Object(a)};G(["Arguments","Function","String","Number","Date","RegExp"],function(a){t["is"+a]=function(b){return o.call(b)=="[object "+a+"]"}});if(!t.isArguments(arguments))t.isArguments=
function(a){return!(!a||!t.has(a,"callee"))};if(typeof/./!=="function")t.isFunction=function(a){return typeof a==="function"};t.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};t.isNaN=function(a){return t.isNumber(a)&&a!=+a};t.isBoolean=function(a){return a===true||a===false||o.call(a)=="[object Boolean]"};t.isNull=function(a){return a===null};t.isUndefined=function(a){return a===void 0};t.has=function(a,b){return u.call(a,b)};t.noConflict=function(){a._=j;return this};t.identity=
function(a){return a};t.times=function(a,b,d){for(var f=Array(a),e=0;e<a;e++)f[e]=b.call(d,e);return f};t.random=function(a,b){if(b==null){b=a;a=0}return a+Math.floor(Math.random()*(b-a+1))};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};P.unescape=t.invert(P.escape);var J={escape:RegExp("["+t.keys(P.escape).join("")+"]","g"),unescape:RegExp("("+t.keys(P.unescape).join("|")+")","g")};t.each(["escape","unescape"],function(a){t[a]=function(b){return b==null?
"":(""+b).replace(J[a],function(b){return P[a][b]})}});t.result=function(a,b){if(a==null)return null;var d=a[b];return t.isFunction(d)?d.call(a):d};t.mixin=function(a){G(t.functions(a),function(d){var f=t[d]=a[d];t.prototype[d]=function(){var a=[this._wrapped];b.apply(a,arguments);a=f.apply(t,a);return this._chain?t(a).chain():a}})};var T=0;t.uniqueId=function(a){var b=++T+"";return a?a+b:b};t.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Q=
/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},M=/\\|'|\r|\n|\t|\u2028|\u2029/g;t.template=function(a,b,d){var f,d=t.defaults({},d,t.templateSettings),e=RegExp([(d.escape||Q).source,(d.interpolate||Q).source,(d.evaluate||Q).source].join("|")+"|$","g"),h=0,g="__p+='";a.replace(e,function(b,d,f,e,k){g=g+a.slice(h,k).replace(M,function(a){return"\\"+I[a]});d&&(g=g+("'+\n((__t=("+d+"))==null?'':_.escape(__t))+\n'"));f&&(g=g+("'+\n((__t=("+f+"))==null?'':__t)+\n'"));
e&&(g=g+("';\n"+e+"\n__p+='"));h=k+b.length;return b});g=g+"';\n";d.variable||(g="with(obj||{}){\n"+g+"}\n");g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{f=new Function(d.variable||"obj","_",g)}catch(k){k.source=g;throw k;}if(b)return f(b,t);b=function(a){return f.call(this,a,t)};b.source="function("+(d.variable||"obj")+"){\n"+g+"}";return b};t.chain=function(a){return t(a).chain()};t.mixin(t);G(["pop","push","reverse","shift",
"sort","splice","unshift"],function(a){var b=d[a];t.prototype[a]=function(){var d=this._wrapped;b.apply(d,arguments);(a=="shift"||a=="splice")&&d.length===0&&delete d[0];return this._chain?t(d).chain():d}});G(["concat","join","slice"],function(a){var b=d[a];t.prototype[a]=function(){var a=b.apply(this._wrapped,arguments);return this._chain?t(a).chain():a}});t.extend(t.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);
!function(a,j){var e=j.prototype.trim,d=j.prototype.trimRight,g=j.prototype.trimLeft,b=function(a,b){if(b<1)return"";for(var d="";b>0;){b&1&&(d=d+a);b=b>>1;a=a+a}return d},f=[].slice,h=function(a){return a==null?"\\s":a.source?a.source:"["+x.escapeRegExp(a)+"]"},o={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},u={},q;for(q in o)u[o[q]]=q;var l,k=function(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()},n=function(){n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0]));
return n.format.call(null,n.cache[arguments[0]],arguments)};n.format=function(a,d){var f=1,e=a.length,h="",g=[],n,o,u,q;for(n=0;n<e;n++){h=k(a[n]);if(h==="string")g.push(a[n]);else if(h==="array"){u=a[n];if(u[2]){h=d[f];for(o=0;o<u[2].length;o++){if(!h.hasOwnProperty(u[2][o]))throw Error(l('[_.sprintf] property "%s" does not exist',u[2][o]));h=h[u[2][o]]}}else h=u[1]?d[u[1]]:d[f++];if(/[^s]/.test(u[8])&&k(h)!="number")throw Error(l("[_.sprintf] expecting number but found %s",k(h)));switch(u[8]){case "b":h=
h.toString(2);break;case "c":h=j.fromCharCode(h);break;case "d":h=parseInt(h,10);break;case "e":h=u[7]?h.toExponential(u[7]):h.toExponential();break;case "f":h=u[7]?parseFloat(h).toFixed(u[7]):parseFloat(h);break;case "o":h=h.toString(8);break;case "s":h=(h=j(h))&&u[7]?h.substring(0,u[7]):h;break;case "u":h=Math.abs(h);break;case "x":h=h.toString(16);break;case "X":h=h.toString(16).toUpperCase()}h=/[def]/.test(u[8])&&u[3]&&h>=0?"+"+h:h;o=u[4]?u[4]=="0"?"0":u[4].charAt(1):" ";q=u[6]-j(h).length;o=
u[6]?b(o,q):"";g.push(u[5]?h+o:o+h)}}return g.join("")};n.cache={};n.parse=function(a){for(var b=[],d=[],f=0;a;){if((b=/^[^\x25]+/.exec(a))!==null)d.push(b[0]);else if((b=/^\x25{2}/.exec(a))!==null)d.push("%");else if((b=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(a))!==null){if(b[2]){var f=f|1,e=[],h=b[2],g=[];if((g=/^([a-z_][a-z_\d]*)/i.exec(h))!==null)for(e.push(g[1]);(h=h.substring(g[0].length))!=="";)if((g=/^\.([a-z_][a-z_\d]*)/i.exec(h))!==null)e.push(g[1]);
else if((g=/^\[(\d+)\]/.exec(h))!==null)e.push(g[1]);else throw Error("[_.sprintf] huh?");else throw Error("[_.sprintf] huh?");b[2]=e}else f=f|2;if(f===3)throw Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");d.push(b)}else throw Error("[_.sprintf] huh?");a=a.substring(b[0].length)}return d};l=n;var x={VERSION:"2.3.0",isBlank:function(a){a==null&&(a="");return/^\s*$/.test(a)},stripTags:function(a){return a==null?"":j(a).replace(/<\/?[^>]+>/g,"")},capitalize:function(a){a=
a==null?"":j(a);return a.charAt(0).toUpperCase()+a.slice(1)},chop:function(a,b){if(a==null)return[];a=j(a);b=~~b;return b>0?a.match(RegExp(".{1,"+b+"}","g")):[a]},clean:function(a){return x.strip(a).replace(/\s+/g," ")},count:function(a,b){return a==null||b==null?0:j(a).split(b).length-1},chars:function(a){return a==null?[]:j(a).split("")},swapCase:function(a){return a==null?"":j(a).replace(/\S/g,function(a){return a===a.toUpperCase()?a.toLowerCase():a.toUpperCase()})},escapeHTML:function(a){return a==
null?"":j(a).replace(/[&<>"']/g,function(a){return"&"+u[a]+";"})},unescapeHTML:function(a){return a==null?"":j(a).replace(/\&([^;]+);/g,function(a,b){var d;return b in o?o[b]:(d=b.match(/^#x([\da-fA-F]+)$/))?j.fromCharCode(parseInt(d[1],16)):(d=b.match(/^#(\d+)$/))?j.fromCharCode(~~d[1]):a})},escapeRegExp:function(a){return a==null?"":j(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(a,b,d,f){a=x.chars(a);a.splice(~~b,~~d,f);return a.join("")},insert:function(a,b,d){return x.splice(a,
b,0,d)},include:function(a,b){return b===""?true:a==null?false:j(a).indexOf(b)!==-1},join:function(){var a=f.call(arguments),b=a.shift();b==null&&(b="");return a.join(b)},lines:function(a){return a==null?[]:j(a).split("\n")},reverse:function(a){return x.chars(a).reverse().join("")},startsWith:function(a,b){if(b==="")return true;if(a==null||b==null)return false;a=j(a);b=j(b);return a.length>=b.length&&a.slice(0,b.length)===b},endsWith:function(a,b){if(b==="")return true;if(a==null||b==null)return false;
a=j(a);b=j(b);return a.length>=b.length&&a.slice(a.length-b.length)===b},succ:function(a){if(a==null)return"";a=j(a);return a.slice(0,-1)+j.fromCharCode(a.charCodeAt(a.length-1)+1)},titleize:function(a){return a==null?"":j(a).replace(/(?:^|\s)\S/g,function(a){return a.toUpperCase()})},camelize:function(a){return x.trim(a).replace(/[-_\s]+(.)?/g,function(a,b){return b.toUpperCase()})},underscored:function(a){return x.trim(a).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},
dasherize:function(a){return x.trim(a).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(a){return x.titleize(j(a).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(a){return x.capitalize(x.underscored(a).replace(/_id$/,"").replace(/_/g," "))},trim:function(a,b){if(a==null)return"";if(!b&&e)return e.call(a);b=h(b);return j(a).replace(RegExp("^"+b+"+|"+b+"+$","g"),"")},ltrim:function(a,b){if(a==null)return"";if(!b&&g)return g.call(a);b=h(b);return j(a).replace(RegExp("^"+
b+"+"),"")},rtrim:function(a,b){if(a==null)return"";if(!b&&d)return d.call(a);b=h(b);return j(a).replace(RegExp(b+"+$"),"")},truncate:function(a,b,d){if(a==null)return"";a=j(a);b=~~b;return a.length>b?a.slice(0,b)+(d||"..."):a},prune:function(a,b,d){if(a==null)return"";a=j(a);b=~~b;d=d!=null?j(d):"...";if(a.length<=b)return a;b=a.slice(0,b+1).replace(/.(?=\W*\w*$)/g,function(a){return a.toUpperCase()!==a.toLowerCase()?"A":" "});b=b.slice(b.length-2).match(/\w\w/)?b.replace(/\s*\S+$/,""):x.rtrim(b.slice(0,
b.length-1));return(b+d).length>a.length?a:a.slice(0,b.length)+d},words:function(a,b){return x.isBlank(a)?[]:x.trim(a,b).split(b||/\s+/)},pad:function(a,d,f,e){var a=a==null?"":j(a),d=~~d,h=0;f?f.length>1&&(f=f.charAt(0)):f=" ";switch(e){case "right":h=d-a.length;return a+b(f,h);case "both":h=d-a.length;return b(f,Math.ceil(h/2))+a+b(f,Math.floor(h/2));default:h=d-a.length;return b(f,h)+a}},lpad:function(a,b,d){return x.pad(a,b,d)},rpad:function(a,b,d){return x.pad(a,b,d,"right")},lrpad:function(a,
b,d){return x.pad(a,b,d,"both")},sprintf:l,vsprintf:function(a,b){b.unshift(a);return l.apply(null,b)},toNumber:function(a,b){if(a==null||a=="")return 0;var a=j(a),d;d=(a*1||0).toFixed(~~b)*1||0;return d===0&&!a.match(/^0+$/)?Number.NaN:d},numberFormat:function(a,b,d,f){if(isNaN(a)||a==null)return"";a=a.toFixed(~~b);f=f||",";a=a.split(".");d=a[1]?(d||".")+a[1]:"";return a[0].replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+f)+d},strRight:function(a,b){if(a==null)return"";var a=j(a),b=b!=null?j(b):b,d=!b?-1:a.indexOf(b);
return~d?a.slice(d+b.length,a.length):a},strRightBack:function(a,b){if(a==null)return"";var a=j(a),b=b!=null?j(b):b,d=!b?-1:a.lastIndexOf(b);return~d?a.slice(d+b.length,a.length):a},strLeft:function(a,b){if(a==null)return"";var a=j(a),b=b!=null?j(b):b,d=!b?-1:a.indexOf(b);return~d?a.slice(0,d):a},strLeftBack:function(a,b){if(a==null)return"";var a=a+"",d=a.lastIndexOf(b!=null?""+b:b);return~d?a.slice(0,d):a},toSentence:function(a,b,d,f){var b=b||", ",d=d||" and ",e=a.slice(),h=e.pop();a.length>2&&
f&&(d=x.rtrim(b)+d);return e.length?e.join(b)+d+h:h},toSentenceSerial:function(){var a=f.call(arguments);a[3]=true;return x.toSentence.apply(x,a)},slugify:function(a){if(a==null)return"";var b=RegExp(h("\u0105\u00e0\u00e1\u00e4\u00e2\u00e3\u00e5\u00e6\u0107\u0119\u00e8\u00e9\u00eb\u00ea\u00ec\u00ed\u00ef\u00ee\u0142\u0144\u00f2\u00f3\u00f6\u00f4\u00f5\u00f8\u00f9\u00fa\u00fc\u00fb\u00f1\u00e7\u017c\u017a"),"g"),a=j(a).toLowerCase().replace(b,function(a){a="\u0105\u00e0\u00e1\u00e4\u00e2\u00e3\u00e5\u00e6\u0107\u0119\u00e8\u00e9\u00eb\u00ea\u00ec\u00ed\u00ef\u00ee\u0142\u0144\u00f2\u00f3\u00f6\u00f4\u00f5\u00f8\u00f9\u00fa\u00fc\u00fb\u00f1\u00e7\u017c\u017a".indexOf(a);
return"aaaaaaaaceeeeeiiiilnoooooouuuunczz".charAt(a)||"-"});return x.dasherize(a.replace(/[^\w\s-]/g,""))},surround:function(a,b){return[b,a,b].join("")},quote:function(a){return x.surround(a,'"')},exports:function(){var a={},b;for(b in this)this.hasOwnProperty(b)&&!b.match(/^(?:include|contains|reverse)$/)&&(a[b]=this[b]);return a},repeat:function(a,d,f){if(a==null)return"";d=~~d;if(f==null)return b(j(a),d);for(var e=[];d>0;e[--d]=a);return e.join(f)},levenshtein:function(a,b){if(a==null&&b==null)return 0;
if(a==null)return j(b).length;if(b==null)return j(a).length;for(var a=j(a),b=j(b),d=[],f,e,h=0;h<=b.length;h++)for(var g=0;g<=a.length;g++){e=h&&g?a.charAt(g-1)===b.charAt(h-1)?f:Math.min(d[g],d[g-1],f)+1:h+g;f=d[g];d[g]=e}return d.pop()}};x.strip=x.trim;x.lstrip=x.ltrim;x.rstrip=x.rtrim;x.center=x.lrpad;x.rjust=x.lpad;x.ljust=x.rpad;x.contains=x.include;x.q=x.quote;if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)module.exports=x;exports._s=x}else if(typeof define===
"function"&&define.amd)define("underscore.string",[],function(){return x});else{a._=a._||{};a._.string=a._.str=x}_.mixin(_.str.exports())}(this,String);
(function(a,j){var e={},d=a.TraceKit,g=[].slice;e.noConflict=function(){a.TraceKit=d;return e};e.wrap=function(a){return function(){try{return a.apply(this,arguments)}catch(b){e.report(b);throw b;}}};var b=function(a,b){var d=null;if(!b||e.collectWindowErrors){for(var f in h)if(Object.prototype.hasOwnProperty.call(h,f))try{h[f].apply(null,[a].concat(g.call(arguments,2)))}catch(k){d=k}if(d)throw d;}},f=function(d){var f=g.call(arguments,1);if(u){if(o===d)return;var h=u;o=u=null;b.apply(null,[h,null].concat(f))}var k=
e.computeStackTrace(d);u=k;o=d;a.setTimeout(function(){if(o===d){o=u=null;b.apply(null,[k,null].concat(f))}},k.incomplete?2E3:0);throw d;},h=[],o=null,u=null,q=a.onerror;a.onerror=function(a,d,f){var h=null;if(u){e.computeStackTrace.augmentStackTraceWithInitialElement(u,d,f,a);h=u;o=u=null}else{h={url:d,line:f};h.func=e.computeStackTrace.guessFunctionName(h.url,h.line);h.context=e.computeStackTrace.gatherContext(h.url,h.line);h={mode:"onerror",message:a,url:document.location.href,stack:[h],useragent:navigator.userAgent}}b(h,
"from window.onerror");return q?q.apply(this,arguments):false};f.subscribe=function(a){h.push(a)};f.unsubscribe=function(a){for(var b=h.length-1;b>=0;--b)h[b]===a&&h.splice(b,1)};e.report=f;var l=function(b){if(!Object.prototype.hasOwnProperty.call(y,b)){var d="";if(b.indexOf(document.domain)!==-1)if(e.remoteFetching)try{var f;try{f=new a.XMLHttpRequest}catch(h){f=new a.ActiveXObject("Microsoft.XMLHTTP")}f.open("GET",b,false);f.send("");d=f.responseText}catch(g){d=""}else d="";y[b]=d?d.split("\n"):
[]}return y[b]},k=function(a,b){var d=/function ([^(]*)\(([^)]*)\)/,f=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,e="",h=l(a),g;if(!h.length)return"?";for(var k=0;k<10;++k){e=h[b-k]+e;if(typeof e!=="undefined"&&((g=f.exec(e))||(g=d.exec(e))))return g[1]}return"?"},n=function(a,b){var d=l(a);if(!d.length)return null;for(var f=[],h=Math.floor(e.linesOfContext/2),g=h+e.linesOfContext%2,h=Math.max(0,b-h-1),g=Math.min(d.length,b+g-1);h<g;++h)typeof d[h]!=="undefined"&&f.push(d[h]);
return f.length>0?f:null},x=function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")},v=function(a){return x(a).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")},w=function(a,b){for(var d,f,e=0,h=b.length;e<h;++e)if((d=l(b[e])).length){d=d.join("\n");if(f=a.exec(d))return{url:b[e],line:d.substring(0,f.index).split("\n").length,column:f.index-d.lastIndexOf("\n",f.index)-1}}return null},z=function(a,b,d){var b=
l(b),a=RegExp("\\b"+x(a)+"\\b"),f,d=d-1;return b&&b.length>d&&(f=a.exec(b[d]))?f.index:null},E=function(b){var d=[a.location.href],f=document.getElementsByTagName("script"),b=""+b,e;for(e=0;e<f.length;++e){var h=f[e];h.src&&d.push(h.src)}if(f=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(b)){e=f[1]?"\\s+"+f[1]:"";h=f[2].split(",").join("\\s*,\\s*");f=x(f[3]).replace(/;$/,";?");e=RegExp("function"+e+"\\s*\\(\\s*"+h+"\\s*\\)\\s*{\\s*"+f+"\\s*}")}else e=RegExp(x(b).replace(/\s+/g,
"\\s+"));if(e=w(e,d))return e;if(f=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(b)){b=f[1];f=v(f[2]);e=RegExp("on"+b+"=[\\'\"]\\s*"+f+"\\s*[\\'\"]","i");if(e=w(e,d[0]))return e;e=RegExp(f);if(e=w(e,d))return e}return null},B=function(a,b,d,f){b={url:b,line:d};if(b.url&&b.line){a.incomplete=false;if(!b.func)b.func=k(b.url,b.line);if(!b.context)b.context=n(b.url,b.line);if(f=/ '([^']+)' /.exec(f))b.column=z(f[1],b.url,b.line);if(a.stack.length>0&&a.stack[0].url===b.url){if(a.stack[0].line===
b.line)return false;if(!a.stack[0].line&&a.stack[0].func===b.func){a.stack[0].line=b.line;a.stack[0].context=b.context;return false}}a.stack.unshift(b);return a.partial=true}a.incomplete=true;return false},F=function(a,b){for(var d=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,f=[],h={},g=false,j,n,l=F.caller;l&&!g;l=l.caller)if(!(l===t||l===e.report)){n={url:null,func:"?",line:null,column:null};if(l.name)n.func=l.name;else if(j=d.exec(l.toString()))n.func=j[1];if(j=E(l)){n.url=
j.url;n.line=j.line;if(n.func==="?")n.func=k(n.url,n.line);var o=/ '([^']+)' /.exec(a.message||a.description);if(o)n.column=z(o[1],j.url,j.line)}h[""+l]?g=true:h[""+l]=true;f.push(n)}b&&f.splice(0,b);d={mode:"callers",name:a.name,message:a.message,url:document.location.href,stack:f,useragent:navigator.userAgent};B(d,a.sourceURL||a.fileName,a.line||a.lineNumber,a.message||a.description);return d},t=function(b,d){var f=null,d=d==null?0:+d;try{for(var e=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,
h=b.stacktrace.split("\n"),g=[],j,o=0,u=h.length;o<u;o=o+2)if(j=e.exec(h[o])){var q={line:+j[1],column:+j[2],func:j[3]||j[4],args:j[5]?j[5].split(","):[],url:j[6]};if(!q.func&&q.line)q.func=k(q.url,q.line);if(q.line)try{q.context=n(q.url,q.line)}catch(x){}if(!q.context)q.context=[h[o+1]];g.push(q)}f=g.length?{mode:"stacktrace",name:b.name,message:b.message,url:document.location.href,stack:g,useragent:navigator.userAgent}:null;if(f)return f}catch(m){if(G)throw m;}try{if(b.stack){var e=/^\s*at (?:((?:\[object object\])?\S+) )?\(?((?:file|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,
h=/^\s*(\S*)(?:\((.*?)\))?@((?:file|http|https).*?):(\d+)(?::(\d+))?\s*$/i,t=b.stack.split("\n"),g=[],y,A,C=/^(.*) is undefined$/.exec(b.message);j=0;for(var B=t.length;j<B;++j){if(y=h.exec(t[j]))A={url:y[3],func:y[1]||"?",args:y[2]?y[2].split(","):"",line:+y[4],column:y[5]?+y[5]:null};else if(y=e.exec(t[j]))A={url:y[2],func:y[1]||"?",line:+y[3],column:y[4]?+y[4]:null};else continue;if(!A.func&&A.line)A.func=k(A.url,A.line);if(A.line)A.context=n(A.url,A.line);g.push(A)}if(g[0]&&g[0].line&&!g[0].column&&
C)g[0].column=z(C[1],g[0].url,g[0].line);f=g.length?{mode:"stack",name:b.name,message:b.message,url:document.location.href,stack:g,useragent:navigator.userAgent}:null}else f=null;if(f)return f}catch(E){if(G)throw E;}try{var K=b.message.split("\n");if(K.length<4)f=null;else{t=/^\s*Line (\d+) of linked script ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i;y=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i;A=/^\s*Line (\d+) of function script\s*$/i;
var C=[],X=document.getElementsByTagName("script"),B=[],da,ba,la,ea;for(ba in X)Object.prototype.hasOwnProperty.call(X,ba)&&!X[ba].src&&B.push(X[ba]);ba=2;for(la=K.length;ba<la;ba=ba+2){X=null;if(da=t.exec(K[ba]))X={url:da[2],func:da[3],line:+da[1]};else if(da=y.exec(K[ba])){var X={url:da[3],func:da[4]},na=+da[1],Ga=B[da[2]-1];if(Ga)if(ea=l(X.url)){ea=ea.join("\n");var za=ea.indexOf(Ga.innerText);if(za>=0)X.line=na+ea.substring(0,za).split("\n").length}}else if(da=A.exec(K[ba])){var Aa=a.location.href.replace(/#.*$/,
""),ma=da[1],sa=RegExp(v(K[ba+1]));ea=w(sa,[Aa]);X={url:Aa,line:ea?ea.line:ma,func:""}}if(X){if(!X.func)X.func=k(X.url,X.line);var ta=n(X.url,X.line),va=ta?ta[Math.floor(ta.length/2)]:null;X.context=ta&&va.replace(/^\s*/,"")===K[ba+1].replace(/^\s*/,"")?ta:[K[ba+1]];C.push(X)}}f=C.length?{mode:"multiline",name:b.name,message:K[0],url:document.location.href,stack:C,useragent:navigator.userAgent}:null}if(f)return f}catch(Fa){if(G)throw Fa;}try{if(f=F(b,d+1))return f}catch(qa){if(G)throw qa;}return{mode:"failed"}},
G=false,y={};t.augmentStackTraceWithInitialElement=B;t.guessFunctionName=k;t.gatherContext=n;t.ofCaller=function(a){try{throw Error();}catch(b){return t(b,(a==null?0:+a)+2)}};e.computeStackTrace=t;f=function(b){var d=a[b];a[b]=function(){var a=g.call(arguments),b=a[0];typeof b==="function"&&(a[0]=e.wrap(b));return d.apply?d.apply(this,a):d(a[0],a[1])}};f("setTimeout");f("setInterval");var A=a.jQuery;if(A){var C=A.event.add;A.event.add=function(a,b,d,f,h){var g;if(d.handler){g=d.handler;d.handler=
e.wrap(d.handler)}else{g=d;d=e.wrap(d)}d.guid=g.guid?g.guid:g.guid=A.guid++;return C.call(this,a,b,d,f,h)};var K=A.fn.ready;A.fn.ready=function(a){return K.call(this,e.wrap(a))};var m=A.ajax;A.ajax=function(a,b){var d=["complete","error","success"],f;if(typeof a==="object"){b=a;a=j}for(b=b||{};f=d.pop();)A.isFunction(b[f])&&(b[f]=e.wrap(b[f]));try{return m.call(this,a,b)}catch(h){e.report(h);throw h;}}}if(!e.remoteFetching)e.remoteFetching=true;if(!e.collectWindowErrors)e.collectWindowErrors=true;
if(!e.linesOfContext||e.linesOfContext<1)e.linesOfContext=11;a.TraceKit=e})(window);
(function(a,j){function e(a){return typeof a==="undefined"}function d(a){return typeof a==="function"}function g(a,b){var d,f;if(e(a.length))for(d in a)a.hasOwnProperty(d)&&b.call(null,d,a[d]);else{d=0;for(f=a.length;d<f;d++)b.call(null,d,a[d])}}function b(a,b){var d=[],g=0,k,j;if(a.stack&&(k=a.stack.length))for(;g<k;g++){var n=a.stack[g];if(n.url){j={filename:n.url,lineno:n.line,colno:n.column,"function":n.func||"?"};if(n.context&&v.fetchContext){for(var l=n.context,o=~~(l.length/2),u=l.length,q=
false;u--;)if(l[u].length>300){q=true;break}n=q?e(n.column)?void 0:[[],l[o].substr(n.column,50),[]]:[l.slice(0,o),l[o],l.slice(o+1)]}else n=void 0;if(n){l=3;for(o=["pre_context","context_line","post_context"];l--;)j[o[l]]=n[l]}j.in_app=!/(Raven|TraceKit)\./.test(j["function"])}else j=void 0;j&&d.push(j)}a:{g=a.name;k=a.message;j=a.url;for(var n=a.lineno,x,l=v.ignoreErrors.length;l--;)if(k===v.ignoreErrors[l])break a;if(d&&d.length){x={frames:d};j=j||d[0].filename}else j&&(x={frames:[{filename:j,lineno:n}]});
for(l=v.ignoreUrls.length;l--;)if(v.ignoreUrls[l].test(j))break a;h(f({"sentry.interfaces.Exception":{type:g,value:k},"sentry.interfaces.Stacktrace":x,culprit:j,message:n?k+" at "+n:k},b))}}function f(a,b){if(!b)return a;g(b,function(b,d){a[b]=d});return a}function h(b){if(o()){var e=x,h=v.logger,g=v.site,j={url:a.location.href,headers:{"User-Agent":navigator.userAgent}};if(a.document.referrer)j.headers.Referer=a.document.referrer;b=f({project:e,logger:h,site:g,platform:"javascript","sentry.interfaces.Http":j},
b);k&&(b["sentry.interfaces.User"]=k);d(v.dataCallback)&&(b=v.dataCallback(b));t(b)}}function o(){if(!q)return false;if(!l){a.console&&console.error&&console.error("Error: Raven has not been configured.");return false}return true}var u=a.Raven,q=!e(a.JSON),l,k,n,x,v={logger:"javascript",ignoreErrors:[],ignoreUrls:[]},w=TraceKit.noConflict();w.remoteFetching=false;var z={VERSION:"1.0.7",noConflict:function(){a.Raven=u;return z},config:function(b,d){for(var f=B.exec(b),e={},h=14;h--;)e[E[h]]=f[h]||
"";f=e.path.lastIndexOf("/");h=e.path.substr(1,f);d&&(d.ignoreErrors&&a.console&&console.warn)&&console.warn("DeprecationWarning: `ignoreErrors` is going to be removed soon.");d&&g(d,function(a,b){v[a]=b});v.ignoreErrors.push("Script error.");n=e.user;x=~~e.path.substr(f+1);l="//"+e.host+(e.port?":"+e.port:"")+"/"+h+"api/"+x+"/store/";e.protocol&&(l=e.protocol+":"+l);if(v.fetchContext)w.remoteFetching=true;return z},install:function(){if(o()){w.report.subscribe(b);return z}},context:function(a,b,
f){if(d(a)){f=b||[];b=a;a=j}z.wrap(a,b).apply(this,f)},wrap:function(a,b){if(d(a)){b=a;a=j}return function(){try{b.apply(this,arguments)}catch(d){z.captureException(d,a);throw d;}}},uninstall:function(){w.report.unsubscribe(b);return z},captureException:function(a,b){if(typeof a==="string")return z.captureMessage(a,b);try{w.report(a,b)}catch(d){if(a!==d)throw d;}return z},captureMessage:function(a,b){h(f({message:a},b));return z},setUser:function(a){k=a;return z}},E=["source","protocol","authority",
"userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],B=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,F,t=_.throttle(function(a){var b=new Image,d=l,f;if(!F){f=["sentry_version=2.0","sentry_client=raven-js/"+z.VERSION];n&&f.push("sentry_key="+n);F="?"+f.join("&")}f=F;b.src=d+f+"&sentry_data="+encodeURIComponent(JSON.stringify(a))},
1E4);a.Raven=z;typeof define==="function"&&define.amd&&define(function(){return z})})(window);$.template("support_ticket",'<article id="support-ticket">    <header>        <hgroup>            <h1>New support ticket</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <section>        <div class="form">            <dl>                <dt>from:</dt>                <dd>${name}</dd>                <dt>to:</dt>                <dd>support@ducksboard.com</dd>                <dt class="subject-label">subject:</dt>                <dd class="subject">                    <input name="subject" placeholder="How can we help you?">                </dd>            </dl>            <textarea placeholder="Please, describe your issue here"></textarea>        </div>        <div class="sent">            <h1>Thanks, your ticket has been created. We\'ll contact            you soon!</h1>        </div>    </section>    <button type="submit" class="send btn btn-submit full">send support request</button></article>');
$.template("dashboard_twilio_create",'<article class="service-board-setup twilio {{if from_wizard_dashboard}}modal-wizard{{/if}}">    <header>        {{if from_wizard_dashboard}}            <a class="close" href="#wizard/dashboard/choose_service">BACK TO SERVICES LISTING</a>        {{else}}            {{if has_dashboards}}            <a class="close" href="#">Not right now</a>            {{else}}            <a class="close" href="/accounts/logout">Logout</a>            {{/if}}        {{/if}}    </header>    <section>        <span class="logo serv-logo twilio"></span>        <p class="description">${kind.description}</p>        <form>            {{if has_services}}            <fieldset class="accounts">                <legend>Select the Twilio account you want to use</legend>                <ul class="services">                    <li>                        <a class="btn btn-service twilio new"><i class="icon-plus"></i><span>Link a new one</span></a>                    </li>                </ul>            </fieldset>            {{/if}}            <fieldset class="credentials">                <legend>Connect your Twilio account</legend>                <input type="button" class="connect" value="go to the authentication page" />            </fieldset>            <fieldset class="loading">              <legend>Please wait while the newly linked account is being created...</legend>            </fieldset>            <div class="failure">              <h2>OOOPS :(</h2>              <p>                We weren\'t able to obtain the required information                from the service. Are you sure you granted us access?              </p>              <a>C\'mon, try again</a>            </div>            <fieldset class="setup">                <legend>Which account do you want the dashboard for?</legend>                <input type="button" class="create small" value="ok!" />                <input class="subaccounts-placeholder" />                {{if !from_wizard_dashboard}}                <input type="text" class="field-label" placeholder="Dashboard name" />                {{/if}}            </fieldset>        </form>    </section></article>');
$.template("dashboard_tvmode_reel",'<section class="pane tvmode-reel">\t<h1>TV Mode - Dashboard Carrousel</h1>\t<div class="m-text">\t\t<p>Use the TV mode feature to display your dashboards in a large screen.</p>\t\t<p>Should this dashboard be part of the TV mode carrousel? If not, you can still use TV mode with it and it will simply not transition to the next board.</p>\t</div>\t<div class="switcher">\t\t<a class="{{if in_carousel}}active{{/if}} include">Include in the dashboard carrousel</a>\t\t<a class="{{if !in_carousel}}active{{/if}} exclude">exclude from the dashboard carrousel</a>\t</div></section>');
$.template("widget_settings",'<article id="widget-preferences" {{if !is_custom}} class="service"{{/if}}>    <header>        <section class="title">            <input type="text" value="${title}" class="field-title" maxlength="50">        </section>        <p href="#" class="btn btn-ico-toggler sound{{if sound}} enabled{{/if}}" title="Play sound when new data arrives">            <a class="icon-alarm enable"></a>            <a class="icon-alarm-off disable"></a>        </p>        <a href="#" class="btn btn-ico-action delete{{if is_new}} disabled{{/if}}">            <i class="icon-trash"></i>            <span>Delete<br>widget</span>        </a>        <div class="copy-to">            <a href="#" class="btn btn-ico-action{{if is_new}} disabled{{/if}}">                <i class="icon-copy-to"></i>                <span>Copy to another<br>dashboard</span>            </a>            <ul id="dashboards-to-copy-list" class="contextual">            </ul>        </div>        <a class="close" href="#">close</a>    </header>    <div class="nav-container">        <nav class="sidebar"></nav>    </div>    <section class="placeholder pane"></section>    <button type="submit" class="btn btn btn-submit full save">save preferences for this widget</button></article>');
(function(a,j,e){function d(a,d){this.opts=e.extend({},b,d);this.data=this.opts.data;this.$el=e(a);this.init()}var g=e(a),b={data:[],max_results:5E3,regex:function(a){return RegExp(a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i")}};e.extend(d.prototype,{init:function(){this.focus=this.open=false;this.set_up_html();this.events()},set_up_html:function(){this.$wrap=this.$el.wrap('<div class="ac-wrap" />').parent();this.$list=e('<ul class="ac-dropdown" />');this.$list.appendTo(j.body);this.hide_results()},
get_size:function(a){a||(a=this.$el);return{offset:a.offset(),input_w:a.outerWidth()-1,input_h:a.outerHeight(),borderbottom_w:parseInt(a.css("border-bottom-width"),10)}},set_list_position:function(){var a=this.$el.closest(".tip-input"),a=a.length?this.get_size(a):this.get_size(this.$el);this.$list.css({left:a.offset.left,top:a.offset.top+a.input_h+a.borderbottom_w,width:a.input_w})},events:function(){this.$el.on("focus.ac keyup.ac",e.proxy(function(){this.focus=true;this.search();this.show_results()},
this));this.$el.on("click.ac",e.proxy(function(){this.open||this.show_results()},this));this.$el.on("blur.ac",e.proxy(function(){this.focus=false;this.over_list||this.hide_results()},this));this.$list.on("click.ac","li",e.proxy(this.select_result,this));this.$list.on({"mouseover.ac":e.proxy(function(){this.over_list=true},this),"mouseout.ac":e.proxy(function(){this.over_list=false;this.focus||this.hide_results()},this)});g.on("center.fb",e.proxy(this.set_list_position,this));g.on("resize scroll",
_.debounce(e.proxy(this.set_list_position,this),20));this.$el.closest(".scroller").on("scroll",_.debounce(e.proxy(function(){this.$el.blur()},this),70,true));e(j).bind("keyup.ac",e.proxy(function(a){a.keyCode==27&&this.hide_results()},this))},search:function(){var a=this.$el.val(),b=this.opts.regex(a),d=[];e.each(this.data,e.proxy(function(a,f){b.test(f)&&d.push(f);if(d.length===this.opts.max_results)return false},this));this.add_results(d);return this},add_results:function(a){a||e.isArray(a)&&a.length||
(a=this.data);var b="";e.each(a,function(a,d){b=b+("<li>"+d+"</li>")});this.$list=this.$list.html(b);return this},select_result:function(a){a=e(a.target);this.$el.val(a.text());this.hide_results();return this},hide_results:function(){this.$list.hide();this.$el.add(this.$el.closest(".tip-input")).removeClass("open");this.open=false;return this},show_results:function(){var a=this.$list.children().length;if(!this.open&&a){this.set_list_position();this.$list.show();this.$el.add(this.$el.closest(".tip-input")).addClass("open");
this.open=true}else!a&&this.open&&this.hide_results();return this},clean_input:function(){this.$el.val("");return this},set_data:function(a){this.data=a;this.search();return this},destroy:function(){this.$el.off("focus.ac keyup.ac click.ac blur.ac");this.$list.off("click.ac mouseover.ac mouseout.ac");this.$el.closest(".scroller").off("scroll")}});e.fn.autocomplete=function(a){return this.each(function(){var b=e(this);b.data("autocomplete")||b.data("autocomplete",new d(this,a))})}})(window,document,
jQuery);$.template("directory_service_widgets_item",'<a href="#directory/service/${id}" class="${id}{{if needs_upgrade === true}} disabled{{/if}}">    <h4>${name}</h4></a>');$.template("slot_line_chart_legend",'<li class="label-${layout}"><span class="icon"></span><strong>${subtitle}</strong></li>');$.template("widget_panicboard",'<li class="panicboard-embed">    <h3>EMBED THIS WIDGET ON PANIC STATUS BOARD</h3>    <div class="mod-embed enabled">        <p class="description">Copy this URL into the Do-It-Yourself configuration panel.</p>        \t        <div class="snippet">            <input class="embed-code" type="text" value="${url}" disabled="disabled">            <div class="actions">                <a href="panicboard://?url=${url_encoded}&panel=diy&sourceDisplayName=Ducksboard" class="btn btn-action lightdark no-link">                    <span>Add to<br/>Status Board</span>                </a>            </div>        </div>    </div></li>');
$.template("widget_create_account",'<section class="create-account">    <div class="dialog">        <h1>You need to link an account to the widget so it knows where to take data from</h1>        {{if create_tip}}        <h1>{{html create_tip}}</h1>        {{/if}}        <div class="form"/>        <button type="submit" class="send btn btn-submit full">{{if uses_external_authentication}}go to the authentication page{{else}}link the widget to this account{{/if}}</button>    </div>    <div class="loading">        <h1>Please wait while the newly linked account is being created...</h1>    </div>    <div class="failure">        <h1>You need to link an account to the widget so it knows where to take data from</h1>        <div>            <h2>OOOPS :(</h2>            <p>                We weren\'t able to obtain the required information                from the service. Are you sure you granted us access?            </p>            <a>C\'mon, try again</a>        </div>    </div></section>');
$.template("directory_custom_category_item",'<a href="#custom/${id}" class="${id} custom">        <h4>${name}</h4>        <p>${description}</p></a>');$.template("slot_countdown_detail",'<span class="hour">${hours}</span>:<span class="minutes">${minutes}</span>:<span class="seconds">${seconds}</span>');$.template("background_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p><strong>Hold on a second...</strong></p>        <p>Custom backgrounds are not included in your plan, upgrade now to unlock this feature, and many others</p>        <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">            <strong>Upgrade my plan</strong>            <span>30 day money back guarantee</span>        </a>    </div></article>');
$.template("autocomplete",'{{if tooltip}}    <div class="tip-input tip-input-autocomplete tip-${name}-container">        <input type="text" class="autocomplete field-${name}" value="${value}" {{if load_service_params}}data-loading="Loading..."{{/if}} {{if placeholder}}data-placeholder="${placeholder}"{{/if}} placeholder="Loading..." {{if maxlength}}maxlength="${maxlength}"{{/if}} />        <input type="button" class="tip" value="tip" tabindex="9999" />        <div class="tooltip">            <span>{{html tooltip}}</span>            <a class="close-tooltip">close</a>        </div>    </div>{{else}}    <input type="text" class="autocomplete field-${name}" value="${value}" {{if placeholder}}data-placeholder="${placeholder}"{{/if}} {{if load_service_params}}data-loading="Loading..."{{/if}}  placeholder="Loading..." {{if maxlength}}maxlength="${maxlength}"{{/if}} />{{/if}}');
$.template("slot_leaderboard",'<section class="slot s-leaderboard ${data_source_kind}">    {{if title}}    <header><h4>${title}</h4></header>    {{/if}}    <table class="board">    {{if headers}}        <thead>        {{each headers}}            <th><div title="${$value}">${$value}</div></th>        {{/each}}        {{if extra_header}}            <th><div>{{html extra_header}}</div></th>        {{/if}}        </thead>    {{/if}}    </table></section>');(function(a){a.Client.prototype.deregister=function(){delete a.clients[this.id]}})(ZeroClipboard);
$.template("slot_twilio_progress",'<section class="slot s-progress ${data_source_kind}">    <div class="preview">        <p class="value">...</p>        <p class="subtitle">${subtitle}</p>    </div>    <div class="bar">        <div class="mask">            <span class="value">                <span class="label">                    <strong>...</strong>                    <span>...</span>                </span>            </span>        </div>    </div></section>');$.template("slot",'<section class="slot"></section>');
$.template("slot_url",'<strong class="title">PUSH DATA TO THIS URL</strong><div class="m-editable-url">    <span class="index">${layout}</span>    <div class="url">${url_pattern}<span class="label" title="${label}">${label}</span></div>    <input type="button" class="more tip" value="..." />    <div class="tooltip">        ${url_pattern}<span class="label">${label}</span>        <a class="close-tooltip">close</a>    </div>    <fieldset>        <input type="text" class="field-label" name="label" placeholder="label name" value="${label}" />        <input type="button" class="cancel" value="X" />    </fieldset></div>{{if has_send_data }}<strong class="title">... OR SET THE VALUE MANUALLY</strong><p class="send-value"></p>{{/if}}<strong class="title">PULL DATA FROM THIS URL</strong><div class="pull-url"></div>');
$.template("widget_timespans",'<section class="timespans-dropdown">    <select>        {{if $item.includes(allowed, \'yearly\')}}            <option value="yearly" {{if timespan === \'yearly\'}}selected="selected"{{/if}} >Last 12 months</option>        {{/if}}        {{if $item.includes(allowed, \'quarterly\')}}            <option value="quarterly" {{if timespan === \'quarterly\'}}selected="selected"{{/if}} >Last 13 weeks</option>        {{/if}}        {{if $item.includes(allowed, \'monthly\')}}            <option value="monthly" {{if timespan === \'monthly\'}}selected="selected"{{/if}} >Last 30 days</option>        {{/if}}        {{if $item.includes(allowed, \'weekly\')}}            <option value="weekly" {{if timespan === \'weekly\'}}selected="selected"{{/if}} >Last 7 days</option>        {{/if}}        {{if $item.includes(allowed, \'daily\')}}            <option value="daily" {{if timespan === \'daily\'}}selected="selected"{{/if}} >Last 24 hours</option>        {{/if}}    </select></div>');
(function(a){typeof define==="function"&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function j(){var b;b=a(this);if(!b.data("timeago")){b.data("timeago",{datetime:d.datetime(b)});var f=a.trim(b.text());d.settings.localeTitle?b.attr("title",b.data("timeago").datetime.toLocaleString()):f.length>0&&(!d.isTime(b)||!b.attr("title"))&&b.attr("title",f)}b=b.data("timeago");isNaN(b.datetime)||a(this).text(e(b.datetime));return this}function e(a){return d.inWords((new Date).getTime()-a.getTime())}
a.timeago=function(b){return b instanceof Date?e(b):typeof b==="string"?e(a.timeago.parse(b)):typeof b==="number"?e(new Date(b)):e(a.timeago.datetime(b))};var d=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6E4,allowFuture:false,localeTitle:false,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",
months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(b){function d(f,g){return(a.isFunction(f)?f(g,b):f).replace(/%d/i,e.numbers&&e.numbers[g]||g)}var e=this.settings.strings,g=e.prefixAgo,j=e.suffixAgo;if(this.settings.allowFuture&&b<0){g=e.prefixFromNow;j=e.suffixFromNow}var q=Math.abs(b)/1E3,l=q/60,k=l/60,n=k/24,x=n/365,q=q<45&&d(e.seconds,Math.round(q))||q<90&&d(e.minute,1)||l<45&&d(e.minutes,Math.round(l))||l<90&&d(e.hour,1)||k<24&&d(e.hours,
Math.round(k))||k<42&&d(e.day,1)||n<30&&d(e.days,Math.round(n))||n<45&&d(e.month,1)||n<365&&d(e.months,Math.round(n/30))||x<1.5&&d(e.year,1)||d(e.years,Math.round(x)),l=e.wordSeparator||"";e.wordSeparator===void 0&&(l=" ");return a.trim([g,q,j].join(l))},parse:function(b){b=a.trim(b);b=b.replace(/\.\d+/,"");b=b.replace(/-/,"/").replace(/-/,"/");b=b.replace(/T/," ").replace(/Z/," UTC");b=b.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");return new Date(b)},datetime:function(b){b=d.isTime(b)?a(b).attr("datetime"):
a(b).attr("title");return d.parse(b)},isTime:function(b){return a(b).get(0).tagName.toLowerCase()==="time"}});var g={init:function(){var b=a.proxy(j,this);b();var f=d.settings;if(f.refreshMillis>0)var e=setInterval(a.proxy(function(){a(this).parents("html").length===0?clearInterval(e):b(e)},this),f.refreshMillis)},update:function(b){a(this).data("timeago",{datetime:d.parse(b)});j.apply(this)}};a.fn.timeago=function(a,d){var e=a?g[a]:g.init;if(!e)throw Error("Unknown function name '"+a+"' for timeago");
this.each(function(){e.call(this,d)});return this};document.createElement("abbr");document.createElement("time")});
$(function(){$.timeago.settings.refreshMillis=1E4;$.timeago.settings.allowFuture=true;$.timeago.settings.strings={prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"few seconds",minute:"a minute",minutes:"%d minutes",hour:"an hour",hours:"%d hours",day:"a day",days:"%d days",month:"a month",months:"%d months",year:"a year",years:"%d years",wordSeparator:" ",numbers:[]}});$.template("slot_completion_progress",'<section class="slot s-completion s-completion-progress ${data_source_kind}">    <div class="preview">        <p>            <span class="value">...</span>            <span class="subtitle">${subtitle}</span>        </p>    </div>    <div class="bar">        <ol class="refs"></ol>        <div class="mask">            <span class="value" style="background-color: #EEC96D;">                <span class="label">                    <strong>2165\u20ac</strong>                    <span></span>                </span>            </span>        </div>    </div></section>');
$.template("plan_list",'<h3>Your current plan</h3>{{tmpl($data, {plan_list: true}) "plan_info"}}<h3 class="left">You have options. Choose a plan that fits you.</h3><ul class="plan-list">    {{each available_plans}}        <li class="plan-item" id="${$value.label}">            <div class="detail">            <span class="name">${$value.name}</span>            <span class="description"><a href="http://ducksboard.com/pricing" target="_blank">See plan details</a></span>            <span id="${$value.yearly_plan_code}"                  class="recurly-plan total cost{{if plan.code === $value.yearly_plan_code}} selected{{/if}}">                {{if is_eu}}${$value.yearly_eur_cost}{{else}}${$value.yearly_usd_cost}{{/if}}<span class="yearly">/year</span>            </span>            <span id="${$value.monthly_plan_code}"                  class="recurly-plan total cost{{if plan.code === $value.monthly_plan_code}} selected{{/if}}">                {{if is_eu}}${$value.monthly_eur_cost}{{else}}${$value.monthly_usd_cost}{{/if}}<span class="monthly">/mo</span>            </span>            </div>            <div class="error">            Hold on a sec...<br/>            <span></span>            </div>        </li>    {{/each}}</ul>');
$.template("billing_info",'<div class="billing pane"><section>    <div class="form">        <h3>your current plan:</h3>        {{tmpl($data, $item) "plan_info"}}        <h3 class="billing">Your billing information:</h3>        <ul class="server-errors"></ul>        <fieldset id="billing-info" class="recurly"></fieldset>        <h3 class="billing">Your VAT related information:</h3>        <div class="vat-info recurly">        </div>    </div>    {{if has_recurly_account_expired === false}}    <div class="loading-plans-info">        <h3>Loading plans...</h3>    </div>    <div class="plans-info">        {{tmpl($data, $item) "plan_list"}}    </div>    {{tmpl($data, $item) "confirmation_info"}}    {{/if}}    <div class="sent">      <h1>Thanks, your billing info has been updated correctly.</h1>    </div>    {{if has_recurly_account_expired === false}}    <div class="plan-changed">      <h1>Thanks, your plan has been updated correctly.</h1>    </div>    {{/if}}    <div class="failure">        <div>            <h2>OOOPS :(</h2>            <p>                We weren\'t able to obtain your billing information                from the service.            </p>            <a>C\'mon, try again</a>        </div>    </div></section><button class="send btn btn-submit full has_children">{{html submit_html}}</button></div>');
$.template("directory_dashboard_item",'<a href="#directory/${kind}/${kind}" class="serviceboard ${kind} {{if needs_upgrade === true}} disabled{{/if}}">    <h4>${name} Dashboard</h4>    <p>${description}</p>    <img src="/static/dashboard/img/dashboards/${kind}_small_dashboard.png"/></a>');
(function(a){var j,e,d,g,b,f,h,o,u,q,l=0,k={},n=[],x=0,v={},w=[],z=null,E=new Image,B=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,F=/[^\.]\.(swf)\s*$/i,t,G=1,y=0,A="",C,K,m=false,P=a.extend(a("<div/>")[0],{prop:0}),J=a.browser.msie&&a.browser.version<7&&!window.XMLHttpRequest,T=document.createTouch!==void 0,Q=function(){e.hide();E.onerror=E.onload=null;z&&z.abort();j.empty()},I=function(){if(false===k.onError(n,l,k)){e.hide();m=false}else{k.titleShow=false;k.width="auto";k.height="auto";j.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');
H()}},M=function(){var b=n[l],d,h,g,o,u,q;Q();k=a.extend({},a.fn.fancybox.defaults,typeof a(b).data("fancybox")=="undefined"?k:a(b).data("fancybox"));q=k.onStart(n,l,k);if(q===false)m=false;else{typeof q=="object"&&(k=a.extend(k,q));g=k.title||(b.nodeName?a(b).attr("title"):b.title)||"";if(b.nodeName&&!k.orig)k.orig=a(b).children("img:first").length?a(b).children("img:first"):a(b);g===""&&(k.orig&&k.titleFromAlt)&&(g=k.orig.attr("alt"));d=k.href||(b.nodeName?a(b).attr("href"):b.href)||null;if(/^(?:javascript)/i.test(d)||
d=="#")d=null;if(k.type){h=k.type;if(!d)d=k.content}else k.content?h="html":d&&(h=d.match(B)?"image":d.match(F)?"swf":a(b).hasClass("iframe")?"iframe":d.indexOf("#")===0?"inline":"ajax");if(h){if(h=="inline"){b=d.substr(d.indexOf("#"));h=a(b).length>0?"inline":"ajax"}k.type=h;k.href=d;k.title=g;if(k.autoDimensions)if(k.type=="html"||k.type=="inline"||k.type=="ajax"){k.width="auto";k.height="auto"}else k.autoDimensions=false;if(k.modal){k.overlayShow=true;k.hideOnOverlayClick=false;k.hideOnContentClick=
false;k.enableEscapeButton=false;k.showCloseButton=false}k.padding=parseInt(k.padding,10);k.margin=parseInt(k.margin,10);j.css("padding",k.padding+k.margin);a(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){a(this).replaceWith(f.children())});switch(h){case "html":j.html(k.content);H();break;case "inline":if(a(b).parent().is("#fancybox-content")===true){m=false;break}a('<div class="fancybox-inline-tmp" />').hide().insertBefore(a(b)).bind("fancybox-cleanup",function(){a(this).replaceWith(f.children())}).bind("fancybox-cancel",
function(){a(this).replaceWith(j.children())});a(b).appendTo(j);H();break;case "image":m=false;a.fancybox.showActivity();E=new Image;E.onerror=function(){I()};E.onload=function(){m=true;E.onerror=E.onload=null;k.width=E.width;k.height=E.height;a("<img />").attr({id:"fancybox-img",src:E.src,alt:k.title}).appendTo(j);R()};E.src=d;break;case "swf":k.scrolling="no";o='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+k.width+'" height="'+k.height+'"><param name="movie" value="'+d+
'"></param>';u="";a.each(k.swf,function(a,b){o=o+('<param name="'+a+'" value="'+b+'"></param>');u=u+(" "+a+'="'+b+'"')});o=o+('<embed src="'+d+'" type="application/x-shockwave-flash" width="'+k.width+'" height="'+k.height+'"'+u+"></embed></object>");j.html(o);H();break;case "ajax":m=false;a.fancybox.showActivity();k.ajax.win=k.ajax.success;z=a.ajax(a.extend({},k.ajax,{url:d,data:k.ajax.data||{},error:function(a){a.status>0&&I()},success:function(a,b,f){if((typeof f=="object"?f:z).status==200){if(typeof k.ajax.win==
"function"){q=k.ajax.win(d,a,b,f);if(q===false){e.hide();return}if(typeof q=="string"||typeof q=="object")a=q}j.html(a);H()}}}));break;case "iframe":R()}}else I()}},H=function(){var b=k.width,d=k.height,b=b.toString().indexOf("%")>-1?parseInt((a(window).width()-k.margin*2)*parseFloat(b)/100,10)+"px":b=="auto"?"auto":b+"px",d=d.toString().indexOf("%")>-1?parseInt((a(window).height()-k.margin*2)*parseFloat(d)/100,10)+"px":d=="auto"?"auto":d+"px";j.wrapInner('<div style="width:'+b+";height:"+d+";overflow: "+
(k.scrolling=="auto"?"auto":k.scrolling=="yes"?"scroll":"hidden")+';position:relative;"></div>');k.width=j.width();k.height=j.height();R()},R=function(){var t,I;e.hide();t=f.height();if(g.is(":visible")&&false===v.onCleanup(w,x,v)){a.event.trigger("fancybox-cancel");m=false}else{f.css({height:t});m=true;a(f.add(d)).unbind();a(window).unbind("resize.fb scroll.fb");a(document).unbind("keydown.fb");g.is(":visible")&&v.titlePosition!=="outside"&&g.css("height",b.height());w=n;x=l;v=k;if(v.overlayShow){d.css({"background-color":v.overlayColor,
opacity:v.overlayOpacity,cursor:v.hideOnOverlayClick?"pointer":"auto",height:a(document).height()});if(!d.is(":visible")){if(J)a("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"});d.show()}}else d.hide();t=W();var G={},H=v.autoScale,M=v.padding*2;G.width=v.width.toString().indexOf("%")>-1?parseInt(t[0]*parseFloat(v.width)/100,10):v.width+M;G.height=v.height.toString().indexOf("%")>
-1?parseInt(t[1]*parseFloat(v.height)/100,10):v.height+M;if(H&&(G.width>t[0]||G.height>t[1]))if(k.type=="image"||k.type=="swf"){H=v.width/v.height;if(G.width>t[0]){G.width=t[0];G.height=parseInt((G.width-M)/H+M,10)}if(G.height>t[1]){G.height=t[1];G.width=parseInt((G.height-M)*H+M,10)}}else{G.width=Math.min(G.width,t[0]);G.height=Math.min(G.height,t[1])}G.top=parseInt(Math.max(t[3]-20,t[3]+(t[1]-G.height-40)*0.5),10);G.left=parseInt(Math.max(t[2]-20,t[2]+(t[0]-G.width-40)*0.5),10);K=G;A=v.title||"";
y=0;o.empty().removeAttr("style").removeClass();if(v.titleShow!==false)if((A=a.isFunction(v.titleFormat)?v.titleFormat(A,w,x,v):A&&A.length?v.titlePosition=="float"?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+A+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+v.titlePosition+'">'+A+"</div>":false)&&A!==""){o.addClass("fancybox-title-"+v.titlePosition).html(A).appendTo("body").show();
switch(v.titlePosition){case "inside":o.css({width:K.width-v.padding*2,marginLeft:v.padding,marginRight:v.padding});y=o.outerHeight(true);o.appendTo(b);K.height=K.height+y;break;case "over":o.css({marginLeft:v.padding,width:K.width-v.padding*2,bottom:v.padding}).appendTo(b);break;case "float":o.css("left",parseInt((o.width()-K.width-40)/2,10)*-1).appendTo(g);break;default:o.css({width:K.width-v.padding*2,paddingLeft:v.padding,paddingRight:v.padding}).appendTo(g)}}o.hide();if(g.is(":visible")){a(h.add(u).add(q)).hide();
t=g.position();C={top:t.top,left:t.left,width:g.width(),height:g.height()};I=C.width==K.width&&C.height==K.height;a("> div",f).clone().css({position:"absolute","background-color":f.css("background-color")}).appendTo(f);a("> div",f).first().fadeTo(v.changeFade,0.3,function(){var b=function(){f.html(j.contents()).fadeTo(v.changeFade,1,N)};a.event.trigger("fancybox-change");f.empty().removeAttr("filter").css({"border-width":v.padding,width:K.width-v.padding*2,height:k.autoDimensions?"auto":K.height-
y-v.padding*2});if(I)b();else{P.prop=0;a(P).animate({prop:1},{duration:v.changeSpeed,easing:v.easingChange,step:L,complete:b})}})}else{g.removeAttr("style");f.css("border-width",v.padding);if(v.transitionIn=="elastic"){C=U();f.html(j.contents());g.show();if(v.opacity)K.opacity=0;P.prop=0;a(P).animate({prop:1},{duration:v.speedIn,easing:v.easingIn,step:L,complete:N})}else{v.titlePosition=="inside"&&y>0&&o.show();f.css({width:K.width-v.padding*2,height:k.autoDimensions?"auto":K.height-y-v.padding*2}).html(j.contents());
g.css(K).fadeIn(v.transitionIn=="none"?0:v.speedIn,N)}}}},N=function(){if(!a.support.opacity){f.get(0).style.removeAttribute("filter");g.get(0).style.removeAttribute("filter")}k.autoDimensions&&f.css("height","auto");g.css("height","auto");A&&A.length&&o.show();v.showCloseButton&&h.show();(v.enableEscapeButton||v.enableKeyboardNav)&&a(document).bind("keydown.fb",function(b){if(b.keyCode==27&&v.enableEscapeButton){b.preventDefault();a.fancybox.close()}else if((b.keyCode==37||b.keyCode==39)&&v.enableKeyboardNav&&
b.target.tagName!=="INPUT"&&b.target.tagName!=="TEXTAREA"&&b.target.tagName!=="SELECT"){b.preventDefault();a.fancybox[b.keyCode==37?"prev":"next"]()}});if(v.showNavArrows){(v.cyclic&&w.length>1||x!==0)&&u.show();(v.cyclic&&w.length>1||x!=w.length-1)&&q.show()}else{u.hide();q.hide()}v.hideOnContentClick&&f.bind("click",a.fancybox.close);v.hideOnOverlayClick&&d.bind("click",a.fancybox.close);a(window).bind("resize.fb",a.fancybox.resize);v.centerOnScroll&&a(window).bind("scroll.fb",a.fancybox.center);
v.type=="iframe"&&a('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(a.browser.msie?'allowtransparency="true""':"")+' scrolling="'+k.scrolling+'" src="'+v.href+'"></iframe>').appendTo(f);g.show();m=false;a.fancybox.center();v.onComplete(w,x,v);var b,e;if(w.length-1>x){b=w[x+1].href;if(typeof b!=="undefined"&&b.match(B)){e=new Image;e.src=b}}if(x>0){b=w[x-1].href;if(typeof b!=="undefined"&&b.match(B)){e=new Image;e.src=b}}},L=function(a){var b=
{width:parseInt(C.width+(K.width-C.width)*a,10),height:parseInt(C.height+(K.height-C.height)*a,10),top:parseInt(C.top+(K.top-C.top)*a,10),left:parseInt(C.left+(K.left-C.left)*a,10)};if(typeof K.opacity!=="undefined")b.opacity=a<0.5?0.5:a;g.css(b);f.css({width:b.width-v.padding*2,height:b.height-y*a-v.padding*2})},W=function(){return[(T&&window.innerWidth?window.innerWidth:a(window).width())-v.margin*2,(T&&window.innerHeight?window.innerHeight:a(window).height())-v.margin*2,a(document).scrollLeft()+
v.margin,a(document).scrollTop()+v.margin]},U=function(){var b=k.orig?a(k.orig):false,d={};if(b&&b.length){d=b.offset();d.top=d.top+(parseInt(b.css("paddingTop"),10)||0);d.left=d.left+(parseInt(b.css("paddingLeft"),10)||0);d.top=d.top+(parseInt(b.css("border-top-width"),10)||0);d.left=d.left+(parseInt(b.css("border-left-width"),10)||0);d.width=b.width();d.height=b.height();d={width:d.width+v.padding*2,height:d.height+v.padding*2,top:d.top-v.padding-20,left:d.left-v.padding-20}}else{b=W();d={width:v.padding*
2,height:v.padding*2,top:parseInt(b[3]+b[1]*0.5,10),left:parseInt(b[2]+b[0]*0.5,10)}}return d},Z=function(){if(e.is(":visible")){a("div",e).css("top",G*-40+"px");G=(G+1)%12}else clearInterval(t)};a.fn.fancybox=function(b){if(!a(this).length)return this;a(this).data("fancybox",a.extend({},b,a.metadata?a(this).metadata():{})).unbind("click.fb").bind("click.fb",function(b){b.preventDefault();if(!m){m=true;a(this).blur();n=[];l=0;b=a(this).attr("rel")||"";if(!b||b==""||b==="nofollow")n.push(this);else{n=
a("a[rel="+b+"], area[rel="+b+"]");l=n.index(this)}M()}});return this};a.fancybox=function(b,d){var f;if(!m){m=true;f=typeof d!=="undefined"?d:{};n=[];l=parseInt(f.index,10)||0;if(a.isArray(b)){for(var e=0,h=b.length;e<h;e++)typeof b[e]=="object"?a(b[e]).data("fancybox",a.extend({},f,b[e])):b[e]=a({}).data("fancybox",a.extend({content:b[e]},f));n=jQuery.merge(n,b)}else{typeof b=="object"?a(b).data("fancybox",a.extend({},f,b)):b=a({}).data("fancybox",a.extend({content:b},f));n.push(b)}if(l>n.length||
l<0)l=0;M()}};a.fancybox.showActivity=function(){clearInterval(t);e.show();t=setInterval(Z,66)};a.fancybox.hideActivity=function(){e.hide()};a.fancybox.next=function(){return a.fancybox.pos(x+1)};a.fancybox.prev=function(){return a.fancybox.pos(x-1)};a.fancybox.pos=function(a){if(!m){a=parseInt(a);n=w;if(a>-1&&a<w.length){l=a;M()}else if(v.cyclic&&w.length>1){l=a>=w.length?0:w.length-1;M()}}};a.fancybox.cancel=function(){if(!m){m=true;a.event.trigger("fancybox-cancel");Q();k.onCancel(n,l,k);m=false}};
a.fancybox.close=function(){function b(){v.onCleanup(w,x,v);d.fadeOut("fast");o.empty().hide();g.hide();a.event.trigger("fancybox-cleanup");f.empty();v.onClosed(w,x,v);n=[];w=k=[];x=l=0;v=k={};m=false}if(!m&&!g.is(":hidden")){m=true;Q();a(h.add(u).add(q)).hide();a(f.add(d)).unbind();a(window).unbind("resize.fb scroll.fb");a(document).unbind("keydown.fb");f.find("iframe").attr("src",J&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank");v.titlePosition!=="inside"&&o.empty();
g.stop();if(v.transitionOut=="elastic"){C=U();var e=g.position();K={top:e.top,left:e.left,width:g.width(),height:g.height()};if(v.opacity)K.opacity=1;o.empty().hide();P.prop=1;a(P).animate({prop:0},{duration:v.speedOut,easing:v.easingOut,step:L,complete:b})}else g.fadeOut(v.transitionOut=="none"?0:v.speedOut,b)}};a.fancybox.resize=function(){d.is(":visible")&&d.css("height",a(document).height());a.fancybox.center(true)};a.fancybox.center=function(b){var d,e;if(!m){e=b===true?1:0;d=W();if(e||!(g.width()>
d[0]||g.height()>d[1]))g.stop().animate({top:parseInt(Math.max(d[3]-20,d[3]+(d[1]-f.height()-40)*0.5-v.padding)),left:parseInt(Math.max(d[2]-20,d[2]+(d[0]-f.width()-40)*0.5-v.padding))},typeof b=="number"?b:200,function(){a(window).trigger("center.fb")})}};a.fancybox.init=function(){if(!a("#fancybox-wrap").length){e=a('<div id="fancybox-loading"><div></div></div>');a("body").append(j=a('<div id="fancybox-tmp"></div>'),d=a('<div id="fancybox-overlay"></div>'),g=a('<div id="fancybox-wrap"></div>'));
b=a('<div id="fancybox-outer"></div>').appendTo(g);b.append(f=a('<div id="fancybox-content"></div>'));h=a('<a id="fancybox-close"></a>');o=a('<div id="fancybox-title"></div>');u=a('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>');q=a('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>');h.click(a.fancybox.close);e.click(a.fancybox.cancel);u.click(function(b){b.preventDefault();a.fancybox.prev()});
q.click(function(b){b.preventDefault();a.fancybox.next()});a.fn.mousewheel&&g.bind("mousewheel.fb",function(b,d){if(m)b.preventDefault();else if(a(b.target).get(0).clientHeight==0||a(b.target).get(0).scrollHeight===a(b.target).get(0).clientHeight){b.preventDefault();a.fancybox[d>0?"prev":"next"]()}});a.support.opacity||g.addClass("fancybox-ie");if(J){e.addClass("fancybox-ie6");g.addClass("fancybox-ie6");a('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":
"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(b)}}};a.fn.fancybox.defaults={padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.7,overlayColor:"#777",titleShow:true,titlePosition:"float",titleFormat:null,titleFromAlt:false,transitionIn:"fade",
transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};a(document).ready(function(){a.fancybox.init()})})(jQuery);$.template("section_option","<a><span>${title}</span></a>");$.template("slot_current_time",'<section class="slot current-time ${data_source_kind}">    <p class="city"></p>    <p>        <strong class="time"></strong>        <span class="am_pm"></span>    </p></section>');
var JSON;JSON||(JSON={});
(function(){function a(a){return a<10?"0"+a:a}function j(a){g.lastIndex=0;return g.test(a)?'"'+a.replace(g,function(a){var b=h[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function e(a,d){var h,g,n,x,v=b,w,z=d[a];z&&(typeof z==="object"&&typeof z.toJSON==="function")&&(z=z.toJSON(a));typeof o==="function"&&(z=o.call(d,a,z));switch(typeof z){case "string":return j(z);case "number":return isFinite(z)?String(z):"null";case "boolean":case "null":return String(z);
case "object":if(!z)return"null";b=b+f;w=[];if(Object.prototype.toString.apply(z)==="[object Array]"){x=z.length;for(h=0;h<x;h=h+1)w[h]=e(h,z)||"null";n=w.length===0?"[]":b?"[\n"+b+w.join(",\n"+b)+"\n"+v+"]":"["+w.join(",")+"]";b=v;return n}if(o&&typeof o==="object"){x=o.length;for(h=0;h<x;h=h+1)if(typeof o[h]==="string"){g=o[h];(n=e(g,z))&&w.push(j(g)+(b?": ":":")+n)}}else for(g in z)if(Object.prototype.hasOwnProperty.call(z,g))(n=e(g,z))&&w.push(j(g)+(b?": ":":")+n);n=w.length===0?"{}":b?"{\n"+
b+w.join(",\n"+b)+"\n"+v+"}":"{"+w.join(",")+"}";b=v;return n}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
g=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,b,f,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},o;if(typeof JSON.stringify!=="function")JSON.stringify=function(a,d,h){var g;f=b="";if(typeof h==="number")for(g=0;g<h;g=g+1)f=f+" ";else typeof h==="string"&&(f=h);if((o=d)&&typeof d!=="function"&&(typeof d!=="object"||typeof d.length!=="number"))throw Error("JSON.stringify");return e("",{"":a})};
if(typeof JSON.parse!=="function")JSON.parse=function(a,b){function f(a,d){var e,h,g=a[d];if(g&&typeof g==="object")for(e in g)if(Object.prototype.hasOwnProperty.call(g,e)){h=f(g,e);h!==void 0?g[e]=h:delete g[e]}return b.call(a,d,g)}var e,a=String(a);d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){e=eval("("+a+")");return typeof b==="function"?f({"":e},""):e}throw new SyntaxError("JSON.parse");}})();
(function(){var a=this,j=a.Backbone,e=[],d=e.push,g=e.slice,b=e.splice,f;f=typeof exports!=="undefined"?exports:a.Backbone={};f.VERSION="1.0.0";var h=a._;!h&&typeof require!=="undefined"&&(h=require("underscore"));f.$=a.jQuery||a.Zepto||a.ender||a.$;f.noConflict=function(){a.Backbone=j;return this};f.emulateHTTP=false;f.emulateJSON=false;var o=f.Events={on:function(a,b,d){if(!q(this,"on",a,[b,d])||!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,
context:d,ctx:d||this});return this},once:function(a,b,d){if(!q(this,"once",a,[b,d])||!b)return this;var f=this,e=h.once(function(){f.off(a,e);b.apply(this,arguments)});e._callback=b;return this.on(a,e,d)},off:function(a,b,d){var f,e,g,k,j,n,l,o;if(!this._events||!q(this,"off",a,[b,d]))return this;if(!a&&!b&&!d){this._events={};return this}k=a?[a]:h.keys(this._events);j=0;for(n=k.length;j<n;j++){a=k[j];if(g=this._events[a]){this._events[a]=f=[];if(b||d){l=0;for(o=g.length;l<o;l++){e=g[l];(b&&b!==
e.callback&&b!==e.callback._callback||d&&d!==e.context)&&f.push(e)}}f.length||delete this._events[a]}}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!q(this,"trigger",a,b))return this;var d=this._events[a],f=this._events.all;d&&l(d,b);f&&l(f,arguments);return this},stopListening:function(a,b,d){var f=this._listeners;if(!f)return this;var e=!b&&!d;typeof b==="object"&&(d=this);a&&((f={})[a._listenerId]=a);for(var h in f){f[h].off(b,d,this);e&&delete this._listeners[h]}return this}},
u=/\s+/,q=function(a,b,d,f){if(!d)return true;if(typeof d==="object"){for(var e in d)a[b].apply(a,[e,d[e]].concat(f));return false}if(u.test(d)){d=d.split(u);e=0;for(var h=d.length;e<h;e++)a[b].apply(a,[d[e]].concat(f));return false}return true},l=function(a,b){var d,f=-1,e=a.length,h=b[0],g=b[1],k=b[2];switch(b.length){case 0:for(;++f<e;)(d=a[f]).callback.call(d.ctx);break;case 1:for(;++f<e;)(d=a[f]).callback.call(d.ctx,h);break;case 2:for(;++f<e;)(d=a[f]).callback.call(d.ctx,h,g);break;case 3:for(;++f<
e;)(d=a[f]).callback.call(d.ctx,h,g,k);break;default:for(;++f<e;)(d=a[f]).callback.apply(d.ctx,b)}};h.each({listenTo:"on",listenToOnce:"once"},function(a,b){o[b]=function(b,d,f){var e=this._listeners||(this._listeners={}),g=b._listenerId||(b._listenerId=h.uniqueId("l"));e[g]=b;typeof d==="object"&&(f=this);b[a](d,f,this);return this}});o.bind=o.on;o.unbind=o.off;h.extend(f,o);var k=f.Model=function(a,b){var d,f=a||{};b||(b={});this.cid=h.uniqueId("c");this.attributes={};h.extend(this,h.pick(b,n));
b.parse&&(f=this.parse(f,b)||{});if(d=h.result(this,"defaults"))f=h.defaults({},f,d);this.set(f,b);this.changed={};this.initialize.apply(this,arguments)},n=["url","urlRoot","collection"];h.extend(k.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return h.clone(this.attributes)},sync:function(){return f.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return h.escape(this.get(a))},has:function(a){return this.get(a)!=
null},set:function(a,b,d){var f,e,g,k,j,n,l;if(a==null)return this;if(typeof a==="object"){e=a;d=b}else(e={})[a]=b;d||(d={});if(!this._validate(e,d))return false;g=d.unset;k=d.silent;a=[];j=this._changing;this._changing=true;if(!j){this._previousAttributes=h.clone(this.attributes);this.changed={}}l=this.attributes;n=this._previousAttributes;if(this.idAttribute in e)this.id=e[this.idAttribute];for(f in e){b=e[f];h.isEqual(l[f],b)||a.push(f);h.isEqual(n[f],b)?delete this.changed[f]:this.changed[f]=
b;g?delete l[f]:l[f]=b}if(!k){if(a.length)this._pending=true;b=0;for(f=a.length;b<f;b++)this.trigger("change:"+a[b],this,l[a[b]],d)}if(j)return this;if(!k)for(;this._pending;){this._pending=false;this.trigger("change",this,d)}this._changing=this._pending=false;return this},unset:function(a,b){return this.set(a,void 0,h.extend({},b,{unset:true}))},clear:function(a){var b={},d;for(d in this.attributes)b[d]=void 0;return this.set(b,h.extend({},a,{unset:true}))},hasChanged:function(a){return a==null?
!h.isEmpty(this.changed):h.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?h.clone(this.changed):false;var b,d=false,f=this._changing?this._previousAttributes:this.attributes,e;for(e in a)if(!h.isEqual(f[e],b=a[e]))(d||(d={}))[e]=b;return d},previous:function(a){return a==null||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(a){a=a?h.clone(a):{};if(a.parse===void 0)a.parse=
true;var b=this,d=a.success;a.success=function(f){if(!b.set(b.parse(f,a),a))return false;d&&d(b,f,a);b.trigger("sync",b,f,a)};Q(this,a);return this.sync("read",this,a)},save:function(a,b,d){var f,e=this.attributes;if(a==null||typeof a==="object"){f=a;d=b}else(f={})[a]=b;if(f&&(!d||!d.wait)&&!this.set(f,d))return false;d=h.extend({validate:true},d);if(!this._validate(f,d))return false;if(f&&d.wait)this.attributes=h.extend({},e,f);if(d.parse===void 0)d.parse=true;var g=this,k=d.success;d.success=function(a){g.attributes=
e;var b=g.parse(a,d);d.wait&&(b=h.extend(f||{},b));if(h.isObject(b)&&!g.set(b,d))return false;k&&k(g,a,d);g.trigger("sync",g,a,d)};Q(this,d);a=this.isNew()?"create":d.patch?"patch":"update";if(a==="patch")d.attrs=f;a=this.sync(a,this,d);if(f&&d.wait)this.attributes=e;return a},destroy:function(a){var a=a?h.clone(a):{},b=this,d=a.success,f=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(e){(a.wait||b.isNew())&&f();d&&d(b,e,a);b.isNew()||b.trigger("sync",b,e,a)};if(this.isNew()){a.success();
return false}Q(this,a);var e=this.sync("delete",this,a);a.wait||f();return e},url:function(){var a=h.result(this,"urlRoot")||h.result(this.collection,"url")||T();return this.isNew()?a:a+(a.charAt(a.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(a){return this._validate({},h.extend(a||{},{validate:true}))},_validate:function(a,b){if(!b.validate||!this.validate)return true;
var a=h.extend({},this.attributes,a),d=this.validationError=this.validate(a,b)||null;if(!d)return true;this.trigger("invalid",this,d,h.extend(b||{},{validationError:d}));return false}});h.each(["keys","values","pairs","invert","pick","omit"],function(a){k.prototype[a]=function(){var b=g.call(arguments);b.unshift(this.attributes);return h[a].apply(h,b)}});var x=f.Collection=function(a,b){b||(b={});if(b.url)this.url=b.url;if(b.model)this.model=b.model;if(b.comparator!==void 0)this.comparator=b.comparator;
this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,h.extend({silent:true},b))},v={add:true,remove:true,merge:true},w={add:true,merge:false,remove:false};h.extend(x.prototype,o,{model:k,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return f.sync.apply(this,arguments)},add:function(a,b){return this.set(a,h.defaults(b||{},w))},remove:function(a,b){a=h.isArray(a)?a.slice():[a];b||(b={});var d,f,e,g;d=0;for(f=a.length;d<f;d++)if(g=
this.get(a[d])){delete this._byId[g.id];delete this._byId[g.cid];e=this.indexOf(g);this.models.splice(e,1);this.length--;if(!b.silent){b.index=e;g.trigger("remove",g,this,b)}this._removeReference(g)}return this},set:function(a,f){f=h.defaults(f||{},v);f.parse&&(a=this.parse(a,f));h.isArray(a)||(a=a?[a]:[]);var e,g,k,j,n,l=f.at,o=this.comparator&&l==null&&f.sort!==false,u=h.isString(this.comparator)?this.comparator:null,q=[],x=[],m={};e=0;for(g=a.length;e<g;e++)if(k=this._prepareModel(a[e],f))if(j=
this.get(k)){f.remove&&(m[j.cid]=true);if(f.merge){j.set(k.attributes,f);o&&(!n&&j.hasChanged(u))&&(n=true)}}else if(f.add){q.push(k);k.on("all",this._onModelEvent,this);this._byId[k.cid]=k;k.id!=null&&(this._byId[k.id]=k)}if(f.remove){e=0;for(g=this.length;e<g;++e)m[(k=this.models[e]).cid]||x.push(k);x.length&&this.remove(x,f)}if(q.length){o&&(n=true);this.length=this.length+q.length;l!=null?b.apply(this.models,[l,0].concat(q)):d.apply(this.models,q)}n&&this.sort({silent:true});if(f.silent)return this;
e=0;for(g=q.length;e<g;e++)(k=q[e]).trigger("add",k,this,f);n&&this.trigger("sort",this,f);return this},reset:function(a,b){b||(b={});for(var d=0,f=this.models.length;d<f;d++)this._removeReference(this.models[d]);b.previousModels=this.models;this._reset();this.add(a,h.extend({silent:true},b));b.silent||this.trigger("reset",this,b);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,h.extend({at:this.length},b));return a},pop:function(a){var b=this.at(this.length-1);this.remove(b,
a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,h.extend({at:0},b));return a},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return a==null?void 0:this._byId[a.id!=null?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return h.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var d in a)if(a[d]!==b.get(d))return false;return true})},findWhere:function(a){return this.where(a,
true)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});h.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(h.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},sortedIndex:function(a,b,d){b||(b=this.comparator);var f=h.isFunction(b)?b:function(a){return a.get(b)};return h.sortedIndex(this.models,a,f,d)},pluck:function(a){return h.invoke(this.models,"get",
a)},fetch:function(a){a=a?h.clone(a):{};if(a.parse===void 0)a.parse=true;var b=a.success,d=this;a.success=function(f){d[a.reset?"reset":"set"](f,a);b&&b(d,f,a);d.trigger("sync",d,f,a)};Q(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?h.clone(b):{};if(!(a=this._prepareModel(a,b)))return false;b.wait||this.add(a,b);var d=this,f=b.success;b.success=function(e){b.wait&&d.add(a,b);f&&f(a,e,b)};a.save(null,b);return a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},
_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof k){if(!a.collection)a.collection=this;return a}b||(b={});b.collection=this;var d=new this.model(a,b);if(!d._validate(a,b)){this.trigger("invalid",this,a,b);return false}return d},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,d,f){if(!((a==="add"||a==="remove")&&d!==this)){a==="destroy"&&this.remove(b,f);if(b&&
a==="change:"+b.idAttribute){delete this._byId[b.previous(b.idAttribute)];b.id!=null&&(this._byId[b.id]=b)}this.trigger.apply(this,arguments)}}});h.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"],function(a){x.prototype[a]=
function(){var b=g.call(arguments);b.unshift(this.models);return h[a].apply(h,b)}});h.each(["groupBy","countBy","sortBy"],function(a){x.prototype[a]=function(b,d){var f=h.isFunction(b)?b:function(a){return a.get(b)};return h[a](this.models,f,d)}});var e=f.View=function(a){this.cid=h.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},z=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];
h.extend(e.prototype,o,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof f.$?a:f.$(a);this.el=this.$el[0];b!==false&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=h.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];h.isFunction(d)||
(d=this[a[b]]);if(d){var f=b.match(z),e=f[1],f=f[2],d=h.bind(d,this),e=e+(".delegateEvents"+this.cid);if(f==="")this.$el.on(e,d);else this.$el.on(e,f,d)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(a){this.options&&(a=h.extend({},h.result(this,"options"),a));h.extend(this,h.pick(a,E));this.options=a},_ensureElement:function(){if(this.el)this.setElement(h.result(this,"el"),false);else{var a=h.extend({},h.result(this,"attributes"));
if(this.id)a.id=h.result(this,"id");this.className&&(a["class"]=h.result(this,"className"));a=f.$("<"+h.result(this,"tagName")+">").attr(a);this.setElement(a,false)}}});f.sync=function(a,b,d){var e=B[a];h.defaults(d||(d={}),{emulateHTTP:f.emulateHTTP,emulateJSON:f.emulateJSON});var g={type:e,dataType:"json"};if(!d.url)g.url=h.result(b,"url")||T();if(d.data==null&&b&&(a==="create"||a==="update"||a==="patch")){g.contentType="application/json";g.data=JSON.stringify(d.attrs||b.toJSON(d))}if(d.emulateJSON){g.contentType=
"application/x-www-form-urlencoded";g.data=g.data?{model:g.data}:{}}if(d.emulateHTTP&&(e==="PUT"||e==="DELETE"||e==="PATCH")){g.type="POST";if(d.emulateJSON)g.data._method=e;var k=d.beforeSend;d.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",e);if(k)return k.apply(this,arguments)}}if(g.type!=="GET"&&!d.emulateJSON)g.processData=false;if(g.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled))g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")};
a=d.xhr=f.ajax(h.extend(g,d));b.trigger("request",b,a,d);return a};var B={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};f.ajax=function(){return f.$.ajax.apply(f.$,arguments)};var F=f.Router=function(a){a||(a={});if(a.routes)this.routes=a.routes;this._bindRoutes();this.initialize.apply(this,arguments)},t=/\((.*?)\)/g,G=/(\(\?)?:\w+/g,y=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(F.prototype,o,{initialize:function(){},route:function(a,b,d){h.isRegExp(a)||(a=this._routeToRegExp(a));
if(h.isFunction(b)){d=b;b=""}d||(d=this[b]);var e=this;f.history.route(a,function(h){h=e._extractParameters(a,h);d&&d.apply(e,h);e.trigger.apply(e,["route:"+b].concat(h));e.trigger("route",b,h);f.history.trigger("route",e,b,h)});return this},navigate:function(a,b){f.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes){this.routes=h.result(this,"routes");for(var a,b=h.keys(this.routes);(a=b.pop())!=null;)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(A,"\\$&").replace(t,
"(?:$1)?").replace(G,function(a,b){return b?a:"([^/]+)"}).replace(y,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return h.map(d,function(a){return a?decodeURIComponent(a):null})}});var C=f.History=function(){this.handlers=[];h.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}},K=/^[#\/]|\s+$/g,m=/^\/+|\/+$/g,P=/msie [\w.]+/,J=/\/$/;C.started=false;h.extend(C.prototype,o,{interval:50,getHash:function(a){return(a=
(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,b){if(a==null)if(this._hasPushState||!this._wantsHashChange||b){var a=this.location.pathname,d=this.root.replace(J,"");a.indexOf(d)||(a=a.substr(d.length))}else a=this.getHash();return a.replace(K,"")},start:function(a){if(C.started)throw Error("Backbone.history has already been started");C.started=true;this.options=h.extend({},{root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==
false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);var a=this.getFragment(),b=document.documentMode,b=P.exec(navigator.userAgent.toLowerCase())&&(!b||b<=7);this.root=("/"+this.root+"/").replace(m,"/");if(b&&this._wantsHashChange){this.iframe=f.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(a)}if(this._hasPushState)f.$(window).on("popstate",this.checkUrl);
else if(this._wantsHashChange&&"onhashchange"in window&&!b)f.$(window).on("hashchange",this.checkUrl);else if(this._wantsHashChange)this._checkUrlInterval=setInterval(this.checkUrl,this.interval);this.fragment=a;a=this.location;b=a.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+"#"+this.fragment);return true}if(this._wantsPushState&&
this._hasPushState&&b&&a.hash){this.fragment=this.getHash().replace(K,"");this.history.replaceState({},document.title,this.root+this.fragment+a.search)}if(!this.options.silent)return this.loadUrl()},stop:function(){f.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);C.started=false},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));
if(a===this.fragment)return false;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return h.any(this.handlers,function(a){if(a.route.test(b)){a.callback(b);return true}})},navigate:function(a,b){if(!C.started)return false;if(!b||b===true)b={trigger:b};a=this.getFragment(a||"");if(this.fragment!==a){this.fragment=a;var d=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,
d);else if(this._wantsHashChange){this._updateHash(this.location,a,b.replace);if(this.iframe&&a!==this.getFragment(this.getHash(this.iframe))){b.replace||this.iframe.document.open().close();this._updateHash(this.iframe.location,a,b.replace)}}else return this.location.assign(d);b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,d){if(d){d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}});f.history=new C;k.extend=x.extend=F.extend=e.extend=C.extend=function(a,b){var d=
this,f;f=a&&h.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)};h.extend(f,d,b);var e=function(){this.constructor=f};e.prototype=d.prototype;f.prototype=new e;a&&h.extend(f.prototype,a);f.__super__=d.prototype;return f};var T=function(){throw Error('A "url" property or function must be specified');},Q=function(a,b){var d=b.error;b.error=function(f){d&&d(a,f,b);a.trigger("error",a,f,b)}}}).call(this);
(function(){Modernizr.testStyles("#modernizr div:first-of-type { font-size: 42px; }",function(a){a=a.childNodes[0];a=(window.getComputedStyle?getComputedStyle(a,null):a.currentStyle).fontSize==="42px";Modernizr.addTest("firstoftype",a)},1)})();$.template("slot_data_image",'<fieldset class="image-data">    <div class="preview">        <span class="caption"></span>        <span class="upload-bar hidden">            <span>0%</span>        </span>        <span class="loading"></span>        <span class="img-preview-wrap"></span>        <div class="file">            <label for="upload-image">CHANGE IMAGE</label>            <input type="file" id="upload-image" value="" accept="image/*">        </div>        <span class="cancel">cancel</span>    </div>    <span class="button">send</span></fieldset>');
$.template("service_item",'<li class="serv-sq-logo ${kind}">    <div class="description">        <span class="username">${service_username}</span><br />        <span class="service">${kind_name}</span>    </div>    <a class="delete btn btn-ico-action btn-light no-link">        <i class="icon-unlink icon-small"></i>        <span>Unlink<br>account</span>    </a>    {{if can_relink === true}}    <a class="authorize btn btn-ico-action btn-light no-link">        <i class="icon-sync icon-small"></i>        <span>Relink<br>account</span>    </a>    {{/if}}</li>');
$.template("select_countries",'<select class="field-country">    <option value="AF" {{if $data.value === "AF"}}selected="selected"{{/if}}>Afghanistan</option>    <option value="AX" {{if $data.value === "AX"}}selected="selected"{{/if}}>\u00c5land Islands</option>    <option value="AL" {{if $data.value === "AL"}}selected="selected"{{/if}}>Albania</option>    <option value="DZ" {{if $data.value === "DZ"}}selected="selected"{{/if}}>Algeria</option>    <option value="AS" {{if $data.value === "AS"}}selected="selected"{{/if}}>American Samoa</option>    <option value="AD" {{if $data.value === "AD"}}selected="selected"{{/if}}>Andorra</option>    <option value="AO" {{if $data.value === "AO"}}selected="selected"{{/if}}>Angola</option>    <option value="AI" {{if $data.value === "AI"}}selected="selected"{{/if}}>Anguilla</option>    <option value="AQ" {{if $data.value === "AQ"}}selected="selected"{{/if}}>Antarctica</option>    <option value="AG" {{if $data.value === "AG"}}selected="selected"{{/if}}>Antigua and Barbuda</option>    <option value="AR" {{if $data.value === "AR"}}selected="selected"{{/if}}>Argentina</option>    <option value="AM" {{if $data.value === "AM"}}selected="selected"{{/if}}>Armenia</option>    <option value="AW" {{if $data.value === "AW"}}selected="selected"{{/if}}>Aruba</option>    <option value="AP" {{if $data.value === "AP"}}selected="selected"{{/if}}>Asia/Pacific Region</option>    <option value="AU" {{if $data.value === "AU"}}selected="selected"{{/if}}>Australia</option>    <option value="AT" {{if $data.value === "AT"}}selected="selected"{{/if}}>Austria</option>    <option value="AZ" {{if $data.value === "AZ"}}selected="selected"{{/if}}>Azerbaijan</option>    <option value="BS" {{if $data.value === "BS"}}selected="selected"{{/if}}>Bahamas</option>    <option value="BH" {{if $data.value === "BH"}}selected="selected"{{/if}}>Bahrain</option>    <option value="BD" {{if $data.value === "BD"}}selected="selected"{{/if}}>Bangladesh</option>    <option value="BB" {{if $data.value === "BB"}}selected="selected"{{/if}}>Barbados</option>    <option value="BY" {{if $data.value === "BY"}}selected="selected"{{/if}}>Belarus</option>    <option value="BE" {{if $data.value === "BE"}}selected="selected"{{/if}}>Belgium</option>    <option value="BZ" {{if $data.value === "BZ"}}selected="selected"{{/if}}>Belize</option>    <option value="BJ" {{if $data.value === "BJ"}}selected="selected"{{/if}}>Benin</option>    <option value="BM" {{if $data.value === "BM"}}selected="selected"{{/if}}>Bermuda</option>    <option value="BT" {{if $data.value === "BT"}}selected="selected"{{/if}}>Bhutan</option>    <option value="BO" {{if $data.value === "BO"}}selected="selected"{{/if}}>Bolivia</option>    <option value="BA" {{if $data.value === "BA"}}selected="selected"{{/if}}>Bosnia and Herzegovina</option>    <option value="BW" {{if $data.value === "BW"}}selected="selected"{{/if}}>Botswana</option>    <option value="BV" {{if $data.value === "BV"}}selected="selected"{{/if}}>Bouvet Island</option>    <option value="BR" {{if $data.value === "BR"}}selected="selected"{{/if}}>Brazil</option>    <option value="IO" {{if $data.value === "IO"}}selected="selected"{{/if}}>British Indian Ocean Territory</option>    <option value="BN" {{if $data.value === "BN"}}selected="selected"{{/if}}>Brunei Darussalam</option>    <option value="BG" {{if $data.value === "BG"}}selected="selected"{{/if}}>Bulgaria</option>    <option value="BF" {{if $data.value === "BF"}}selected="selected"{{/if}}>Burkina Faso</option>    <option value="BI" {{if $data.value === "BI"}}selected="selected"{{/if}}>Burundi</option>    <option value="KH" {{if $data.value === "KH"}}selected="selected"{{/if}}>Cambodia</option>    <option value="CM" {{if $data.value === "CM"}}selected="selected"{{/if}}>Cameroon</option>    <option value="CA" {{if $data.value === "CA"}}selected="selected"{{/if}}>Canada</option>    <option value="CV" {{if $data.value === "CV"}}selected="selected"{{/if}}>Cape Verde</option>    <option value="KY" {{if $data.value === "KY"}}selected="selected"{{/if}}>Cayman Islands</option>    <option value="CF" {{if $data.value === "CF"}}selected="selected"{{/if}}>Central African Republic</option>    <option value="TD" {{if $data.value === "TD"}}selected="selected"{{/if}}>Chad</option>    <option value="CL" {{if $data.value === "CL"}}selected="selected"{{/if}}>Chile</option>    <option value="CN" {{if $data.value === "CN"}}selected="selected"{{/if}}>China</option>    <option value="CX" {{if $data.value === "CX"}}selected="selected"{{/if}}>Christmas Island</option>    <option value="CC" {{if $data.value === "CC"}}selected="selected"{{/if}}>Cocos (Keeling) Islands</option>    <option value="CO" {{if $data.value === "CO"}}selected="selected"{{/if}}>Colombia</option>    <option value="KM" {{if $data.value === "KM"}}selected="selected"{{/if}}>Comoros</option>    <option value="CG" {{if $data.value === "CG"}}selected="selected"{{/if}}>Congo</option>    <option value="CD" {{if $data.value === "CD"}}selected="selected"{{/if}}>Congo, The Democratic Republic of the</option>    <option value="CK" {{if $data.value === "CK"}}selected="selected"{{/if}}>Cook Islands</option>    <option value="CR" {{if $data.value === "CR"}}selected="selected"{{/if}}>Costa Rica</option>    <option value="CI" {{if $data.value === "CI"}}selected="selected"{{/if}}>C\u00f4te d\'Ivoire</option>    <option value="HR" {{if $data.value === "HR"}}selected="selected"{{/if}}>Croatia</option>    <option value="CU" {{if $data.value === "CU"}}selected="selected"{{/if}}>Cuba</option>    <option value="CY" {{if $data.value === "CY"}}selected="selected"{{/if}}>Cyprus</option>    <option value="CZ" {{if $data.value === "CZ"}}selected="selected"{{/if}}>Czech Republic</option>    <option value="DK" {{if $data.value === "DK"}}selected="selected"{{/if}}>Denmark</option>    <option value="DJ" {{if $data.value === "DJ"}}selected="selected"{{/if}}>Djibouti</option>    <option value="DM" {{if $data.value === "DM"}}selected="selected"{{/if}}>Dominica</option>    <option value="DO" {{if $data.value === "DO"}}selected="selected"{{/if}}>Dominican Republic</option>    <option value="EC" {{if $data.value === "EC"}}selected="selected"{{/if}}>Ecuador</option>    <option value="EG" {{if $data.value === "EG"}}selected="selected"{{/if}}>Egypt</option>    <option value="SV" {{if $data.value === "SV"}}selected="selected"{{/if}}>El Salvador</option>    <option value="GQ" {{if $data.value === "GQ"}}selected="selected"{{/if}}>Equatorial Guinea</option>    <option value="ER" {{if $data.value === "ER"}}selected="selected"{{/if}}>Eritrea</option>    <option value="EE" {{if $data.value === "EE"}}selected="selected"{{/if}}>Estonia</option>    <option value="ET" {{if $data.value === "ET"}}selected="selected"{{/if}}>Ethiopia</option>    <option value="EU" {{if $data.value === "EU"}}selected="selected"{{/if}}>Europe</option>    <option value="FK" {{if $data.value === "FK"}}selected="selected"{{/if}}>Falkland Islands (Malvinas)</option>    <option value="FO" {{if $data.value === "FO"}}selected="selected"{{/if}}>Faroe Islands</option>    <option value="FJ" {{if $data.value === "FJ"}}selected="selected"{{/if}}>Fiji</option>    <option value="FI" {{if $data.value === "FI"}}selected="selected"{{/if}}>Finland</option>    <option value="FR" {{if $data.value === "FR"}}selected="selected"{{/if}}>France</option>    <option value="FX" {{if $data.value === "FX"}}selected="selected"{{/if}}>France, Metropolitan</option>    <option value="GF" {{if $data.value === "GF"}}selected="selected"{{/if}}>French Guiana</option>    <option value="PF" {{if $data.value === "PF"}}selected="selected"{{/if}}>French Polynesia</option>    <option value="TF" {{if $data.value === "TF"}}selected="selected"{{/if}}>French Southern Territories</option>    <option value="GA" {{if $data.value === "GA"}}selected="selected"{{/if}}>Gabon</option>    <option value="GM" {{if $data.value === "GM"}}selected="selected"{{/if}}>Gambia</option>    <option value="GE" {{if $data.value === "GE"}}selected="selected"{{/if}}>Georgia</option>    <option value="DE" {{if $data.value === "DE"}}selected="selected"{{/if}}>Germany</option>    <option value="GH" {{if $data.value === "GH"}}selected="selected"{{/if}}>Ghana</option>    <option value="GI" {{if $data.value === "GI"}}selected="selected"{{/if}}>Gibraltar</option>    <option value="GR" {{if $data.value === "GR"}}selected="selected"{{/if}}>Greece</option>    <option value="GL" {{if $data.value === "GL"}}selected="selected"{{/if}}>Greenland</option>    <option value="GD" {{if $data.value === "GD"}}selected="selected"{{/if}}>Grenada</option>    <option value="GP" {{if $data.value === "GP"}}selected="selected"{{/if}}>Guadeloupe</option>    <option value="GU" {{if $data.value === "GU"}}selected="selected"{{/if}}>Guam</option>    <option value="GT" {{if $data.value === "GT"}}selected="selected"{{/if}}>Guatemala</option>    <option value="GG" {{if $data.value === "GG"}}selected="selected"{{/if}}>Guernsey</option>    <option value="GN" {{if $data.value === "GN"}}selected="selected"{{/if}}>Guinea</option>    <option value="GW" {{if $data.value === "GW"}}selected="selected"{{/if}}>Guinea-Bissau</option>    <option value="GY" {{if $data.value === "GY"}}selected="selected"{{/if}}>Guyana</option>    <option value="HT" {{if $data.value === "HT"}}selected="selected"{{/if}}>Haiti</option>    <option value="HM" {{if $data.value === "HM"}}selected="selected"{{/if}}>Heard Island and McDonald Islands</option>    <option value="VA" {{if $data.value === "VA"}}selected="selected"{{/if}}>Holy See (Vatican City State)</option>    <option value="HN" {{if $data.value === "HN"}}selected="selected"{{/if}}>Honduras</option>    <option value="HK" {{if $data.value === "HK"}}selected="selected"{{/if}}>Hong Kong</option>    <option value="HU" {{if $data.value === "HU"}}selected="selected"{{/if}}>Hungary</option>    <option value="IS" {{if $data.value === "IS"}}selected="selected"{{/if}}>Iceland</option>    <option value="IN" {{if $data.value === "IN"}}selected="selected"{{/if}}>India</option>    <option value="ID" {{if $data.value === "ID"}}selected="selected"{{/if}}>Indonesia</option>    <option value="IR" {{if $data.value === "IR"}}selected="selected"{{/if}}>Iran, Islamic Republic of</option>    <option value="IQ" {{if $data.value === "IQ"}}selected="selected"{{/if}}>Iraq</option>    <option value="IE" {{if $data.value === "IE"}}selected="selected"{{/if}}>Ireland</option>    <option value="IM" {{if $data.value === "IM"}}selected="selected"{{/if}}>Isle of Man</option>    <option value="IL" {{if $data.value === "IL"}}selected="selected"{{/if}}>Israel</option>    <option value="IT" {{if $data.value === "IT"}}selected="selected"{{/if}}>Italy</option>    <option value="JM" {{if $data.value === "JM"}}selected="selected"{{/if}}>Jamaica</option>    <option value="JP" {{if $data.value === "JP"}}selected="selected"{{/if}}>Japan</option>    <option value="JE" {{if $data.value === "JE"}}selected="selected"{{/if}}>Jersey</option>    <option value="JO" {{if $data.value === "JO"}}selected="selected"{{/if}}>Jordan</option>    <option value="KZ" {{if $data.value === "KZ"}}selected="selected"{{/if}}>Kazakhstan</option>    <option value="KE" {{if $data.value === "KE"}}selected="selected"{{/if}}>Kenya</option>    <option value="KI" {{if $data.value === "KI"}}selected="selected"{{/if}}>Kiribati</option>    <option value="KP" {{if $data.value === "KP"}}selected="selected"{{/if}}>Korea, Democratic People\'s Republic of</option>    <option value="KR" {{if $data.value === "KR"}}selected="selected"{{/if}}>Korea, Republic of</option>    <option value="KW" {{if $data.value === "KW"}}selected="selected"{{/if}}>Kuwait</option>    <option value="KG" {{if $data.value === "KG"}}selected="selected"{{/if}}>Kyrgyzstan</option>    <option value="LA" {{if $data.value === "LA"}}selected="selected"{{/if}}>Lao People\'s Democratic Republic</option>    <option value="LV" {{if $data.value === "LV"}}selected="selected"{{/if}}>Latvia</option>    <option value="LB" {{if $data.value === "LB"}}selected="selected"{{/if}}>Lebanon</option>    <option value="LS" {{if $data.value === "LS"}}selected="selected"{{/if}}>Lesotho</option>    <option value="LR" {{if $data.value === "LR"}}selected="selected"{{/if}}>Liberia</option>    <option value="LY" {{if $data.value === "LY"}}selected="selected"{{/if}}>Libyan Arab Jamahiriya</option>    <option value="LI" {{if $data.value === "LI"}}selected="selected"{{/if}}>Liechtenstein</option>    <option value="LT" {{if $data.value === "LT"}}selected="selected"{{/if}}>Lithuania</option>    <option value="LU" {{if $data.value === "LU"}}selected="selected"{{/if}}>Luxembourg</option>    <option value="MO" {{if $data.value === "MO"}}selected="selected"{{/if}}>Macao</option>    <option value="MK" {{if $data.value === "MK"}}selected="selected"{{/if}}>Macedonia</option>    <option value="MG" {{if $data.value === "MG"}}selected="selected"{{/if}}>Madagascar</option>    <option value="MW" {{if $data.value === "MW"}}selected="selected"{{/if}}>Malawi</option>    <option value="MY" {{if $data.value === "MY"}}selected="selected"{{/if}}>Malaysia</option>    <option value="MV" {{if $data.value === "MV"}}selected="selected"{{/if}}>Maldives</option>    <option value="ML" {{if $data.value === "ML"}}selected="selected"{{/if}}>Mali</option>    <option value="MT" {{if $data.value === "MT"}}selected="selected"{{/if}}>Malta</option>    <option value="MH" {{if $data.value === "MH"}}selected="selected"{{/if}}>Marshall Islands</option>    <option value="MQ" {{if $data.value === "MQ"}}selected="selected"{{/if}}>Martinique</option>    <option value="MR" {{if $data.value === "MR"}}selected="selected"{{/if}}>Mauritania</option>    <option value="MU" {{if $data.value === "MU"}}selected="selected"{{/if}}>Mauritius</option>    <option value="YT" {{if $data.value === "YT"}}selected="selected"{{/if}}>Mayotte</option>    <option value="MX" {{if $data.value === "MX"}}selected="selected"{{/if}}>Mexico</option>    <option value="FM" {{if $data.value === "FM"}}selected="selected"{{/if}}>Micronesia, Federated States of</option>    <option value="MD" {{if $data.value === "MD"}}selected="selected"{{/if}}>Moldova</option>    <option value="MC" {{if $data.value === "MC"}}selected="selected"{{/if}}>Monaco</option>    <option value="MN" {{if $data.value === "MN"}}selected="selected"{{/if}}>Mongolia</option>    <option value="ME" {{if $data.value === "ME"}}selected="selected"{{/if}}>Montenegro</option>    <option value="MS" {{if $data.value === "MS"}}selected="selected"{{/if}}>Montserrat</option>    <option value="MA" {{if $data.value === "MA"}}selected="selected"{{/if}}>Morocco</option>    <option value="MZ" {{if $data.value === "MZ"}}selected="selected"{{/if}}>Mozambique</option>    <option value="MM" {{if $data.value === "MM"}}selected="selected"{{/if}}>Myanmar</option>    <option value="NA" {{if $data.value === "NA"}}selected="selected"{{/if}}>Namibia</option>    <option value="NR" {{if $data.value === "NR"}}selected="selected"{{/if}}>Nauru</option>    <option value="NP" {{if $data.value === "NP"}}selected="selected"{{/if}}>Nepal</option>    <option value="NL" {{if $data.value === "NL"}}selected="selected"{{/if}}>Netherlands</option>    <option value="AN" {{if $data.value === "AN"}}selected="selected"{{/if}}>Netherlands Antilles</option>    <option value="NC" {{if $data.value === "NC"}}selected="selected"{{/if}}>New Caledonia</option>    <option value="NZ" {{if $data.value === "NZ"}}selected="selected"{{/if}}>New Zealand</option>    <option value="NI" {{if $data.value === "NI"}}selected="selected"{{/if}}>Nicaragua</option>    <option value="NE" {{if $data.value === "NE"}}selected="selected"{{/if}}>Niger</option>    <option value="NG" {{if $data.value === "NG"}}selected="selected"{{/if}}>Nigeria</option>    <option value="NU" {{if $data.value === "NU"}}selected="selected"{{/if}}>Niue</option>    <option value="NF" {{if $data.value === "NF"}}selected="selected"{{/if}}>Norfolk Island</option>    <option value="MP" {{if $data.value === "MP"}}selected="selected"{{/if}}>Northern Mariana Islands</option>    <option value="NO" {{if $data.value === "NO"}}selected="selected"{{/if}}>Norway</option>    <option value="OM" {{if $data.value === "OM"}}selected="selected"{{/if}}>Oman</option>    <option value="PK" {{if $data.value === "PK"}}selected="selected"{{/if}}>Pakistan</option>    <option value="PW" {{if $data.value === "PW"}}selected="selected"{{/if}}>Palau</option>    <option value="PS" {{if $data.value === "PS"}}selected="selected"{{/if}}>Palestinian Territory</option>    <option value="PA" {{if $data.value === "PA"}}selected="selected"{{/if}}>Panama</option>    <option value="PG" {{if $data.value === "PG"}}selected="selected"{{/if}}>Papua New Guinea</option>    <option value="PY" {{if $data.value === "PY"}}selected="selected"{{/if}}>Paraguay</option>    <option value="PE" {{if $data.value === "PE"}}selected="selected"{{/if}}>Peru</option>    <option value="PH" {{if $data.value === "PH"}}selected="selected"{{/if}}>Philippines</option>    <option value="PN" {{if $data.value === "PN"}}selected="selected"{{/if}}>Pitcairn</option>    <option value="PL" {{if $data.value === "PL"}}selected="selected"{{/if}}>Poland</option>    <option value="PT" {{if $data.value === "PT"}}selected="selected"{{/if}}>Portugal</option>    <option value="PR" {{if $data.value === "PR"}}selected="selected"{{/if}}>Puerto Rico</option>    <option value="QA" {{if $data.value === "QA"}}selected="selected"{{/if}}>Qatar</option>    <option value="RE" {{if $data.value === "RE"}}selected="selected"{{/if}}>Reunion</option>    <option value="RO" {{if $data.value === "RO"}}selected="selected"{{/if}}>Romania</option>    <option value="RU" {{if $data.value === "RU"}}selected="selected"{{/if}}>Russian Federation</option>    <option value="RW" {{if $data.value === "RW"}}selected="selected"{{/if}}>Rwanda</option>    <option value="BL" {{if $data.value === "BL"}}selected="selected"{{/if}}>Saint Barth\u00e9lemy</option>    <option value="SH" {{if $data.value === "SH"}}selected="selected"{{/if}}>Saint Helena</option>    <option value="KN" {{if $data.value === "KN"}}selected="selected"{{/if}}>Saint Kitts and Nevis</option>    <option value="LC" {{if $data.value === "LC"}}selected="selected"{{/if}}>Saint Lucia</option>    <option value="MF" {{if $data.value === "MF"}}selected="selected"{{/if}}>Saint Martin</option>    <option value="PM" {{if $data.value === "PM"}}selected="selected"{{/if}}>Saint Pierre and Miquelon</option>    <option value="VC" {{if $data.value === "VC"}}selected="selected"{{/if}}>Saint Vincent and the Grenadines</option>    <option value="WS" {{if $data.value === "WS"}}selected="selected"{{/if}}>Samoa</option>    <option value="SM" {{if $data.value === "SM"}}selected="selected"{{/if}}>San Marino</option>    <option value="ST" {{if $data.value === "ST"}}selected="selected"{{/if}}>Sao Tome and Principe</option>    <option value="SA" {{if $data.value === "SA"}}selected="selected"{{/if}}>Saudi Arabia</option>    <option value="SN" {{if $data.value === "SN"}}selected="selected"{{/if}}>Senegal</option>    <option value="RS" {{if $data.value === "RS"}}selected="selected"{{/if}}>Serbia</option>    <option value="SC" {{if $data.value === "SC"}}selected="selected"{{/if}}>Seychelles</option>    <option value="SL" {{if $data.value === "SL"}}selected="selected"{{/if}}>Sierra Leone</option>    <option value="SG" {{if $data.value === "SG"}}selected="selected"{{/if}}>Singapore</option>    <option value="SK" {{if $data.value === "SK"}}selected="selected"{{/if}}>Slovakia</option>    <option value="SI" {{if $data.value === "SI"}}selected="selected"{{/if}}>Slovenia</option>    <option value="SB" {{if $data.value === "SB"}}selected="selected"{{/if}}>Solomon Islands</option>    <option value="SO" {{if $data.value === "SO"}}selected="selected"{{/if}}>Somalia</option>    <option value="ZA" {{if $data.value === "ZA"}}selected="selected"{{/if}}>South Africa</option>    <option value="GS" {{if $data.value === "GS"}}selected="selected"{{/if}}>South Georgia and the South Sandwich Islands</option>    <option value="ES" {{if $data.value === "ES"}}selected="selected"{{/if}}>Spain</option>    <option value="LK" {{if $data.value === "LK"}}selected="selected"{{/if}}>Sri Lanka</option>    <option value="SD" {{if $data.value === "SD"}}selected="selected"{{/if}}>Sudan</option>    <option value="SR" {{if $data.value === "SR"}}selected="selected"{{/if}}>Suriname</option>    <option value="SJ" {{if $data.value === "SJ"}}selected="selected"{{/if}}>Svalbard and Jan Mayen</option>    <option value="SZ" {{if $data.value === "SZ"}}selected="selected"{{/if}}>Swaziland</option>    <option value="SE" {{if $data.value === "SE"}}selected="selected"{{/if}}>Sweden</option>    <option value="CH" {{if $data.value === "CH"}}selected="selected"{{/if}}>Switzerland</option>    <option value="SY" {{if $data.value === "SY"}}selected="selected"{{/if}}>Syrian Arab Republic</option>    <option value="TW" {{if $data.value === "TW"}}selected="selected"{{/if}}>Taiwan</option>    <option value="TJ" {{if $data.value === "TJ"}}selected="selected"{{/if}}>Tajikistan</option>    <option value="TZ" {{if $data.value === "TZ"}}selected="selected"{{/if}}>Tanzania, United Republic of</option>    <option value="TH" {{if $data.value === "TH"}}selected="selected"{{/if}}>Thailand</option>    <option value="TL" {{if $data.value === "TL"}}selected="selected"{{/if}}>Timor-Leste</option>    <option value="TG" {{if $data.value === "TG"}}selected="selected"{{/if}}>Togo</option>    <option value="TK" {{if $data.value === "TK"}}selected="selected"{{/if}}>Tokelau</option>    <option value="TO" {{if $data.value === "TO"}}selected="selected"{{/if}}>Tonga</option>    <option value="TT" {{if $data.value === "TT"}}selected="selected"{{/if}}>Trinidad and Tobago</option>    <option value="TN" {{if $data.value === "TN"}}selected="selected"{{/if}}>Tunisia</option>    <option value="TR" {{if $data.value === "TR"}}selected="selected"{{/if}}>Turkey</option>    <option value="TM" {{if $data.value === "TM"}}selected="selected"{{/if}}>Turkmenistan</option>    <option value="TC" {{if $data.value === "TC"}}selected="selected"{{/if}}>Turks and Caicos Islands</option>    <option value="TV" {{if $data.value === "TV"}}selected="selected"{{/if}}>Tuvalu</option>    <option value="UG" {{if $data.value === "UG"}}selected="selected"{{/if}}>Uganda</option>    <option value="UA" {{if $data.value === "UA"}}selected="selected"{{/if}}>Ukraine</option>    <option value="AE" {{if $data.value === "AE"}}selected="selected"{{/if}}>United Arab Emirates</option>    <option value="GB" {{if $data.value === "GB"}}selected="selected"{{/if}}>United Kingdom</option>    <option value="US" {{if $data.value === "US"}}selected="selected"{{/if}}>United States</option>    <option value="UM" {{if $data.value === "UM"}}selected="selected"{{/if}}>United States Minor Outlying Islands</option>    <option value="UY" {{if $data.value === "UY"}}selected="selected"{{/if}}>Uruguay</option>    <option value="UZ" {{if $data.value === "UZ"}}selected="selected"{{/if}}>Uzbekistan</option>    <option value="VU" {{if $data.value === "VU"}}selected="selected"{{/if}}>Vanuatu</option>    <option value="VE" {{if $data.value === "VE"}}selected="selected"{{/if}}>Venezuela</option>    <option value="VN" {{if $data.value === "VN"}}selected="selected"{{/if}}>Vietnam</option>    <option value="VG" {{if $data.value === "VG"}}selected="selected"{{/if}}>Virgin Islands, British</option>    <option value="VI" {{if $data.value === "VI"}}selected="selected"{{/if}}>Virgin Islands, U.S.</option>    <option value="WF" {{if $data.value === "WF"}}selected="selected"{{/if}}>Wallis and Futuna</option>    <option value="EH" {{if $data.value === "EH"}}selected="selected"{{/if}}>Western Sahara</option>    <option value="YE" {{if $data.value === "YE"}}selected="selected"{{/if}}>Yemen</option>    <option value="ZM" {{if $data.value === "ZM"}}selected="selected"{{/if}}>Zambia</option>    <option value="ZW" {{if $data.value === "ZW"}}selected="selected"{{/if}}>Zimbabwe</option></select>');
$.template("slot_text",'<section class="slot s-text ${data_source_kind}">    <p class="content"></p></section>');$.template("public_info",'<menu id="public-info">    <ul>        <li>            <h1>            ${label}            </h1>        </li>        <li>            <ul class="actions">                {{if can_use_tvmode}}                <li>                    <a href="#tvmode" class="tvmode">                        <i class="icon-tvmode"></i>                    </a>                </li>                {{/if}}                {{if !no_branding}}                <li>                    <a href="http://ducksboard.com" class="ducksboard" title="ducksboard.com" target="_blank">                        <i class="icon-ducksboard"></i>                    </a>                </li>                {{/if}}            </ul>        </li>    </ul></menu>{{if is_sponsored}}     <div class="corner">        <a href="http://ducksboard.com" target="_blank">            Powered by <strong>Ducksboard</strong>        </a>    </ldiv{{/if}}');
$.template("slot_funnel_item",'<tr>    <th>        <strong class="label">${name}</strong>        <em class="amount">${amount} {{if percent_lost}}/ ${percent_lost}% {{/if}}</em>    </th>    <td>        <div>            <div>                <span class="bar"><span></span></span>            </div>        </div>        <strong class="percent">${percent}%</strong>    </td></tr>');
(function(a,j){function e(e,b){var f=e.nodeName.toLowerCase();if("area"===f){var f=e.parentNode,h=f.name;if(!e.href||!h||f.nodeName.toLowerCase()!=="map")return false;f=a("img[usemap=#"+h+"]")[0];return!!f&&d(f)}return(/input|select|textarea|button|object/.test(f)?!e.disabled:"a"==f?e.href||b:b)&&d(e)}function d(d){return!a(d).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.21",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(d,b){return typeof d==="number"?this.each(function(){var f=
this;setTimeout(function(){a(f).focus();b&&b.call(f)},d)}):this._focus.apply(this,arguments)},scrollParent:function(){var d;d=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,
"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!d.length?a(document):d},zIndex:function(d){if(d!==j)return this.css("zIndex",d);if(this.length)for(var d=a(this[0]),b;d.length&&d[0]!==document;){b=d.css("position");if(b==="absolute"||b==="relative"||b==="fixed"){b=parseInt(d.css("zIndex"),10);if(!isNaN(b)&&b!==0)return b}d=d.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.each(["Width","Height"],function(d,b){function f(b,d,f,g){a.each(e,function(){d=d-(parseFloat(a.curCSS(b,"padding"+this,true))||0);f&&(d=d-(parseFloat(a.curCSS(b,"border"+this+"Width",true))||0));g&&(d=d-(parseFloat(a.curCSS(b,"margin"+this,true))||0))});return d}var e=b==="Width"?["Left","Right"]:["Top","Bottom"],o=b.toLowerCase(),u={innerWidth:a.fn.innerWidth,
innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+b]=function(d){return d===j?u["inner"+b].call(this):this.each(function(){a(this).css(o,f(this,d)+"px")})};a.fn["outer"+b]=function(d,e){return typeof d!=="number"?u["outer"+b].call(this,d):this.each(function(){a(this).css(o,f(this,d,true,e)+"px")})}});a.extend(a.expr[":"],{data:function(d,b,f){return!!a.data(d,f[3])},focusable:function(d){return e(d,!isNaN(a.attr(d,"tabindex")))},tabbable:function(d){var b=
a.attr(d,"tabindex"),f=isNaN(b);return(f||b>=0)&&e(d,!f)}});a(function(){var d=document.body,b=d.appendChild(b=document.createElement("div"));b.offsetHeight;a.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=b.offsetHeight===100;a.support.selectstart="onselectstart"in b;d.removeChild(b).style.display="none"});a.extend(a.ui,{plugin:{add:function(d,b,f){var d=a.ui[d].prototype,e;for(e in f){d.plugins[e]=d.plugins[e]||[];d.plugins[e].push([b,f[e]])}},call:function(a,
b,d){if((b=a.plugins[b])&&a.element[0].parentNode)for(var e=0;e<b.length;e++)a.options[b[e][0]]&&b[e][1].apply(a.element,d)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(d,b){if(a(d).css("overflow")==="hidden")return false;var f=b&&b==="left"?"scrollLeft":"scrollTop",e=false;if(d[f]>0)return true;d[f]=1;e=d[f]>0;d[f]=0;return e},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(d,b,f,e,j,u){return a.ui.isOverAxis(d,
f,j)&&a.ui.isOverAxis(b,e,u)}})}})(jQuery);
(function(a,j){if(a.cleanData){var e=a.cleanData;a.cleanData=function(d){for(var b=0,f;(f=d[b])!=null;b++)try{a(f).triggerHandler("remove")}catch(h){}e(d)}}else{var d=a.fn.remove;a.fn.remove=function(e,b){return this.each(function(){b||(!e||a.filter(e,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}});return d.call(a(this),e,b)})}}a.widget=function(d,b,f){var e=d.split(".")[0],j,d=d.split(".")[1];j=e+"-"+d;if(!f){f=b;b=a.Widget}a.expr[":"][j]=
function(b){return!!a.data(b,d)};a[e]=a[e]||{};a[e][d]=function(a,b){arguments.length&&this._createWidget(a,b)};b=new b;b.options=a.extend(true,{},b.options);a[e][d].prototype=a.extend(true,b,{namespace:e,widgetName:d,widgetEventPrefix:a[e][d].prototype.widgetEventPrefix||d,widgetBaseClass:j},f);a.widget.bridge(d,a[e][d])};a.widget.bridge=function(d,b){a.fn[d]=function(f){var e=typeof f==="string",o=Array.prototype.slice.call(arguments,1),u=this,f=!e&&o.length?a.extend.apply(null,[true,f].concat(o)):
f;if(e&&f.charAt(0)==="_")return u;e?this.each(function(){var b=a.data(this,d),e=b&&a.isFunction(b[f])?b[f].apply(b,o):b;if(e!==b&&e!==j){u=e;return false}}):this.each(function(){var e=a.data(this,d);e?e.option(f||{})._init():a.data(this,d,new b(f,this))});return u}};a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(d,b){a.data(b,this.widgetName,this);this.element=a(b);this.options=
a.extend(true,{},this.options,this._getCreateOptions(),d);var f=this;this.element.bind("remove."+this.widgetName,function(){f.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(d,b){var f=d;if(arguments.length===0)return a.extend({},this.options);if(typeof d==="string"){if(b===j)return this.options[d];f={};f[d]=b}this._setOptions(f);return this},_setOptions:function(d){var b=this;a.each(d,function(a,d){b._setOption(a,d)});return this},_setOption:function(a,b){this.options[a]=b;a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
b);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(d,b,f){var e,j=this.options[d],f=f||{},b=a.Event(b);b.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase();b.target=this.element[0];if(d=b.originalEvent)for(e in d)e in b||(b[e]=d[e]);this.element.trigger(b,f);return!(a.isFunction(j)&&j.call(this.element[0],b,f)===false||b.isDefaultPrevented())}}})(jQuery);
(function(a){var j=false;a(document).mouseup(function(){j=false});a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(a){return e._mouseDown(a)}).bind("click."+this.widgetName,function(d){if(true===a.data(d.target,e.widgetName+".preventClickEvent")){a.removeData(d.target,e.widgetName+".preventClickEvent");d.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName);a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!j){this._mouseStarted&&this._mouseUp(e);this._mouseDownEvent=e;var d=this,g=e.which==1,b=typeof this.options.cancel=="string"&&e.target.nodeName?a(e.target).closest(this.options.cancel).length:false;if(!g||b||!this._mouseCapture(e))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=
setTimeout(function(){d.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=this._mouseStart(e)!==false;if(!this._mouseStarted){e.preventDefault();return true}}true===a.data(e.target,this.widgetName+".preventClickEvent")&&a.removeData(e.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return d._mouseMove(a)};this._mouseUpDelegate=function(a){return d._mouseUp(a)};a(document).bind("mousemove."+this.widgetName,
this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);e.preventDefault();return j=true}},_mouseMove:function(e){if(a.browser.msie&&!(document.documentMode>=9)&&!e.button)return this._mouseUp(e);if(this._mouseStarted){this._mouseDrag(e);return e.preventDefault()}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==false)?this._mouseDrag(e):this._mouseUp(e);return!this._mouseStarted},_mouseUp:function(e){a(document).unbind("mousemove."+
this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;e.target==this._mouseDownEvent.target&&a.data(e.target,this.widgetName+".preventClickEvent",true);this._mouseStop(e)}return false},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},
_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(a){a.ui=a.ui||{};var j=/left|center|right/,e=/top|center|bottom/,d={},g=a.fn.position,b=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);var b=a.extend({},b),f=a(b.of),h=f[0],o=(b.collision||"flip").split(" "),u=b.offset?b.offset.split(" "):[0,0],q,z,E;if(h.nodeType===9){q=f.width();z=f.height();E={top:0,left:0}}else if(h.setTimeout){q=f.width();z=f.height();E={top:f.scrollTop(),left:f.scrollLeft()}}else if(h.preventDefault){b.at="left top";q=z=0;E={top:b.of.pageY,
left:b.of.pageX}}else{q=f.outerWidth();z=f.outerHeight();E=f.offset()}a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=j.test(a[0])?a.concat(["center"]):e.test(a[0])?["center"].concat(a):["center","center"]);a[0]=j.test(a[0])?a[0]:"center";a[1]=e.test(a[1])?a[1]:"center";b[this]=a});o.length===1&&(o[1]=o[0]);u[0]=parseInt(u[0],10)||0;u.length===1&&(u[1]=u[0]);u[1]=parseInt(u[1],10)||0;if(b.at[0]==="right")E.left=E.left+q;else if(b.at[0]==="center")E.left=E.left+q/2;if(b.at[1]===
"bottom")E.top=E.top+z;else if(b.at[1]==="center")E.top=E.top+z/2;E.left=E.left+u[0];E.top=E.top+u[1];return this.each(function(){var f=a(this),e=f.outerWidth(),h=f.outerHeight(),g=parseInt(a.curCSS(this,"marginLeft",true))||0,k=parseInt(a.curCSS(this,"marginTop",true))||0,j=e+g+(parseInt(a.curCSS(this,"marginRight",true))||0),n=h+k+(parseInt(a.curCSS(this,"marginBottom",true))||0),K=a.extend({},E),m;if(b.my[0]==="right")K.left=K.left-e;else if(b.my[0]==="center")K.left=K.left-e/2;if(b.my[1]==="bottom")K.top=
K.top-h;else if(b.my[1]==="center")K.top=K.top-h/2;if(!d.fractions){K.left=Math.round(K.left);K.top=Math.round(K.top)}m={left:K.left-g,top:K.top-k};a.each(["left","top"],function(d,f){if(a.ui.position[o[d]])a.ui.position[o[d]][f](K,{targetWidth:q,targetHeight:z,elemWidth:e,elemHeight:h,collisionPosition:m,collisionWidth:j,collisionHeight:n,offset:u,my:b.my,at:b.at})});a.fn.bgiframe&&f.bgiframe();f.offset(a.extend(K,{using:b.using}))})};a.ui.position={fit:{left:function(b,d){var f=a(window),f=d.collisionPosition.left+
d.collisionWidth-f.width()-f.scrollLeft();b.left=f>0?b.left-f:Math.max(b.left-d.collisionPosition.left,b.left)},top:function(b,d){var f=a(window),f=d.collisionPosition.top+d.collisionHeight-f.height()-f.scrollTop();b.top=f>0?b.top-f:Math.max(b.top-d.collisionPosition.top,b.top)}},flip:{left:function(b,d){if(d.at[0]!=="center"){var f=a(window),f=d.collisionPosition.left+d.collisionWidth-f.width()-f.scrollLeft(),e=d.my[0]==="left"?-d.elemWidth:d.my[0]==="right"?d.elemWidth:0,h=d.at[0]==="left"?d.targetWidth:
-d.targetWidth,g=-2*d.offset[0];b.left=b.left+(d.collisionPosition.left<0?e+h+g:f>0?e+h+g:0)}},top:function(b,d){if(d.at[1]!=="center"){var f=a(window),f=d.collisionPosition.top+d.collisionHeight-f.height()-f.scrollTop(),e=d.my[1]==="top"?-d.elemHeight:d.my[1]==="bottom"?d.elemHeight:0,h=d.at[1]==="top"?d.targetHeight:-d.targetHeight,g=-2*d.offset[1];b.top=b.top+(d.collisionPosition.top<0?e+h+g:f>0?e+h+g:0)}}}};if(!a.offset.setOffset){a.offset.setOffset=function(b,d){if(/static/.test(a.curCSS(b,"position")))b.style.position=
"relative";var f=a(b),e=f.offset(),h=parseInt(a.curCSS(b,"top",true),10)||0,g=parseInt(a.curCSS(b,"left",true),10)||0,e={top:d.top-e.top+h,left:d.left-e.left+g};"using"in d?d.using.call(b,e):f.css(e)};a.fn.offset=function(d){var f=this[0];return!f||!f.ownerDocument?null:d?a.isFunction(d)?this.each(function(b){a(this).offset(d.call(this,b,a(this).offset()))}):this.each(function(){a.offset.setOffset(this,d)}):b.call(this)}}var f=document.getElementsByTagName("body")[0],h=document.createElement("div"),
o,u;o=document.createElement(f?"div":"body");u={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};f&&a.extend(u,{position:"absolute",left:"-1000px",top:"-1000px"});for(var q in u)o.style[q]=u[q];o.appendChild(h);u=f||document.documentElement;u.insertBefore(o,u.firstChild);h.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;";h=a(h).offset(function(a,b){return b}).offset();o.innerHTML="";u.removeChild(o);f=h.top+h.left+(f?2E3:
0);d.fractions=f>21&&f<22})(jQuery);
(function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var j=this;this.element.addClass("ui-selectable");this.dragged=false;var e;this.refresh=function(){e=a(j.options.filter,j.element[0]);e.addClass("ui-selectee");e.each(function(){var d=a(this),e=d.offset();a.data(this,"selectable-item",{element:this,$element:d,left:e.left,top:e.top,right:e.left+d.outerWidth(),bottom:e.top+d.outerHeight(),startselected:false,
selected:d.hasClass("ui-selected"),selecting:d.hasClass("ui-selecting"),unselecting:d.hasClass("ui-unselecting")})})};this.refresh();this.selectees=e.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(j){var e=
this;this.opos=[j.pageX,j.pageY];if(!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]);this._trigger("start",j);a(d.appendTo).append(this.helper);this.helper.css({left:j.clientX,top:j.clientY,width:0,height:0});d.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=true;if(!j.metaKey&&!j.ctrlKey){d.$element.removeClass("ui-selected");d.selected=false;d.$element.addClass("ui-unselecting");
d.unselecting=true;e._trigger("unselecting",j,{unselecting:d.element})}});a(j.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var b=!j.metaKey&&!j.ctrlKey||!d.$element.hasClass("ui-selected");d.$element.removeClass(b?"ui-unselecting":"ui-selected").addClass(b?"ui-selecting":"ui-unselecting");d.unselecting=!b;d.selecting=b;(d.selected=b)?e._trigger("selecting",j,{selecting:d.element}):e._trigger("unselecting",j,{unselecting:d.element});return false}})}},_mouseDrag:function(j){var e=
this;this.dragged=true;if(!this.options.disabled){var d=this.options,g=this.opos[0],b=this.opos[1],f=j.pageX,h=j.pageY;if(g>f)var o=f,f=g,g=o;if(b>h){o=h;h=b;b=o}this.helper.css({left:g,top:b,width:f-g,height:h-b});this.selectees.each(function(){var o=a.data(this,"selectable-item");if(o&&o.element!=e.element[0]){var q=false;d.tolerance=="touch"?q=!(o.left>f||o.right<g||o.top>h||o.bottom<b):d.tolerance=="fit"&&(q=o.left>g&&o.right<f&&o.top>b&&o.bottom<h);if(q){if(o.selected){o.$element.removeClass("ui-selected");
o.selected=false}if(o.unselecting){o.$element.removeClass("ui-unselecting");o.unselecting=false}if(!o.selecting){o.$element.addClass("ui-selecting");o.selecting=true;e._trigger("selecting",j,{selecting:o.element})}}else{if(o.selecting)if((j.metaKey||j.ctrlKey)&&o.startselected){o.$element.removeClass("ui-selecting");o.selecting=false;o.$element.addClass("ui-selected");o.selected=true}else{o.$element.removeClass("ui-selecting");o.selecting=false;if(o.startselected){o.$element.addClass("ui-unselecting");
o.unselecting=true}e._trigger("unselecting",j,{unselecting:o.element})}if(o.selected&&!j.metaKey&&!j.ctrlKey&&!o.startselected){o.$element.removeClass("ui-selected");o.selected=false;o.$element.addClass("ui-unselecting");o.unselecting=true;e._trigger("unselecting",j,{unselecting:o.element})}}}});return false}},_mouseStop:function(j){var e=this;this.dragged=false;a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=
false;d.startselected=false;e._trigger("unselected",j,{unselected:d.element})});a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=false;d.selected=true;d.startselected=true;e._trigger("selected",j,{selected:d.element})});this._trigger("stop",j);this.helper.remove();return false}});a.extend(a.ui.selectable,{version:"1.8.21"})})(jQuery);
jQuery.effects||function(a,j){function e(b){var d;return b&&b.constructor==Array&&b.length==3?b:(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10)]:(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[parseFloat(d[1])*2.55,parseFloat(d[2])*2.55,parseFloat(d[3])*2.55]:(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(d[1],16),parseInt(d[2],
16),parseInt(d[3],16)]:(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(b)?o.transparent:o[a.trim(b).toLowerCase()]}function d(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},d,f;if(a&&a.length&&a[0]&&a[a[0]])for(var e=a.length;e--;){d=a[e];if(typeof a[d]=="string"){f=d.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()});b[f]=a[d]}}else for(d in a)typeof a[d]===
"string"&&(b[d]=a[d]);return b}function g(b){var d,f;for(d in b){f=b[d];(f==null||a.isFunction(f)||d in q||/scrollbar/.test(d)||!/color/i.test(d)&&isNaN(parseFloat(f)))&&delete b[d]}return b}function b(a,b){var d={_:0},f;for(f in b)a[f]!=b[f]&&(d[f]=b[f]);return d}function f(b,d,f,e){if(typeof b=="object"){e=d;f=null;d=b;b=d.effect}if(a.isFunction(d)){e=d;f=null;d={}}if(typeof d=="number"||a.fx.speeds[d]){e=f;f=d;d={}}if(a.isFunction(f)){e=f;f=null}d=d||{};f=f||d.duration;f=a.fx.off?0:typeof f=="number"?
f:f in a.fx.speeds?a.fx.speeds[f]:a.fx.speeds._default;e=e||d.complete;return[b,d,f,e]}function h(b){return!b||(typeof b==="number"||a.fx.speeds[b])||typeof b==="string"&&!a.effects[b]?true:false}a.effects={};a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,d){a.fx.step[d]=function(b){if(!b.colorInit){var f;f=b.elem;var h=d,g;do{g=a.curCSS(f,h);if(g!=""&&g!="transparent"||a.nodeName(f,"body"))break;
h="backgroundColor"}while(f=f.parentNode);f=e(g);b.start=f;b.end=e(b.end);b.colorInit=true}b.elem.style[d]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var o={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,
0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,
255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},u=["add","remove","toggle"],q={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(f,e,h,j){if(a.isFunction(h)){j=h;h=null}return this.queue(function(){var o=
a(this),q=o.attr("style")||" ",z=g(d.call(this)),E,B=o.attr("class")||"";a.each(u,function(a,b){if(f[b])o[b+"Class"](f[b])});E=g(d.call(this));o.attr("class",B);o.animate(b(z,E),{queue:false,duration:e,easing:h,complete:function(){a.each(u,function(a,b){if(f[b])o[b+"Class"](f[b])});if(typeof o.attr("style")=="object"){o.attr("style").cssText="";o.attr("style").cssText=q}else o.attr("style",q);j&&j.apply(this,arguments);a.dequeue(this)}})})};a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,
d,f,e){return d?a.effects.animateClass.apply(this,[{add:b},d,f,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,d,f,e){return d?a.effects.animateClass.apply(this,[{remove:b},d,f,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(b,d,f,e,h){return typeof d=="boolean"||d===j?f?a.effects.animateClass.apply(this,[d?{add:b}:{remove:b},f,e,h]):this._toggleClass(b,d):a.effects.animateClass.apply(this,[{toggle:b},d,f,e])},switchClass:function(b,d,f,e,h){return a.effects.animateClass.apply(this,
[{add:d,remove:b},f,e,h])}});a.extend(a.effects,{version:"1.8.21",save:function(a,b){for(var d=0;d<b.length;d++)b[d]!==null&&a.data("ec.storage."+b[d],a[0].style[b[d]])},restore:function(a,b){for(var d=0;d<b.length;d++)b[d]!==null&&a.css(b[d],a.data("ec.storage."+b[d]))},setMode:function(a,b){b=="toggle"&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var d,f;switch(a[0]){case "top":d=0;break;case "middle":d=0.5;break;case "bottom":d=1;break;default:d=a[0]/b.height}switch(a[1]){case "left":f=
0;break;case "center":f=0.5;break;case "right":f=1;break;default:f=a[1]/b.width}return{x:f,y:d}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var d={width:b.outerWidth(true),height:b.outerHeight(true),"float":b.css("float")},f=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(h){e=document.body}b.wrap(f);(b[0]===e||a.contains(b[0],e))&&a(e).focus();
f=b.parent();if(b.css("position")=="static"){f.css({position:"relative"});b.css({position:"relative"})}else{a.extend(d,{position:b.css("position"),zIndex:b.css("z-index")});a.each(["top","left","bottom","right"],function(a,f){d[f]=b.css(f);isNaN(parseInt(d[f],10))&&(d[f]="auto")});b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}return f.css(d).show()},removeWrapper:function(b){var d,f=document.activeElement;if(b.parent().is(".ui-effects-wrapper")){d=b.parent().replaceWith(b);
(b[0]===f||a.contains(b[0],f))&&a(f).focus();return d}return b},setTransition:function(b,d,f,e){e=e||{};a.each(d,function(a,d){var h=b.cssUnit(d);h[0]>0&&(e[d]=h[0]*f+h[1])});return e}});a.fn.extend({effect:function(b,d,e,h){var g=f.apply(this,arguments),j={options:g[1],duration:g[2],callback:g[3]},g=j.options.mode,o=a.effects[b];return a.fx.off||!o?g?this[g](j.duration,j.callback):this.each(function(){j.callback&&j.callback.call(this)}):o.call(this,j)},_show:a.fn.show,show:function(a){if(h(a))return this._show.apply(this,
arguments);var b=f.apply(this,arguments);b[1].mode="show";return this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(h(a))return this._hide.apply(this,arguments);var b=f.apply(this,arguments);b[1].mode="hide";return this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(h(b)||typeof b==="boolean"||a.isFunction(b))return this.__toggle.apply(this,arguments);var d=f.apply(this,arguments);d[1].mode="toggle";return this.effect.apply(this,d)},cssUnit:function(b){var d=this.css(b),
f=[];a.each(["em","px","%","pt"],function(a,b){d.indexOf(b)>0&&(f=[parseFloat(d),b])});return f}});a.easing.jswing=a.easing.swing;a.extend(a.easing,{def:"easeOutQuad",swing:function(b,d,f,e,h){return a.easing[a.easing.def](b,d,f,e,h)},easeInQuad:function(a,b,d,f,e){return f*(b=b/e)*b+d},easeOutQuad:function(a,b,d,f,e){return-f*(b=b/e)*(b-2)+d},easeInOutQuad:function(a,b,d,f,e){return(b=b/(e/2))<1?f/2*b*b+d:-f/2*(--b*(b-2)-1)+d},easeInCubic:function(a,b,d,f,e){return f*(b=b/e)*b*b+d},easeOutCubic:function(a,
b,d,f,e){return f*((b=b/e-1)*b*b+1)+d},easeInOutCubic:function(a,b,d,f,e){return(b=b/(e/2))<1?f/2*b*b*b+d:f/2*((b=b-2)*b*b+2)+d},easeInQuart:function(a,b,d,f,e){return f*(b=b/e)*b*b*b+d},easeOutQuart:function(a,b,d,f,e){return-f*((b=b/e-1)*b*b*b-1)+d},easeInOutQuart:function(a,b,d,f,e){return(b=b/(e/2))<1?f/2*b*b*b*b+d:-f/2*((b=b-2)*b*b*b-2)+d},easeInQuint:function(a,b,d,f,e){return f*(b=b/e)*b*b*b*b+d},easeOutQuint:function(a,b,d,f,e){return f*((b=b/e-1)*b*b*b*b+1)+d},easeInOutQuint:function(a,b,
d,f,e){return(b=b/(e/2))<1?f/2*b*b*b*b*b+d:f/2*((b=b-2)*b*b*b*b+2)+d},easeInSine:function(a,b,d,f,e){return-f*Math.cos(b/e*(Math.PI/2))+f+d},easeOutSine:function(a,b,d,f,e){return f*Math.sin(b/e*(Math.PI/2))+d},easeInOutSine:function(a,b,d,f,e){return-f/2*(Math.cos(Math.PI*b/e)-1)+d},easeInExpo:function(a,b,d,f,e){return b==0?d:f*Math.pow(2,10*(b/e-1))+d},easeOutExpo:function(a,b,d,f,e){return b==e?d+f:f*(-Math.pow(2,-10*b/e)+1)+d},easeInOutExpo:function(a,b,d,f,e){return b==0?d:b==e?d+f:(b=b/(e/
2))<1?f/2*Math.pow(2,10*(b-1))+d:f/2*(-Math.pow(2,-10*--b)+2)+d},easeInCirc:function(a,b,d,f,e){return-f*(Math.sqrt(1-(b=b/e)*b)-1)+d},easeOutCirc:function(a,b,d,f,e){return f*Math.sqrt(1-(b=b/e-1)*b)+d},easeInOutCirc:function(a,b,d,f,e){return(b=b/(e/2))<1?-f/2*(Math.sqrt(1-b*b)-1)+d:f/2*(Math.sqrt(1-(b=b-2)*b)+1)+d},easeInElastic:function(a,b,d,f,e){var a=1.70158,h=0,g=f;if(b==0)return d;if((b=b/e)==1)return d+f;h||(h=e*0.3);if(g<Math.abs(f)){g=f;a=h/4}else a=h/(2*Math.PI)*Math.asin(f/g);return-(g*
Math.pow(2,10*(b=b-1))*Math.sin((b*e-a)*2*Math.PI/h))+d},easeOutElastic:function(a,b,d,f,e){var a=1.70158,h=0,g=f;if(b==0)return d;if((b=b/e)==1)return d+f;h||(h=e*0.3);if(g<Math.abs(f)){g=f;a=h/4}else a=h/(2*Math.PI)*Math.asin(f/g);return g*Math.pow(2,-10*b)*Math.sin((b*e-a)*2*Math.PI/h)+f+d},easeInOutElastic:function(a,b,d,f,e){var a=1.70158,h=0,g=f;if(b==0)return d;if((b=b/(e/2))==2)return d+f;h||(h=e*0.3*1.5);if(g<Math.abs(f)){g=f;a=h/4}else a=h/(2*Math.PI)*Math.asin(f/g);return b<1?-0.5*g*Math.pow(2,
10*(b=b-1))*Math.sin((b*e-a)*2*Math.PI/h)+d:g*Math.pow(2,-10*(b=b-1))*Math.sin((b*e-a)*2*Math.PI/h)*0.5+f+d},easeInBack:function(a,b,d,f,e,h){h==j&&(h=1.70158);return f*(b=b/e)*b*((h+1)*b-h)+d},easeOutBack:function(a,b,d,f,e,h){h==j&&(h=1.70158);return f*((b=b/e-1)*b*((h+1)*b+h)+1)+d},easeInOutBack:function(a,b,d,f,e,h){h==j&&(h=1.70158);return(b=b/(e/2))<1?f/2*b*b*(((h=h*1.525)+1)*b-h)+d:f/2*((b=b-2)*b*(((h=h*1.525)+1)*b+h)+2)+d},easeInBounce:function(b,d,f,e,h){return e-a.easing.easeOutBounce(b,
h-d,0,e,h)+f},easeOutBounce:function(a,b,d,f,e){return(b=b/e)<1/2.75?f*7.5625*b*b+d:b<2/2.75?f*(7.5625*(b=b-1.5/2.75)*b+0.75)+d:b<2.5/2.75?f*(7.5625*(b=b-2.25/2.75)*b+0.9375)+d:f*(7.5625*(b=b-2.625/2.75)*b+0.984375)+d},easeInOutBounce:function(b,d,f,e,h){return d<h/2?a.easing.easeInBounce(b,d*2,0,e,h)*0.5+f:a.easing.easeOutBounce(b,d*2-h,0,e,h)*0.5+e*0.5+f}})}(jQuery);
(function(a){function j(d){d[0]&&a.isPlainObject(d[0])?this.data=d[0]:this.el=d;this.isCoords=true;this.coords={};this.init();return this}var e=j.prototype;e.init=function(){this.set();this.original_coords=this.get()};e.set=function(a,e){var b=this.el;if(b&&!a){this.data=b.offset();this.data.width=b.width();this.data.height=b.height()}if(b&&a&&!e){var f=b.offset();this.data.top=f.top;this.data.left=f.left}f=this.data;this.coords.x1=f.left;this.coords.y1=f.top;this.coords.x2=f.left+f.width;this.coords.y2=
f.top+f.height;this.coords.cx=f.left+f.width/2;this.coords.cy=f.top+f.height/2;this.coords.width=f.width;this.coords.height=f.height;this.coords.el=b||false;return this};e.update=function(d){if(!d&&!this.el)return this;if(d){this.data=a.extend({},this.data,d);return this.set(true,true)}this.set(true);return this};e.get=function(){return this.coords};a.fn.coords=function(a){if(this.data("coords"))return this.data("coords");a=new j(this,a);this.data("coords",a);return a}})(jQuery,window,document);
(function(a,j,e){function d(b,d,e){this.options=a.extend(g,e);this.$element=b;this.last_colliders=[];this.last_colliders_coords=[];typeof d==="string"||d instanceof jQuery?this.$colliders=a(d,this.options.colliders_context).not(this.$element):this.colliders=a(d);this.init()}var g={colliders_context:e.body},j=d.prototype;j.init=function(){this.find_collisions()};j.overlaps=function(a,d){var e=false,g=false;if(d.x1>=a.x1&&d.x1<=a.x2||d.x2>=a.x1&&d.x2<=a.x2||a.x1>=d.x1&&a.x2<=d.x2)e=true;if(d.y1>=a.y1&&
d.y1<=a.y2||d.y2>=a.y1&&d.y2<=a.y2||a.y1>=d.y1&&a.y2<=d.y2)g=true;return e&&g};j.detect_overlapping_region=function(a,d){var e="",g="";a.y1>d.cy&&a.y1<d.y2&&(e="N");a.y2>d.y1&&a.y2<d.cy&&(e="S");a.x1>d.cx&&a.x1<d.x2&&(g="W");a.x2>d.x1&&a.x2<d.cx&&(g="E");return e+g||"C"};j.calculate_overlapped_area_coords=function(b,d){var e=Math.max(b.x1,d.x1),g=Math.max(b.y1,d.y1),j=Math.min(b.x2,d.x2),q=Math.min(b.y2,d.y2);return a({left:e,top:g,width:j-e,height:q-g}).coords().get()};j.calculate_overlapped_area=
function(a){return a.width*a.height};j.manage_colliders_start_stop=function(b,d,e){for(var g=this.last_colliders_coords,j=0,q=g.length;j<q;j++)a.inArray(g[j],b)===-1&&d.call(this,g[j]);d=0;for(j=b.length;d<j;d++)a.inArray(b[d],g)===-1&&e.call(this,b[d])};j.find_collisions=function(b){for(var d=[],e=[],g=this.colliders||this.$colliders,j=g.length,b=this.$element.coords().update(b||false).get();j--;){var q=this.$colliders?a(g[j]):g[j],l=q.isCoords?q:q.coords(),k=l.get();if(this.overlaps(b,k)){var n=
this.detect_overlapping_region(b,k);if(n==="C"){var x=this.calculate_overlapped_area_coords(b,k),q={area:this.calculate_overlapped_area(x),area_coords:x,region:n,coords:k,player_coords:b,el:q};this.options.on_overlap&&this.options.on_overlap.call(this,q);d.push(l);e.push(q)}}}(this.options.on_overlap_stop||this.options.on_overlap_start)&&this.manage_colliders_start_stop(d,this.options.on_overlap_start,this.options.on_overlap_stop);this.last_colliders_coords=d;return e};j.get_closest_colliders=function(a){a=
this.find_collisions(a);a.sort(function(a,b){return a.region==="C"&&b.region==="C"?a.coords.y1<b.coords.y1||a.coords.x1<b.coords.x1?-1:1:1});return a};a.fn.collision=function(a,f){return new d(this,a,f)}})(jQuery,window,document);
(function(a){a.debounce=function(a,e,d){var g;return function(){var b=this,f=arguments;d&&!g&&a.apply(b,f);clearTimeout(g);g=setTimeout(function(){g=null;d||a.apply(b,f)},e)}};a.throttle=function(a,e){var d,g,b,f,h,o,u=debounce(function(){h=f=false},e);return function(){d=this;g=arguments;b||(b=setTimeout(function(){b=null;h&&a.apply(d,g);u()},e));f?h=true:o=a.apply(d,g);u();f=true;return o}}})(window);
(function(a,j,e){function d(b,d){this.options=a.extend({},g,d);this.$body=a(e.body);this.$container=a(b);this.$dragitems=a(this.options.items,this.$container);this.is_dragging=false;this.player_min_left=0+this.options.offset_left;this.init()}var g={items:".gs_w",distance:1,limit:true,offset_left:0,autoscroll:true,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON"],handle:null,container_width:0},b=a(j),f=!!("ontouchstart"in j),h=f?"touchstart.gridster-draggable":"mousedown.gridster-draggable",o=
f?"touchmove.gridster-draggable":"mousemove.gridster-draggable",u=f?"touchend.gridster-draggable":"mouseup.gridster-draggable",q=d.prototype;q.init=function(){this.calculate_positions();this.$container.css("position","relative");this.disabled=false;this.events();a(j).bind("resize.gridster-draggable",throttle(a.proxy(this.calculate_positions,this),200))};q.events=function(){this.$container.on("selectstart.gridster-draggable",a.proxy(this.on_select_start,this));this.$container.on(h,this.options.items,
a.proxy(this.drag_handler,this));this.$body.on(u,a.proxy(function(a){this.is_dragging=false;if(!this.disabled){this.$body.off(o);if(this.drag_start)this.on_dragstop(a)}},this))};q.get_actual_pos=function(a){return a.position()};q.get_mouse_pos=function(a){if(f){a=a.originalEvent;a=a.touches.length?a.touches[0]:a.changedTouches[0]}return{left:a.clientX,top:a.clientY}};q.get_offset=function(a){a.preventDefault();var a=this.get_mouse_pos(a),b=Math.round(a.left-this.mouse_init_pos.left),d=Math.round(a.top-
this.mouse_init_pos.top),b=Math.round(this.el_init_offset.left+b-this.baseX),d=Math.round(this.el_init_offset.top+d-this.baseY+this.scrollOffset);if(this.options.limit)if(b>this.player_max_left)b=this.player_max_left;else if(b<this.player_min_left)b=this.player_min_left;return{left:b,top:d,mouse_left:a.left,mouse_top:a.top}};q.manage_scroll=function(a){var d=b.scrollTop(),f=d+50,e=d+a.mouse_top,h=this.doc_height-this.window_height+this.player_height;if(e>=d+this.window_height-50){a=d+30;if(a<h){b.scrollTop(a);
this.scrollOffset=this.scrollOffset+30}}if(e<=f){a=d-30;if(a>0){b.scrollTop(a);this.scrollOffset=this.scrollOffset-30}}};q.calculate_positions=function(){this.window_height=b.height()};q.drag_handler=function(b){if(!(this.disabled||b.which!==1&&!f)&&!this.ignore_drag(b)){var d=this,e=true;this.$player=a(b.currentTarget);this.el_init_pos=this.get_actual_pos(this.$player);this.mouse_init_pos=this.get_mouse_pos(b);this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top;this.$body.on(o,function(a){var b=
d.get_mouse_pos(a),f=Math.abs(b.left-d.mouse_init_pos.left),b=Math.abs(b.top-d.mouse_init_pos.top);if(!(f>d.options.distance||b>d.options.distance))return false;if(e){e=false;d.on_dragstart.call(d,a);return false}d.is_dragging===true&&d.on_dragmove.call(d,a);return false});if(!f)return false}};q.on_dragstart=function(b){b.preventDefault();this.is_dragging=this.drag_start=true;var d=this.$container.offset();this.baseX=Math.round(d.left);this.baseY=Math.round(d.top);this.doc_height=a(e).height();if(this.options.helper===
"clone"){this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper");this.helper=true}else this.helper=false;this.scrollOffset=0;this.el_init_offset=this.$player.offset();this.player_width=this.$player.width();this.player_height=this.$player.height();this.player_max_left=(this.options.container_width||this.$container.width())-this.player_width+this.options.offset_left;this.options.start&&this.options.start.call(this.$player,b,{helper:this.helper?this.$helper:this.$player});return false};
q.on_dragmove=function(a){var b=this.get_offset(a);this.options.autoscroll&&this.manage_scroll(b);(this.helper?this.$helper:this.$player).css({position:"absolute",left:b.left,top:b.top});b={position:{left:b.left,top:b.top}};this.options.drag&&this.options.drag.call(this.$player,a,b);return false};q.on_dragstop=function(a){var b=this.get_offset(a);this.drag_start=false;b={position:{left:b.left,top:b.top}};this.options.stop&&this.options.stop.call(this.$player,a,b);this.helper&&this.$helper.remove();
return false};q.on_select_start=function(a){if(!this.disabled&&!this.ignore_drag(a))return false};q.enable=function(){this.disabled=false};q.disable=function(){this.disabled=true};q.destroy=function(){this.disable();this.$container.off(".gridster-draggable");this.$body.off(".gridster-draggable");a(j).off(".gridster-draggable");a.removeData(this.$container,"drag")};q.ignore_drag=function(b){return this.options.handle?!a(b.target).is(this.options.handle):a.inArray(b.target.nodeName,this.options.ignore_dragging)>=
0};a.fn.drag=function(b){return this.each(function(){a.data(this,"drag")||a.data(this,"drag",new d(this,b))})}})(jQuery,window,document);
(function(a,j,e){function d(b,d){this.options=a.extend(true,g,d);this.$el=a(b);this.$wrapper=this.$el.parent();this.$widgets=this.$el.children(this.options.widget_selector).addClass("gs_w");this.widgets=[];this.$changed=a([]);this.wrapper_width=this.$wrapper.width();this.min_widget_width=this.options.widget_margins[0]*2+this.options.widget_base_dimensions[0];this.min_widget_height=this.options.widget_margins[1]*2+this.options.widget_base_dimensions[1];this.$style_tags=a([]);this.init()}var g={namespace:"",
widget_selector:"li",widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,max_cols:null,min_rows:15,max_size_x:6,autogenerate_stylesheet:true,avoid_overlapped_widgets:true,serialize_params:function(a,b){return{col:b.col,row:b.row,size_x:b.size_x,size_y:b.size_y}},collision:{},draggable:{distance:4}};d.generated_stylesheets=[];var b=d.prototype;b.init=function(){this.generate_grid_and_stylesheet();this.get_widgets_from_DOM();this.set_dom_grid_height();this.$wrapper.addClass("ready");
this.draggable();a(j).bind("resize.gridster",throttle(a.proxy(this.recalculate_faux_grid,this),200))};b.disable=function(){this.$wrapper.find(".player-revert").removeClass("player-revert");this.drag_api.disable();return this};b.enable=function(){this.drag_api.enable();return this};b.add_widget=function(b,d,e,g,j){var l;d||(d=1);e||(e=1);if(!g&!j)l=this.next_position(d,e);else{l={col:g,row:j};this.empty_cells(g,j,d,e)}b=a(b).attr({"data-col":l.col,"data-row":l.row,"data-sizex":d,"data-sizey":e}).addClass("gs_w").appendTo(this.$el).hide();
this.$widgets=this.$widgets.add(b);this.register_widget(b);this.add_faux_rows(l.size_y);this.set_dom_grid_height();return b.fadeIn()};b.resize_widget=function(b,d,e,g){var j=b.coords().grid;d||(d=j.size_x);e||(e=j.size_y);if(d>this.cols)d=this.cols;var l=this.get_cells_occupied(j),k=j.size_x,n=j.size_y,x=j.col,v=x;x+d-1>this.cols&&(v=Math.max(1,x-(x+(d-1)-this.cols)));var x={col:v,row:j.row,size_x:d,size_y:e},w=this.get_cells_occupied(x),z=[];a.each(l.cols,function(b,d){a.inArray(d,w.cols)===-1&&
z.push(d)});var E=[];a.each(w.cols,function(b,d){a.inArray(d,l.cols)===-1&&E.push(d)});var B=[];a.each(l.rows,function(b,d){a.inArray(d,w.rows)===-1&&B.push(d)});var F=[];a.each(w.rows,function(b,d){a.inArray(d,l.rows)===-1&&F.push(d)});this.remove_from_gridmap(j);if(E.length){var t=[v,j.row,d,Math.min(n,e),b];this.empty_cells.apply(this,t)}F.length&&this.empty_cells.apply(this,[v,j.row,d,e,b]);j.col=v;j.size_x=d;j.size_y=e;this.add_to_gridmap(x,b);b.data("coords").update({width:d*this.options.widget_base_dimensions[0]+
(d-1)*this.options.widget_margins[0]*2,height:e*this.options.widget_base_dimensions[1]+(e-1)*this.options.widget_margins[1]*2});e>n&&this.add_faux_rows(e-n);d>k&&this.add_faux_cols(d-k);b.attr({"data-col":v,"data-sizex":d,"data-sizey":e});if(z.length){k=[z[0],j.row,z.length,Math.min(n,e),b];this.remove_empty_cells.apply(this,k)}B.length&&this.remove_empty_cells.apply(this,[v,j.row,d,e,b]);g&&g.call(this,d,e);return b};b.empty_cells=function(b,d,e,g,j){this.widgets_below({col:b,row:d-g,size_x:e,size_y:g}).not(j).each(a.proxy(function(b,
f){var e=a(f).coords().grid;if(e.row<=d+g-1){e=d+g-e.row;this.move_widget_down(a(f),e)}},this));this.set_dom_grid_height();return this};b.remove_empty_cells=function(b,d,e,g,j){this.widgets_below({col:b,row:d,size_x:e,size_y:g}).not(j).each(a.proxy(function(b,d){this.move_widget_up(a(d),g)},this));this.set_dom_grid_height();return this};b.next_position=function(a,b){a||(a=1);b||(b=1);for(var d=this.gridmap,e=d.length,g=[],j,k=1;k<e;k++){j=d[k].length;for(var n=1;n<=j;n++)this.can_move_to({size_x:a,
size_y:b},k,n)&&g.push({col:k,row:n,size_y:b,size_x:a})}return g.length?this.sort_by_row_and_col_asc(g)[0]:false};b.remove_widget=function(b,d,e){var g=b instanceof jQuery?b:a(b),j=g.coords().grid;if(a.isFunction(d)){e=d;d=false}this.cells_occupied_by_placeholder={};this.$widgets=this.$widgets.not(g);var l=this.widgets_below(g);this.remove_from_gridmap(j);g.fadeOut(a.proxy(function(){g.remove();d||l.each(a.proxy(function(b,d){this.move_widget_up(a(d),j.size_y)},this));this.set_dom_grid_height();e&&
e.call(this,b)},this))};b.remove_all_widgets=function(b){this.$widgets.each(a.proxy(function(a,d){this.remove_widget(d,true,b)},this));return this};b.serialize=function(b){b||(b=this.$widgets);var d=[];b.each(a.proxy(function(b,f){d.push(this.options.serialize_params(a(f),a(f).coords().grid))},this));return d};b.serialize_changed=function(){return this.serialize(this.$changed)};b.register_widget=function(a){var b={col:parseInt(a.attr("data-col"),10),row:parseInt(a.attr("data-row"),10),size_x:parseInt(a.attr("data-sizex"),
10),size_y:parseInt(a.attr("data-sizey"),10),el:a};if(this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:b.size_x,size_y:b.size_y},b.col,b.row)){b=this.next_position(b.size_x,b.size_y);b.el=a;a.attr({"data-col":b.col,"data-row":b.row,"data-sizex":b.size_x,"data-sizey":b.size_y})}a.data("coords",a.coords());a.data("coords").grid=b;this.add_to_gridmap(b,a);return this};b.update_widget_position=function(a,b){this.for_each_cell_occupied(a,function(a,d){if(!this.gridmap[a])return this;this.gridmap[a][d]=
b});return this};b.remove_from_gridmap=function(a){return this.update_widget_position(a,false)};b.add_to_gridmap=function(b,d){this.update_widget_position(b,d||b.el);b.el&&this.widgets_below(b.el).each(a.proxy(function(b,d){this.move_widget_up(a(d))},this))};b.draggable=function(){var b=this,d=a.extend(true,{},this.options.draggable,{offset_left:this.options.widget_margins[0],container_width:this.container_width,start:function(d,e){b.$widgets.filter(".player-revert").removeClass("player-revert");
b.$player=a(this);b.$helper=b.options.draggable.helper==="clone"?a(e.helper):b.$player;b.helper=!b.$helper.is(b.$player);b.on_start_drag.call(b,d,e);b.$el.trigger("gridster:dragstart")},stop:function(a,d){b.on_stop_drag.call(b,a,d);b.$el.trigger("gridster:dragstop")},drag:throttle(function(a,d){b.on_drag.call(b,a,d);b.$el.trigger("gridster:drag")},60)});this.drag_api=this.$el.drag(d).data("drag");return this};b.on_start_drag=function(b,d){this.$helper.add(this.$player).add(this.$wrapper).addClass("dragging");
this.$player.addClass("player");this.player_grid_data=this.$player.coords().grid;this.placeholder_grid_data=a.extend({},this.player_grid_data);this.$el.css("height",this.$el.height()+this.player_grid_data.size_y*this.min_widget_height);var e=this.faux_grid,g=this.$player.data("coords").coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data);this.last_cols=[];this.last_rows=[];this.collision_api=
this.$helper.collision(e,this.options.collision);this.$preview_holder=a("<li />",{"class":"preview-holder","data-row":this.$player.attr("data-row"),"data-col":this.$player.attr("data-col"),css:{width:g.width,height:g.height}}).appendTo(this.$el);this.options.draggable.start&&this.options.draggable.start.call(this,b,d)};b.on_drag=function(a,b){if(this.$player===null)return false;this.colliders_data=this.collision_api.get_closest_colliders({left:b.position.left+this.baseX,top:b.position.top+this.baseY});
this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column);this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row);this.helper&&this.$player&&this.$player.css({left:b.position.left,top:b.position.top});this.options.draggable.drag&&this.options.draggable.drag.call(this,a,b)};b.on_stop_drag=function(a,b){this.$helper.add(this.$player).add(this.$wrapper).removeClass("dragging");b.position.left=b.position.left+this.baseX;b.position.top=
b.position.top+this.baseY;this.colliders_data=this.collision_api.get_closest_colliders(b.position);this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column);this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row);this.$player.addClass("player-revert").removeClass("player").attr({"data-col":this.placeholder_grid_data.col,"data-row":this.placeholder_grid_data.row}).css({left:"",top:""});this.$changed=this.$changed.add(this.$player);
this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data);this.set_cells_player_occupies(this.placeholder_grid_data.col,this.placeholder_grid_data.row);this.$player.coords().grid.row=this.placeholder_grid_data.row;this.$player.coords().grid.col=this.placeholder_grid_data.col;this.options.draggable.stop&&this.options.draggable.stop.call(this,a,b);this.$preview_holder.remove();this.$helper=this.$player=null;this.placeholder_grid_data={};this.player_grid_data={};this.cells_occupied_by_placeholder=
{};this.cells_occupied_by_player={};this.set_dom_grid_height()};b.on_overlapped_column_change=function(b,d){if(!this.colliders_data.length)return this;var e=this.get_targeted_columns(this.colliders_data[0].el.data.col),g=this.last_cols.length,j=e.length,l;for(l=0;l<j;l++)a.inArray(e[l],this.last_cols)===-1&&(b||a.noop).call(this,e[l]);for(l=0;l<g;l++)a.inArray(this.last_cols[l],e)===-1&&(d||a.noop).call(this,this.last_cols[l]);this.last_cols=e;return this};b.on_overlapped_row_change=function(b,d){if(!this.colliders_data.length)return this;
var e=this.get_targeted_rows(this.colliders_data[0].el.data.row),g=this.last_rows.length,j=e.length,l;for(l=0;l<j;l++)a.inArray(e[l],this.last_rows)===-1&&(b||a.noop).call(this,e[l]);for(l=0;l<g;l++)a.inArray(this.last_rows[l],e)===-1&&(d||a.noop).call(this,this.last_rows[l]);this.last_rows=e};b.set_player=function(a,b,d){d||this.empty_cells_player_occupies();d=!d?this.colliders_data[0].el.data:{col:a};a=d.col;b=b||d.row;this.player_grid_data={col:a,row:b,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x};
this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);var d=this.get_widgets_overlapped(this.player_grid_data),e=this.widgets_constraints(d);this.manage_movements(e.can_go_up,a,b);this.manage_movements(e.can_not_go_up,a,b);if(!d.length){d=this.can_go_player_up(this.player_grid_data);d!==false&&(b=d);this.set_placeholder(a,b)}return{col:a,row:b}};b.widgets_constraints=function(b){var d=a([]),e=[],g=[];b.each(a.proxy(function(b,f){var j=a(f),n=j.coords().grid;if(this.can_go_widget_up(n)){d=
d.add(j);e.push(n)}else g.push(n)},this));b.not(d);return{can_go_up:this.sort_by_row_asc(e),can_not_go_up:this.sort_by_row_desc(g)}};b.sort_by_row_asc=function(b){return b=b.sort(function(b,d){if(!b.row){b=a(b).coords().grid;d=a(d).coords().grid}return b.row>d.row?1:-1})};b.sort_by_row_and_col_asc=function(a){return a=a.sort(function(a,b){return a.row>b.row||a.row===b.row&&a.col>b.col?1:-1})};b.sort_by_col_asc=function(a){return a=a.sort(function(a,b){return a.col>b.col?1:-1})};b.sort_by_row_desc=
function(a){return a=a.sort(function(a,b){return a.row+a.size_y<b.row+b.size_y?1:-1})};b.manage_movements=function(b,d,e){a.each(b,a.proxy(function(a,b){var f=b.el,g=this.can_go_widget_up(b);if(g){this.move_widget_to(f,g);this.set_placeholder(d,g+b.size_y)}else if(!this.can_go_player_up(this.player_grid_data)){this.move_widget_down(f,e+this.player_grid_data.size_y-b.row);this.set_placeholder(d,e)}},this));return this};b.is_player=function(a,b){if(b&&!this.gridmap[a])return false;var d=b?this.gridmap[a][b]:
a;return d&&(d.is(this.$player)||d.is(this.$helper))};b.is_player_in=function(b,d){var e=this.cells_occupied_by_player||{};return a.inArray(b,e.cols)>=0&&a.inArray(d,e.rows)>=0};b.is_placeholder_in=function(b,d){var e=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(b)&&a.inArray(d,e.rows)>=0};b.is_placeholder_in_col=function(b){return a.inArray(b,(this.cells_occupied_by_placeholder||[]).cols)>=0};b.is_empty=function(a,b){return typeof this.gridmap[a]!=="undefined"?typeof this.gridmap[a][b]!==
"undefined"&&this.gridmap[a][b]===false?true:false:true};b.is_occupied=function(a,b){return!this.gridmap[a]?false:this.gridmap[a][b]?true:false};b.is_widget=function(a,b){var d=this.gridmap[a];if(!d)return false;return(d=d[b])?d:false};b.is_widget_under_player=function(a,b){return this.is_widget(a,b)?this.is_player_in(a,b):false};b.get_widgets_under_player=function(b){b||(b=this.cells_occupied_by_player||{cols:[],rows:[]});var d=a([]);a.each(b.cols,a.proxy(function(e,g){a.each(b.rows,a.proxy(function(a,
b){this.is_widget(g,b)&&(d=d.add(this.gridmap[g][b]))},this))},this));return d};b.set_placeholder=function(b,d){var e=a.extend({},this.placeholder_grid_data),g=this.widgets_below({col:e.col,row:e.row,size_y:e.size_y,size_x:e.size_x}),j=b+e.size_x-1;j>this.cols&&(b=b-(j-b));var j=this.placeholder_grid_data.row<d,l=this.placeholder_grid_data.col!==b;this.placeholder_grid_data.col=b;this.placeholder_grid_data.row=d;this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data);
this.$preview_holder.attr({"data-row":d,"data-col":b});(j||l)&&g.each(a.proxy(function(d,h){this.move_widget_up(a(h),this.placeholder_grid_data.col-b+e.size_y)},this));g=this.get_widgets_under_player(this.cells_occupied_by_placeholder);g.length&&g.each(a.proxy(function(b,f){var g=a(f);this.move_widget_down(g,d+e.size_y-g.data("coords").grid.row)},this))};b.can_go_player_up=function(a){var b=a.row+a.size_y-1,d=true,e=[],g=1E4,j=this.get_widgets_under_player();this.for_each_column_occupied(a,function(a){var f=
this.gridmap[a],x=b+1;for(e[a]=[];--x>0;)if(this.is_empty(a,x)||this.is_player(a,x)||this.is_widget(a,x)&&f[x].is(j)){e[a].push(x);g=x<g?x:g}else break;if(e[a].length===0){d=false;return true}e[a].sort(function(a,b){return a-b})});return!d?false:this.get_valid_rows(a,e,g)};b.can_go_widget_up=function(a){var b=a.row+a.size_y-1,d=true,e=[],g=1E4;this.for_each_column_occupied(a,function(j){var k=this.gridmap[j];e[j]=[];for(var n=b+1;--n>0;){if(this.is_widget(j,n)&&!this.is_player_in(j,n)&&!k[n].is(a.el))break;
!this.is_player(j,n)&&(!this.is_placeholder_in(j,n)&&!this.is_player_in(j,n))&&e[j].push(n);n<g&&(g=n)}if(e[j].length===0){d=false;return true}e[j].sort(function(a,b){return a-b})});return!d?false:this.get_valid_rows(a,e,g)};b.get_valid_rows=function(b,d,e){for(var g=b.row,j=b.row+b.size_y-1,b=b.size_y,l=e-1,e=[];++l<=j;){var k=true;a.each(d,function(b,d){a.isArray(d)&&a.inArray(l,d)===-1&&(k=false)});if(k===true){e.push(l);if(e.length===b)break}}d=false;b===1?e[0]!==g&&(d=e[0]||false):e[0]!==g&&
(d=this.get_consecutive_numbers_index(e,b));return d};b.get_consecutive_numbers_index=function(a,b){for(var d=a.length,e=[],g=true,j=-1,k=0;k<d;k++){if(g||a[k]===j+1){e.push(k);if(e.length===b)break;g=false}else{e=[];g=true}j=a[k]}return e.length>=b?a[e[0]]:false};b.get_widgets_overlapped=function(){var b=a([]),d=[],e=this.cells_occupied_by_player.rows.slice(0);e.reverse();a.each(this.cells_occupied_by_player.cols,a.proxy(function(g,j){a.each(e,a.proxy(function(e,g){if(!this.gridmap[j])return true;
var n=this.gridmap[j][g];if(this.is_occupied(j,g)&&!this.is_player(n)&&a.inArray(n,d)===-1){b=b.add(n);d.push(n)}},this))},this));return b};b.on_start_overlapping_column=function(a){this.set_player(a,false)};b.on_start_overlapping_row=function(a){this.set_player(false,a)};b.on_stop_overlapping_column=function(a){this.set_player(a,false);var b=this;this.for_each_widget_below(a,this.cells_occupied_by_player.rows[0],function(){b.move_widget_up(this,b.player_grid_data.size_y)})};b.on_stop_overlapping_row=
function(a){this.set_player(false,a);for(var b=this,d=this.cells_occupied_by_player.cols,e=0,g=d.length;e<g;e++)this.for_each_widget_below(d[e],a,function(){b.move_widget_up(this,b.player_grid_data.size_y)})};b.move_widget_to=function(b,d){var e=this,g=b.coords().grid,j=this.widgets_below(b);if(this.can_move_to(g,g.col,d,b)===false)return false;this.remove_from_gridmap(g);g.row=d;this.add_to_gridmap(g);b.attr("data-row",d);this.$changed=this.$changed.add(b);j.each(function(b,d){var f=a(d),h=f.coords().grid,
g=e.can_go_widget_up(h);g&&g!==h.row&&e.move_widget_to(f,g)});return this};b.move_widget_up=function(b,d){var e=b.coords().grid,g=e.row,j=[];d||(d=1);if(!this.can_go_up(b))return false;this.for_each_column_occupied(e,function(e){if(a.inArray(b,j)===-1){var k=b.coords().grid,n=g-d,n=this.can_go_up_to_row(k,e,n);if(!n)return true;e=this.widgets_below(b);this.remove_from_gridmap(k);k.row=n;this.add_to_gridmap(k);b.attr("data-row",k.row);this.$changed=this.$changed.add(b);j.push(b);e.each(a.proxy(function(b,
e){this.move_widget_up(a(e),d)},this))}})};b.move_widget_down=function(b,d){var e=b.coords().grid.row,g=[];if(!b)return false;if(a.inArray(b,g)===-1){var j=b.coords().grid,e=e+d,l=this.widgets_below(b);this.remove_from_gridmap(j);l.each(a.proxy(function(b,e){var f=a(e),g=f.coords().grid,g=this.displacement_diff(g,j,d);g>0&&this.move_widget_down(f,g)},this));j.row=e;this.update_widget_position(j,b);b.attr("data-row",j.row);this.$changed=this.$changed.add(b);g.push(b)}};b.can_go_up_to_row=function(b,
d,e){var g=true,j=[],l=b.row,k;this.for_each_column_occupied(b,function(a){j[a]=[];for(k=l;k--;)if(this.is_empty(a,k)&&!this.is_placeholder_in(a,k))j[a].push(k);else break;if(!j[a].length){g=false;return true}});if(!g)return false;k=e;for(k=1;k<l;k++){b=true;d=0;for(e=j.length;d<e;d++)j[d]&&a.inArray(k,j[d])===-1&&(b=false);if(b===true){g=k;break}}return g};b.displacement_diff=function(a,b,d){var e=a.row,g=[],j=b.row+b.size_y;this.for_each_column_occupied(a,function(a){for(var b=0,d=j;d<e;d++)this.is_empty(a,
d)&&(b=b+1);g.push(b)});a=Math.max.apply(Math,g);d=d-a;return d>0?d:0};b.widgets_below=function(b){var b=a.isPlainObject(b)?b:b.coords().grid,d=this,e=b.row+b.size_y-1,g=a([]);this.for_each_column_occupied(b,function(b){d.for_each_widget_below(b,e,function(){if(!d.is_player(this)&&a.inArray(this,g)===-1){g=g.add(this);return true}})});return this.sort_by_row_asc(g)};b.set_cells_player_occupies=function(a,b){this.remove_from_gridmap(this.placeholder_grid_data);this.placeholder_grid_data.col=a;this.placeholder_grid_data.row=
b;this.add_to_gridmap(this.placeholder_grid_data,this.$player);return this};b.empty_cells_player_occupies=function(){this.remove_from_gridmap(this.placeholder_grid_data);return this};b.can_go_up=function(a){var a=a.coords().grid,b=a.row,d=b-1,e=true;if(b===1)return false;this.for_each_column_occupied(a,function(a){this.is_widget(a,d);if(this.is_occupied(a,d)||this.is_player(a,d)||this.is_placeholder_in(a,d)||this.is_player_in(a,d)){e=false;return true}});return e};b.can_move_to=function(a,b,d,e){var g=
a.el,j=true;if(b+a.size_x-1>this.cols||e&&e<d+a.size_y-1)return false;this.for_each_cell_occupied({size_y:a.size_y,size_x:a.size_x,col:b,row:d},function(b,d){var e=this.is_widget(b,d);if(e&&(!a.el||e.is(g)))j=false});return j};b.get_targeted_columns=function(a){for(var b=(a||this.player_grid_data.col)+(this.player_grid_data.size_x-1),d=[];a<=b;a++)d.push(a);return d};b.get_targeted_rows=function(a){for(var b=(a||this.player_grid_data.row)+(this.player_grid_data.size_y-1),d=[];a<=b;a++)d.push(a);return d};
b.get_cells_occupied=function(a,b){var d={cols:[],rows:[]},e;if(b instanceof jQuery)a=b.coords().grid;for(e=0;e<a.size_x;e++)d.cols.push(a.col+e);for(e=0;e<a.size_y;e++)d.rows.push(a.row+e);return d};b.for_each_cell_occupied=function(a,b){this.for_each_column_occupied(a,function(d){this.for_each_row_occupied(a,function(a){b.call(this,d,a)})});return this};b.for_each_column_occupied=function(a,b){for(var d=0;d<a.size_x;d++)b.call(this,a.col+d,a)};b.for_each_row_occupied=function(a,b){for(var d=0;d<
a.size_y;d++)b.call(this,a.row+d,a)};b._traversing_widgets=function(b,d,e,g,j){var l=this.gridmap;if(l[e]){var k,n,b=b+"/"+d;if(e instanceof jQuery){d=e.coords().grid;e=d.col;j=g=d.row}var x=[],v=g,d={"for_each/above":function(){for(;v--;)if(v>0&&this.is_widget(e,v)&&a.inArray(l[e][v],x)===-1){k=j.call(l[e][v],e,v);x.push(l[e][v]);if(k)break}},"for_each/below":function(){v=g+1;for(n=l[e].length;v<n;v++)if(this.is_widget(e,v)&&a.inArray(l[e][v],x)===-1){k=j.call(l[e][v],e,v);x.push(l[e][v]);if(k)break}}};
d[b]&&d[b].call(this)}};b.for_each_widget_above=function(a,b,d){this._traversing_widgets("for_each","above",a,b,d);return this};b.for_each_widget_below=function(a,b,d){this._traversing_widgets("for_each","below",a,b,d);return this};b.get_highest_occupied_cell=function(){for(var a,b=this.gridmap,d=[],e=[],g=b.length-1;g>=1;g--)for(a=b[g].length-1;a>=1;a--)if(this.is_widget(g,a)){d.push(a);e[a]=g;break}a=Math.max.apply(Math,d);return this.highest_occupied_cell={col:e[a],row:a}};b.get_widgets_from=function(b,
d){var e=a();b&&(e=e.add(this.$widgets.filter(function(){var d=a(this).attr("data-col");return d===b||d>b})));d&&(e=e.add(this.$widgets.filter(function(){var b=a(this).attr("data-row");return b===d||b>d})));return e};b.set_dom_grid_height=function(){var a=this.get_highest_occupied_cell().row;this.$el.css("height",a*this.min_widget_height);return this};b.generate_stylesheet=function(b){var e="",g=this.options.max_size_x,j;b||(b={});b.cols||(b.cols=this.cols);b.rows||(b.rows=this.rows);b.namespace||
(b.namespace=this.options.namespace);b.widget_base_dimensions||(b.widget_base_dimensions=this.options.widget_base_dimensions);b.widget_margins||(b.widget_margins=this.options.widget_margins);b.min_widget_width=b.widget_margins[0]*2+b.widget_base_dimensions[0];b.min_widget_height=b.widget_margins[1]*2+b.widget_base_dimensions[1];j=a.param(b);if(a.inArray(j,d.generated_stylesheets)>=0)return false;d.generated_stylesheets.push(j);for(j=b.cols;j>=0;j--)e=e+(b.namespace+' [data-col="'+(j+1)+'"] { left:'+
(j*b.widget_base_dimensions[0]+j*b.widget_margins[0]+(j+1)*b.widget_margins[0])+"px;} ");for(j=b.rows;j>=0;j--)e=e+(b.namespace+' [data-row="'+(j+1)+'"] { top:'+(j*b.widget_base_dimensions[1]+j*b.widget_margins[1]+(j+1)*b.widget_margins[1])+"px;} ");for(j=1;j<=b.rows;j++)e=e+(b.namespace+' [data-sizey="'+j+'"] { height:'+(j*b.widget_base_dimensions[1]+(j-1)*b.widget_margins[1]*2)+"px;}");for(j=1;j<=g;j++)e=e+(b.namespace+' [data-sizex="'+j+'"] { width:'+(j*b.widget_base_dimensions[0]+(j-1)*b.widget_margins[0]*
2)+"px;}");return this.add_style_tag(e)};b.add_style_tag=function(a){var b=e.createElement("style");e.getElementsByTagName("head")[0].appendChild(b);b.setAttribute("type","text/css");b.styleSheet?b.styleSheet.cssText=a:b.appendChild(e.createTextNode(a));this.$style_tags=this.$style_tags.add(b);return this};b.remove_style_tags=function(){this.$style_tags.remove()};b.generate_faux_grid=function(a,b){this.faux_grid=[];this.gridmap=[];var d,e;for(d=b;d>0;d--){this.gridmap[d]=[];for(e=a;e>0;e--)this.add_faux_cell(e,
d)}return this};b.add_faux_cell=function(b,d){var e=a({left:this.baseX+(d-1)*this.min_widget_width,top:this.baseY+(b-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:d,row:b,original_col:d,original_row:b}).coords();a.isArray(this.gridmap[d])||(this.gridmap[d]=[]);this.gridmap[d][b]=false;this.faux_grid.push(e);return this};b.add_faux_rows=function(a){for(var b=this.rows,d=a=b+(a||1);d>b;d--)for(var e=this.cols;e>=1;e--)this.add_faux_cell(d,e);this.rows=a;this.options.autogenerate_stylesheet&&
this.generate_stylesheet();return this};b.add_faux_cols=function(a){for(var b=this.cols,a=b+(a||1);b<a;b++)for(var d=this.rows;d>=1;d--)this.add_faux_cell(d,b);this.cols=a;this.options.autogenerate_stylesheet&&this.generate_stylesheet();return this};b.recalculate_faux_grid=function(){var b=this.$wrapper.width();this.baseX=(a(j).width()-b)/2;this.baseY=this.$wrapper.offset().top;a.each(this.faux_grid,a.proxy(function(a,b){this.faux_grid[a]=b.update({left:this.baseX+(b.data.col-1)*this.min_widget_width,
top:this.baseY+(b.data.row-1)*this.min_widget_height})},this));return this};b.get_widgets_from_DOM=function(){this.$widgets.each(a.proxy(function(b,d){this.register_widget(a(d))},this));return this};b.generate_grid_and_stylesheet=function(){var b=this.$wrapper.width();this.$wrapper.height();var d=this.options.max_cols,e=Math.floor(b/this.min_widget_width)+this.options.extra_cols,g=this.$widgets.map(function(){return a(this).attr("data-col")}).get();g.length||(g=[0]);var g=Math.max.apply(Math,g),q=
this.options.extra_rows;this.$widgets.each(function(b,d){q=q+ +a(d).attr("data-sizey")});this.cols=Math.max(g,e,this.options.min_cols);if(d&&d>=g&&d<this.cols)this.cols=d;this.rows=Math.max(q,this.options.min_rows);this.baseX=(a(j).width()-b)/2;this.baseY=this.$wrapper.offset().top;this.container_width=this.cols*this.options.widget_base_dimensions[0]+(this.cols-1)*2*this.options.widget_margins[0];this.options.autogenerate_stylesheet&&this.generate_stylesheet();return this.generate_faux_grid(this.rows,
this.cols)};b.destroy=function(){a(j).unbind(".gridster");this.drag_api&&this.drag_api.destroy();this.remove_style_tags();this.$el.remove();return this};a.fn.gridster=function(b){return this.each(function(){a(this).data("gridster")||a(this).data("gridster",new d(this,b))})};a.Gridster=b})(jQuery,window,document);
(function(a){var j=a.Gridster;j.widgets_in_col=function(a){if(!this.gridmap[a])return false;for(var d=this.gridmap[a].length-1;d>=0;d--)if(this.is_widget(a,d)!==false)return true;return false};j.widgets_in_row=function(a){for(var d=this.gridmap.length;d>=1;d--)if(this.is_widget(d,a)!==false)return true;return false};j.widgets_in_range=function(e,d,g,b){var f=a([]),h,j,u,q;for(h=g;h>=e;h--)for(j=b;j>=d;j--){u=this.is_widget(h,j);if(u!==false){q=u.data("coords").grid;q.col>=e&&(q.col<=g&&q.row>=d&&
q.row<=b)&&(f=f.add(u))}}return f};j.get_bottom_most_occupied_cell=function(){var a=0,d=0;this.for_each_cell(function(g,b,f){if(g&&f>a){a=f;d=b}});return{col:d,row:a}};j.get_right_most_occupied_cell=function(){var a=0,d=0;this.for_each_cell(function(g,b,f){if(g){a=f;d=b;return false}});return{col:d,row:a}};j.for_each_cell=function(a,d){d||(d=this.gridmap);var g=d[1].length,b=d.length-1;a:for(;b>=1;b--)for(var f=g-1;f>=1;f--){var h=d[b]&&d[b][f];if(a&&a.call(this,h,b,f)===false)break a}};j.next_position_in_range=
function(a,d,g){a||(a=1);d||(d=1);for(var b=this.gridmap,f=b.length,h=[],j,u=1;u<f;u++){j=g||b[u].length;for(var q=1;q<=j;q++)this.can_move_to({size_x:a,size_y:d},u,q,g)&&h.push({col:u,row:q,size_y:d,size_x:a})}return h.length>=1?this.sort_by_col_asc(h)[0]:false};j.closest_to_right=function(a,d){if(!this.gridmap[a])return false;for(var g=this.gridmap.length-1,b=a;b<=g;b++)if(this.gridmap[b][d])return{col:b,row:d};return false};j.closest_to_left=function(a,d){if(!this.gridmap[a])return false;for(var g=
a;g>=1;g--)if(this.gridmap[g][d])return{col:g,row:d};return false}})(jQuery,window,document);var lastTap=null,tapValid=!1,tapTimeout=null;function cancelTap(){tapValid=false}var rightClickPending=!1,rightClickEvent=null,holdTimeout=null,cancelMouseUp=!1;function cancelHold(){if(rightClickPending){window.clearTimeout(holdTimeout);rightClickPending=false;rightClickEvent=null}}
function startHold(a){if(!rightClickPending){rightClickPending=true;rightClickEvent=a.changedTouches[0];holdTimeout=window.setTimeout("doRightClick();",800)}}
function doRightClick(){rightClickPending=false;var a=rightClickEvent,j=document.createEvent("MouseEvent");j.initMouseEvent("mouseup",true,true,window,1,a.screenX,a.screenY,a.clientX,a.clientY,false,false,false,false,0,null);a.target.dispatchEvent(j);j=document.createEvent("MouseEvent");j.initMouseEvent("mousedown",true,true,window,1,a.screenX,a.screenY,a.clientX,a.clientY,false,false,false,false,2,null);a.target.dispatchEvent(j);j=document.createEvent("MouseEvent");j.initMouseEvent("contextmenu",
true,true,window,1,a.screenX+50,a.screenY+5,a.clientX+50,a.clientY+5,false,false,false,false,2,null);a.target.dispatchEvent(j);cancelMouseUp=true;rightClickEvent=null}
function iPadTouchStart(a){var j=a.changedTouches[0],e="mouseover",d=document.createEvent("MouseEvent");d.initMouseEvent(e,true,true,window,1,j.screenX,j.screenY,j.clientX,j.clientY,false,false,false,false,0,null);j.target.dispatchEvent(d);e="mousedown";d=document.createEvent("MouseEvent");d.initMouseEvent(e,true,true,window,1,j.screenX,j.screenY,j.clientX,j.clientY,false,false,false,false,0,null);j.target.dispatchEvent(d);if(tapValid){window.clearTimeout(tapTimeout);if(j.target==lastTap){lastTap=
null;tapValid=false;e="click";d=document.createEvent("MouseEvent");d.initMouseEvent(e,true,true,window,1,j.screenX,j.screenY,j.clientX,j.clientY,false,false,false,false,0,null);j.target.dispatchEvent(d);e="dblclick";d=document.createEvent("MouseEvent");d.initMouseEvent(e,true,true,window,1,j.screenX,j.screenY,j.clientX,j.clientY,false,false,false,false,0,null);j.target.dispatchEvent(d)}else{lastTap=j.target;tapValid=true;tapTimeout=window.setTimeout("cancelTap();",600);startHold(a)}}else{lastTap=
j.target;tapValid=true;tapTimeout=window.setTimeout("cancelTap();",600);startHold(a)}}
function iPadTouchHandler(a){var j="";if(!(a.touches.length>1)){switch(a.type){case "touchstart":if($(a.changedTouches[0].target).is("select"))return;iPadTouchStart(a);a.preventDefault();return false;case "touchmove":cancelHold();j="mousemove";a.preventDefault();break;case "touchend":if(cancelMouseUp){cancelMouseUp=false;a.preventDefault();return false}cancelHold();j="mouseup";break;default:return}var a=a.changedTouches[0],e=document.createEvent("MouseEvent");e.initMouseEvent(j,true,true,window,1,
a.screenX,a.screenY,a.clientX,a.clientY,false,false,false,false,0,null);a.target.dispatchEvent(e);if(j=="mouseup"&&tapValid&&a.target==lastTap){e=document.createEvent("MouseEvent");e.initMouseEvent("click",true,true,window,1,a.screenX,a.screenY,a.clientX,a.clientY,false,false,false,false,0,null);a.target.dispatchEvent(e)}}}
(function(a){a.extend(a.support,{touch:"ontouchend"in document});a.fn.addTouch=function(){a.support.touch&&this.each(function(a,e){e.addEventListener("touchstart",iPadTouchHandler,false);e.addEventListener("touchmove",iPadTouchHandler,false);e.addEventListener("touchend",iPadTouchHandler,false);e.addEventListener("touchcancel",iPadTouchHandler,false)});return this}})(jQuery);
(function(a,j){function e(a,b,d){var e=o[b.type]||{};if((b.empty||d)&&a==null)return null;if(b.def&&a==null)return b.def;a=e.floor?~~a:parseFloat(a);if(isNaN(a))return b.def;if(e.mod){a=a%e.mod;return a<0?e.mod+a:a}return e.min>a?e.min:e.max<a?e.max:a}function d(a,b,d){d=(d+1)%1;return d*6<1?a+(b-a)*6*d:d*2<1?b:d*3<2?a+(b-a)*(2/3-d)*6:a}var g=/^([\-+])=\s*(\d+\.?\d*)/,b=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],
a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],f=a.Color=function(b,d,e,f){return new a.Color.fn.parse(b,d,e,f)},h={rgba:{cache:"_rgba",props:{red:{idx:0,type:"byte",empty:true},green:{idx:1,type:"byte",empty:true},blue:{idx:2,type:"byte",empty:true},alpha:{idx:3,type:"percent",def:1}}},hsla:{cache:"_hsla",props:{hue:{idx:0,type:"degrees",empty:true},saturation:{idx:1,type:"percent",empty:true},lightness:{idx:2,type:"percent",empty:true}}}},o={"byte":{floor:true,min:0,max:255},
percent:{min:0,max:1},degrees:{mod:360,floor:true}},u=h.rgba.props,q=f.support={},l,k=a.each;h.hsla.props.alpha=u.alpha;f.fn=f.prototype={constructor:f,parse:function(d,g,o,q){if(d===j){this._rgba=[null,null,null,null];return this}if(d instanceof a||d.nodeType){d=d instanceof a?d.css(g):a(d).css(g);g=j}var z=this,E=a.type(d),B=this._rgba=[];if(g!==j){d=[d,g,o,q];E="array"}if(E==="string"){d=d.toLowerCase();k(b,function(a,b){var e=b.re.exec(d),f=e&&b.parse(e),g=b.space||"rgba",e=h[g].cache;if(f){f=
z[g](f);z[e]=f[e];B=z._rgba=f._rgba;return false}});if(B.length!==0){Math.max.apply(Math,B)===0&&a.extend(B,l.transparent);return this}d=l[d]||l._default;return this.parse(d)}if(E==="array"){k(u,function(a,b){B[b.idx]=e(d[b.idx],b)});return this}if(E==="object"){d instanceof f?k(h,function(a,b){d[b.cache]&&(z[b.cache]=d[b.cache].slice())}):k(h,function(a,b){k(b.props,function(a,f){var h=b.cache;if(!z[h]&&b.to){if(d[a]==null||a==="alpha")return;z[h]=b.to(z._rgba)}z[h][f.idx]=e(d[a],f,true)})});return this}},
is:function(a){var b=f(a),d=true,e=this;k(h,function(a,f){var h=b[f.cache],g;if(h){g=e[f.cache]||f.to&&f.to(e._rgba)||[];k(f.props,function(a,b){if(h[b.idx]!=null)return d=h[b.idx]==g[b.idx]})}return d});return d},_space:function(){var a=[],b=this;k(h,function(d,e){b[e.cache]&&a.push(d)});return a.pop()},transition:function(a,b){var d=f(a),g=d._space(),j=h[g],l=this[j.cache]||j.to(this._rgba),q=l.slice(),d=d[j.cache];k(j.props,function(a,f){var h=f.idx,g=l[h],j=d[h],k=o[f.type]||{};if(j!==null)if(g===
null)q[h]=j;else{k.mod&&(j-g>k.mod/2?g=g+k.mod:g-j>k.mod/2&&(g=g-k.mod));q[f.idx]=e((j-g)*b+g,f)}});return this[g](q)},blend:function(b){if(this._rgba[3]===1)return this;var d=this._rgba.slice(),e=d.pop(),h=f(b)._rgba;return f(a.map(d,function(a,b){return(1-e)*h[b]+e*a}))},toRgbaString:function(){var b="rgba(",d=a.map(this._rgba,function(a,b){return a==null?b>2?1:0:a});if(d[3]===1){d.pop();b="rgb("}return b+d.join(",")+")"},toHslaString:function(){var b="hsla(",d=a.map(this.hsla(),function(a,b){a==
null&&(a=b>2?1:0);b&&b<3&&(a=Math.round(a*100)+"%");return a});if(d[3]==1){d.pop();b="hsl("}return b+d.join(",")+")"},toHexString:function(b){var d=this._rgba.slice(),e=d.pop();b&&d.push(~~(e*255));return"#"+a.map(d,function(a){a=(a||0).toString(16);return a.length==1?"0"+a:a}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}};f.fn.parse.prototype=f.fn;h.hsla.to=function(a){if(a[0]==null||a[1]==null||a[2]==null)return[null,null,null,a[3]];var b=a[0]/255,d=
a[1]/255,e=a[2]/255,a=a[3],f=Math.max(b,d,e),h=Math.min(b,d,e),g=f-h,j=f+h,k=j*0.5;return[Math.round(h===f?0:b===f?60*(d-e)/g+360:d===f?60*(e-b)/g+120:60*(b-d)/g+240)%360,k===0||k===1?k:k<=0.5?g/j:g/(2-j),k,a==null?1:a]};h.hsla.from=function(a){if(a[0]==null||a[1]==null||a[2]==null)return[null,null,null,a[3]];var b=a[0]/360,e=a[1],f=a[2],a=a[3],e=f<=0.5?f*(1+e):f+e-f*e,f=2*f-e;return[Math.round(d(f,e,b+1/3)*255),Math.round(d(f,e,b)*255),Math.round(d(f,e,b-1/3)*255),a]};k(h,function(b,d){var h=d.props,
o=d.cache,l=d.to,q=d.from;f.fn[b]=function(b){l&&!this[o]&&(this[o]=l(this._rgba));if(b===j)return this[o].slice();var d=a.type(b),g=d==="array"||d==="object"?b:arguments,n=this[o].slice(),u;k(h,function(a,b){var f=g[d==="object"?a:b.idx];f==null&&(f=n[b.idx]);n[b.idx]=e(f,b)});if(q){u=f(q(n));u[o]=n;return u}return f(n)};k(h,function(d,e){f.fn[d]||(f.fn[d]=function(f){var h=a.type(f),j=d==="alpha"?this._hsla?"hsla":"rgba":b,k=this[j](),o=k[e.idx];if(h==="undefined")return o;if(h==="function"){f=
f.call(this,o);h=a.type(f)}if(f==null&&e.empty)return this;if(h==="string")(h=g.exec(f))&&(f=o+parseFloat(h[2])*(h[1]==="+"?1:-1));k[e.idx]=f;return this[j](k)})})});k(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(b,d){a.cssHooks[d]={set:function(b,e){e=f(e);if(!q.rgba&&e._rgba[3]!==1){var h,g=d==="backgroundColor"?b.parentNode:b;do h=a.curCSS(g,"backgroundColor");while((h===""||h==="transparent")&&(g=g.parentNode)&&g.style);
e=e.blend(h&&h!=="transparent"?h:"_default")}e=e.toRgbaString();b.style[d]=e}};a.fx.step[d]=function(b){if(!b.colorInit){b.start=f(b.elem,d);b.end=f(b.end);b.colorInit=true}a.cssHooks[d].set(b.elem,b.start.transition(b.end,b.pos))}});a(function(){var a=document.createElement("div").style;a.cssText="background-color:rgba(1,1,1,.5)";q.rgba=a.backgroundColor.indexOf("rgba")>-1});l=a.Color.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",
darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",
navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",red:"#ff0000",silver:"#c0c0c0",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);$.template("directory_customs",'<article id="directory" class="m-directory custom-widgets">    <header>        <hgroup>            <h1>Custom widgets</h1>            <a class="close" href="#">close</a>        </hgroup>        <a class="back" href="#directory">Go back to the widgets for internet services</a>    </header>    <div class="groups slidster">        <div class="viewport">            <ul></ul>        </div>    </div></article>');
$.template("slot_data",'<fieldset {{if unit}}class="has-unit"{{/if}}>{{if unit}}<span class="unit">${unit}</span>{{/if}}<span class="button">send</span></fieldset>');$.template("slot_gauge",'<section class="slot s-gauge ${data_source_kind}">    <p class="value">...</p>    <p class="subtitle">${subtitle}</p></section>');$.template("widget_appearance_fieldset",'{{if has_multiple_slot_appearances}}<a class="edit">Edit</a>{{/if}}<fieldset>    {{if editable}}    <strong class="title">NAME FOR VARIABLE ${layout}</strong>    <input type="text" class="field-subtitle" placeholder="value name" value="${subtitle}">    <strong class="title">CHOOSE A COLOR</strong>    <ul class="color_picker">        {{each(i, color) colors}}        <li{{if color === current_color}} class="ui-selected"{{/if}}>            <span style="background-color: ${color}" data-color="${color}"></span>        </li>        {{/each}}    </ul>    {{/if}}    {{if !editable && isNew}}    <h3>        <p>This item\'s appearance can\'t be changed.</p><br/>        <p>Nothing to see here, move along!</p>    </h3>    {{/if}}</fieldset>');
$.template("directory_services_detail",'<article id="directory-detail" class="m-directory service-widget-detail">    <header>        <hgroup>            <h1>${service_name} widgets</h1>        </hgroup>        <a class="close" href="#">close</a>        <a class="back" href="#directory/service/${service}">Go back to the ${service_name} widgets</a>    </header>    <div class="groups slidster">        <div class="viewport">            <ul>            </ul>        </div>    </div></article>');
$.template("slot_image_full",'<section class="slot s-image-full ${data_source_kind}">    <div class="picture empty">        <ul>            <li class="placeholder">No image yet</li>        </ul>    </div></section>');$.template("widget_content",'<section class="content pane">    <h1>Configure the content this widget will show:</h1>    <\!-- FF doesn\'t implement overflow property on fieldsets --\>    <div class="scroller">        <fieldset></fieldset>    </div></section>');
$.template("wizard_start",'<article class="modal-wizard wizard-start">    <h1>How would you like to start?</h1>    <div class="m-text">        <p>Use our setup wizard to create ready-made dashboards for the most popular services, or start from scratch adding all the widgets you need.</p>    </div>    <div class="actions layout-2">        <div class="col">            <a href="#wizard/dashboard/choose_service" class="btn btn-submit left">Setup wizard</a>        </div>        <div class="col">            <a href="#wizard/dashboard/manual_setup" class="btn btn-submit right">Manual setup</a>        </div>    </div></article>');
$.template("account_close",'<div class="pane account-close">    <section>        <h1>Sniff Sniff... we hate when someone leaves</h1>        <h2>Could you help us understand why? Hopefully we could improve things and see you again soon!</h2>        <div class="error" style="display:none;">            Oops, you forgot to tell us the reason        </div>        <ul>            <li>                <input type="radio" name="reason[]" id="reason-1">                <label for="reason-1">Too expensive</label>                <div>                    <textarea placeholder="Tell us a bit more about your project, and we will try to help. We started in a kitchen not long time ago, and understand that sometimes any extra expense is a luxury"></textarea>                </div>            </li>            <li>                <input type="radio" name="reason[]" id="reason-2">                <label for="reason-2">Too difficult, need more support</label>                <div>                    <textarea placeholder="Tell us what you need, and we will work together with you to set everything up"></textarea>                </div>            </li>            <li>                <input type="radio" name="reason[]" id="reason-3">                <label for="reason-3">Something not working</label>                <div>                    <textarea placeholder="Sorry to hear, please let us know what it is, and we will start working on it"></textarea>                </div>            </li>            <li>                <input type="radio" name="reason[]" id="reason-4">                <label for="reason-4">Not for me</label>                <div>                    <textarea placeholder="That\'s fine, happens sometimes. Tell us what you need, and we will try to help. Even if it\'s not with Ducksboard, we could recommend you another solution"></textarea>                </div>            </li>            <li>                <input type="radio" name="reason[]" id="reason-5">                <label for="reason-5">Missing features</label>                <div>                    <textarea placeholder="Tell us what you need, there are new features coming up constantly, and a few betas being tested at any time"></textarea>                </div>            </li>            <li>                <input type="radio" name="reason[]" id="reason-6">                <label for="reason-6">Other</label>                <div>                    <textarea placeholder="Appreciate if you could explain why..."></textarea>                </div>            </li>        </ul>        <p>*Closing an account cannot be undone. We will completely delete all your work, data, passwords, API keys, etc.. You might need to remove the external connection form external services you previously authorised it with.</p>    </section>    <div class="button-wrap">        <a href="#support" class="submit btn btn-submit">Request help</a>        <button type="submit" class="submit-and-close btn btn-submit "><span>Submit & delete<br><em>(Careful, this cannot be undone)</em></span></button>    </div></div>');
$.template("subscription_expired",'<article id="subscription-expired">    <header>        <hgroup>            <h1>Your account is disabled due to billing issues</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p>Your account is disabled due to billing issues, but your widgets will be updated daily. Unfortunately, you can no longer create new widgets or dashboards, neither will TV Mode or sharing be functional.</p>        <p>If you want all these features back, update you billing information <a href="#settings/account/billing">here</a>!</p>        <a class="btn-upsell" href="#settings/account/billing">            <strong>Update your billing information</strong>            <span>30 day money back guarantee</span>        </a>    </div></article>');
$.template("slot_image",'<section class="slot s-image ${data_source_kind} empty">    <div class="empty">        <ul>            <li class="placeholder">No image yet</li>        </ul>    </div>    <time class="time"></time>    <p class="caption"></p></section>');$.template("fieldset","<fieldset></fieldset>");$.template("input_text",'{{if tooltip}}    <div class="tip-input tip-${name}-container">        <input type="text" class="field-${name}" value="${value}" {{if placeholder}}placeholder="${placeholder}"{{/if}} {{if maxlength}}maxlength="${maxlength}"{{/if}} />        <input type="button" class="tip" value="tip" tabindex="9999" />        <div class="tooltip">            <span>{{html tooltip}}</span>            <a class="close-tooltip">close</a>        </div>    </div>{{else}}    <input type="text" class="field-${name}" value="${value}" {{if placeholder}}placeholder="${placeholder}"{{/if}} {{if maxlength}}maxlength="${maxlength}"{{/if}} />{{/if}}');
(function(a){function j(a,b){return function(d){return o(a.call(this,d),b)}}function e(a){return function(b){return this.lang().ordinal(a.call(this,b))}}function d(){}function g(a){f(this,a)}function b(a){var b=this._data={},d=a.years||a.year||a.y||0,e=a.months||a.month||a.M||0,f=a.weeks||a.week||a.w||0,g=a.days||a.day||a.d||0,j=a.hours||a.hour||a.h||0,k=a.minutes||a.minute||a.m||0,o=a.seconds||a.second||a.s||0,a=a.milliseconds||a.millisecond||a.ms||0;this._milliseconds=a+o*1E3+k*6E4+j*36E5;this._days=
g+f*7;this._months=e+d*12;b.milliseconds=a%1E3;o=o+h(a/1E3);b.seconds=o%60;k=k+h(o/60);b.minutes=k%60;j=j+h(k/60);b.hours=j%24;g=g+h(j/24);g=g+f*7;b.days=g%30;e=e+h(g/30);b.months=e%12;d=d+h(e/12);b.years=d}function f(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return a}function h(a){return a<0?Math.ceil(a):Math.floor(a)}function o(a,b){for(var d=a+"";d.length<b;)d="0"+d;return d}function u(a,b,d){var e=b._milliseconds,f=b._days,b=b._months;e&&a._d.setTime(+a+e*d);f&&a.date(a.date()+f*d);
if(b){e=a.date();a.date(1).month(a.month()+b*d).date(Math.min(e,a.daysInMonth()))}}function q(a,b){var d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0,h;for(h=0;h<d;h++)~~a[h]!==~~b[h]&&f++;return f+e}function l(a){if(!a)return t.fn._lang;!A[a]&&C&&require("./lang/"+a);return A[a]}function k(a){switch(a){case "DDDD":return Q;case "YYYY":return I;case "YYYYY":return M;case "S":case "SS":case "SSS":case "DDD":return T;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":case "a":case "A":return H;
case "X":return L;case "Z":case "ZZ":return R;case "T":return N;case "MM":case "DD":case "YY":case "HH":case "hh":case "mm":case "ss":case "M":case "D":case "d":case "H":case "h":case "m":case "s":return J;default:return RegExp(a.replace("\\",""))}}function n(a){var b,d=[];if(!a._d){for(b=0;b<7;b++)a._a[b]=d[b]=a._a[b]==null?b===2?1:0:a._a[b];d[3]=d[3]+(a._tzh||0);d[4]=d[4]+(a._tzm||0);b=new Date(0);if(a._useUTC){b.setUTCFullYear(d[0],d[1],d[2]);b.setUTCHours(d[3],d[4],d[5],d[6])}else{b.setFullYear(d[0],
d[1],d[2]);b.setHours(d[3],d[4],d[5],d[6])}a._d=b}}function x(a){var b=a._f.match(m),d=a._i,e,f;a._a=[];for(e=0;e<b.length;e++){(f=(k(b[e]).exec(d)||[])[0])&&(d=d.slice(d.indexOf(f)+f.length));if(Y[b[e]]){var h=a,g=void 0,j=h._a;switch(b[e]){case "M":case "MM":j[1]=f==null?0:~~f-1;break;case "MMM":case "MMMM":g=l(h._l).monthsParse(f);g!=null?j[1]=g:h._isValid=false;break;case "D":case "DD":case "DDD":case "DDDD":f!=null&&(j[2]=~~f);break;case "YY":j[0]=~~f+(~~f>68?1900:2E3);break;case "YYYY":case "YYYYY":j[0]=
~~f;break;case "a":case "A":h._isPm=(f+"").toLowerCase()==="pm";break;case "H":case "HH":case "h":case "hh":j[3]=~~f;break;case "m":case "mm":j[4]=~~f;break;case "s":case "ss":j[5]=~~f;break;case "S":case "SS":case "SSS":j[6]=~~(("0."+f)*1E3);break;case "X":h._d=new Date(parseFloat(f)*1E3);break;case "Z":case "ZZ":h._useUTC=true;if((g=(f+"").match(Z))&&g[1])h._tzh=~~g[1];if(g&&g[2])h._tzm=~~g[2];if(g&&g[0]==="+"){h._tzh=-h._tzh;h._tzm=-h._tzm}}if(f==null)h._isValid=false}}a._isPm&&a._a[3]<12&&(a._a[3]=
a._a[3]+12);a._isPm===false&&a._a[3]===12&&(a._a[3]=0);n(a)}function v(a,b,d,e,f){return f.relativeTime(b||1,!!d,a,e)}function w(a,b,d){b=d-b;d=d-a.day();d>b&&(d=d-7);d<b-7&&(d=d+7);return Math.ceil(t(a).add("d",d).dayOfYear()/7)}function z(b){var d=b._i,e=b._f;if(d===null||d==="")return null;if(typeof d==="string")b._i=d=l().preparse(d);if(t.isMoment(d)){b=f({},d);b._d=new Date(+d._d)}else if(e)if(Object.prototype.toString.call(e)==="[object Array]"){for(var d=b,h,j,k=99;d._f.length;){h=f({},d);
h._f=d._f.pop();x(h);e=new g(h);if(e.isValid()){j=e;break}h=q(h._a,e.toArray());if(h<k){k=h;j=e}}f(d,j)}else x(b);else{j=b;d=j._i;e=K.exec(d);if(d===a)j._d=new Date;else if(e)j._d=new Date(+e[1]);else if(typeof d==="string"){e=j._i;if(W.exec(e)){j._f="YYYY-MM-DDT";for(d=0;d<4;d++)if(U[d][1].exec(e)){j._f=j._f+U[d][0];break}if(R.exec(e))j._f=j._f+" Z";x(j)}else j._d=new Date(e)}else if(Object.prototype.toString.call(d)==="[object Array]"){j._a=d.slice(0);n(j)}else j._d=d instanceof Date?new Date(+d):
new Date(d)}return new g(b)}function E(a,b){t.fn[a]=t.fn[a+"s"]=function(a){var d=this._isUTC?"UTC":"";if(a!=null){this._d["set"+d+b](a);return this}return this._d["get"+d+b]()}}function B(a){t.duration.fn[a]=function(){return this._data[a]}}function F(a,b){t.duration.fn["as"+a]=function(){return+this/b}}for(var t,G=Math.round,y,A={},C=typeof module!=="undefined"&&module.exports,K=/^\/?Date\((\-?\d+)/i,m=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,
P=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,J=/\d\d?/,T=/\d{1,3}/,Q=/\d{3}/,I=/\d{1,4}/,M=/[+\-]?\d{1,6}/,H=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,R=/Z|[\+\-]\d\d:?\d\d/i,N=/T/i,L=/[\+\-]?\d+(\.\d{1,3})?/,W=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,U=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Z=/([\+\-]|\d\d)/gi,
fa=["Month","Date","Hours","Minutes","Seconds","Milliseconds"],ha={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},ia={},ja=["DDD","w","W","M","D","d"],ra=["M","D","H","h","m","s","w","W"],Y={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,
a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return o(this.year()%100,2)},YYYY:function(){return o(this.year(),4)},YYYYY:function(){return o(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%
12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return o(~~(this.milliseconds()/10),2)},SSS:function(){return o(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";if(a<0){a=-a;b="-"}return b+o(~~(a/60),2)+":"+o(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";if(a<0){a=-a;b="-"}return b+o(~~(10*a/6),4)},X:function(){return this.unix()}};ja.length;){y=ja.pop();Y[y+"o"]=e(Y[y])}for(;ra.length;){y=
ra.pop();Y[y+y]=j(Y[y],2)}Y.DDDD=j(Y.DDD,3);d.prototype={set:function(a){var b,d;for(d in a){b=a[d];typeof b==="function"?this[d]=b:this["_"+d]=b}},_months:["January","February","March","April","May","June","July","August","September","October","November","December"],months:function(a){return this._months[a.month()]},_monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,d;if(!this._monthsParse)this._monthsParse=
[];for(b=0;b<12;b++){if(!this._monthsParse[b]){d=t([2E3,b]);d="^"+this.months(d,"")+"|^"+this.monthsShort(d,"");this._monthsParse[b]=RegExp(d.replace(".",""),"i")}if(this._monthsParse[b].test(a))return b}},_weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:["Su","Mo","Tu","We","Th",
"Fr","Sa"],weekdaysMin:function(a){return this._weekdaysMin[a.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];if(!b&&this._longDateFormat[a.toUpperCase()]){b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});this._longDateFormat[a]=b}return b},meridiem:function(a,b,d){return a>11?d?"pm":"PM":d?"am":"AM"},_calendar:{sameDay:"[Today at] LT",
nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var d=this._calendar[a];return typeof d==="function"?d.apply(b):d},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,d,e){var f=this._relativeTime[d];return typeof f==="function"?f(a,b,
d,e):f.replace(/%d/i,a)},pastFuture:function(a,b){var d=this._relativeTime[a>0?"future":"past"];return typeof d==="function"?d(b):d.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return w(a,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}};t=function(a,b,d){return z({_i:a,_f:b,_l:d,_isUTC:false})};t.utc=function(a,b,d){return z({_useUTC:true,_isUTC:true,_l:d,_i:a,_f:b})};
t.unix=function(a){return t(a*1E3)};t.duration=function(a,d){var e=t.isDuration(a),f=typeof a==="number",h=e?a._data:f?{}:a;if(f)d?h[d]=a:h.milliseconds=a;f=new b(h);if(e&&a.hasOwnProperty("_lang"))f._lang=a._lang;return f};t.version="2.0.0";t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";t.lang=function(a,b){if(!a)return t.fn._lang._abbr;if(b){b.abbr=a;A[a]||(A[a]=new d);A[a].set(b)}else A[a]||l(a);t.duration.fn._lang=t.fn._lang=l(a)};t.langData=function(a){if(a&&a._lang&&a._lang._abbr)a=a._lang._abbr;return l(a)};
t.isMoment=function(a){return a instanceof g};t.isDuration=function(a){return a instanceof b};t.fn=g.prototype={clone:function(){return t(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1E3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return t.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),
this.seconds(),this.milliseconds()]},isValid:function(){if(this._isValid==null)this._isValid=this._a?!q(this._a,(this._isUTC?t.utc(this._a):t(this._a)).toArray()):!isNaN(this._d.getTime());return!!this._isValid},utc:function(){this._isUTC=true;return this},local:function(){this._isUTC=false;return this},format:function(a){for(var b=this,a=a||t.defaultFormat,d=function(a){return b.lang().longDateFormat(a)||a},e=5;e--&&P.test(a);)a=a.replace(P,d);if(!ia[a]){var f=d=a,h=f.match(m),g,j;g=0;for(j=h.length;g<
j;g++)if(Y[h[g]])h[g]=Y[h[g]];else{var e=h,k=g,o;o=h[g];o=o.match(/\[.*\]/)?o.replace(/^\[|\]$/g,""):o.replace(/\\/g,"");e[k]=o}ia[d]=function(a){var b="";for(g=0;g<j;g++)b=b+(typeof h[g].call==="function"?h[g].call(a,f):h[g]);return b}}a=ia[a](b);return this.lang().postformat(a)},add:function(a,b){var d;d=typeof a==="string"?t.duration(+b,a):t.duration(a,b);u(this,d,1);return this},subtract:function(a,b){var d;d=typeof a==="string"?t.duration(+b,a):t.duration(a,b);u(this,d,-1);return this},diff:function(a,
b,d){var a=this._isUTC?t(a).utc():t(a).local(),e=(this.zone()-a.zone())*6E4,f;b&&(b=b.replace(/s$/,""));if(b==="year"||b==="month"){e=(this.daysInMonth()+a.daysInMonth())*432E5;f=(this.year()-a.year())*12+(this.month()-a.month());f=f+(this-t(this).startOf("month")-(a-t(a).startOf("month")))/e;b==="year"&&(f=f/12)}else{e=this-a-e;f=b==="second"?e/1E3:b==="minute"?e/6E4:b==="hour"?e/36E5:b==="day"?e/864E5:b==="week"?e/6048E5:e}return d?f:h(f)},from:function(a,b){return t.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},
fromNow:function(a){return this.from(t(),a)},calendar:function(){var a=this.diff(t().startOf("day"),"days",true);return this.format(this.lang().calendar(a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse",this))},isLeapYear:function(){var a=this.year();return a%4===0&&a%100!==0||a%400===0},isDST:function(){return this.zone()<t([this.year()]).zone()||this.zone()<t([this.year(),5]).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();
return a==null?b:this.add({d:a-b})},startOf:function(a){a=a.replace(/s$/,"");switch(a){case "year":this.month(0);case "month":this.date(1);case "week":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}a==="week"&&this.day(0);return this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(a,b){b=typeof b!=="undefined"?b:"millisecond";return+this.clone().startOf(b)>+t(a).startOf(b)},
isBefore:function(a,b){b=typeof b!=="undefined"?b:"millisecond";return+this.clone().startOf(b)<+t(a).startOf(b)},isSame:function(a,b){b=typeof b!=="undefined"?b:"millisecond";return+this.clone().startOf(b)===+t(a).startOf(b)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return t.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(a){var b=G((t(this).startOf("day")-t(this).startOf("year"))/864E5)+1;return a==null?b:this.add("d",a-b)},isoWeek:function(a){var b=
w(this,1,4);return a==null?b:this.add("d",(a-b)*7)},week:function(a){var b=this.lang().week(this);return a==null?b:this.add("d",(a-b)*7)},lang:function(b){if(b===a)return this._lang;this._lang=l(b);return this}};for(y=0;y<fa.length;y++)E(fa[y].toLowerCase().replace(/s$/,""),fa[y]);E("year","FullYear");t.fn.days=t.fn.day;t.fn.weeks=t.fn.week;t.fn.isoWeeks=t.fn.isoWeek;t.duration.fn=b.prototype={weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864E5+
this._months*2592E6},humanize:function(a){var b=+this,d;d=!a;var e=this.lang(),f=G(Math.abs(b)/1E3),h=G(f/60),g=G(h/60),j=G(g/24),k=G(j/365),f=f<45&&["s",f]||h===1&&["m"]||h<45&&["mm",h]||g===1&&["h"]||g<22&&["hh",g]||j===1&&["d"]||j<=25&&["dd",j]||j<=45&&["M"]||j<345&&["MM",G(j/30)]||k===1&&["y"]||["yy",k];f[2]=d;f[3]=b>0;f[4]=e;d=v.apply({},f);a&&(d=this.lang().pastFuture(b,d));return this.lang().postformat(d)},lang:t.fn.lang};for(y in ha)if(ha.hasOwnProperty(y)){F(y,ha[y]);B(y.toLowerCase())}F("Weeks",
6048E5);t.lang("en",{ordinal:function(a){var b=a%10;return a+(~~(a%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th")}});if(C)module.exports=t;typeof ender==="undefined"&&(this.moment=t);typeof define==="function"&&define.amd&&define("moment",[],function(){return t})}).call(this);
(function(a){if(!a.console||!a.console.log)a.console={log:function(){}};if(!a.mixpanel||!a.mixpanel.track)a.mixpanel={track:function(){}};a.Ducksboard=a.D=_.extend({development:!_.endsWith(window.location.hostname,".ducksboard.com"),support:{xhrFileUpload:!(!window.XMLHttpRequestUpload||!window.FileReader),xhrFormDataFileUpload:!!window.FormData},config:void 0,bootstrap:function(a){this.config=a;if($.browser.msie&&$.browser.version<=8)document.location.href=a.unsupported_browser_url;else if(Modernizr.websockets){if(a.sentry_dsn){Raven.config(a.sentry_dsn).install();
Raven.setUser({id:D.bb.account.id})}this.Websocket.connect()}else document.location.href=a.no_websockets_url}},Backbone.Events)})(window);
(function(){_.extend(Ducksboard,{isocountries:{AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AN:"Netherlands Antilles",AO:"Angola",AP:"Asia/Pacific Region",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"\u00c5land Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",
BL:"Saint Barth\u00e9lemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Congo, The Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"C\u00f4te d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cape Verde",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Republic",
DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",EU:"Europe",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia, Federated States of",FO:"Faroe Islands",FR:"France",FX:"France, Metropolitan",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",
GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran, Islamic Republic of",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",
KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao People's Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libyan Arab Jamahiriya",MA:"Morocco",MC:"Monaco",MD:"Moldova",ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia",
ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",
PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestinian Territory",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",ST:"Sao Tome and Principe",SV:"El Salvador",SY:"Syrian Arab Republic",
SZ:"Swaziland",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania, United Republic of",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See (Vatican City State)",VC:"Saint Vincent and the Grenadines",VE:"Venezuela",VG:"Virgin Islands, British",
VI:"Virgin Islands, U.S.",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"}})})();
(function(){var a={AdWords:{"ga:CPC":"Cost to advertiser per click.","ga:CPM":"Cost per thousand impressions.","ga:CTR":"Click-through-rate for your ad. This is equal to the number of clicks divided by the number of impressions for your ad (e.g. how many times users clicked on one of your ads where that ad appeared).","ga:ROI":"<code>(ga:transactionRevenue + ga:goalValueAll - ga:adCost) / ga:adCost</code><br/>Returns on Investment is overall transaction profit divided by derived advertising cost.","ga:RPC":"<code>(ga:transactionRevenue + ga:goalValueAll) / ga:adClicks</code><br/>RPC or revenue-per-click is the average revenue (from ecommerce sales and/or goal value) you received for each click on one of your search ads.",
"ga:adClicks":"The total number of times users have clicked on an ad to reach your property.","ga:adCost":"Derived cost for the advertising campaign. The currency for this value is based on the currency that you set in your AdWords account.","ga:costPerConversion":"<code>ga:adCost / (ga:transactions + ga:goalCompletionsAll)</code><br/>The cost per conversion (including ecommerce and goal conversions) for your property.","ga:costPerGoalConversion":"<code>ga:adCost / ga:goalCompletionsAll</code><br/>The cost per goal conversion for your property.",
"ga:costPerTransaction":"<code>ga:adCost / ga:transactions</code><br/>The cost per transaction for your property.","ga:impressions":"Total number of campaign impressions.","ga:margin":"<code>(ga:transactionRevenue + ga:goalValueAll - ga:adCost) / (ga:transactionRevenue + ga:goalValueAll)</code><br/>The overall transaction profit margin."},"App Tracking":{"ga:avgScreenviewDuration":"The average amount of time users spent on a screen in seconds.","ga:screenviews":"The total number of screen views.",
"ga:screenviewsPerSession":"<code>ga:screenviews / ga:visits</code><br/>The average number of <code>ga:screenviews</code> per session.","ga:timeOnScreen":"The time spent viewing the current screen.","ga:uniqueScreenviews":"The number of different (unique) <code>ga:screenviews</code> within a session."},"Custom Variables or Columns":{"ga:metricXX":"The name of the requested custom metric, where XX refers the number/index of the custom metric."},Ecommerce:{"ga:itemQuantity":"The total number of items purchased. For example, if users purchase 2 frisbees and 5 tennis balls, 7 items have been purchased.",
"ga:itemRevenue":"The total revenue from purchased product items on your property.","ga:itemsPerPurchase":"<code>ga:itemQuantity / ga:uniquePurchases</code><br/>The average quantity of this item (or group of items) sold per purchase.","ga:localItemRevenue":"Product revenue in local currency.","ga:localTransactionRevenue":"Transaction revenue in local currency.","ga:localTransactionShipping":"Transaction shipping cost in local currency.","ga:localTransactionTax":"Transaction tax in local currency.",
"ga:revenuePerItem":"<code>ga:itemRevenue / ga:itemQuantity</code><br/>The average revenue per item.","ga:revenuePerTransaction":"<code>ga:transactionRevenue / ga:transactions</code><br/>The average revenue for an e-commerce transaction.","ga:totalValue":"<code>ga:transactionRevenue + ga:goalValueAll</code><br/>Total value for your property (including total revenue and total goal value).","ga:transactionRevenue":"The total sale revenue provided in the transaction excluding shipping and tax.","ga:transactionRevenuePerVisit":"<code>ga:transactionRevenue / ga:visits</code><br/>Average transaction revenue for a visit to your property.",
"ga:transactionShipping":"The total cost of shipping.","ga:transactionTax":"The total amount of tax.","ga:transactions":"The total number of transactions.","ga:transactionsPerVisit":"<code>ga:transactions / ga:visits</code><br/>The average number of transactions for a visit to your property.","ga:uniquePurchases":"The number of product sets purchased. For example, if users purchase 2 frisbees and 5 tennis balls from your site, 2 unique products have been purchased."},"Event Tracking":{"ga:avgEventValue":"<code>ga:eventValue / ga:totalEvents</code><br/>The average value of an event.",
"ga:eventValue":"The total value of events for the view (profile).","ga:eventsPerVisitWithEvent":"<code>ga:totalEvents / ga:visitsWithEvent</code><br/>The average number of events per visit with event.","ga:totalEvents":"The total number of events for the view (profile), across all categories.","ga:uniqueEvents":"The total number of unique events for the view (profile), across all categories.","ga:visitsWithEvent":"The total number of visits with events."},"Exception Tracking":{"ga:exceptions":"The number of exceptions that were sent to Google Analytics.",
"ga:exceptionsPerScreenview":"<code>ga:exceptions / ga:screenviews</code><br/>The number of exceptions thrown divided by the number of screenviews.","ga:fatalExceptions":"The number of exceptions where <code>isFatal</code> is set to <code>true</code>.","ga:fatalExceptionsPerScreenview":"<code>ga:fatalExceptions / ga:screenviews</code><br/>The number of fatal exceptions thrown divided by the number of screenviews."},"Goal Conversions":{"ga:goalAbandonRateAll":"<code>(ga:goalStartsAll - ga:goalCompletionsAll) / ga:goalStartsAll) * 100</code><br/>The rate at which goals were abandoned.",
"ga:goalAbandonsAll":"<code>ga:goalStartsAll - ga:goalCompletionsAll</code><br/>The overall number of times visitors started goals without actually completing them.","ga:goalCompletionsAll":"The total number of completions for all goals defined for your view (profile).","ga:goalConversionRateAll":"<code>(ga:goalCompletionsAll / ga:visits) * 100</code><br/>The percentage of visits which resulted in a conversion to at least one of your goals.","ga:goalStartsAll":"The total number of starts for all goals defined for your view (profile).",
"ga:goalValueAll":"The total numeric value for all goals defined for your view (profile).","ga:goalValuePerVisit":"<code>ga:goalValueAll / ga:visits</code><br/>The average goal value of a visit to your property.","ga:goalXXAbandonRate":"<code>((ga:goalXXStarts - ga:goalXXCompletions) / ga:goalXXStarts) * 100</code><br/>The rate at which the requested goal number was abandoned.","ga:goalXXAbandons":"<code>ga:goalXXStarts - ga:goalXXCompletions</code><br/>The number of times visitors started conversion activity on the requested goal number without actually completing it.",
"ga:goalXXCompletions":"The total number of completions for the requested goal number.","ga:goalXXConversionRate":"<code>(ga:goalXXCompletions / ga:visits) * 100</code><br/>The percentage of visits which resulted in a conversion to the requested goal number.","ga:goalXXStarts":"The total number of starts for the requested goal number.","ga:goalXXValue":"The total numeric value for the requested goal number."},"Internal Search":{"ga:avgSearchDepth":"<code>ga:searchDepth / ga:searchUniques</code><br/>The average number of pages people viewed after performing a search on your property.",
"ga:avgSearchDuration":"<code>ga:searchDuration / ga:searchUniques</code><br/>The average amount of time people spent on your property after searching.","ga:avgSearchResultViews":"<code>ga:searchResultViews / ga:searchUniques</code><br/>The average number of times people viewed a search results page after performing a search.","ga:goalValueAllPerSearch":"<code>ga:goalValueAll / ga:searchUniques</code><br/>The average goal value of a search on your property.","ga:percentSearchRefinements":"<code>ga:searchRefinements / ga:searchResultViews</code><br/>The percentage of number of times a refinement (i.e., transition) occurs between internal search keywords within a session.",
"ga:percentVisitsWithSearch":"<code>(ga:searchVisits / ga:visits) * 100</code><br/>The percentage of visits with search.","ga:searchDepth":"The average number of subsequent page views made on your property after a use of your internal search feature.","ga:searchDuration":"The visit duration to your property where a use of your internal search feature occurred.","ga:searchExitRate":"<code>(ga:searchExits / ga:searchUniques) * 100</code><br/>The percentage of searches that resulted in an immediate exit from your property.",
"ga:searchExits":"The number of exits on your site that occurred following a search result from your internal search feature.","ga:searchGoalConversionRateAll":"<code>(ga:goalCompletionsAll / ga:searchUniques) * 100</code><br/>The percentage of search visits (i.e., visits that included at least one search) which resulted in a conversion to at least one of your goals.","ga:searchGoalXXConversionRate":"<code>(ga:goalXXCompletions / ga:searchUniques) * 100</code><br/>The percentage of search visits (i.e., visits that included at least one search) which resulted in a conversion to the requested goal number.",
"ga:searchRefinements":"The total number of times a refinement (transition) occurs between internal search keywords within a session. For example if the sequence of keywords is: &quot;shoes&quot;, &quot;shoes&quot;, &quot;pants&quot;, &quot;pants&quot;, this metric will be one because the transition between &quot;shoes&quot; and &quot;pants&quot; is different.","ga:searchResultViews":"The number of times a search result page was viewed after performing a search.","ga:searchUniques":"The total number of unique keywords from internal searches within a session. For example if &quot;shoes&quot; was searched for 3 times in a session, it will be only counted once.",
"ga:searchVisits":"The total number of sessions that included an internal search"},"Page Tracking":{"ga:avgTimeOnPage":"<code>ga:timeOnPage / (ga:pageviews - ga:exits)</code><br/>The average amount of time visitors spent viewing this page or a set of pages.","ga:entranceRate":"<code>(ga:entrances / ga:pageviews) * 100</code><br/>The percentage of pageviews in which this page was the entrance.","ga:entrances":"The number of entrances to your property measured as the first pageview in a session. Typically used with <code>ga:landingPagePath</code>",
"ga:exitRate":"<code>(ga:exits / ga:pageviews) * 100</code><br/>The percentage of exits from your property that occurred out of the total page views.","ga:exits":"The number of exits from your property.","ga:pageValue":"<code>(ga:transactionRevenue + ga:goalValueAll) / ga:uniquePageviews (for the page or set of pages)</code><br/>The average value of this page or set of pages.","ga:pageviews":"The total number of pageviews for your property.","ga:pageviewsPerVisit":"<code>ga:pageviews / ga:visits</code><br/>The average number of pages viewed during a visit to your property. Repeated views of a single page are counted.",
"ga:timeOnPage":"How long a visitor spent on a particular page in seconds. Calculated by subtracting the initial view time for a particular page from the initial view time for a subsequent page. Thus, this metric does not apply to exit pages for your property.","ga:uniquePageviews":"The number of different (unique) pages within a session. This takes into both the <code>pagePath</code> and <code>pageTitle</code> to determine uniqueness."},Session:{"ga:avgTimeOnSite":"<code>ga:timeOnSite / ga:visits</code><br/>The average duration visitor sessions represented in total seconds.",
"ga:bounces":"The total number of single page (or single engagement hit) sessions for your property.","ga:entranceBounceRate":"<code>(ga:bounces / ga:entrances) * 100</code><br/>The percentage of single-page visits (i.e. visits in which the person left your property from the entrance page).","ga:timeOnSite":"The total duration of visitor sessions represented in total seconds.","ga:visitBounceRate":"<code>(ga:bounces / ga:visits) * 100</code><br/>The percentage of single-page visits (i.e., visits in which the person left your property from the first page).",
"ga:visits":"Counts the total number of sessions."},"Site Speed":{"ga:avgDomContentLoadedTime":"<code>(ga:domContentLoadedTime / ga:domLatencyMetricsSample) * 0.001</code><br/>The average time (in seconds) it takes the browser to parse the document.","ga:avgDomInteractiveTime":"<code>(ga:domInteractiveTime / ga:domLatencyMetricsSample) * 0.001</code><br/>The average time (in seconds) it takes the browser to parse the document and execute deferred and parser-inserted scripts including the network time from the user&#39;s location to your server.",
"ga:avgDomainLookupTime":"<code>(ga:domainLookupTime / ga:speedMetricsSample) * 0.001</code><br/>The average amount of time (in seconds) spent in DNS lookup for this page.","ga:avgPageDownloadTime":"<code>(pageDownloadTime / ga:speedMetricsSample) * 0.001</code><br/>The average amount of time (in seconds) to download this page.","ga:avgPageLoadTime":"<code>(ga:pageLoadTime / ga:pageLoadSample) * 0.001</code><br/>The average amount of time (in seconds) it takes for pages from the sample set to load, from initiation of the pageview (e.g. click on a page link) to load completion in the browser.",
"ga:avgRedirectionTime":"<code>(ga:redirectionTime / ga:speedMetricsSample) * 0.001</code><br/>The average amount of time (in seconds) spent in redirects before fetching this page. If there are no redirects, the value for this metric is expected to be 0.","ga:avgServerConnectionTime":"<code>(ga:serverConnectionTime / ga:speedMetricsSample) * 0.001</code><br/>The average amount of time (in seconds) spent in establishing TCP connection for this page.","ga:avgServerResponseTime":"<code>(ga:serverResponseTime / ga:speedMetricsSample) * 0.001</code><br/>The average amount of time (in seconds) your server takes to respond to a user request, including the network time from user&#39;s location to your server.",
"ga:domContentLoadedTime":"The time the browser takes (in milliseconds) to parse the document and execute deferred and parser-inserted scripts (<code>DOMContentLoaded</code>), including the network time from the user&#39;s location to your server. Parsing of the document is finished, the Document Object Model is ready, but referenced style sheets, images, and subframes may not be finished loading. This event is often the starting point for javascript framework execution, e.g., JQuery&#39;s <code>onready()</code> callback, etc.",
"ga:domInteractiveTime":"The time the browser takes (in milliseconds) to parse the document (<code>DOMInteractive</code>), including the network time from the user&#39;s location to your server. At this time, the user can interact with the Document Object Model even though it is not fully loaded.","ga:domLatencyMetricsSample":"The sample set (or count) of pageviews used to calculate the averages for site speed DOM metrics. This metric is used in the <code>ga:avgDomContentLoadedTime</code> and <code>ga:avgDomInteractiveTime</code> calculations.",
"ga:domainLookupTime":"The total amount of time (in milliseconds) spent in DNS lookup for this page among all samples.","ga:pageDownloadTime":"The total amount of time (in milliseconds) to download this page among all samples.","ga:pageLoadSample":"The sample set (or count) of pageviews used to calculate the average page load time.","ga:pageLoadTime":"Total Page Load Time is the amount of time (in milliseconds) it takes for pages from the sample set to load, from initiation of the pageview (e.g. click on a page link) to load completion in the browser.",
"ga:redirectionTime":"The total amount of time (in milliseconds) spent in redirects before fetching this page among all samples. If there are no redirects, the value for this metric is expected to be 0.","ga:serverConnectionTime":"The total amount of time (in milliseconds) spent in establishing TCP connection for this page among all samples.","ga:serverResponseTime":"The total amount of time (in milliseconds) your server takes to respond to a user request among all samples, including the network time from user&#39;s location to your server.",
"ga:speedMetricsSample":"The sample set (or count) of pageviews used to calculate the averages for site speed metrics. This metric is used in all site speed average calculations including <code>ga:avgDomainLookupTime</code>, <code>ga:avgPageDownloadTime</code>, <code>ga:avgRedirectionTime</code>, <code>ga:avgServerConnectionTime</code>, and <code>ga:avgServerResponseTime</code>."},"Social Activities":{"ga:socialActivities":"The count of activities where a content URL was shared / mentioned on a social data hub partner network."},
"Social Interactions":{"ga:socialInteractions":"The total number of social interactions on your property.","ga:socialInteractionsPerVisit":"<code>ga:socialInteractions / ga:uniqueSocialInteractions</code><br/>The number of social interactions per visit to your property.","ga:uniqueSocialInteractions":"The number of sessions during which the specified social action(s) occurred at least once. This is based on the the unique combination of <code>ga:socialInteractionNetwork</code>, <code>ga:socialInteractionAction</code>, and <code>ga:socialInteractionTarget</code>."},
"Traffic Sources":{"ga:organicSearches":"The number of organic searches that happened within a session. This metric is search engine agnostic."},"User Timings":{"ga:avgUserTimingValue":"<code>ga:userTimingValue / ga:userTimingSample</code><br/>The average amount of elapsed time.","ga:userTimingSample":"The number of hits that were sent for a particular <code>ga:userTimingCategory</code>, <code>ga:userTimingLabel</code>, and <code>ga:userTimingVariable</code>.","ga:userTimingValue":"The total number of milliseconds for a user timing."},
Visitor:{"ga:newVisits":"The number of visitors whose visit to your property was marked as a first-time visit.","ga:percentNewVisits":"<code>(ga:newVisits / ga:visits) * 100</code><br/>The percentage of visits by people who had never visited your property before.","ga:visitors":"Total number of visitors to your property for the requested time period."}},j={AdWords:{"ga:adDestinationUrl":"The URLs to which your AdWords ads referred traffic.","ga:adDisplayUrl":"The URLs your AdWords ads displayed.",
"ga:adDistributionNetwork":"The networks used to deliver your ads (Content, Search, Search partners, etc.).","ga:adFormat":"Your AdWords ad formats (Text, Image, Flash, Video, etc.).","ga:adGroup":"The name of your AdWords ad group.","ga:adMatchType":"The match types applied to your keywords (Phrase, Exact, Broad, etc.). Ads on the content network are identified as &quot;Content network&quot;.","ga:adMatchedQuery":"The search queries that triggered impressions of your AdWords ads.","ga:adPlacementDomain":"The domains where your ads on the content network were placed.",
"ga:adPlacementUrl":"The URLs where your ads on the content network were placed.","ga:adSlot":"The location of the advertisement on the hosting page (Top, RHS, or not set).","ga:adSlotPosition":"The ad slot positions in which your AdWords ads appeared (1-8).","ga:adTargetingOption":"How you manage your ads on the content network. Values are <code>Automatic placements</code> or <code>Managed placements</code>.","ga:adTargetingType":"How your AdWords ads were targeted (keyword, placement, and vertical targeting, etc.).",
"ga:adwordsAdGroupID":'A string. Corresponds to AdWords API <a href="//developers.google.com/adwords/api/docs/reference/latest/AdGroupService.AdGroup#id">AdGroup.id</a>.',"ga:adwordsCampaignID":'A string. Corresponds to AdWords API <a href="//developers.google.com/adwords/api/docs/reference/latest/CampaignService.Campaign#id">Campaign.id</a>.',"ga:adwordsCreativeID":'A string. Corresponds to AdWords API <a href="//developers.google.com/adwords/api/docs/reference/latest/AdGroupAdService.Ad#id">Ad.id</a>.',
"ga:adwordsCriteriaID":'A string. Corresponds to AdWords API <a href="//developers.google.com/adwords/api/docs/reference/latest/AdGroupCriterionService.Criterion#id">Criterion.id</a>.',"ga:adwordsCustomerID":'A string. Corresponds to AdWords API <a href="//developers.google.com/adwords/api/docs/reference/latest/CustomerService.Customer#customerId">AccountInfo.customerId</a>.'},"App Tracking":{"ga:appId":"The ID of the application.","ga:appInstallerId":"ID of the installer (e.g., Google Play Store) from which the app was downloaded. By default, the app installer ID is set based on the PackageManager#getInstallerPackageName method.",
"ga:appName":"The name of the application.","ga:appVersion":"The version of the application.","ga:exitScreenName":"The name of the screen when the user exited the application.","ga:landingScreenName":"The name of the first screen viewed.","ga:screenDepth":"The number of screenviews per session reported as a string. Can be useful for historgrams.","ga:screenName":"The name of the screen."},"Custom Variables or Columns":{"ga:customVarNameXX":"The name for the requested custom variable.","ga:customVarValueXX":"The value for the requested custom variable.",
"ga:dimensionXX":"The name of the requested custom dimension, where XX refers the number/index of the custom dimension."},Ecommerce:{"ga:affiliation":"Typically used to designate a supplying company or brick and mortar location; product affiliation.","ga:currencyCode":"The local currency code of the transaction based on ISO 4217 standard.","ga:daysToTransaction":"The number of days between users&#39; purchases and the related campaigns that lead to the purchases.","ga:productCategory":"Any product variations (size, color) for purchased items as supplied by your ecommerce application.",
"ga:productName":"The product name for purchased items as supplied by your ecommerce tracking application.","ga:productSku":"The product sku for purchased items as you have defined them in your ecommerce tracking application.","ga:transactionId":"The transaction ID for the shopping cart purchase as supplied by your ecommerce tracking method.","ga:visitsToTransaction":"The number of visits between users&#39; purchases and the related campaigns that lead to the purchases."},"Event Tracking":{"ga:eventAction":"The action of the event.",
"ga:eventCategory":"The category of the event.","ga:eventLabel":"The label of the event."},"Exception Tracking":{"ga:exceptionDescription":"The description for the exception."},Experiments:{"ga:experimentId":"The visitor-scoped id of the content experiment that the user was exposed to when the metrics were reported.","ga:experimentVariant":"The visitor-scoped id of the particular variation that the user was exposed to during a content experiment."},"Geo / Network":{"ga:city":"The cities of property visitors, derived from IP addresses.",
"ga:continent":"The continents of property visitors, derived from IP addresses.","ga:country":"The countries of website visitors, derived from IP addresses.","ga:latitude":"The approximate latitude of the visitor&#39;s city. Derived from IP address. Locations north of the equator are represented by positive values and locations south of the equator by negative values.","ga:longitude":"The approximate longitude of the visitor&#39;s city. Derived from IP address. Locations east of the meridian are represented by positive values and locations west of the meridian by negative values.",
"ga:metro":'The <a href="http://en.wikipedia.org/wiki/Designated_Market_Area">Designated Market Area (DMA)</a> from where traffic arrived on your property.',"ga:networkDomain":"The domain name of the ISPs used by visitors to your property. This is derived from the domain name registered to the IP address.","ga:networkLocation":"The name of service providers used to reach your property. For example, if most visitors to your website come via the major service providers for cable internet, you will see the names of those cable service providers in this element.",
"ga:region":"The region of visitors to your property, derived from IP addresses. In the U.S., a region is a state, such as <code>New York</code>.","ga:subContinent":"The sub-continent of visitors, derived from IP addresses. For example, <code>Polynesia</code> or <code>Northern Europe</code>."},"Goal Conversions":{"ga:goalCompletionLocation":"The page path or screen name that matched any destination type goal completion.","ga:goalPreviousStep1":"The page path or screen name that matched any destination type goal, one step prior to the goal completion location.",
"ga:goalPreviousStep2":"The page path or screen name that matched any destination type goal, two steps prior to the goal completion location.","ga:goalPreviousStep3":"The page path or screen name that matched any destination type goal, three steps prior to the goal completion location."},"Internal Search":{"ga:searchCategory":"The categories used for the internal search if you have this enabled for your view (profile). For example, you might have product categories such as <code>electronics</code>, <code>furniture</code>, or <code>clothing</code>.",
"ga:searchDestinationPage":"A page that the user visited after performing an internal search on your property.","ga:searchKeyword":"Search terms used by visitors within your property.","ga:searchKeywordRefinement":"Subsequent keyword search terms or strings entered by users after a given initial string search.","ga:searchStartPage":"A page where the user initiated an internal search on your property.","ga:searchUsed":"A boolean to distinguish whether internal search was used in a session. Values are <code>Visits With Site Search</code> and <code>Visits Without Site Search</code>."},
"Page Tracking":{"ga:exitPagePath":"The last page in a user&#39;s session, or <code>exit</code> page.","ga:hostname":"The hostname from which the tracking request was made.","ga:landingPagePath":"The first page in a user&#39;s session, or landing page.","ga:nextPagePath":"A page on your website that was visited <code>after</code> another page on your website. Typically used with the <code>ga:previousPagePath</code> dimension.","ga:pageDepth":"The number of pages visited by visitors during a session (visit). The value is a histogram that counts pageviews across a range of possible values. In this calculation, all visits will have at least one pageview, and some percentage of visits will have more.",
"ga:pagePath":"A page on your website specified by path and/or query parameters. Use in conjunction with <code>ga:hostname</code> to get the full URL of the page.","ga:pagePathLevel1":"This dimension rolls up all the page paths in the first hierarchical level in <code>ga:pagePath</code>.","ga:pagePathLevel2":"This dimension rolls up all the page paths in the second hierarchical level in <code>ga:pagePath</code>.","ga:pagePathLevel3":"This dimension rolls up all the page paths in the third hierarchical level in <code>ga:pagePath</code>.",
"ga:pagePathLevel4":"This dimension rolls up all the page paths in the fourth hierarchical level in <code>ga:pagePath</code>. All additional levels in the <code>ga:pagePath</code> hierarchy are also rolled up in this dimension.","ga:pageTitle":"The title of a page. Keep in mind that multiple pages might have the same page title.","ga:previousPagePath":"A page on your property that was visited <code>before</code> another page on the same property. Typically used with the <code>ga:nextPagePath</code> dimension.",
"ga:secondPagePath":"The second page in a user&#39;s session."},"Platform / Device":{"ga:browser":"The names of browsers used by visitors to your website. For example, <code>Internet Explorer</code> or <code>Firefox</code>.","ga:browserVersion":"The browser versions used by visitors to your website. For example, <code>2.0.0.14</code>","ga:deviceCategory":"The type of device: Desktop, Tablet, or Mobile.","ga:isMobile":"Indicates mobile visitors. The possible values are <code>Yes</code> or <code>No</code> where the first letter must be capitalized.",
"ga:isTablet":"Indicates tablet visitors. The possible values are <code>Yes</code> or <code>No</code>.","ga:mobileDeviceBranding":"Mobile manufacturer or branded name (e.g: Samsung, HTC, Verizon, T-Mobile).","ga:mobileDeviceInfo":"The branding, model, and marketing name used to identify the mobile device.","ga:mobileDeviceMarketingName":"The marketing name used for the mobile device (e.g. Galaxy SIII, Droid Razr 4G","ga:mobileDeviceModel":"Mobile device model (e.g.: Nexus S)","ga:mobileInputSelector":"Selector used on the mobile device (e.g.: touchscreen, joystick, clickwheel, stylus).",
"ga:operatingSystem":"The operating system used by your visitors. For example, <code>Windows</code>, <code>Linux</code> , <code>Macintosh</code>, <code>iPhone</code>, <code>iPod</code>.","ga:operatingSystemVersion":"The version of the operating system used by your visitors, such as <code>XP</code> for Windows or <code>PPC</code> for Macintosh."},Session:{"ga:visitLength":"The length of a visit to your property measured in seconds and reported in second increments. The value returned is a string."},
"Social Activities":{"ga:socialActivityAction":"For a social data hub activity, this value represents the type of social action associated with the activity (e.g. vote, comment, +1, etc.).","ga:socialActivityContentUrl":"For a social data hub activity, this value represents the URL shared by the associated social network user.","ga:socialActivityDisplayName":"For a social data hub activity, this value represents the title of the social activity posted by the social network user.","ga:socialActivityEndorsingUrl":"For a social data hub activity, this value represents the URL of the social activity (e.g. the Google+ post URL, the blog comment URL, etc.)",
"ga:socialActivityNetworkAction":"For a social data hub activity, this value represents the type of social action and the social network where the activity originated.","ga:socialActivityPost":"For a social data hub activity, this value represents the content of the social activity posted by the social network user (e.g. The message content of a Google+ post)","ga:socialActivityTagsSummary":"For a social data hub activity, this is a comma-separated set of tags associated with the social activity.",
"ga:socialActivityTimestamp":"For a social data hub activity, this value represents when the social activity occurred on the social network.","ga:socialActivityUserHandle":"For a social data hub activity, this value represents the social network handle (e.g. name or ID) of the user who initiated the social activity.","ga:socialActivityUserPhotoUrl":"For a social data hub activity, this value represents the URL of the photo associated with the user&#39;s social network profile.","ga:socialActivityUserProfileUrl":"For a social data hub activity, this value represents the URL of the associated user&#39;s social network profile."},
"Social Interactions":{"ga:socialEngagementType":'The engagement type. Possible values are "Socially Engaged" or "Not Socially Engaged".',"ga:socialInteractionAction":"For social interactions, a value representing the social action being tracked (e.g. +1, like, bookmark)","ga:socialInteractionNetwork":"For social interactions, a value representing the social network being tracked (e.g. Google, Facebook, Twitter, LinkedIn)","ga:socialInteractionNetworkAction":"For social interactions, a value representing the concatenation of the <code>ga:socialInteractionNetwork</code> and <code>ga:socialInteractionAction</code> action being tracked (e.g. Google: +1, Facebook: like)",
"ga:socialInteractionTarget":"For social interactions, a value representing the URL (or resource) which receives the social network action."},System:{"ga:flashVersion":"The versions of Flash supported by visitors&#39; browsers, including minor versions.","ga:javaEnabled":"Indicates Java support for visitors&#39; browsers. The possible values are <code>Yes</code> or <code>No</code> where the first letter must be capitalized.","ga:language":'The language provided by the HTTP Request for the browser. Values are given as an <a href="http://en.wikipedia.org/wiki/ISO_639">ISO-639 code</a> (e.g. <code>en-gb</code> for British English).',
"ga:screenColors":"The color depth of visitors&#39; monitors, as retrieved from the DOM of the visitor&#39;s browser. For example <code>4-bit</code>, <code>8-bit</code>, <code>24-bit</code>, or <code>undefined-bit</code>.","ga:screenResolution":"The screen resolution of visitors&#39; monitors, as retrieved from the DOM of the visitor&#39;s browser. For example: <code>1024x738</code>."},Time:{"ga:date":"The date of the visit. An integer in the form YYYYMMDD.","ga:dateHour":"Combined values of <code>ga:date</code> and <code>ga:hour</code>.",
"ga:day":"The day of the month. A two-digit number from 01 to 31.","ga:dayOfWeek":"The day of the week. A one-digit number from 0 (Sunday) to 6 (Saturday).","ga:dayOfWeekName":"The name of the day of the week (in English).","ga:hour":"A two-digit hour of the day ranging from 00-23 in the timezone configured for the account. This value is also corrected for daylight savings time, adhering to all local rules for daylight savings time. If your timezone follows daylight savings time, there will be an apparent bump in the number of visits during the change-over hour (e.g. between 1:00 and 2:00) for the day per year when that hour repeats. A corresponding hour with zero visits will occur at the opposite changeover. (Google Analytics does not track visitor time more precisely than hours.)",
"ga:isoWeek":'The ISO week number, where each week starts with a Monday. Details: <a href="http://en.wikipedia.org/wiki/ISO_week_date">http://en.wikipedia.org/wiki/ISO_week_date</a>.',"ga:month":"The month of the visit. A two digit integer from 01 to 12.","ga:nthDay":"Index for each day in the specified date range. Index for the first day (i.e., start-date) in the date range is 0, 1 for the second day, and so on.","ga:nthMonth":"Index for each month in the specified date range. Index for the first month in the date range is 0, 1 for the second month, and so on. The index corresponds to <code>ga:month</code> entries.",
"ga:nthWeek":"Index for each week in the specified date range. Index for the first week in the date range is 0, 1 for the second week, and so on. The index corresponds to <code>ga:week</code> entries.","ga:week":"The week of the visit. A two-digit number from 01 to 53. Each week starts on Sunday.","ga:year":"The year of the visit. A four-digit year from 2005 to the current year.","ga:yearMonth":"Combined values of <code>ga:year</code> and <code>ga:month</code>.","ga:yearWeek":"Combined values of <code>ga:year</code> and <code>ga:week</code>."},
"Traffic Sources":{"ga:adContent":"When using manual campaign tracking, the value of the <code>utm_content</code> campaign tracking parameter. When using AdWords autotagging, the first line of the text for your online Ad campaign. If you are using mad libs for your AdWords content, this field displays the keywords you provided for the mad libs keyword match. Otherwise the value is <code>(not set)</code>","ga:campaign":"When using manual campaign tracking, the value of the <code>utm_campaign</code> campaign tracking parameter. When using AdWords autotagging, the name(s) of the online ad campaign that you use for your property. Otherwise the value <code>(not set)</code> is used.",
"ga:fullReferrer":"The full referring URL including the hostname and path.","ga:hasSocialSourceReferral":"Indicates visits that arrived to the property from a social source (i.e. A social network such as Google+, Facebook, Twitter, etc.). The possible values are <code>Yes</code> or <code>No</code> where the first letter is capitalized.","ga:keyword":"When using manual campaign tracking, the value of the <code>utm_term</code> campaign tracking parameter. When using AdWords autotagging or if a visitor used organic search to reach your property, the keywords used by visitors to reach your property. Otherwise the value is <code>(not set)</code>.",
"ga:medium":"The type of referrals to your property. When using manual campaign tracking, the value of the <code>utm_medium</code> campaign tracking parameter. When using AdWords autotagging, the value is <code>ppc</code>. If the user comes from a search engine detected by Google Analytics, the value is <code>organic</code>. If the referrer is not a search engine, the value is <code>referral</code>. If the visitor came directly to the property, and <code>document.referrer</code> is empty, the value is <code>(none)</code>.",
"ga:referralPath":"The path of the referring URL (e.g. <code>document.referrer</code>). If someone places a link to your property on their website, this element contains the path of the page that contains the referring link.","ga:socialNetwork":"Name of the social network. This can be related to the referring social network for traffic sources, or to the social network for social data hub activities. E.g. Google+, Blogger, reddit, etc. ","ga:source":"The source of referrals to your property. When using manual campaign tracking, the value of the <code>utm_source</code> campaign tracking parameter. When using AdWords autotagging, the value is <code>google</code>. Otherwise the domain of the source referring the visitor to your property (e.g. <code>document.referrer</code>). The value may also contain a port address. If the visitor arrived without a referrer, the value is <code>(direct)</code>",
"ga:sourceMedium":"The combined values of <code>ga:source</code> and <code>ga:medium</code>."},"User Timings":{"ga:userTimingCategory":"A string for categorizing all user timing variables into logical groups for easier reporting purposes.","ga:userTimingLabel":"The name of the resource&#39;s action being tracked.","ga:userTimingVariable":"A value that can be used to add flexibility in visualizing user timings in the reports."},Visitor:{"ga:daysSinceLastVisit":"The number of days elapsed since visitors last visited your property. Used to calculate visitor loyalty.",
"ga:userDefinedValue":"The value provided when you define custom visitor segments for your property.","ga:visitCount":"The visit index for a visitor to your property. Each visit from a unique visitor will get its own incremental index starting from 1 for the first visit. Subsequent visits do not change previous visit indicies. For example, if a certain visitor has 4 visits to your website, <code>ga:visitCount</code> for that visitor will have 4 distinct values of &#39;1&#39; through &#39;4&#39;.",
"ga:visitorType":"A boolean indicating if a visitor is new or returning. Possible values: <code>New Visitor</code>, <code>Returning Visitor</code>."}},e=_.flatten(_.map(_.flatten(a),function(a){return _.map(a,function(a,d){return{value:d,display_name:d}})})),d=_.flatten(_.map(_.flatten(j),function(a){return _.map(a,function(a,d){return{value:d,display_name:d}})}));_.extend(Ducksboard,{ga:{metrics:a,dimensions:j,metric_options:e,dimension_options:d}})})();
(function(){var a=navigator.platform.toLowerCase(),j=navigator.userAgent,e=$.browser,d=$("html"),a={feature_detection:{cssanimations:Modernizr.cssanimations,cssfilters:Modernizr.cssfilters},browser:{moz:e.mozilla,webkit:e.webkit,opera:e.opera,ie:e.msie,ie8:e.msie&&e.version==8,ie9:e.msie&&e.version==9},platform:{mac:a.indexOf("mac")>=0,linux:a.indexOf("linux")>=0,win:a.indexOf("win")>=0},device:{ipad:!!j.match(/iPad/),iphone:!!j.match(/iPhone/)},add_browser_css_classes:function(){var a=$.extend({},
this.browser,this.platform,this.device);$.each(a,function(a,e){e&&d.addClass(a)});return a},add_feature_css_classes:function(){$.each(this.feature_detection,function(a,b){d.addClass(b?a:"no-"+a)})}};a.add_browser_css_classes();a.add_feature_css_classes();_.extend(Ducksboard,{BrowserUtils:a,bu:a})})();
(function(){_.extend(Ducksboard,{colors:{pink:"rgba(193, 31, 112, .65)",darkblue:"rgba(75, 99, 149, 0.65)",darkpurple:"rgba(81, 0, 14, 0.65)",red:"rgba(203, 25, 28, 0.65)",yellowgreen:"rgba(176, 186, 4, 0.65)",darkgreen:"rgba(11, 52, 2, 0.65)",black:"rgba(9, 9, 9, 0.65)",lightblue:"rgba(56, 175, 197, 0.65)",purple:"rgba(77, 34, 89, 0.65)",darkorange:"rgba(209, 59, 8, 0.65)",yellow:"rgba(247, 209, 2, 0.65)",green:"rgba(59, 121, 10, 0.65)",gray:"rgba(122, 123, 118, 0.65)",blue:"rgba(37, 177, 228, 0.65)",
bluesteel:"rgba(59, 136, 177, 0.65)",orange:"rgba(251, 136, 11, 0.65)",lightyellow:"rgba(254, 203, 91, 0.65)",lightgreen:"rgba(157, 199, 88, 0.65)",white:"rgba(255, 255, 255, 0.65)"}})})();
(function(){var a={overlayColor:"#000",overlayOpacity:0.6,padding:0,margin:0,hideOnOverlayClick:false,showCloseButton:false,centerOnScroll:true,enableEscapeButton:false,onStart:function(){D.u.hide_tooltips()},onComplete:function(){D.u.on_esc()},onCleanup:function(){D.u.off_esc();D.u.hide_tooltips()},onClosed:function(){D.u.remove_dropdowns();D.Backbone.app.navigate("#!");D.u.off_esc()}},j=_.defaults({onStart:function(){D.u.hide_tooltips()},onCleanup:function(){D.u.hide_tooltips()},onClosed:function(){D.Backbone.app.navigate("#")},
onComplete:function(){}},a),e={constants:{timeline_size:11,slidster_conf:{arrows:{next:{css_class:"btn btn-nav next",html:'<i class="icon-arrow-right"></i>'},prev:{css_class:"btn btn-nav prev",html:'<i class="icon-arrow-left"></i>'}}},gridster:{"default":{pc:{widget_base_dimensions:[320,166],widget_margins:[10,10]},tv720:{namespace:".tv720",widget_base_dimensions:[387,200],widget_margins:[15,15]},tv1080:{namespace:".tv1080",widget_base_dimensions:[580,300],widget_margins:[22.5,22.5]}},zendesk:{pc:{namespace:"div.zendesk",
widget_base_dimensions:[400,225],widget_margins:[0,0],limit_cols:true},tv720:{namespace:".tv720 div.zendesk",widget_base_dimensions:[320,180],widget_margins:[0,0],min_visible_cols:4,min_visible_rows:4},tv1080:{namespace:".tv1080 div.zendesk",widget_base_dimensions:[480,270],widget_margins:[0,0],min_visible_cols:4,min_visible_rows:4}},twilio:{pc:{namespace:"div.twilio",widget_base_dimensions:[400,225],widget_margins:[0,0],limit_cols:true},tv720:{namespace:".tv720 div.twilio",widget_base_dimensions:[320,
180],widget_margins:[0,0],min_visible_cols:4,min_visible_rows:4},tv1080:{namespace:".tv1080 div.twilio",widget_base_dimensions:[480,270],widget_margins:[0,0],min_visible_cols:4,min_visible_rows:4}}}},format_number:function(a,e,b,f){e===void 0&&(e=2);b===void 0&&(b=6);for(var f=f?"."+Array(e+1).join("0"):"",h="",j=["","k","M","G","T","P","E","Z"],u=0,q=function(a,d){return a[0].length+a[1].length+d.length>b||d!=""&&a[0].length>3?false:true},l=function(a,b){if(b==0)return[a.toFixed(),""];var d=a.toFixed(b).split(".");
if(d.length==1||d[1].match(/^0*$/))d[1]="";return d};u<j.length;){var k=e,h=j[u];for(s=l(a,k);!q(s,h)&&k!=0;){k--;s=l(a,k)}if(q(s,h))break;a=a/1E3;u++}if(u>=j.length){h="";s=["lotsa",""]}a=/(\d+)(\d{3})/;for(e=s[0];a.test(e);)e=e.replace(a,"$1,$2");return e+(s[1].length?"."+s[1]:f)+h},split_seconds:function(a){var e=parseInt(a),a=Math.round(a%1*1E3),b=[60,60,24,Infinity],f=0,h=[];do{var j=e%b[f];h.unshift(j);e=e-j;e=e/b[f];f++}while(f<b.length);h.push(a);return h},format_time:function(a,e){e===void 0&&
(e=2);var a=Math.round(a),b=a<0;if(a===0)return"0s";var f=_.map(this.split_seconds(a),function(a){return Math.abs(a)});f.pop();var h=["d","h","m","s"],j=0,u=[];do{var q=f[j];q!==0&&u.push(q+h[j]);j++}while(j<h.length);f=u.slice(0,e).join(" ");return b?"-"+f:f},number_to_text:function(a){return!D.u.is_number(a)?a:{"0":"zero",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen",17:"seventeen",
18:"eighteen",19:"nineteen",20:"twenty"}[a]||a},is_number:function(a){return typeof a==="number"&&isFinite(a)},break_space:function(a){a=_.escapeHTML(a);if(a.length<8)return a;_.each({" ":"<br>","@":"<br>@","/":"<br>/"},function(e,b){a=a.replace(b,e)});return a},bbcode:function(a){function e(a){return RegExp("\\["+a+"\\]([^\\]]*)\\[\\/"+a+"\\]","gi")}a=_.escapeHTML(a);return a=a.replace(e("b"),"<strong>$1</strong>").replace(e("i"),"<em>$1</em>").replace(e("url"),'<a href="$1" target="_blank">$1</s>').replace(/\[url href=([^\]]*)\]([^\]]*)\[\/url\]/gi,
'<a href="$1" target="_blank">$2</a>').replace(e("appurl"),'<a href="$1">$1</s>').replace(/\[appurl href=([^\]]*)\]([^\]]*)\[\/appurl\]/gi,'<a href="$1" >$2</a>')},dot_spinner:function(a,e){e===void 0&&(e=a.val()||a.text()||"Loading");e=e+"\u00a0\u00a0\u00a0";a.val(e);return setInterval(function(){if(_.endsWith(a.val(),"\u00a0")){a.val(a.val().replace(/\u00A0/,"."));a.text(a.val().replace(/\u00A0/,"."))}else{a.val(e);a.text(e)}},400)},cancel_spinner:function(a){clearInterval(a)},sending:function(a,
e){var b=a.val();if(!b||b==="")b=a.html();var f={blocked:a.hasClass("disabled"),complete:$.noop};if(f.blocked)return f;a.addClass("disabled");if(_.isFunction(e)){e();f.complete=function(){a.removeClass("disabled");a.val(b);a.html(b)}}else{var h=D.u.dot_spinner(a,e);f.complete=function(){D.u.cancel_spinner(h);a.removeClass("disabled");a.val(b);a.html(b)}}return f},submit:function(a,e,b){if(e.hasClass("disabled"))return null;e.addClass("disabled");a.each(function(){$(this).hasClass("placeholder")&&
$(this).val()==$(this).attr("placeholder")&&$(this).val("")});var f={};$.each(a.serializeArray(),function(a,b){f[b.name]=b.value});b=$.post(b,f);b.always(function(){e.removeClass("disabled")});b.fail(function(b){b=$.parseJSON(b.responseText);$.each(b,function(b,e){var f=a.filter("input[type=text]#id_"+b).addClass("error").val(e[0]).one("focus",function(){f.removeClass("error").val("")}).one("change",function(){f.removeClass("error")}),h=a.filter("select#id_"+b),g=h.parent().find("#id_"+b+"_chzn");
g.addClass("error");g.find("span").text(e[0]);g.one("focus",function(){h.trigger("liszt:updated");g.removeClass("error")});var j=a.filter("input[type=password]#id_"+b),x=j.attr("placeholder");j.data("orig_placeholder",x);j.addClass("error").val("").attr("placeholder",e[0]).one("focus",function(){j.removeClass("error").val("").attr("placeholder",j.data("orig_placeholder"))})})});return b},scale_image:function(a,e,b,f){var e=this.scale_image_sizes(a,e,b,f),h={};_.each(e,function(a,b){h[b]=a+"px"});
$(a).css(h)},scale_image_sizes:function(a,e,b,f){var f=f||false,h=$(a),a=h.outerWidth(),h=h.outerHeight(),e=e/b,b={},b=e>1;f&&(b=a/h>e);if(b){f=h;h=Math.floor(a/e);f=Math.floor((f-h)/2);b={"margin-top":f,"margin-right":0,"margin-bottom":f,"margin-left":0}}else{f=a;a=h*e;f=Math.floor((f-a)/2);b={"margin-top":0,"margin-right":f,"margin-bottom":0,"margin-left":f}}$.extend(b,{width:a,height:h});return b},is_error:function(a){return!(a>=200&&a<300)},error_message:function(a){a=D.u.error_messages[a];if(a===
void 0)a=D.u.default_error_message;return a},error_messages:{401:"Could not authenticate with the service. Don't worry, we'll keep on trying.",404:"We couldn't find the configured object. Don't worry, we'll keep on trying."},default_error_message:"There was an error getting data from the service. Don't worry, we'll keep on trying.",api_error_codes:{default_error:100,unique_error:101,value_error:102},super_modal:function(d,e){e||(e={});opts=_.defaults({},a,e);var b=opts.onCleanup;opts.onCleanup=function(){b();
d.$el.fadeOut(200,function(){d.$("select").unchosen();d.$(".datepicker-wrap").datepicker("remove");d.remove()})};var f=e.onComplete;opts.onComplete=function(){f&&f();D.u.on_esc(function(a){D.u.close_fancybox(a,function(){d&&d.abort_creation&&d.abort_creation(a)})})};opts.content=d.$el;$.fancybox(opts);d.$("select").chosen({disable_search_threshold:10});d.$("input[placeholder], textarea[placeholder]").placeholder()},modal:function(d){$.fancybox(_.defaults(d,a))},blocked_modal:function(a){$.fancybox(_.defaults(a,
j))},shortest:function(a){a=_.sortBy(a,function(a){return $(a).actual("height")});return _.first(a)},tallest:function(a){a=_.sortBy(a,function(a){return $(a).actual("height")});return _.last(a)},is_external:function(a){return/^https?:|data:/.test(a)},hide_tooltips:function(){$(".tip").each(function(){var a=$(this).data("tooltip");a&&a.isShown()&&a.hide()})},extra_request_args:function(){var a=D.Backbone.account.get("access_token"),e=D.Backbone.account.get("access_password");return _.extend(a?{access_token:a}:
{},e?{access_password:e}:{})},on_esc:function(a){$(document).on("keyup.ducksboard",a||D.u.close_fancybox)},off_esc:function(){$(document).off("keyup.ducksboard")},close_fancybox:function(a,e){if(a.keyCode==27){a.preventDefault();$.fancybox.close();e&&e()}},rgb_to_hex:function(a){return Raphael.getRGB(a).hex},to_api:function(a,e){return D.u._translate(a,e,0,1)},from_api:function(a,e){return D.u._translate(a,e,1,0)},_translate:function(a,e,b,f){if(_.isEmpty(a))return e;_.each(e,function(h,j){_.each(a,
function(a){if(j===a[b]){delete e[j];e[a[f]]=h}})});return e},user_interacting:function(){return!!$("#fancybox-content div, .contextual:visible").length},actual:_.memoize(function(a,e){return $(e).actual(a)},function(a,e){var b=_.sprintf("%s-%s",a,$(e).tmplItem().key),f=$(e).closest("[data-display-mode]").attr("data-display-mode");f&&(b=b+_.sprintf("-%s",f));return b}),track_tab:function(a,e,b){a.button!==void 0&&mixpanel.track(e,b||{})},is_valid_credit_card:function(a){a=a.val();a=a.replace(/\D/g,
"");if(_.isBlank(a))return false;for(var e=0,b=0,f=false,h=a.length-1;h>=0;h--){b=a.charAt(h);b=parseInt(b,10);if(f&&(b=b*2)>9)b=b-9;e=e+b;f=!f}return e%10==0},is_valid_cvv:function(a){a=a.val();return(a.length==3||a.length==4)&&/^[0-9]+$/.test(a)},is_not_empty:function(a){var e=a.val();return a.is("select")&&(e=="-"||e=="--")?false:!!e},is_checked:function(a){return a.is(":checked")},support_xhr_upload:function(){return D.support.xhrFileUpload||D.support.xhrFormDataFileUpload},remove_dropdowns:function(){$(document.body).children(".chzn-drop, .ac-dropdown").remove()},
unix_to_iso8601:function(a){return moment.unix(a).format("YYYY-MM-DDTHH:mm:ssZ")},camelcase_to_hypenated:function(a){return a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}).replace(/^ms-/,"-ms-")},in_visible_dashboard:function(a){var e=a instanceof D.bb.Widget,b=D.bb.dashboards.current;return a instanceof D.bb.Slot||e?a.is_visible():!b||!b.view?false:$(a).closest(".dashboard").is(D.bb.dashboards.current.view.$el)},focus_on_first:function(a,e){e||(e="input:text, textarea");var b=a.find(e).not(".autocomplete").not(".error").filter(":visible").first();
b.focus();b.is("[readonly]")?b.select():b.val(b.val())}};_.extend(Ducksboard,{Utils:e,u:e})})();
(function(){var a={visa:{prefixes:[4],name:"Visa"},mastercard:{prefixes:[51,52,53,54,55],name:"MasterCard"},american_express:{prefixes:[34,37],name:"American Express"}},j={USD:"$",EUR:"\u20ac"},e=function(a,b){this._cents=a||0;this._currency=b||"USD"};e.prototype={toString:function(){return D.u.Billing.format_currency(this.dollars(),this._currency)},cents:function(a){return a===void 0?this._cents:new e(a,this._currency)},dollars:function(a){return a===void 0?this._cents/100:new e(a*100,this._currency)},
mult:function(a){return new e(this._cents*a,this._currency)},add:function(a){a.cents&&(a=a.cents());return new e(this._cents+a,this._currency)},sub:function(a){a.cents&&(a=a.cents());return new e(this._cents-a,this._currency)},discount:function(a,b){return a.discount_in_cents&&a.discount_in_cents[b]?this.add(new e(-a.discount_in_cents[b])):a.discount_percent?this.sub(this.mult(a.discount_percent/100)):this}};var d={country:"ES",vat_percent:"21",errors:{first_name:"Required field",last_name:"Required field",
number:"Invalid card number",verification_value:"  \u2639",address1:"Please enter your full address",city:"Required field",state:"Required field",zip:"  \u2639",coupon_code:"Invalid",tos:"Please accept the Terms of Service."},detect_card_type:function(d){d=d.replace(/\D/g,"");return _.find(a,function(a){return _.reduce(a.prefixes,function(a,b){return a||_.startsWith(d,b)},false)}).name||false},format_currency:function(a,b){var d=j[b||"USD"],e=false;if(a<0){a=-a;e=true}var o=D.Utils.format_number(a,
2),d="%u%n".replace(/%u/g,d),d=d.replace(/%n/g,o);e&&(d="-"+d);return d},is_country_in_eu:function(a){return _.include(Ducksboard.config.eu_countries,a)},is_vat_number_applicable:function(a){return this.is_country_in_eu(a)},is_vat_charge_applicable:function(a,b){return!this.is_vat_number_applicable(a)?false:this.country==a||!b},flatten_errors:function(a){if(typeof a=="string"||typeof a=="number"||typeof a=="boolean")return[a];var b=["base","account_id"];return _.map(a,function(a,d){d=_.include(b,
d)?"":_.sprintf("%s: ",d.replace("_",""));return _.sprintf("%s%s",d,a)})},Cost:e};_.extend(Ducksboard.Utils,{Billing:d,b:d})})();(function(){Raphael.el.smartAnimate=function(a,j,e,d,g){a=a instanceof Backbone.Model?a:a.model;if(a.widget&&a.widget.is_embed||a.is_visible())this.animate(j,e,d,g);else{this.attr(j);g&&g()}}})(Raphael);
(function(a){a.constants={PATH_LINE:0,PATH_AREA:1,PATH_TREND:2,PATH_STACKED:3,UPDATE_ANIMATION_DURATION:1E3,UPDATE_ANIMATION_EASING:"linear",RGB_REGEXP:/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/};var j=function(a,d,g){g===void 0&&(g=0.2);if(a.length==0)return[0,0];var b=_.min(a),a=_.max(a),f=0;if(b<0){f=-b;b=b+f;a=a+f}if(b==a)return b==0?[0,0]:[d/b/2,0];var h=a?d/a:1;if(b*h<=d*g)return[h,f*h];h=(1-g)*d/(a-b);return[h,d-h*a+f*h]};a.tools={scale_factor:function(a,d){var g=_.max(a),b=_.reduce(a,function(a,b){return a+
b},0)/a.length,f=void 0,f=g<=2*b?d/b/2:d/g;isFinite(f)||(f=0);return f},zoom:j,zoom_ticks:function(a,d,g,b,f){f===void 0&&(f=0);if(a.length==0)return[0,0,u];g===void 0&&(g=5);var h=_.min(a),j=_.max(a),a=0,u=j-h||g-1,q=g,l=u/q,k=Math.floor(Math.log(l)/Math.LN10),k=Math.pow(10,k),n=q/u*k;n<=0.15?k=k*10:n<=0.25?k=k*5:n<=0.75&&(k=k*2);l=Math.ceil(l/k)*k;l*q<u+u*f&&(l=l+k);p=Math.floor(Math.log(l)/Math.LN10);var u=[l,p<0?-p:1],f=u[0],x=u[1],v=4+x,u=Math.ceil(h/f)*f,h=Math.floor(j/f)*f;b&&(u=u-Math.floor((g+
1-((h-u)/f+2))/2)*f);var j=g*f+u,h=u-f,u=_.map(_.range(u,j,f),function(a){return D.Utils.format_number(a,x,a<0?v+1:v)});if(h<0){a=-h;h=h+a;j=j+a}g=d/(j-h);return[g,d-g*j+a*g,u]},rounded_tick_size:function(a,d){var g=a/d,b=Math.floor(Math.log(g)/Math.LN10),f=Math.pow(10,b-1);return[Math.ceil(g/f)*f,b<0?-b+1:4]},build_path:function(a,d,g,b,f,h,o){var u=D.u.actual("size",g),g=u[0],q=u[1],u=g*q;if(!h){h=a.slice(f+1);h=j(h,q)}var f=h[0],l=h[1],k=this.width_distribution(a.length-1,g);k.unshift(0);var n=
[],x=q-l;if(b===Raphael.constants.PATH_TREND||b===Raphael.constants.PATH_AREA||!d.length&&b===Raphael.constants.PATH_STACKED){x>=q&&h[2]?x=q-q/(h[2].length+1):x<0&&(x=0);n.push([0,x])}for(var v=h=0;v<a.length;v++){h=h+k[v];n.push([h+(b>Raphael.constants.PATH_LINE?0:0.5),q-a[v]*f-l])}if(b===Raphael.constants.PATH_STACKED&&d.length)for(v=d.length-1;v>=0;v--){n.push([h,q-d[v]*f-l]);h=h-k[v]}b===Raphael.constants.PATH_TREND?n.push([g,q]):(b===Raphael.constants.PATH_AREA||!d.length&&b===Raphael.constants.PATH_STACKED)&&
n.push([g,x]);if(b===Raphael.constants.PATH_AREA)for(v=0;v<n.length-1;v++)u=u-(n[v+1][1]+n[v][1]*(n[v+1][0]-n[v][0])/2);a=$.map(n,function(a,d){if(b===Raphael.constants.PATH_TREND){var e=n[d+1]||[0,q],f=(e[0]-a[0])*q,h=" M "+e[0]+" "+e[1],h=h+(" L "+e[0]+" "+e[1]),h=h+(" L "+a[0]+" "+a[1]),h=h+(" L "+a[0]+" "+q),h=h+(" L "+e[0]+" "+q);return[[h,f]]}if(b===Raphael.constants.PATH_AREA){switch(d){case 0:e="M";f=a[0]-o/2;h=a[1];break;case 1:e="L";f=a[0]-o/2;h=a[1];break;case n.length-2:case n.length-
1:e="L";f=a[0]+o/2;h=a[1];break;default:e="L";f=a[0];h=a[1]}return _.sprintf("%s %f %f",e,f,h)}return(d===0?"M":"L")+" "+a[0]+" "+a[1]});return _.isArray(a[0])?a:[a.join(" "),u]},pin_base:function(a,d){var g=d/3,b=2*d/Math.sqrt(3);return[[a[0]-b/2,a[1]-g],[a[0]+b/2,a[1]-g],[a[0],a[1]+2*g]]},arc:function(a,d,g,b,f){var b=b*Math.PI/180,h=f*Math.PI/180,f=a+g*Math.cos(b),j=d-g*Math.sin(b),b=a+g*Math.cos(h),h=d-g*Math.sin(h),a="M "+a+" "+d,d=" L "+f+" "+j,g=" A "+[g,g,0,0,1,b,h].join(" ");return{path:a+
d+g}},width_distribution:function(a,d){for(var g=Math.floor(d/a),b=d-g*a,f=Array(a),h=a-1;h>=0;h--){f[h]=g;b>0&&(f[h]=f[h]+1);b--}return f},darken:function(e,d){d===void 0&&(d=0.8);var g=a.getRGB(e),g=a.rgb2hsl(g.r,g.g,g.b);g.l=g.l*(1-d);g=a.hsl2rgb(g.h,g.s,g.l);return g.hex}}})(Raphael);
(function(a){var j={slot:void 0,path_attrs:{stroke:"none",fill:"#f2f2e7"},padding_offset:0,data:[],base_data:[],factors:void 0,paper:void 0},e=function(d,b){var e=a.extend({},j,{path_attrs:{odd:{stroke:"none",fill:"#E1E1D7"},even:{stroke:"none",fill:"#E6E6DC"}}},d),h=e.path_attrs;e.slot||a.error("slot reference is required in jQuery.graph");return this.each(function(){var d=e.slot.trend,g=[];if(!d){if(e.paper)l=e.paper;else var j=D.u.actual("size",this),l=Raphael(this,j[0],j[1]);for(var j=[],k=0;k<
e.data.length;k++)j[k]=0;j=Raphael.tools.build_path(j,j,a(this),b,e.padding_offset,null,h["stroke-width"]||1);if(_.isArray(j[0])){_.each(j,function(b,j){d=l.path(b[0]).attr(h[j%2===0?"odd":"even"]);g.push(d);a(d.node).attr("label","label-"+e.slot.model.attributes.layout)});e.slot.trend=g}else{d=l.path(j[0]).attr(h);e.slot.trend=d;a(d.node).attr("label","label-"+e.slot.model.attributes.layout)}}var n=Raphael.tools.build_path(e.data,e.base_data,a(this),b,e.padding_offset,e.factors,h["stroke-width"]||
1),j=n[0],x=Raphael.constants.UPDATE_ANIMATION_DURATION*2,v=Raphael.constants.UPDATE_ANIMATION_EASING,k=_.isFunction(e.callback)?e.callback:a.noop,w=e.slot;if(_.isArray(w.trend)){var z=_.after(w.trend.length,k);_.each(w.trend,function(a,b){a.area=n[b][1];a.smartAnimate(w,{path:n[b][0]},x,v,z)})}else{d.area=n[1];d.smartAnimate(w,{path:j},x,v,k)}if(b===Raphael.constants.PATH_AREA){for(j=d.prev;j&&j.area<d.area;)j=j.prev;j?d.insertAfter(j):d.toBack()}})},d={trend:function(d){return a.proxy(e,this)(d,
Raphael.constants.PATH_TREND)},line:function(d){return a.proxy(e,this)(d,Raphael.constants.PATH_LINE)},area:function(d){return a.proxy(e,this)(d,Raphael.constants.PATH_AREA)},stacked:function(d){return a.proxy(e,this)(d,Raphael.constants.PATH_STACKED)},paper:function(d){var b=a.extend({},j,d);b.widget||a.error("widget reference is required in jQuery.graph");return this.each(function(){var a=D.u.actual("size",this);b.widget.paper=Raphael(this,a[0],a[1])})},pin:function(d){var b=a.extend({},j,d),e=
a.extend({},j.path_attrs,d.path_attrs);return this.each(function(){var d=D.u.actual("size",this),g=d[0],j=d[1],d=Raphael(this,g,j);b=a.extend({bottom_space:20,top_space:10},b);var q=j*b.bottom_space/100,l=j*b.top_space/100,j=j-l-q,k=j/5,j=j-k,q=j/2,g=Raphael.tools.pin_base([g/2,j/2+l+q+k/6],k),g=["M",g[0][0],g[0][1],"A",q,q,0,1,1,g[1][0],g[1][1],"L",g[2][0],g[2][1]].join(" ");d.path(g).attr(e)})},bar:function(d){var b=a.extend({},j,d),e=a.extend({},j.path_attrs,d.path_attrs);b.slot||a.error("slot reference is required in jQuery.graph");
return this.each(function(){var d=b.slot.bar,g=D.u.actual("size",this),j=g[0],g=g[1];if(!d){d=Raphael(this,j,g).rect(-1,g,j+2,0).attr(e);b.slot.bar=d}j=b.height;j===void 0&&a.error("height is required when drawing a bar");b=a.extend({bottom_space:0},b);var g=g-j-b.bottom_space,q=Raphael.constants.UPDATE_ANIMATION_DURATION,l=Raphael.constants.UPDATE_ANIMATION_EASING,k=_.isFunction(b.callback)?b.callback:a.noop;d.smartAnimate(b.slot,{y:g,height:j},q,l,k)})},gauge:function(d){var b=a.extend({},j,d),
e=a.extend({},j.path_attrs,d.path_attrs);b.slot===void 0&&a.error("slot reference is required in jQuery.graph");b.percent===void 0&&a.error("percent value is required in jQuery.graph(gauge)");return this.each(function(){var d=D.u.actual("size",this),g=d[0],j=d[1];b=a.extend({bottom_space:30,top_space:5},b);var d=j*b.bottom_space/100,q=g/2,l=j,k=l,k=k-j*b.top_space/100,k=k-d,l=l-d,k=Math.min(k,q),d=k/20,l=l-d,k=k-d,n=b.slot.gauge;if(!n){g=Raphael(this,g,j);g.customAttributes.arc=Raphael.tools.arc;
j=g.path().attr({stroke:"none",fill:"#e1e1d8",arc:[q,l,k,-180,b.ticks?-360:-180]});a(j.node).attr("class","gauge-bg");var x=g.path().attr(a.extend(e,{arc:[q,l,k,-180,-180]}));a(x.node).attr("class","gauge-fg");var v=Raphael.tools.darken(e.fill,0.35),w=g.set(),d=g.circle(q,l,d).attr({stroke:v,fill:v}),v=g.path(["M",q,l,"L",q-k,l]).attr({"stroke-width":k/30,stroke:v}),n=b.slot.gauge={background:j,foreground:x,needle:v,needle_base:d,paper:g,ticks:w}}if(b.ticks){var w=b.ticks,z=w[0].orig,E=w[w.length-
1].orig-z,B=180,F=0;n.ticks.remove();_.each(w,function(a,b){F=180+(a.orig-z)*180/E;n.ticks.push(n.paper.path().attr({stroke:"none","fill-opacity":0.2*b*0.7,fill:"#FFF",arc:[q,l,k,-B,-F]}));B=F});n.needle_base.node.parentNode.appendChild(n.needle_base.node);n.needle.node.parentNode.appendChild(n.needle.node)}d=-180*(1+b.percent);g=180*b.percent;j=Raphael.constants.UPDATE_ANIMATION_DURATION;x=Raphael.constants.UPDATE_ANIMATION_EASING;w=b.slot;v=_.isFunction(b.callback)?b.callback:a.noop;n.foreground.smartAnimate(w,
{arc:[q,l,k,-180,d]},j,x,v);n.needle.smartAnimate(w,{transform:["r",g,",",q,",",l].join()},j,x);b.ticks||n.background.smartAnimate(w,{arc:[q,l,k,d,-360]},j,x)})}};a.fn.graph=function(e){if(d[e]){params=Array.prototype.slice.call(arguments,1);return d[e].apply(this,params)}a.error("method "+e+" does not exist on jQuery.graph")}})(jQuery);$.template("widget_error",'<div class="error">    {{if !is_public}}    <div class="background"></div>    <div class="message">        <p>${message}</p>        <div class="actions">            {{if uses_external_authentication}}            <a class="authorize btn btn-ico-option">                <i class="icon-sync"></i>                <span>Relink<br>account</span>            </a>            {{/if}}            <a class="preferences btn btn-ico-trans"><i class="icon-settings"></i></a>        </div>    </div>    {{/if}}</div>');
$.template("preferences",'<menu id="preferences">    <ul>        {{if readonly === false}}        <li class="directory">            <a href="#directory" class="directory btn btn-ico-trans">                <i class="icon-plus-2"></i>                <span class="welcome_text">Create your first widget!</span>            </a>        </li>        {{/if}}        <li>            <a href="#" class="settings btn btn-ico-trans">                <i class="icon-settings"></i>            </a>            <ul class="settings-list contextual">                {{if readonly === false}}                <li>                    <a href="#settings/dashboard" class="dashboard btn btn-ico-option">                        <i class="icon-dashboard-preferences"></i>                        <span>Preferences for<br>this dashboard</span>                    </a>                </li>                {{if subscriber_kind !== \'whitelabel\' ||  has_trial_expired === false || is_beta === true }}                <li>                    <a href="#settings/account" class="account btn btn-ico-option">                        <i class="icon-settings"></i>                        <span>Account<br>preferences</span>                    </a>                </li>                {{/if}}                {{if subscriber_kind !== \'whitelabel\' && can_subscribe}}                <li class="upgrade-now-wrap">                    <a href="#settings/account/subscription" class="upgrade-now btn btn-ico-option">                        <i class="icon-star"></i>                        <span>Upgrade now!</span>                    </a>                </li>                {{/if}}                <li>                    <a href="#support" class="support btn btn-ico-option">                        <i class="icon-support"></i>                        <span>Support</span>                    </a>                </li>                {{/if}}                <li class="logout-wrap">                    <a href="/accounts/logout/" class="logout btn btn-ico-option">                        <i class="icon-logout"></i>                        <span>Logout</span>                    </a>                </li>            </ul>        </li>        <li>            <a href="#tvmode" class="tvmode btn btn-ico-trans">                <i class="icon-tvmode"></i>            </a>        </li>        {{tmpl($data, $item) "notifications"}}        <li class="dashboards"></li>    </ul></menu>{{if is_sponsored}}    <div class="corner">        <a href="http://ducksboard.com" target="_blank">            Powered by <strong>Ducksboard</strong>        </a>    </div>{{/if}}');
(function(a){a.fn.extend({actual:function(j,e){var d,g,b,f,h,o,u;if(!this[j])throw'$.actual => The jQuery method "'+j+'" you called does not exist';b=a.extend({absolute:false,clone:false,includeMargin:void 0},e);g=this;if(b.clone===true){o=function(){g=g.filter(":first").clone().css({position:"absolute",top:-1E3}).appendTo("body")};u=function(){g.remove()}}else{o=function(){d=g.parents().andSelf().filter(":hidden");f=b.absolute===true?{position:"absolute",visibility:"hidden",display:"block"}:{visibility:"hidden",
display:"block"};h=[];d.each(function(){var a={},b;for(b in f){a[b]=this.style[b];this.style[b]=f[b]}h.push(a)})};u=function(){d.each(function(a){var a=h[a],b;for(b in f)this.style[b]=a[b]})}}o();if(j==="size"){o=g.width();var q=g.height();o=[o,q]}else o=/(outer)/g.test(j)?g[j](b.includeMargin):g[j]();u();return o}})})(jQuery);$.template("slot_line_chart",'<section class="slot s-chart ${extra_classes} fake">    <div class="timespan">        <div class="canvas"></div>    </div>    <ul class="legend"></ul></section>');
$.template("widget_contextual",'<ul class="contextual">    {{each(i, action) actions}}    <li {{if action.css_class}}class="${action.css_class}"{{/if}}>        <a href="${action.url}" class="btn btn-ico-option {{if action.icon }} with-ico {{/if}}" {{if action.external || $item.is_external(action.url)}}target="_blank"{{/if}}>            {{if action.icon }} <i class="icon-${action.icon}"></i> {{/if}}            <span>${action.label}</span>        </a>    </li>    {{/each}}</ul>');
$.template("alerts_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p><strong>Not so fast...</strong></p>        <p>You have reached the limit of alerts included in your plan. Upgrade now to get access to more alerts and unlock other cool features.</p>        <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">            <strong>Upgrade my plan</strong>            <span>30 day money back guarantee</span>        </a>    </div></article>');
$.template("dashboard_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p><strong>Should we take this to the next level?</strong></p>        <p>You have reached the limit of dashboards for your plan. Upgrade now for more dashboards, more widgets and other enhanced functionality.</p>        <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">            <strong>Upgrade my account</strong>            <span>30 day money back guarantee</span>        </a>    </div></article>');
$.template("widget_count_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p><strong>Not so fast...</strong></p>        <p>Your Free Trial includes 10 widgets. Upgrade now to access more widgets, more dashboards and a whole bunch of enhanced features</p>        {{if upgrade_possible}}            <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">                <strong>Upgrade my plan</strong>                <span>30 day money back guarantee</span>            </a>        {{else}}            <a class="btn-upsell" href="mailto:contact@ducksboard.com">                <strong>Contact us</strong>            </a>        {{/if}}    </div></article>');
(function(){var a=function(){this.initial_delay=500;this.max_delay=1E4;this.delay_factor=1.359;this.random_delay_increment=1E3;this.reconnect_id;this.enable_reconnection=true;this.delay=this.initial_delay;this.msg_id=0;this.socket=this.create_socket()};_.extend(a.prototype,{create_socket:function(){if(window.WebSocket){"loadFlashPolicyFile"in WebSocket&&WebSocket.loadFlashPolicyFile(Ducksboard.config.flash_url);var a;a="__initialize"in WebSocket?"flashsocket":"websocket";var d=new WebSocket(Ducksboard.config.socket_url+
"/"+a);_.extend(d,{type:a});this.setup(d);return d}},setup:function(a){if(a===void 0)console.log("no WebSocket support");else{window.onbeforeunload=_.bind(function(){this.enable_reconnection=false},this);a.onopen=_.bind(function(){var a=D.Backbone.account.get("timezone").replace(" ","_"),e=D.Backbone.account.get("access_token"),b=D.Backbone.account.get("access_password"),f=D.bb.account.get("widget_token"),h=$.cookie("sessionid"),j=D.Backbone.account.get("tracking"),a={message:"login",timezone:a};
j&&(a.tracking=j);if(e){a.access_token=e;b&&(a.access_password=b)}else if(f)a.widget_token=f;else if(h)a.session=h;else{$.error("no access credentials");return}this.send(a)},this);a.onmessage=function(a){j.route(a)};a.onerror=function(a){console.log("WebSocket error: "+a);j.connected=false};a.onclose=_.bind(function(a){console.log("WebSocket closed: "+a);j.connected=false;this.reconnect()},this)}},disconnect:function(){this.enable_reconnection=false;this.socket.close()},reconnect:function(){if(this.enable_reconnection){var a=
this.delay*this.delay_factor,a=a+Math.random()*this.random_delay_increment;this.delay=Math.min(a,this.max_delay);console.log("reconnecting in "+this.delay);this.reconnect_id&&clearTimeout(this.reconnect_id);this.reconnect_id=setTimeout(_.bind(function(){this.socket=this.create_socket()},this),this.delay)}},send:function(a){this.msg_id=this.msg_id+1;a=JSON.stringify(_.extend(a,{id:this.msg_id}));this.socket.send(a);return this.msg_id},reset_delay:function(){this.delay=this.initial_delay}});var j=_.extend({subscribed_to:[],
connected:false,connect:function(){this.socket=new a},disconnect:function(){this.socket&&this.socket.disconnect();this.connected=false},route:function(a){a=JSON.parse(a.data);"message"in a||(a.message="data");var d=a.message;switch(d){case "welcome":return this.reconnection();case "tick":return this.tick(a.periods,a.extra);case "timezone":return;case "control":return this.control(a)}"label"in a||$.error("label missing");_.include(["subscribed","unsubscribed","fetched","current_time","seconds_until",
"clean","data"],d)?this.trigger(_.sprintf("%s:%s",d,d=="fetched"?a.id:a.label),a.data):$.error("unrecognized message type "+d)},reconnection:function(){this.connected=true;this.socket.reset_delay();this.subscribed_to=[];this.trigger("websocket:reconnection")},tick:function(a,d){this.trigger("tick",a);_.each(d,_.bind(function(a,b){this.trigger(_.sprintf("tick:%s",b),a)},this))},control:function(a){switch(a.command){case "reload":window.location.reload();break;case "alert":window.alert(a.data)}},subscribe:function(a){if(!a)throw"A label to subscribe to is needed";
if(!_.include(this.subscribed_to,a)){this.subscribed_to.push(a);this.socket.send({message:"subscribe",label:a})}},unsubscribe:function(a){var d=this._events["data:"+a];if(_.include(this.subscribed_to,a)&&!_.any(d)){this.subscribed_to=_.without(this.subscribed_to,a);this.socket.send({message:"unsubscribe",label:a})}},fetch:function(a,d){if(!a)throw"Data must be fetched for a label";var g=_.extend({message:"fetch",label:a},d);return this.socket.send(g)},timezone:function(a){if(!a)throw"A timezone to subscribe to is needed";
this.socket.send({message:"timezone",timezone:a})},get_current_time:function(a,d){if(!a)throw"Data must be fetched for a label";var g=_.extend({message:"current_time",label:a},d);this.socket.send(g)},get_seconds_until:function(a,d){if(!a)throw"Data must be fetched for a label";var g=_.extend({message:"seconds_until",label:a},d);this.socket.send(g)}},Backbone.Events);_.extend(Ducksboard,{Websocket:j,ws:j})})();$.template("widget_urls",'<section class="urls pane">    <h1>Send your data to the following URL{{if slots.length > 1}}s{{/if}}:</h1>    <ul class="${widget.kind}">        {{each slots}}        <div class="slot-number">${$value}</div>        {{/each}}    </ul>    <a class="docs" target="_blank" href="http://{{if widget.wiki_url}}dev.ducksboard.com/${widget.wiki_url}{{else}}doc.ducksboard.com{{/if}}">Check out our API documentation!</a></section>');
$.template("dashboard_item",'{{if owner_index === 0 }}<li class="organization">    <strong>${owner}</strong></li>{{/if}}<li class="${kind.kind}">    <a href="#dashboard/id/${dashboard_id}" class="btn  btn-ico-option">        <span>${label}</span>    </a></li>');
!function(a){function j(){return new Date(Date.UTC.apply(Date,arguments))}var e=function(b,e){this.element=a(b);this.language=e.language||this.element.data("date-language")||"en";this.language=this.language in d?this.language:"en";this.isRTL=d[this.language].rtl||false;this.format=g.parseFormat(e.format||this.element.data("date-format")||"mm/dd/yyyy");this.isInline=false;this.isInput=this.element.is("input");this.hasInput=(this.component=this.element.is(".date")?this.element.find(".add-on"):false)&&
this.element.find("input").length;if(this.component&&this.component.length===0)this.component=false;this._attachEvents();this.forceParse=true;if("forceParse"in e)this.forceParse=e.forceParse;else if("dateForceParse"in this.element.data())this.forceParse=this.element.data("date-force-parse");this.picker=a(g.template).appendTo(this.isInline?this.element:"body").on({click:a.proxy(this.click,this),mousedown:a.proxy(this.mousedown,this)});this.isInline?this.picker.addClass("datepicker-inline"):this.picker.addClass("datepicker-dropdown dropdown-menu");
if(this.isRTL){this.picker.addClass("datepicker-rtl");this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")}this.autoclose=false;if("autoclose"in e)this.autoclose=e.autoclose;else if("dateAutoclose"in this.element.data())this.autoclose=this.element.data("date-autoclose");this.keyboardNavigation=true;if("keyboardNavigation"in e)this.keyboardNavigation=e.keyboardNavigation;else if("dateKeyboardNavigation"in this.element.data())this.keyboardNavigation=this.element.data("date-keyboard-navigation");
this.viewMode=this.startViewMode=0;switch(e.startView||this.element.data("date-start-view")){case 2:case "decade":this.viewMode=this.startViewMode=2;break;case 1:case "year":this.viewMode=this.startViewMode=1}this.todayBtn=e.todayBtn||this.element.data("date-today-btn")||false;this.todayHighlight=e.todayHighlight||this.element.data("date-today-highlight")||false;this.weekStart=(e.weekStart||this.element.data("date-weekstart")||d[this.language].weekStart||0)%7;this.weekEnd=(this.weekStart+6)%7;this.startDate=
-Infinity;this.endDate=Infinity;this.daysOfWeekDisabled=[];this.setStartDate(e.startDate||this.element.data("date-startdate"));this.setEndDate(e.endDate||this.element.data("date-enddate"));this.setDaysOfWeekDisabled(e.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled"));this.fillDow();this.fillMonths();this.update();this.showMode();this.isInline&&this.show()};e.prototype={constructor:e,_events:[],_attachEvents:function(){this._detachEvents();this.isInput?this._events=[[this.element,
{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=true:this._events=[[this.element,{click:a.proxy(this.show,this)}]];for(var b=0,d,e;b<this._events.length;b++){d=this._events[b][0];e=this._events[b][1];
d.on(e)}},_detachEvents:function(){for(var a=0,d,e;a<this._events.length;a++){d=this._events[a][0];e=this._events[a][1];d.off(e)}this._events=[]},_hide_on_blur:function(b){a(b.target).closest(".datepicker").length===0&&this.hide()},show:function(b){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.update();this.place();a(window).on("resize",a.proxy(this.place,this));if(b){b.stopPropagation();b.preventDefault()}a(document).on("mousedown",a.proxy(this._hide_on_blur,
this));this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide();a(window).off("resize",this.place);this.viewMode=this.startViewMode;this.showMode();this.isInput||a(document).off("mousedown",this._hide_on_blur);this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue();this.element.trigger({type:"hide",date:this.date})},remove:function(){this._detachEvents();this.picker.remove();delete this.element.data().datepicker},
getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+a.getTimezoneOffset()*6E4)},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-a.getTimezoneOffset()*6E4))},setUTCDate:function(a){this.date=a;this.setValue()},setValue:function(){var a=this.getFormattedDate();if(this.isInput)this.element.val(a);else{this.component&&this.element.find("input").val(a);this.element.data("date",a)}},getFormattedDate:function(a){if(a===void 0)a=this.format;
return g.formatDate(this.date,a,this.language)},setStartDate:function(a){this.startDate=a||-Infinity;if(this.startDate!==-Infinity)this.startDate=g.parseDate(this.startDate,this.format,this.language);this.update();this.updateNavArrows()},setEndDate:function(a){this.endDate=a||Infinity;if(this.endDate!==Infinity)this.endDate=g.parseDate(this.endDate,this.format,this.language);this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(b){this.daysOfWeekDisabled=b||[];if(!a.isArray(this.daysOfWeekDisabled))this.daysOfWeekDisabled=
this.daysOfWeekDisabled.split(/,\s*/);this.daysOfWeekDisabled=a.map(this.daysOfWeekDisabled,function(a){return parseInt(a,10)});this.update();this.updateNavArrows()},place:function(){if(!this.isInline){var b=parseInt(this.element.parents().filter(function(){return a(this).css("z-index")!="auto"}).first().css("z-index"))+10,d=this.component?this.component.offset():this.element.offset(),e=this.component?this.component.outerHeight(true):this.element.outerHeight(true);this.picker.css({top:d.top+e,left:d.left,
zIndex:b})}},update:function(){var a,d=false;if(arguments&&arguments.length&&(typeof arguments[0]==="string"||arguments[0]instanceof Date)){a=arguments[0];d=true}else a=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();this.date=g.parseDate(a,this.format,this.language);d&&this.setValue();a=this.viewDate;this.viewDate=this.date<this.startDate?new Date(this.startDate):this.date>this.endDate?new Date(this.endDate):new Date(this.date);this.fill();a&&a.getTime()!=
this.viewDate.getTime()&&this.element.trigger({type:"changeDate",date:this.viewDate,ins:this})},fillDow:function(){for(var a=this.weekStart,e="<tr>";a<this.weekStart+7;)e=e+('<th class="dow">'+d[this.language].daysMin[a++%7]+"</th>");this.picker.find(".datepicker-days thead").append(e+"</tr>")},fillMonths:function(){for(var a="",e=0;e<12;)a=a+('<span class="month">'+d[this.language].monthsShort[e++]+"</span>");this.picker.find(".datepicker-months td").html(a)},fill:function(){var b=new Date(this.viewDate),
e=b.getUTCFullYear(),h=b.getUTCMonth(),b=this.startDate!==-Infinity?this.startDate.getUTCFullYear():-Infinity,o=this.startDate!==-Infinity?this.startDate.getUTCMonth():-Infinity,u=this.endDate!==Infinity?this.endDate.getUTCFullYear():Infinity,q=this.endDate!==Infinity?this.endDate.getUTCMonth():Infinity,l=this.date&&this.date.valueOf(),k=new Date;this.picker.find(".datepicker-days thead th:eq(1)").text(d[this.language].months[h]+" "+e);this.picker.find("tfoot th.today").text(d[this.language].today).toggle(this.todayBtn!==
false);this.updateNavArrows();this.fillMonths();var n=j(e,h-1,28,0,0,0,0),x=g.getDaysInMonth(n.getUTCFullYear(),n.getUTCMonth());n.setUTCDate(x);n.setUTCDate(x-(n.getUTCDay()-this.weekStart+7)%7);var v=new Date(n);v.setUTCDate(v.getUTCDate()+42);for(var v=v.valueOf(),x=[],w;n.valueOf()<v;){n.getUTCDay()==this.weekStart&&x.push("<tr>");w="";if(n.getUTCFullYear()<e||n.getUTCFullYear()==e&&n.getUTCMonth()<h)w=w+" old";else if(n.getUTCFullYear()>e||n.getUTCFullYear()==e&&n.getUTCMonth()>h)w=w+" new";
this.todayHighlight&&(n.getUTCFullYear()==k.getFullYear()&&n.getUTCMonth()==k.getMonth()&&n.getUTCDate()==k.getDate())&&(w=w+" today");l&&n.valueOf()==l&&(w=w+" active");if(n.valueOf()<this.startDate||n.valueOf()>this.endDate||a.inArray(n.getUTCDay(),this.daysOfWeekDisabled)!==-1)w=w+" disabled";x.push('<td class="day'+w+'">'+n.getUTCDate()+"</td>");n.getUTCDay()==this.weekEnd&&x.push("</tr>");n.setUTCDate(n.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(x.join(""));h=this.date&&
this.date.getUTCFullYear();x=this.picker.find(".datepicker-months").find("th:eq(1)").text(e).end().find("span").removeClass("active");h&&h==e&&x.eq(this.date.getUTCMonth()).addClass("active");(e<b||e>u)&&x.addClass("disabled");e==b&&x.slice(0,o).addClass("disabled");e==u&&x.slice(q+1).addClass("disabled");x="";e=parseInt(e/10,10)*10;o=this.picker.find(".datepicker-years").find("th:eq(1)").text(e+"-"+(e+9)).end().find("td");e=e-1;for(q=-1;q<11;q++){x=x+('<span class="year'+(q==-1||q==10?" old":"")+
(h==e?" active":"")+(e<b||e>u?" disabled":"")+'">'+e+"</span>");e=e+1}o.html(x)},updateNavArrows:function(){var a=new Date(this.viewDate),d=a.getUTCFullYear(),a=a.getUTCMonth();switch(this.viewMode){case 0:this.startDate!==-Infinity&&d<=this.startDate.getUTCFullYear()&&a<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.endDate!==Infinity&&d>=this.endDate.getUTCFullYear()&&a>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):
this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.startDate!==-Infinity&&d<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.endDate!==Infinity&&d>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(b){b.stopPropagation();b.preventDefault();b=a(b.target).closest("span, td, th");
if(b.length==1)switch(b[0].nodeName.toLowerCase()){case "th":switch(b[0].className){case "switch":this.showMode(1);break;case "prev":case "next":b=g.modes[this.viewMode].navStep*(b[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,b);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,b)}this.fill();break;case "today":b=new Date;b=j(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0);this.showMode(-2);this._setDate(b,this.todayBtn=="linked"?null:
"view")}break;case "span":if(!b.is(".disabled")){this.viewDate.setUTCDate(1);if(b.is(".month")){var d=b.parent().find("span").index(b);this.viewDate.setUTCMonth(d);this.element.trigger({type:"changeMonth",date:this.viewDate})}else{var e=parseInt(b.text(),10)||0;this.viewDate.setUTCFullYear(e);this.element.trigger({type:"changeYear",date:this.viewDate})}this.showMode(-1);this.fill()}break;case "td":if(b.is(".day")&&!b.is(".disabled")){var o=parseInt(b.text(),10)||1,e=this.viewDate.getUTCFullYear(),
d=this.viewDate.getUTCMonth();if(b.is(".old"))if(d===0){d=11;e=e-1}else d=d-1;else if(b.is(".new"))if(d==11){d=0;e=e+1}else d=d+1;this._setDate(j(e,d,o,0,0,0,0))}}},_setDate:function(a,d){if(!d||d=="date")this.date=a;if(!d||d=="view")this.viewDate=a;this.fill();this.setValue();var e;this.isInput?e=this.element:this.component&&(e=this.element.find("input"));if(e){e.change();this.autoclose&&(!d||d=="date")&&this.hide()}this.element.trigger({type:"changeDate",date:this.date,ins:this})},moveMonth:function(a,
d){if(!d)return a;var e=new Date(a.valueOf()),g=e.getUTCDate(),j=e.getUTCMonth(),q=Math.abs(d),l,d=d>0?1:-1;if(q==1){q=d==-1?function(){return e.getUTCMonth()==j}:function(){return e.getUTCMonth()!=l};l=j+d;e.setUTCMonth(l);if(l<0||l>11)l=(l+12)%12}else{for(var k=0;k<q;k++)e=this.moveMonth(e,d);l=e.getUTCMonth();e.setUTCDate(g);q=function(){return l!=e.getUTCMonth()}}for(;q();){e.setUTCDate(--g);e.setUTCMonth(l)}return e},moveYear:function(a,d){return this.moveMonth(a,d*12)},dateWithinRange:function(a){return a>=
this.startDate&&a<=this.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))a.keyCode==27&&this.show();else{var d=false,e,g,j;switch(a.keyCode){case 27:this.hide();a.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;e=a.keyCode==37?-1:1;if(a.ctrlKey){g=this.moveYear(this.date,e);j=this.moveYear(this.viewDate,e)}else if(a.shiftKey){g=this.moveMonth(this.date,e);j=this.moveMonth(this.viewDate,e)}else{g=new Date(this.date);g.setUTCDate(this.date.getUTCDate()+e);j=
new Date(this.viewDate);j.setUTCDate(this.viewDate.getUTCDate()+e)}if(this.dateWithinRange(g)){this.date=g;this.viewDate=j;this.setValue();this.update();a.preventDefault();d=true}break;case 38:case 40:if(!this.keyboardNavigation)break;e=a.keyCode==38?-1:1;if(a.ctrlKey){g=this.moveYear(this.date,e);j=this.moveYear(this.viewDate,e)}else if(a.shiftKey){g=this.moveMonth(this.date,e);j=this.moveMonth(this.viewDate,e)}else{g=new Date(this.date);g.setUTCDate(this.date.getUTCDate()+e*7);j=new Date(this.viewDate);
j.setUTCDate(this.viewDate.getUTCDate()+e*7)}if(this.dateWithinRange(g)){this.date=g;this.viewDate=j;this.setValue();this.update();a.preventDefault();d=true}break;case 13:this.hide();a.preventDefault();break;case 9:this.hide()}if(d){var q;this.isInput?q=this.element:this.component&&(q=this.element.find("input"));q&&q.change();this.element.trigger({type:"changeDate",date:this.date,ins:this})}}},showMode:function(a){if(a)this.viewMode=Math.max(0,Math.min(2,this.viewMode+a));this.picker.find(">div").hide().filter(".datepicker-"+
g.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};a.fn.datepicker=function(b){var d=Array.apply(null,arguments);d.shift();return this.each(function(){var h=a(this),g=h.data("datepicker"),j=typeof b=="object"&&b;g||h.data("datepicker",g=new e(this,a.extend({},a.fn.datepicker.defaults,j)));typeof b=="string"&&typeof g[b]=="function"&&g[b].apply(g,d)})};a.fn.datepicker.defaults={};a.fn.datepicker.Constructor=e;var d=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday",
"Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today"}},g={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",
navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,d){return[31,g.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][d]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(a){var d=a.replace(this.validParts,"\x00").split("\x00"),a=a.match(this.validParts);if(!d||!d.length||!a||a.length===0)throw Error("Invalid date format.");return{separators:d,parts:a}},parseDate:function(b,f,h){if(b instanceof
Date)return b;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(b)){for(var g=/([\-+]\d+)([dmwy])/,u=b.match(/([\-+]\d+)([dmwy])/g),q,b=new Date,l=0;l<u.length;l++){f=g.exec(u[l]);q=parseInt(f[1]);switch(f[2]){case "d":b.setUTCDate(b.getUTCDate()+q);break;case "m":b=e.prototype.moveMonth.call(e.prototype,b,q);break;case "w":b.setUTCDate(b.getUTCDate()+q*7);break;case "y":b=e.prototype.moveYear.call(e.prototype,b,q)}}return j(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),0,0,0)}var u=b&&b.match(this.nonpunctuation)||
[],b=new Date,g={},k=["yyyy","yy","M","MM","m","mm","d","dd"];q={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2E3+b)},m:function(a,b){for(b=b-1;b<0;)b=b+12;b=b%12;for(a.setUTCMonth(b);a.getUTCMonth()!=b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};var n;q.M=q.MM=q.mm=q.m;q.dd=q.d;var b=j(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0),x=f.parts.slice();u.length!=x.length&&(x=a(x).filter(function(b,d){return a.inArray(d,
k)!==-1}).toArray());if(u.length==x.length){for(var l=0,v=x.length;l<v;l++){n=parseInt(u[l],10);f=x[l];if(isNaN(n))switch(f){case "MM":n=a(d[h].months).filter(function(){var a=this.slice(0,u[l].length),b=u[l].slice(0,a.length);return a==b});n=a.inArray(n[0],d[h].months)+1;break;case "M":n=a(d[h].monthsShort).filter(function(){var a=this.slice(0,u[l].length),b=u[l].slice(0,a.length);return a==b});n=a.inArray(n[0],d[h].monthsShort)+1}g[f]=n}for(l=0;l<k.length;l++){f=k[l];if(f in g&&!isNaN(g[f]))q[f](b,
g[f])}}return b},formatDate:function(b,e,h){h={d:b.getUTCDate(),D:d[h].daysShort[b.getUTCDay()],DD:d[h].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:d[h].monthsShort[b.getUTCMonth()],MM:d[h].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};h.dd=(h.d<10?"0":"")+h.d;h.mm=(h.m<10?"0":"")+h.m;for(var b=[],g=a.extend([],e.separators),j=0,q=e.parts.length;j<q;j++){g.length&&b.push(g.shift());b.push(h[e.parts[j]])}return b.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',
contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};g.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+g.headTemplate+"<tbody></tbody>"+g.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+g.headTemplate+
g.contTemplate+g.footTemplate+"</table></div></div>";a.fn.datepicker.DPGlobal=g}(window.jQuery);
(function(a){a.cssHooks.rgba={get:function(a){return a.style.color},set:function(a,e){a.style.color=e;return this}};var j={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"};a.fn.transEnd=function(d,e,b){var f=this;if(!Modernizr.csstransitions&&b===true){e&&e(f);return this}if(!Modernizr.csstransitions)return this;if(a.type(d)=="function"){e=d;d=void 0}var h=j[Modernizr.prefixed("transition")]+
(d?"."+d:"");f.on(h,function(){e&&e(f,h);d&&a.type(d)=="string"?f.off(h):f.off(h,e)});return this};var e={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oanimationend",msAnimation:"MSAnimationEnd",animation:"animationend"};a.fn.animationEnd=function(d,g){var b=this;if(!Modernizr.cssanimations)return this;if(a.type(d)=="function"){g=d;d=void 0}var f=e[Modernizr.prefixed("animation")]+(d?"."+d:"");b.on(f,function(){g&&g(b,f);d&&a.type(d)=="string"?b.off(f):b.off(f,g)});
return this};a.fn.unchosen=function(){a(window).off(".fb").off(".chosen");return this.each(function(){a(this).show().removeClass("chzn-done");a(this).next().remove()})};a.fn.timestamp_picker=function(d){var e=a.extend({},{format:"dd M yyyy",autoclose:true,todayHighlight:true},d);return this.each(function(){var b=a(this),d=b.find("input"),h=b.find(".add-on");b.datepicker(e).on("changeDate",function(a){var b=a.ins.getFormattedDate();d.val(b+", 00:00:00");a.ins.hide()}).datepicker("hide");h.on("click",
function(){b.datepicker("show")})})};a.fn.confirm=function(d){return this.each(function(){var e=new D.bb.ConfirmView(d);a(this).data("confirm_view",e);e.render().$el.appendTo(this);e.show()})}})(jQuery);
(function(a){var j=function(d,e){var e=Array.prototype.slice.call(e),b=_.filter(e,function(a){return _.isFunction(a)}),f="fade"+d,h=d==="In"?"show":"hide";return this.each(function(){if(D.u.in_visible_dashboard(this))a.fn[f].apply(a(this),e);else{a(this)[h]();b[0]&&b[0].call(this)}})},e=function(d,e){var e=Array.prototype.slice.call(e),b=_.filter(e,function(a){return _.isFunction(a)});return this.each(function(){if(D.u.in_visible_dashboard(this))a.fn[d].apply(a(this),e);else{a(this).css(e[0]);b[0]&&
b[0].call(this)}})};a.fn.smartFadeIn=function(){return j.call(this,"In",arguments)};a.fn.smartFadeOut=function(){return j.call(this,"Out",arguments)};a.fn.smartTransition=function(){return e.call(this,"transition",arguments)};a.fn.smartAnimate=function(){return e.call(this,"animate",arguments)}})(jQuery);$.template("wizard_choose_service",'<article class="modal-wizard wizard-choose-service">    <h1>Choose a service to fill your dashboard with</h1>    <a class="close" href="#">close</a>    <ul class="services-grid">        {{each(i, service) services}}        <li>            <a {{if needs_upgrade}}class="disabled"{{else}}href="#wizard/dashboard/connect/${slug}"{{/if}}>                <strong class="serv-logo ${slug}">${name}</strong>            </a>        </li>        {{/each}}    </ul></article>');
$.template("select",'<select class="field-${name} ${klass}"        {{if load_service_params}}data-placeholder="Loading..."{{/if}}         {{if placeholder}}data-default-text="${placeholder}"{{else}}data-default-text="Select some options"{{/if}}>    {{each(i, option) options}}    <option value="${option.value}" {{if $data.value === option.value}}selected="selected"{{/if}}>${option.display_name}</option>    {{/each}}</select>');
(function(a){var j=a.preload=function(e,d){function g(f){h.element=this;h.found=f.type=="load";h.image=this.src;h.index=this.index;f=h.original=e[this.index];h[h.found?"loaded":"failed"]++;h.done++;d.enforceCache&&j.cache.push(a("<img/>").attr("src",h.image)[0]);if(d.placeholder&&f.src)f.src=h.found?h.image:d.notFound||f.src;if(d.onComplete)d.onComplete(h);if(h.done<h.total)b(0,this);else{o&&o.unbind&&o.unbind("load").unbind("error").unbind("abort");o=null;if(d.onFinish)d.onFinish(h)}}function b(a,
g,l){if(g.attachEvent&&h.next&&h.next%j.gap==0&&!l){setTimeout(function(){b(a,g,true)},0);return false}if(h.next==h.total)return false;g.index=h.next;g.src=f[h.next++];if(d.onRequest){h.index=g.index;h.element=g;h.image=g.src;h.original=e[h.next-1];d.onRequest(h)}}e.split&&(e=a(e));var d=a.extend({},j.defaults,d),f=a.map(e,function(a){if(a){if(a.split)return d.base+a+d.ext;var b=a.src||a.href;if(typeof d.placeholder=="string"&&a.src)a.src=d.placeholder;b&&d.find&&(b=b.replace(d.find,d.replace));return b||
null}}),h={loaded:0,failed:0,next:0,done:0,total:f.length};if(h.total)var o=a(Array(d.threshold+1).join("<img/>")).load(g).error(g).bind("abort",g).each(b);else if(d.onFinish)d.onFinish(h)};j.gap=14;j.cache=[];j.defaults={threshold:2,base:"",ext:"",replace:""};a.fn.preload=function(a){j(this,a);return this}})(jQuery);$.template("directory_group_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>        <a class="back" href="#directory">Go back to the widgets</a>    </header>    <div class="content">        <p><strong>Oops...</strong></p>        <p>This widget is not avaiable on your plan. Upgrade now to get access to all our widgets, and unlock many other features.</p>        <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">            <strong>Upgrade your plan</strong>            <span>30 day money back guarantee</span>        </a>    </div></article>');
$.template("directory_dashboard_detail",'<li>    <div class="kind serviceboard">        <img src="/static/dashboard/img/dashboards/${kind}_dashboard.png"/>        <div class="info">            <h2>${name}</h2>            <p class="description">{{html description}}</p>        </div>        {{if needs_upgrade}}            <a class="add">Upgrade your account</a>        {{else}}            <a class="add" href="#new/dashboard/${kind}">Add this dashboard</a>        {{/if}}    </div></li>');
(function(){var a={Model:Backbone.Model.extend({api_translation:[],parse:function(a){return D.u.from_api(this.api_translation,a)},toDucksboardJSON:function(){return D.u.to_api(this.api_translation,this.toJSON())},sync:function(a,e,d){if(_.include(["create","update"],a)){d.contentType="application/json";d.data=JSON.stringify(this.toDucksboardJSON())}return Backbone.sync.call(this,a,this,d)}}),Collection:Backbone.Collection.extend({parse:function(a){return a.data.length===0?a.data:_.map(_.bind(D.u.from_api,
this,this.model.prototype.api_translation),a.data,this)},random:function(){var a=Math.floor(Math.random()*this.length);return this.at(a)},purge:function(){return this.remove(this.select(function(a){return a.isNew()}))}}),View:Backbone.View.extend({show_response_errors:function(a){if(_.str.include(a.getResponseHeader("Content-Type"),"application/json")){a=JSON.parse(a.responseText);"errors"in a&&this.show_errors(a.errors,a.code)}},show_errors:function(a){if(!_.isString(a)){a=D.u.from_api(this.model&&
this.model.api_translation||[],a);_.each(a,_.bind(function(a,d){var g,b=this.$(_.sprintf(".field-%s",d));switch(true){case b.is("input[type=text]"):g=this._show_errors_input_text;break;case b.is("textarea"):g=this._show_errors_input_text;break;case b.is("input[type=password]"):g=this._show_errors_input_password;break;case b.is("select[multiple]"):g=this._show_errors_chosen_multi_select;break;case b.is("select"):g=this._show_errors_chosen_select}_.isFunction(g)&&_.bind(g,this)(b,a)},this))}},_show_errors_input_text:function(a,
e){var d=a.parent().hasClass("tip-input"),g=a.is(".autocomplete");a.addClass("error").val(e).one("focus",function(){$(this).removeClass("error").val("");d&&$(this).parent().removeClass("error");g&&a.focus()}).one("change",function(){$(this).removeClass("error");$(this).parent().removeClass("error")});d&&a.parent().addClass("error")},_show_errors_input_password:function(a,e){var d=a.parent().hasClass("tip-input");a.data("orig_placeholder",a.attr("placeholder"));a.addClass("error").val("").attr("placeholder",
e);a.one("focus",function(){$(this).removeClass("error").val("");$(this).attr("placeholder",$(this).data("orig_placeholder"));$(this).parent().removeClass("error")});d&&a.parent().addClass("error")},_show_errors_chosen_select:function(a,e){var d=this.chosen_for_select(a);d.find("a span").text(e);a.one("change",function(){d.removeClass("error")})},_show_errors_chosen_multi_select:function(a,e){var d=this.chosen_for_select(a),g=d.find(".search-field input").val(e);g.one("focus",function(){d.removeClass("error");
g.val("")})},chosen_for_select:function(a){a=a.attr("id")+"_chzn";return chzn=this.$("#"+a).addClass("error")}})};a.FormView=a.View.extend({template:"fieldset",template_data:function(){return{}},render:function(a){var e=a?"prependTo":"appendTo";this.model.load_service_params&&this.model.load_service_params()&&this.load_service_params(null);this.fields={};this.setElement($.tmpl(this.template,this.template_data()));if(!this.model.params)return this;this.set_params_dependencies();this.$el.addClass("fields-"+
_.size(this.model.params));_.each(this.model.params,function(a,g){this.fields[g]=$.tmpl(a.template,_.extend({name:g,value:this.get_param_value(g)},_.isFunction(a.template_data)?a.template_data():a.template_data));this.fields[g][e](this.$el);a.template_data&&a.template_data.tooltip&&this.setup_tooltip(this.fields[g]);a.template==="autocomplete"&&(this.is_valid(a,g)&&!a.template_data.load_service_params)&&this.setup_static_param(a,g)},this);return this},cb_appended:function(){this.$(".autocomplete").autocomplete()},
is_valid:function(a,e){return a.template_data&&this.fields&&this.fields[e]},setup_tooltip:function(a){var e=$(".tip",a).tooltip({position:"center center",effect:"fade",events:{def:"click, none",widget:"click, none",tooltip:"none, none"},onBeforeShow:function(){this.getTip().appendTo($("body"));return true},onHide:function(){this.getTip().insertAfter(this.getTrigger())},onShow:function(){}}).dynamic().data("tooltip");$(".close-tooltip",a).click(function(){e.hide()})},field_values:function(){var a=
{};_.each(this.fields,function(e,d){var g=".field-"+d;e.is(g)||(e=e.find(g).first());if(e.is("select")){g=e.val();!g&&(!this.model.isNew()&&!e.find("option").length)&&(g=this.get_param_value(d))}else g=e.val();this.model.params[d].template_data&&this.model.params[d].template_data.placeholder===g&&(g="");return a[d]=g},this);return a},set_from_fields:function(){var a=_.map(this.field_values(),function(a,d){return this.model.set(d,a)},this);return _.all(a,_.identity)},clear:function(){_.each(this.fields,
function(a,e){var d=".field-"+e;a.is(d)||(a=a.find(d).first());a.val("")});return this},process_service_param:function(a,e){var d=this.params?this.params[a].$el:$(".field-"+a);return d.is("select")?this.process_select(d,a,e):this.process_autocomplete(d,a,e)},process_select:function(a,e,d){var g=this,b=a.val()||this.get_param_value(e);this.remove_select_options(a);d=$.map(d,function(a){a=$('<option value="'+a.value+'">'+a.display_name+"</option>");g.select_option_param(e,a.val(),b)&&a.attr("selected",
"selected");a.hover(function(){$(this).attr("selected","selected")});return a[0]});a.is("[multiple]")&&this.remove_select_loading_wrap(a);if(d.length){!a.is("[multiple]")&&a.find("option:selected").length===0&&$(d[0]).attr("selected","selected");$(d).appendTo(a);a.trigger("liszt:updated");if(a=a.attr("class"))if((a=a.match(/\s*load:\w+/g))&&a.length===1)return a[0].replace(/^\s*load:/,"")}else{a={};a[e]="No results found";this.show_errors(a)}},process_autocomplete:function(a,e,d){if(a.length){e=$.map(d,
function(a){return a.value});(d=a.data("autocomplete"))?d.set_data(e):a.autocomplete({data:e});this.remove_autocomplete_loading(a)}},fetch_service_params:function(a,e,d){var g=$.get(a+"?"+$.param(d)),b=_.bind(function(a){var b=void 0,d=false,f=void 0,a=$.parseJSON(a),g=void 0;$.each(a,_.bind(function(a,e){g=this.process_service_param(a,e);if(g!==void 0){d&&$.error("more than one service request");f=a;d=true;b=g}},this));if(d){var j=e+b+"/",a=this.field_values();this.fetch_service_params(j,e,a);a=
this.$(".field-"+f);if(a.is("select")){a.off("change");a.change(_.bind(function(){var a=this.$(_.sprintf(".field-%s",b));this.show_select_loading_wrap(a);this.show_loading_in_dependent_fields(f);a=this.field_values();this.fetch_service_params(j,e,a)},this))}}},this),f=_.bind(function(a){var b={};_.map(this.model.params,_.bind(function(d,e){if(this.fields&&this.fields[e]&&this.fields[e].is("select")){this.remove_select_options(this.fields[e]);b[e]=$.parseJSON(a.responseText)}if(this.fields&&this.fields[e]&&
this.fields[e].is(".autocomplete")){this.remove_autocomplete_data(this.fields[e]);b[e]=$.parseJSON(a.responseText)}},this));this.show_errors(b)},this);g.done(b);this.model.retry_service_params&&this.model.retry_service_params()?g.fail(function(){setTimeout(function(){var e=$.get(a+"?"+$.param(d));e.done(b);e.fail(f)},1001)}):g.fail(f)},load_service_params:function(a){if(this.model.load_service_params()){var e=this.model.widget.kind;if(a=a||this.model.get("service_id")){_.map(this.model.params,_.bind(function(a,
e){this.is_valid(a,e)&&(a.template==="select"&&a.template_data.load_service_params?this.show_select_loading_wrap(this.fields[e]):a.template==="autocomplete"&&a.template_data.load_service_params&&this.show_autocomplete_loading(this.fields[e],true))},this));e="/services/params/"+a+"/"+e+"/";this.fetch_service_params(e,e,{})}}},setup_static_param:function(a,e){var d=this.fields[e];if(d){d.is("input")||(d=d.find("input:text, input:password"));this.process_autocomplete(d,e,a.template_data.options)}},set_params_dependencies:function(){var a=
{};_.each(this.model.params,function(e,d){if(e.depends_on){a[e.depends_on]||(a[e.depends_on]=[]);a[e.depends_on].push(d)}});this.dependencies=a},get_param_value:function(a){var e=this.model.get(a);if(e&&this.model.params[a].template==="select_multiple")try{e=JSON.parse(e)}catch(d){e=[e]}return e},select_option_param:function(a,e,d){return d&&this.model.params[a].template==="select_multiple"?$.inArray(e,d)>=0:e===d},show_loading_in_dependent_fields:function(a){(a=this.dependencies[a])&&_.each(a,_.bind(function(a){this.show_autocomplete_loading(this.$(".field-"+
a))},this))},show_autocomplete_loading:function(a,e){this.toggle_autocomplete_loading_placeholder(a,"show",e);a.hasClass("error")&&a.triggerHandler("focus")},remove_autocomplete_loading:function(a,e){this.toggle_autocomplete_loading_placeholder(a,"hide",e)},toggle_autocomplete_loading_placeholder:function(a,e){$.isNumeric(a)&&(a=$(this));var d=a.data("autocomplete");if(e==="show"){a.val("");a.attr("placeholder",a.attr("data-loading"));d&&d.set_data([]);a.attr("disabled","disabled")}else{a.attr("placeholder",
a.attr("data-placeholder"));a.removeAttr("disabled")}},show_select_loading_wrap:function(a){var e=this.chosen_for_select(a);this.remove_select_options(a);e.addClass("loading").find("a span").text("Loading...");a.one("change",function(){e.removeClass("loading")})},remove_select_loading_wrap:function(a){a.data("chosen").default_text=a.data("default-text")},remove_select_options:function(a){this.chosen_for_select(a).removeClass("loading").removeClass("error");a.find("option").remove();a.trigger("liszt:updated")},
remove_autocomplete_data:function(a){a.data("autocomplete").set_data([])},remove:function(){this.$("select").unchosen();_.each(this.fields,function(a){a.remove()});D.Backbone.View.prototype.remove.apply(this)}});a.SectionMixin={append_tab:function(a){var e=this.container.$("nav"),d=this.container.$("nav a"),g=this.container.$el.children(".pane");g.length===0&&(g=this.container.$el.children("section"));this.render();this.$el.hasClass("pane")&&(a?$.tmpl("section_option",{title:this.title}).insertBefore(d.last()):
$.tmpl("section_option",{title:this.title}).appendTo(e));g.first().hasClass("placeholder")?g.replaceWith(this.$el):a?this.$el.insertBefore(g.last()):this.$el.insertAfter(g.last())},set_from_input:function(){return true}};a.SettingsSection=a.View.extend(a.SectionMixin).extend({title:void 0,enabled:false,initialize:function(a){this.container=a.container;this.model=this.container.model;this.append_tab();this.enabled=true}});a.ConfirmView=Backbone.View.extend({template:"confirmation",csstrans:Modernizr.csstransitions,
events:{"click .conf_discard":"discard_action","click .conf_continue":"delete_action"},defaults:{confirmation_class:"",text:"ARE YOU SURE YOU WANT TO DELETE THIS?",continue_text:"Delete!",discard_text:"No!",continue_css_class:"btn btn-ico-action-medium btn-light",continue_icon:"icon-trash icon-small",discard_css_class:"btn btn-action-medium btn-light",continue_action:$.noop,discard_action:$.noop},initialize:function(a){this.opts=_.extend({},this.defaults,a);this.initial_css={};if(!this.opts.continue_icon)this.opts.continue_css_class=
this.opts.continue_css_class.replace("-ico-","-");D.u.off_esc();$(document).on(this._get_keyup_event(),$.proxy(this.keyboard,this));$(document).data("events").keyup.unshift($(document).data("events").keyup.pop())},render:function(){this.setElement($.tmpl(this.template,this.opts));this.$deletebutton=this.$(".conf_continue");return this},show:function(){this.initial_css.overflow=this.$el.parent().css("overflow");this.$el.parent().css("overflow","hidden");this.csstrans&&this.$el.transEnd("confirm-show-"+
this.cid,this.opts.show_callback||$.noop);_.delay(_.bind(function(){this.$el.addClass("visible");this.csstrans||this.opts.show_callback&&this.opts.show_callback()},this),20)},hide:function(){this.csstrans&&this.$el.transEnd("confirm-hide-"+this.cid,$.proxy(function(){this.$el.parent().css("overflow",this.initial_css.overflow);this.remove()},this));_.defer(_.bind(function(){this.opts.hide_callback&&this.opts.hide_callback();this.$el.removeClass("visible");this.csstrans||this.remove()},this))},discard_action:function(a){a&&
a.preventDefault();this.opts.discard_action&&this.opts.discard_action();this.hide();$(document).off(this._get_keyup_event());D.u.on_esc()},delete_action:function(a){a&&a.preventDefault();if(!this.$deletebutton.hasClass("loading")){this.$deletebutton.addClass("loading");this.opts.continue_action&&this.opts.continue_action();$(document).off(this._get_keyup_event());D.u.on_esc()}},keyboard:function(a){a.stopImmediatePropagation();a.keyCode==27?this.discard_action():a.keyCode==32&&this.delete_action()},
_get_keyup_event:function(){return _.sprintf("keyup.%s",this.cid)},remove:function(){this.opts={};D.Backbone.View.prototype.remove.apply(this)}});$.extend(Ducksboard,{Backbone:a,bb:a})})();
(function(){var a=D.Backbone.Model.extend({idAttribute:"token",defaults:{token:void 0,description:void 0,has_password:void 0,date_created:void 0},initialize:function(){this.view=new e({model:this})},token_link:function(){return D.bb.account.get("plan_label")==="whitelabel"?_.sprintf("https://%s/public/%s/",D.bb.account.get("reseller_url"),this.get("token")):_.sprintf("%s/%s/",D.config.public_host,this.get("token"))}}),j=D.Backbone.Collection.extend({model:a,initialize:function(a,b){this.dashboard=
b.dashboard;this.view=new d({collection:this,dashboard:this.dashboard})},url:function(){return"/api/dashboards/"+this.dashboard.get("slug")+"/tokens/"},comparator:function(a){return a.get("date_created")*-1}}),e=D.Backbone.View.extend({template:"access_token",events:{"click .delete":"destroy"},template_data:function(){return _.extend(this.model.toJSON(),{link:this.model.token_link(),has_flash:swfobject.hasFlashPlayerVersion("9.0.0")})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));
return this},init_clipboard:function(){if(swfobject.hasFlashPlayerVersion("9.0.0")){var a=new ZeroClipboard.Client;a.setHandCursor(true);a.setText(this.model.token_link());a.addEventListener("complete",_.bind(this.copy_completed,this));a.glue(this.$(".copy a").get(0),this.$(".zeroclipboard-container").get(0),{width:92,height:34,zIndex:2E3})}},copy_completed:function(){},destroy:function(a){a.stopPropagation();a.preventDefault();D.bb.account.get("has_trial_expired")===true&&D.bb.dashboards.current_is_chromeboard()===
false?D.bb.account.trial_expired_view.render(true):D.bb.account.get("has_recurly_account_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false?D.bb.account.subscription_expired_view.render():this.confirm_view=this.$el.confirm({text:"Sure you want to delete this share link?",continue_text:"Delete",discard_text:"Keep",continue_action:_.bind(this._destroy,this),show_callback:_.bind(function(){this.$(".copy").hide()},this),hide_callback:_.bind(function(){this.$(".copy").show()},this)}).data("confirm_view")},
_destroy:function(){this.model.destroy({wait:true}).complete(_.bind(function(){this.$el.animate({height:"toggle",opacity:"toggle"},_.bind(function(){this.confirm_view.hide();this.$el.remove()},this))},this))}}),d=D.Backbone.View.extend({template:"new_access_token",events:{"click .create":"create"},initialize:function(a){this.dashboard=a.dashboard},render:function(){var a=$(".access-tokens ul");a.empty();a.siblings(".token-data").remove();this.collection.each(_.bind(function(b){b.view.render().$el.appendTo(a);
b.view.init_clipboard()},this));if(!this.dashboard.isNew()){this.setElement($.tmpl(this.template,{}));this.$el.insertBefore(a)}return this},create:function(a){if(D.bb.account.get("has_trial_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false)D.bb.account.trial_expired_view.render(true);else if(D.bb.account.get("has_recurly_account_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false)D.bb.account.subscription_expired_view.render();else{var b=$(a.currentTarget);sending=
D.u.sending(b,function(){b.val("")});if(!sending.blocked){a={description:this.$(".field-description").val(),password:this.$(".field-password").val()};this.collection.create(a,{wait:true,complete:sending.complete,success:_.bind(this.token_created,this),error:_.bind(function(a,b){this.show_response_errors(b)},this)})}}},token_created:function(a){var b=$(".access-tokens ul");this.$(".field-description").val("");this.$(".field-password").val("");a.view.render().$el.hide().prependTo(b).animate({height:"toggle",
opacity:"toggle"},_.bind(function(){a.view.init_clipboard()},this))}});_.extend(Ducksboard.Backbone,{AccessToken:a,AccessTokenList:j})})();
(function(){var a={directory_serviceboard:D.Backbone.View.extend({template:null,template_data:function(){return{}},render:function(){this.setElement($.tmpl(this.template,this.template_data()));D.u.super_modal(this);return this}}).extend({template:"directory_serviceboard_notice",template_data:function(){return{service:_.str.capitalize(D.bb.dashboards.current.kind.get("kind"))}}})};Ducksboard.bb.notice=a})();
(function(){var a=D.Backbone.Model.extend({idAttribute:"kind",defaults:{kind:void 0,name:void 0,description:void 0,editable:void 0,layout:void 0,needs_upgrade:function(){return D.bb.account.get("plan_label")==="developer"}}}),j=new (D.Backbone.Collection.extend({model:a,comparator:function(a){return a.get("layout")}})),e=D.Backbone.View.extend({template:"dashboard",events:{"gridster:dragstop .gridster":"update_positions"},initialize:function(){this.setElement($.tmpl(this.template,{kind:this.model.kind.toJSON()}));
this.$el.appendTo("#container")},render:function(a){this.$el.hide();if(a===this.model){this.hide_welcome();this.$el.is(":visible")&&$(document.body).css("overflow","hidden");_.defer(function(){$("body").attr("style","");this.set_background();this.adjust_preferences_bar();this.$el.show();D.bb.account.display_welcome();D.bb.account.display_wizard();D.Backbone.account.get("readonly")||$.ajax(this.model.url()+"/accessed",{type:"POST",data:"accessed"})}.bind(this))}},resize:function(){var a=D.u.constants.gridster[this.model.kind.id].pc,
a=a.widget_base_dimensions[0]+2*a.widget_margins[0],b=parseInt($(document).width()/a,0),d=this.model.widgets.length?_.max(this.model.widgets.map(function(a){var b=a.get("column")||0,a=(a.get("width")||1)-1;return b+a})):0,b=D.Backbone.account.get("readonly")?d:_.max([b,d]);this.$el.width(a*b)},create_grid:function(){this.resize();if(this.gridster)this.model.widgets.each(_.bind(function(a){this.gridster.add_widget(a.view.container,a.get("width"),a.get("height"),a.get("column"),a.get("row"))},this));
else{this.model.widgets.each(_.bind(function(a){a.view.container.appendTo(this.$(".gridster"))},this));var a=D.u.constants.gridster[this.model.kind.id].pc;this.gridster=this.$(".gridster").gridster({namespace:a.namespace||"",widget_margins:a.widget_margins,widget_base_dimensions:a.widget_base_dimensions,draggable:{helper:"clone",items:".gs_w:not(.not-draggable)"},min_cols:2,max_cols:null,serialize_params:function(a,b){return{model:$("article",a).tmplItem().model,col:b.col,row:b.row}}}).data("gridster")}(D.bb.account.get("readonly")||
!this.model.kind.get("editable"))&&this.gridster.disable()},render_welcome:function(){var a=$("#preferences").find(".welcome_text"),b=$.tmpl("welcome_widget",D.bb.account.toJSON()),d=Math.max(this.last_visible_col,2);this.$welcome_widget=this.gridster.add_widget(b,1,2,d,1);a.show()},hide_welcome:function(){if(this.$welcome_widget){this.gridster.remove_widget(this.$welcome_widget);this.$welcome_widget=null}$("#preferences .welcome_text").hide()},adjust_preferences_bar:function(){var a=D.u.constants.gridster[this.model.kind.id].pc,
b=a.widget_base_dimensions[0]+a.widget_margins[0]*2,d=$(document.body),e=$("#preferences, #public-info").find(" > ul"),f=$(window).width(),h=Math.max(this.$el.width(),b*2),g=Math.max(parseInt(this.$el.width()/b,0),2),j=b,k=e.find("> li").last(),n=D.Backbone.account.get("email")=="public",l=e.find("> li.directory").eq(0);D.bb.dashboards.current.kind.get("editable");n?l.hide():l.show();var l=_.reduce(e.find("> li"),function(a,b){return a+$(b).outerWidth(true)},0),l=Math.max(l,h),o=l>=f?l:"100%";this.dashboard_centered=
false;n||D.bb.preferences.render_notification();for(D.bb.dashboards.view.$el&&D.bb.dashboards.view.$el.hide();g>=1;g--){var q=g*b;if(q<f){j=q;this.last_visible_col=g;break}}d.css("width",o);n||k.css("width",a.widget_base_dimensions[0]);g=_.reduce(k.siblings(":visible"),function(a,b){return a+$(b).outerWidth()},0);b=n?k.outerWidth():b+parseInt(k.css("margin-left"));j=j-b-g;k.css({left:j>0?j:0});e.css({width:l});D.d.interactive&&d.css("overflow","visible");var u=d.width();_.each(D.bb.dashboards.models,
function(a){a.view.$el.css({left:h<f?(u-h)/2:0})});e.css({left:(u-l)/2+a.widget_margins[0]});this.dashboard_centered=true;D.bb.dashboards.current.trigger("dashboard:centered",true)},update_positions:function(a){_.each(this.gridster.serialize(),_.bind(function(a){a.model&&a.model.set({column:parseInt(a.col,0),row:parseInt(a.row,0)})},this));this.model.widgets.sort();a===true?this.model.widgets.save_positions():this.model.widgets.save_positions_with_delay()},set_background:function(a){var b=!a;a||(a=
$("body"));var d=F.detect(_.bind(function(a){return a.get("label")===this.model.get("background_label")},this));b?a.attr("class",d.get("slug")):a.addClass(d.get("slug"));if(d.get("slug")==="custom")(b=D.bb.account.get_background_url(this.model.get("owner")))&&a.attr("style",'background-image: url("'+b+'")')}}),d=D.Backbone.View.extend({template:"dashboard_current",events:{click:"show_list"},initialize:function(){this.setElement($.tmpl(this.template));this.$el.prependTo("#preferences .dashboards");
this.listenTo(this.collection,"current",this.new_model)},new_model:function(){this.model&&this.stopListening(this.model);this.model=this.collection.current;this.listenTo(this.model,"saved:label",this.render);this.render()},show_list:function(a){var b=D.bb.dashboards.view.$el;b.fadeToggle();a.originalEvent.$contextual=b},render:function(){var a=this;this.$("span").fadeOut(200,function(){$(this).text(a.model.get("label")).fadeIn(200)})}}),g=D.Backbone.View.extend({template:"dashboard_item",initialize:function(){this.listenTo(this.model,
"saved:label",this.render)},template_data:function(a){return _.extend({},this.model.toJSON(),{kind:this.model.kind.toJSON(),owner_index:a})},render:function(a){if(this.model.isNew())return this;this.$new_el=$.tmpl(this.template,this.template_data(a));$("#dashboards-list").has(this.$el).length?this.$el.replaceWith(this.$new_el):$("#dashboards-list li.new").length?this.$new_el.insertBefore("#dashboards-list li.new:first"):$("#dashboards-list li").length?this.$new_el.insertAfter("#dashboards-list li:last"):
this.$new_el.appendTo("#dashboards-list");this.setElement(this.$new_el);return this}}),b=D.Backbone.View.extend({template:"dashboard_settings",tabs:["access tokens","backgrounds","tvmode-reel"],events:{"click .rename":"toggle_edit","click .delete":"destroy","click .save":"save"},initialize:function(){this.listenTo(this.model,"saved:label",this.update_label)},template_data:function(){return _.extend(this.model.toJSON(),{is_new:this.model.isNew(),is_last:D.Backbone.dashboards.length<=1,is_editable:this.model.kind.get("editable")})},
render:function(a){var b=this;if(D.bb.account.get("readonly"))return this;this.setElement($.tmpl(this.template,this.template_data()));this.$("nav").tabs(this.$("section.pane"),{onBeforeClick:function(){D.u.hide_tooltips()},onClick:function(a){var d=b.tabs[this.getIndex()];D.u.track_tab(a,"select dashboard tab",{tab:d});D.u.focus_on_first(b.$(".pane").eq(this.getIndex()))}});D.u.modal({content:this.$el});if(this.model.kind.get("editable")){$(".backgrounds ul").empty();F.each(_.bind(function(a){if(a.get("in_gallery")){a.item_view.dashboard=
this.model;a.item_view.render().$el.appendTo(".backgrounds ul")}},this))}D.bb.dashboards.current_is_serviceboard()===false&&this.$(".tvmode-reel").replaceWith((new t).render().el);this.model.access_tokens.view.render();this.$("input[placeholder], textarea[placeholder]").placeholder();D.u.focus_on_first(this.$("section.pane").first());this.small_title_width=this.$(".title").width();this.big_title_width=this.small_title_width+this.$(".rename").outerWidth()+parseInt(this.$(".title").css("margin-right"),
10);if(a){a=a.replace("-"," ");a=_.indexOf(this.tabs,a);this.$("nav a").eq(a).trigger("click")}return this},update_label:function(){this.$(".title h1").text(this.model.get("label"))},destroy:function(a){a&&a.preventDefault();this.confirm_view=this.$("header").confirm({text:_.sprintf("Sure you want to delete the dashboard %s?",this.model.get("label")),continue_text:"Delete",discard_text:"Keep",continue_action:_.bind(this._destroy,this)}).data("confirm_view")},_destroy:function(){this.model.destroy({wait:true,
success:function(){D.bb.account.get("has_trial_account")&&D.bb.account.set_plan();D.Backbone.dashboards.set_current(D.Backbone.dashboards.first());$.fancybox.close()},complete:_.bind(function(){this.confirm_view.hide()},this)})},save:function(a){if(!this.$(".error").length){var b=$(a.currentTarget),a=D.u.sending(b,function(){b.val("")});if(!a.blocked){var d=this.model.isNew()?this.add_new:this.update;this.model.save({label:this.$(".field-label").val()},{complete:a.complete,success:_.bind(d,this),
error:_.bind(function(a,b){this.show_response_errors(b)},this)})}}},add_new:function(){o.add(this.model);this.model.item_view.render();this.model.view.create_grid();D.bb.account.update();D.bb.account.get("has_trial_account")&&D.bb.account.set_plan();D.Backbone.app.navigate(_.sprintf("dashboard/%s",this.model.get("slug")),true)},update:function(){this.toggle_edit();this.model.trigger("saved:label")},toggle_edit:function(){if(D.bb.account.get("has_trial_expired")===true&&D.bb.dashboards.current_is_chromeboard()===
false)D.bb.account.trial_expired_view.render(true);else if(D.bb.account.get("has_recurly_account_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false)D.bb.account.subscription_expired_view.render();else{var a=this.$(".title h1"),b=this.$(".title fieldset"),d=this.big_title_width,e=1;if(this.$(".title").width()==this.big_title_width){a=this.$(".title fieldset");b=this.$(".title h1");d=this.small_title_width;e=0}this.$(".title").width(d);this.$(".rename").css({"margin-left":e});a.fadeOut(function(){b.fadeIn()})}}}),
f=D.Backbone.Model.extend({idAttribute:"kind",urlRoot:"/api/templates/",url:function(){var a=this.urlRoot;return _.sprintf("%s%s%s/",a,a.charAt(a.length-1)=="/"?"":"/",encodeURIComponent(this.id))},isNew:function(){return true}}),e=D.Backbone.Model.extend({idAttribute:"dashboard_id",urlRoot:"/api/dashboards/",api_translation:[["background_label","background"],["label","name"]],view_cls:e,item_view_cls:g,create_view_cls:b,settings_view_cls:b,dashboard_template_cls:f,initialize:function(){this.widgets=
new D.Backbone.WidgetList;this.access_tokens=new D.Backbone.AccessTokenList([],{dashboard:this});this.view=new this.view_cls({model:this});this.item_view=new this.item_view_cls({model:this});this.create_view=new this.create_view_cls({model:this});this.settings_view=new this.settings_view_cls({model:this});this.on("destroy",this.cleanup)},set_create_view:function(a){this.create_view.remove();this.create_view_cls=a||b;this.create_view=new this.create_view_cls({model:this})},cleanup:function(){this.view.remove();
this.item_view.remove();this.settings_view.remove()},url:function(){var a=this.urlRoot;return this.isNew()?a:a+encodeURIComponent(this.get("slug"))},has_widgets:function(){return this.widgets.size()>0}}),g=D.Backbone.Collection.extend({model:e,url:"/api/dashboards/",carousel_period:60,initialize:function(){this.view=new h({collection:this});this.on("destroy",this.destroyed)},comparator:function(a){return 100*(a.kind.id==="default"?0:a.kind.get("layout"))+a.get("layout")},set_first:function(a){this.current=
a;this.first_time=true;this.current.view.$el.addClass("visible")},delete_slots:function(){var a;this.current.widgets.each(function(a){a.slot_attrs=a.extract_slot_attrs()});if(this.first_time)a=$.Deferred().resolve();else{a=[];this.current.widgets.each(function(b){[].push.apply(a,b.delete_slots())})}return a},create_slots:function(){this.current.widgets.each(function(a){!this.first_time&&a.create_slots();a.slots.each(function(a){a.view.render().$el.css({opacity:1});a.start()})},this)},set_current:function(a,
b){if(b||a!==this.current||this.first_time){var e=this.delete_slots();this.current_view||(this.current_view=new d({collection:this}));this.current&&this.current.view.$el.removeClass("visible");this.current=a;this.current.view.$el.addClass("visible");this.current.view.gridster&&this.current.view.gridster.enable();$.when.apply($,e).then(_.bind(function(){this.create_slots();delete this.first_time},this));!b&&this.trigger("current",a)}},destroyed:function(){this.set_current(this.first());D.Backbone.app.navigate("dashboard/"+
this.current.get("slug"))},get_service_widgets:function(a){return _.flatten(this.map(function(b){return b.widgets.get_by_service(a)}))},num_widgets:function(){var a=D.bb.account.get("serviceboards"),b=this.filter(function(b){return!_.contains(a,b.kind.get("kind"))});return _.reduce(_.map(b,function(a){return a.widgets.size()}),function(a,b){return a+b},0)},num_custom_widgets:function(){var a=D.bb.account.get("serviceboards"),b=this.filter(function(b){return!_.contains(a,b.kind.get("kind"))});return _.reduce(_.map(b,
function(a){return a.widgets.filter(function(a){return a.service_kind=="custom"}).length}),function(a,b){return a+b},0)},serviceboard:function(){var a=D.bb.account.get("serviceboards"),b=this.filter(function(b){return _.contains(a,b.kind.get("kind"))});return b.length===0?void 0:_.min(b,function(a){return a.get("layout")})},current_is_serviceboard:function(){return _.isEqual(D.bb.dashboards.current,D.bb.dashboards.serviceboard())},current_is_oldest:function(){return _.isEqual(D.bb.dashboards.current,
D.bb.dashboards.first())},current_is_chromeboard:function(){return this.current_is_oldest()&&D.bb.account.get("plan_label")==="chromewebstore"},current_kind_is_serviceboard:function(){return D.bb.dashboards.current.kind.get("kind")!=="default"},billable_dashboards:function(){return this.size()-(this.serviceboard()?1:0)},uses_premium_widgets:function(){var a=D.bb.account.get("serviceboards"),b=this.filter(function(b){return!_.contains(a,b.kind.get("kind"))});return _.any(b,function(a){return a.widgets.any(function(a){return a.premium})})},
has_carousel:function(){return this.any(function(a){return a.get("in_carousel")})},in_tvmode_dashboards:function(){return D.bb.dashboards.select(function(a){return a.get("in_carousel")&&a.widgets.length})}}),h=D.Backbone.View.extend({template:"dashboards_list",template_data:function(){return{kinds:D.bb.dashboard_kinds.filter(function(a){return a.get("in_menu")}),readonly:D.bb.account.get("readonly")}},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.$el.appendTo("#preferences .dashboards");
var a=this.collection.groupBy(function(a){return a.get("owner")});_.keys(a).length===1?this.collection.each(function(a){a.item_view.render()}):_.each(a,function(a){_.each(a,function(a,b){a.item_view.render(b)})});return this}}),o=new g;o.on("add",function(a){a.view.listenTo(a.collection,"current",a.view.render)});var u={from_wizard:true,postit_template:"post-it",get_postit_content:function(){return $.tmpl(this.postit_template,{service_kind:this.service_kind}).val().replace(/\[br\]/g,"\n")},show_wizard_final_step:function(){Backbone.history.navigate("wizard/dashboard/what_is_next",
true)},vivify_dashboard:function(){q.prototype.vivify_dashboard.apply(this,arguments);this.show_wizard_final_step()},validate_fields:function(){var a={};_.each(this.setup_form_view.fields,function(b,d){var e=_.sprintf(".field-%s",d);(b=b.is(e)?b:b.find(e))&&b.trigger("focus blur");b&&(b.is("select[multiple]")===false&&_.trim(b.val()).length===0)&&(a[d]="This field is required")},this);if(_.size(a)){this.show_errors(a);return false}return true},show_response_errors:$.noop},q=D.Backbone.View.extend({template:void 0,
template_label:void 0,service_kind:void 0,needs_setup:true,events:{"click .services li":"select_service","click .connect":"create_service","click .create":"create_dashboard","click .failure a":"show_credentials"},initialize:function(){this.template_label=this.template_label||this.model.kind.id;this.service_kind=this.service_kind||this.model.kind.id},get_services:function(){return D.bb.services.filter(_.bind(function(a){return a.get("service_kind")===this.service_kind},this))},render:function(){var a=
this.get_services();this.setElement($.tmpl(this.template,{kind:this.model.kind.toJSON(),has_services:!!a.length,has_dashboards:!!D.bb.dashboards.length,from_wizard_dashboard:this.from_wizard}));if(a.length)_.each(a,_.bind(function(a){a.selectable.render(null,true).$el.prependTo(this.$("ul.services"))},this));else{this.$(".accounts").show();this.$(".credentials").show()}a=this.service=new D.Backbone.service_kinds[this.service_kind];this.$(".credentials legend").after(a.initial_form_view.render().$el);
D.u.modal({content:this.$el,onComplete:function(){D.u.on_esc();$("#fancybox-content, #fancybox-content > div").css({overflow:"visible"})},onCleanup:function(){D.u.hide_tooltips();D.u.off_esc();$("#fancybox-content").css({overflow:""})}});this.$("input[placeholder], textarea[placeholder]").placeholder();this.$("select").chosen({disable_search_threshold:10});this.post_render();return this},post_render:function(){},select_service:function(a){var b=$("a",a.currentTarget).tmplItem().model;if(b){this.service=
b;this.prepare_setup(a);this.needs_setup&&this.show_fieldset("setup")}else this.service.uses_external_authentication?this.open_external_authentication():this.show_fieldset("credentials")},create_service:function(a){if(this.service.uses_external_authentication)this.open_external_authentication();else{var b=$(a.currentTarget),d=D.u.sending(b,function(){b.val("")});if(!d.blocked){this.service.initial_form_view.set_from_fields();D.Backbone.services.add(this.service);this.service.save({},{complete:_.bind(function(){d.complete();
this.service.unset("auth_user");this.service.unset("auth_password")},this),success:_.bind(function(){this.prepare_setup();this.needs_setup&&this.show_fieldset("setup")},this),error:_.bind(function(a,b){D.Backbone.services.remove(this.service);this.service.initial_form_view.show_response_errors(b)},this)})}}},open_external_authentication:function(){var a=this.get_services().length,b=_.bind(function(){this.choose_new_service(a)},this);this.show_fieldset("loading");$(window).one("focus",function(){D.Backbone.services.fetch({success:b,
error:b})});var d=this.service.auth_url()+"?"+$.param(this.service.initial_form_view.field_values());return window.open(d)},prepare_setup:function(a){this.create_dashboard(a)},choose_new_service:function(a){this.$(".credentials").stop(true,true);this.$(".loading").stop(true,true);var b=this.get_services();if(b.length>a){this.service=_.last(b);this.prepare_setup();this.needs_setup&&this.show_fieldset("setup")}else b.length?this.show_fieldset("accounts"):this.show_fieldset("failure")},show_fieldset:function(a){var b=
_.without(["accounts","credentials","loading","failure","setup"],a),b=_.map(b,_.bind(function(a){return this.$("."+a).fadeOut(100)},this));$.when.apply($,b).then(_.bind(function(){this.$("."+a).fadeIn(100)},this))},create_dashboard:function(a){a&&a.preventDefault();if(!this.needs_setup||!(this.validate_fields&&this.validate_fields()===false)){if(a){var b=$(a.currentTarget),d=D.u.sending(b,function(){b.val("")});if(d.blocked)return}var e=new this.model.dashboard_template_cls({kind:this.template_label}),
f=this.build_template_config();e.save(f,{complete:a?d.complete:$.noop,success:_.bind(function(a,b){this.vivify_dashboard(b)},this),error:_.bind(function(a,b){this.show_response_errors(b)},this)})}},show_credentials:function(){this.show_fieldset("credentials")},build_template_config:function(){},vivify_dashboard:function(a){if(!D.Backbone.dashboards.length){window.location.reload();window.close()}this.model.set(a.dashboard);o.add(this.model);_.each(a.widgets.data,_.bind(function(a){var b=new D.Backbone.widget_kinds[a.widget.kind](a.widget,
{service:this.service});b.dashboard=this.model;this.model.widgets.add(b);b.setup_new(b.from_api(a));b.view.container=b.view.setup_container()},this));this.model.item_view.render();this.model.view.create_grid();this.model.widgets.each(function(a){a.start()});D.bb.account.get("has_trial_account")&&D.bb.account.set_plan();this.from_wizard?o.set_current(this.model,true):D.Backbone.app.navigate(_.sprintf("dashboard/%s",this.model.get("slug")),true)}}),f=q.extend({template:"dashboard_zendesk_create",post_render:function(){this.$(".field-auth_user").attr("tabindex",
1);this.$(".field-auth_password").attr("tabindex",2);this.$(".field-auth_domain").attr("tabindex",3)},prepare_setup:function(){var a=new D.Backbone.widget_kinds.zendesk_tickets_by_status_boxes({},{service:this.service});a.data_source.set({service_id:this.service.id});this.setup_form_view=new D.bb.FormView({model:a.data_source});this.$(".groups-placeholder").replaceWith(this.setup_form_view.render().$el);this.$("select").chosen({disable_search_threshold:10})},build_template_config:function(){var a=
{};a.name=this.$(".field-label").val();a.accounts={1:{account_id:this.service.id}};var b=this.$(".field-group_name").val();if(b!==""){a.content={};_.each(_.range(1,19),function(d){a.content[d]={group_name:b}})}return a}}),g=f.extend(u).extend({service_kind:"zendesk",template_label:"zendesk-starter",build_template_config:function(){var a={};a.dashboard_id=this.model.id;a.accounts={1:{account_id:this.service.id}};var b=this.$(".field-group_name").val();if(b!==""){a.content={};_.each(_.range(1,6),function(d){a.content[d]=
{group_name:b}})}a.content[6]={content:this.get_postit_content()};return a}}),f=e.extend({create_view_cls:f}),l=q.extend(u).extend({template:"dashboard_analytics_create",service_kind:"analytics",template_label:"analytics-starter",prepare_setup:function(){var a=new D.Backbone.widget_kinds.analytics_daily_unique_visitors_graph({},{service:this.service});a.data_source.set({service_id:this.service.id});this.setup_form_view=new D.bb.FormView({model:a.data_source});this.$(".properties-placeholder").replaceWith(this.setup_form_view.render().$el);
this.$("select").chosen({disable_search_threshold:10})},build_template_config:function(){var a={};a.dashboard_id=this.model.id;a.accounts={1:{account_id:this.service.id}};var b=this.$(".field-table_id").val();a.content={};_.each(_.range(1,6),function(d){a.content[d]={table_id:b}});a.content[6]={content:this.get_postit_content()};return a}}),k=q.extend({template:"dashboard_twilio_create",prepare_setup:function(){var a=new D.Backbone.widget_kinds.twilio_queue_size_counter({},{service:this.service});
a.data_source.set({service_id:this.service.id});this.setup_form_view=new D.bb.FormView({model:a.data_source});this.$(".subaccounts-placeholder").replaceWith(this.setup_form_view.render().$el);this.$("select").chosen({disable_search_threshold:10})},build_template_config:function(){var a={};a.name=this.$(".field-label").val();a.accounts={2:{account_id:this.service.id}};var b=this.$(".field-subaccount").val();if(b!==""){a.content={};_.each(_.range(2,13),function(d){a.content[d]={subaccount:b}})}var d=
this.$(".field-queue").val()||"no-queue";a.content[10].queue=d;return a}}),n=k.extend(u).extend({service_kind:"twilio",template_label:"twilio-starter",build_template_config:function(){var a={};a.dashboard_id=this.model.id;a.name=this.$(".field-label").val();a.accounts={1:{account_id:this.service.id}};var b=this.$(".field-subaccount").val();if(b!==""){a.content={};_.each(_.range(1,5),function(d){a.content[d]={subaccount:b}})}a.content[5]={content:"post-it text"};return a}}),k=e.extend({create_view_cls:k}),
x=q.extend(u).extend({template:"dashboard_twitter_create",service_kind:"twitter",template_label:"twitter-starter",needs_setup:false,build_template_config:function(){var a={};a.dashboard_id=this.model.id;a.accounts={1:{account_id:this.service.id}};a.content={4:{content:this.get_postit_content()}};return a}}),v=q.extend(u).extend({template:"dashboard_github_create",service_kind:"github",template_label:"github-starter",prepare_setup:function(){var a=new D.Backbone.widget_kinds.github_issues_counter_timeline({},
{service:this.service});a.data_source.set({service_id:this.service.id});this.setup_form_view=new D.bb.FormView({model:a.data_source});this.$(".repo-placeholder").replaceWith(this.setup_form_view.render().$el);this.$("select").chosen({disable_search_threshold:10})},build_template_config:function(){var a={};a.dashboard_id=this.model.id;a.accounts={1:{account_id:this.service.id}};var b=this.$(".field-user").val(),d=this.$(".field-repo").val();a.content={};_.each(_.range(1,5),function(e){a.content[e]=
{user:b,repo:d}});a.content[5]={content:this.get_postit_content()};return a}}),u=q.extend(u).extend({template:"dashboard_salesforce_create",service_kind:"salesforce",template_label:"salesforce-starter",needs_setup:false,build_template_config:function(){var a={};a.dashboard_id=this.model.id;a.accounts={1:{account_id:this.service.id}};a.content={5:{content:this.get_postit_content()}};return a}}),w=D.Backbone.Model.extend({idAttribute:"slug",url:"/api/backgrounds/",initialize:function(){this.item_view=
this.get("user_managed")?new E({model:this}):new z({model:this})},start:function(){this.get("user_managed")&&this._upload()},pause:function(){if(this.get("user_managed"))this.is_paused=true},resume:function(){if(this.get("user_managed")){this.is_paused=false;this._upload()}},save:function(a){if(!this.get("user_managed")||!D.bb.account.get("can_upload_background"))return this;if(!D.u.support_xhr_upload())return this._iframe_upload(a,{url:this.url});if(this.file=a[0].files[0]){this.file_size=this.file.size;
a=new FormData;a.append("file",this.file);this.xhr=new XMLHttpRequest;this.xhr.open("POST",this.url);this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xhr.setRequestHeader("X-CSRFToken",$.cookie("csrftoken"));this.xhr.upload.addEventListener("progress",_.bind(this._upload_progress,this),false);this.xhr.addEventListener("load",_.bind(this._upload_completed,this),false);this.xhr.addEventListener("abort",this._upload_canceled,false);this._upload_start();this.xhr.send(a);return this}},
_upload_start:function(){this.trigger("upload_start")},_upload_progress:function(a){this.trigger("progress",a)},_upload_completed:function(a){var b=a;if(a.target){if(a.target.status!==200)return this._upload_failed({code:a.target.status,errors:"Unexpected error uploading file"});b=JSON.parse(a.target.responseText)}D.bb.account.set_background(b);this.trigger("uploaded",this)},_upload_failed:function(a){if(a.code===413){a.errors="File is too large";a.details="max. 1Mb"}this.trigger("error",a)},_upload_canceled:function(a){console.log("canceled!",
a)},_iframe_upload:function(a,b){var d="file_upload_iframe_"+Date.now(),e=$("<iframe />",{id:d,name:d}).hide(),d=$("<form />",{enctype:"multipart/form-data",target:d,action:b.url,method:"POST"}).hide();$("<input />",{type:"hidden",name:"csrfmiddlewaretoken",value:$.cookie("csrftoken")}).appendTo(d);$("<input />",{type:"hidden",name:"iframe",value:true}).appendTo(d);a.attr("name","file").appendTo(d);$(document.body).prepend(e);$(document.body).prepend(d);var f=this;e[0].onreadystatechange=function(){if(!(f.upload_canceled||
this.readyState!=="complete")){var a={code:400,errors:"Unexpected error uploading file"};try{var b=$(e[0].contentWindow.document.body).find("pre").text();if(b){var d=JSON.parse(b);d.background_url?f._upload_completed(d):f._upload_failed(d)}else throw new Exception;}catch(h){f._upload_failed(a)}}};e[0].load_successfully=false;d=d.submit();this._upload_start();return d}}),z=D.Backbone.View.extend({template:"background_item",events:{click:"set_background"},template_data:function(){var a=this.dashboard.get("background_label");
return _.extend(this.model.toJSON(),{is_current:this.model.get("label")===a,uploaded_background:!!D.bb.account.get_background_url(this.dashboard.get("owner")),can_upload_background:D.bb.account.get("can_upload_background")})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));return this},set_background:function(){if(D.bb.account.get("has_trial_expired")===true&&D.bb.account.get("is_beta")===false)D.bb.account.trial_expired_view.render(true);else if(D.bb.account.get("has_recurly_account_expired")===
true)D.bb.account.subscription_expired_view.render();else{this.dashboard.set({background_label:this.model.get("label")});$("a",this.$el.siblings()).removeClass("selected");this.$("a").addClass("selected");mixpanel.track("dashboard background select",{background:this.model.get("label"),"dashboard is new":this.dashboard.isNew()?1:0});if(!this.dashboard.isNew()){$("body").attr("style","");$("body").attr("class",this.model.get("slug"));this.save_background()}}},save_background:_.debounce(function(){this.dashboard.save({background_label:this.model.get("label")})},
1E3)}),E=z.extend({events:{"click div.background":"set_background",'change input[type="file"]':"fileinput_changed","click .upgrade":"please_upgrade"},initialize:function(){z.prototype.initialize.apply(this,arguments);this.listenTo(this.model,"upload_start",this.upload_start);this.listenTo(this.model,"progress",this.show_progress);this.listenTo(this.model,"uploaded",this.uploaded);this.listenTo(this.model,"error",this.show_error)},render:function(){z.prototype.render.apply(this,arguments);this.uploader();
D.bb.account.get_background_url()&&this.$placeholder.remove();return this},upload_start:function(){this.$placeholder.remove();this.$upload_bar.css({display:"block",height:"0%"});this.$upload_percent.html("0%");this.$thumbnail.css("background-image","none");$.browser.msie&&this.$loader.show();this.$cloned.appendTo(this.$(".file"));this.$fileinput.remove();this.$fileinput=this.$cloned},show_progress:function(a){if(a.lengthComputable){a=parseInt(a.loaded*100/a.total)+"%";this.$upload_bar.css("height",
a);this.$upload_percent.html(a)}},uploader:function(){this.$thumbnail=this.$(".background");this.$fileinput=this.$('input[type="file"]');this.$label=this.$("label");this.$placeholder=this.$(".placeholder");this.$loader=this.$(".loading");var a=D.bb.account.get_background_thumbnail();a&&this.$thumbnail.css("background-image",'url("'+a+'")');this.$upload_bar=this.$(".upload-bar");this.$upload_percent=this.$(".upload-percent")},uploaded:function(){var a=D.bb.account.get_background_thumbnail(),b=new Image;
b.onload=_.bind(function(){this.$thumbnail.css("background-image","none");this.$upload_bar.fadeOut(function(){$(this).css("height","0%")});this.$upload_percent.html("");this.$placeholder.remove();$.browser.msie&&this.$loader.hide();a&&this.$thumbnail.css("background-image",'url("'+a+'")');this.$label.text("CHANGE")},this);if(a)b.src=a;(b=D.bb.account.get_background_url())&&(this.dashboard.isNew()&&$("body").hasClass("custom"))&&$("body").attr("style",'background-image: url("'+b+'")');b&&(!this.dashboard.isNew()&&
this.$("a").hasClass("selected"))&&$("body").attr("style",'background-image: url("'+b+'")');if(this.select_on_upload){this.set_background();this.select_on_upload=false}},show_error:function(a){if(a&&a.errors){a=new B(a);this.$error=a.$el;a.parent=this;this.$error.appendTo(this.$el).fadeIn();(a=D.bb.account.get_background_thumbnail())&&this.$thumbnail.css("background-image",'url("'+a+'")')}},set_background:function(){var a=this.dashboard.get("background_label");if(this.model.get("label")!==a)if(a=
D.bb.account.get_background_url(this.dashboard.get("owner"))){z.prototype.set_background.apply(this,arguments);this.$placeholder.remove();this.dashboard.isNew()||a&&$("body").attr("style",'background-image: url("'+a+'")')}else{this.select_on_upload=true;this.$fileinput.trigger("click")}},fileinput_changed:function(){if(D.bb.account.get("has_trial_expired")===true)return D.bb.account.trial_expired_view.render(true);if(D.bb.account.get("has_recurly_account_expired")===true)D.bb.account.subscription_expired_view.render();
else{if(!D.bb.account.get("can_upload_background"))return this.please_upgrade();this.$cloned=this.$fileinput.clone(true);this.$error&&this.$error.fadeOut(_.bind(function(){this.$error.remove()},this));return this.model.save(this.$fileinput)}},please_upgrade:function(){Backbone.history.navigate("upgrade/custom_background",true)}}),B=D.Backbone.View.extend({template:"upload_error",events:{"click a":"remove"},initialize:function(a){this.render(a)},render:function(a){this.setElement($.tmpl(this.template,
a));return this},remove:function(a){a.preventDefault();a.stopImmediatePropagation();this.parent.$upload_bar.css("height","0%");this.parent.$upload_percent.empty();this.$el.fadeOut(function(){$(this).remove()})}}),F=new (D.Backbone.Collection.extend({model:w,comparator:function(a){return a.get("layout")}})),t=D.Backbone.View.extend({template:"dashboard_tvmode_reel",events:{"click .include:not(.active)":"include_in_reel","click .exclude:not(.active)":"exclude_from_reel"},initialize:function(a){this.model=
a||D.bb.dashboards.current;return this},render:function(){this.setElement($.tmpl(this.template,this.model.toJSON()));return this},toggle_include:function(a,b){if(!D.bb.account.has_tvmode_carousel())return this.show_upgrade();a.addClass("active").siblings().removeClass("active");this.model.save({in_carousel:b},{error:function(){a.removeClass("active").siblings().addClass("active")}})},show_upgrade:function(){Backbone.history.navigate("upgrade/tvmode_reel",true)},include_in_reel:function(a){a&&a.preventDefault();
this.toggle_include($(a.target),true)},exclude_from_reel:function(a){a&&a.preventDefault();this.toggle_include($(a.target),false)}});_.extend(Ducksboard.Backbone,{dashboards:o,dashboard_kinds:j,dashboard_models:{"default":e,zendesk:f,twilio:k},wizard_dashboard_create_views:{analytics:l,github:v,salesforce:u,twilio:n,twitter:x,zendesk:g},backgrounds:F,Background:w,Dashboard:e,DashboardKind:a})})();
(function(){var a={template:null,events:{"click .close":"back"},template_data:function(){return{has_recurly_account:D.bb.account.get("has_recurly_account")}},render:function(a){this.setElement($.tmpl(this.template,this.template_data(a)));D.u.super_modal(this);a=this.template.replace(/_/g," ");mixpanel.track("upselling modal",{modal:a});$.post("/upsell",{modal:a});return this},back:function(a){a.preventDefault();history.back()}},j=D.Backbone.View.extend(a).extend({template:"directory_group_upgrade",
back:function(){}}),e=D.Backbone.View.extend(a).extend({template:"tvmode_upgrade",back:function(){}}),d=D.Backbone.View.extend(a).extend({template:"timespans_upgrade"}),g=D.Backbone.View.extend(a).extend({template:"alerts_upgrade"}),b=D.Backbone.View.extend(a).extend({template:"background_upgrade"}),f=D.Backbone.View.extend(a).extend({template:"tvmode_reel_upgrade"}),h=D.Backbone.View.extend(a).extend({template:"widget_count_upgrade",template_data:function(a){return _.extend({has_recurly_account:D.bb.account.get("has_recurly_account"),
upgrade_possible:true},a)},back:function(){}}),o=D.Backbone.View.extend(a).extend({template:"custom_widget_count_upgrade",template_data:function(a){return _.extend({has_recurly_account:D.bb.account.get("has_recurly_account"),upgrade_possible:true},a)},back:function(){}}),a=D.Backbone.View.extend(a).extend({template:"dashboard_upgrade",template_data:function(){var a=_.max(D.bb.plans.map(function(a){return a.get("features").create_dashboard})),a=D.bb.account.plan.get("features").create_dashboard<a;
return _.extend({has_recurly_account:D.bb.account.get("has_recurly_account"),num_dashboards:D.bb.account.plan.get("num_dashboards"),upgrade_possible:a})},back:function(){}}),j={service:new j,tvmode:new e,timespans:new d,alerts:new g,custom_background:new b,tvmode_reel:new f,widget_count:new h,custom_widget_count:new o,dashboard_count:new a};Ducksboard.bb.upgrade=j})();
(function(a,j,e){var d=function(a,d){this.size=d;this.dashboard=a||D.bb.dashboards.current;this.$dashboard=this.dashboard.view.$el;this.gridster=this.dashboard.view.gridster;this.dashboard_kind=this.dashboard.kind.id;this.gridster_conf=D.u.constants.gridster[this.dashboard_kind][this.size];this.dimensions=this.gridster_conf.widget_base_dimensions;this.margins=this.gridster_conf.widget_margins;this.stopped=true;this.user_stopped=this.is_animated=false;this.speed=13E3;this.gridster.disable();this.init()};
_.extend(d.prototype,{init:function(){$("body").css("overflow","hidden");this.space=this.get_free_space();this.$widgets_to_resize=$([]);this.final_positions=[];this.final_slidemap=[];this.prev_largemap=[];var a=this.space.cols_per_window,d=this.space.rows_per_window;this.backup=$.extend(true,[],this.gridster.gridmap);this.most_right_col=this.gridster.get_right_most_occupied_cell().col;this.most_bottom_row=this.gridster.get_bottom_most_occupied_cell().row;this.slides_x=Math.ceil(this.most_right_col/
a);this.slides_y=Math.ceil(this.most_bottom_row/d);this.n_slides=this.slides_x*this.slides_y;this.build_slidemap();this.current=0;return this},set_background:function(){this.orig_dashboard_classes=this.$dashboard.attr("class");this.dashboard.view.set_background(this.$dashboard)},unset_background:function(){this.$dashboard.attr("class",this.orig_dashboard_classes)},center:function(){var b=this.space.diff_w,d=this.space.diff_h;if(this.slides_x==1&&this.slides_y==1&&this.slidemap.length<=1){b=$(a).width()-
this.space.widget_width*this.most_right_col;d=$(a).height()-this.space.widget_height*this.most_bottom_row}this.gridster.$el.css({"margin-left":Math.max(b/2,0),"margin-top":Math.max(d/2,0)})},preview:function(){$(".tvmode-widgets-nav",this.gridster.$wrapper).remove();if(!(this.max_slide<=1)){for(var a="<ol>",d=0;d<this.max_slide;d++)a=a+('<li data-slide="'+d+'">'+d+"</li>");this.$preview=$("<div />",{"class":"tvmode-widgets-nav",style:"opacity: 0;",html:a+"</ol>"}).appendTo(this.gridster.$wrapper);
this.$preview.find("li").first().addClass("active")}},show_preview:function(){if(this.$preview){D.d.modes.tv.close_notice();this.$preview.transition({opacity:1},600)}},hide_preview:function(a){if(this.$preview){this.$preview.transition({opacity:0},600,a?_.bind(this.remove_preview,this):$.noop);this.$preview.find(".active").removeClass("active")}},remove_preview:function(){this.$preview&&this.$preview.remove()},toggle_play:function(){if(this.stopped){this.user_stopped=false;return this.play()}this.user_stopped=
true;return this.stop()},play:function(){this.stopped=false;clearTimeout(this.delay);this.delay=_.delay(_.bind(function(){if(!this.stopped){this.next();this.stopped||this.play()}},this),this.speed);return this},stop:function(){this.stopped=true;clearTimeout(this.delay);return this},next:function(){var a=this.current+1,d=this.max_slide-1,e=a>d?0:a,g=this.dashboard_rotation?this.dashboard_rotation.dashboards.length:0;if(a>d&&g&&g>1){this.stop();if(g===1)return this}a>d&&$(j.body).trigger("end_of_dashboard.widget_rotation");
this.go(e);return this},right:function(){if(this.current+1>this.max_slide-1){$(j.body).trigger("end_of_dashboard.widget_rotation");return this}var a=Math.min(this.max_slide-1,this.current+1);this.stop().go(a,function(){this.stopped&&!this.user_stopped&&this.current===a&&this.play()});return this},left:function(){if(this.current-1<0){$(j.body).trigger("beginning_of_dashboard.widget_rotation");return this}var a=Math.max(0,this.current-1);this.stop().go(a,function(){this.stopped&&!this.user_stopped&&
this.current===a&&this.play()});return this},go:function(a,d){var e=this.slidemap[a],g=this;if(e&&!(a>this.max_slide||a<0)){if(this.$preview){this.$preview.find(".active").removeClass("active");this.$preview.find("li").eq(a).addClass("active")}e=-((e.c1-1)*g.space.widget_width);this.is_animated=true;if(Modernizr.csstransforms3d){this.gridster.$el.transEnd("widget-rotation",function(){g.is_animated=false;d&&d.call(g)});this.gridster.$el.css(D.u.camelcase_to_hypenated(Modernizr.prefixed("transform")),
"translate3d("+e+"px, 0, 0)")}else this.gridster.$el[Modernizr.csstransitions?"transition":"animate"]({left:e},500,function(){d&&d.call(g);g.is_animated=false});this.current=a;this.highlight_current();return this}},disable:function(){$(j.body).css("overflow","auto").off("keydown.widget_rotation");this.stop();return this},highlight_current:function(){var a,d,e;a=this.current*this.space.cols_per_window+1;for(var g=a+this.space.cols_per_window-1,j=$([]);a<=g;a++)if(this.largemap[a])for(d=1;d<=this.largemap[a].length;d++)(e=
this.largemap[a][d])&&(j=j.add(e));this.gridster.$widgets.removeClass("translucid");this.gridster.$widgets.not(j).addClass("translucid");return this},enter:function(){var a=[],d=this;this.$dashboard.attr("data-display-mode",this.size);this.set_background();this.init_values={"margin-left":this.gridster.$el.css("margin-left"),"margin-top":this.gridster.$el.css("margin-top"),left:this.gridster.$el.css("left")};this.center();$.each(this.slidemap,_.bind(function(e,g){var j=g.orig,q=[j.c1,j.r1],l=g.map;
if(!g.$widgets)return true;this.slidemap[e].widgets=[];g.$widgets.each(function(j,n){var u=$(n);if($.inArray(n,a)>-1)return true;a.push(u);var v=u.data("coords").grid,w={$el:u,col:v.col,row:v.row,offset_x:v.col-q[0],offset_y:v.row-q[1],size_x:v.size_x,size_y:v.size_y},w={$el:u,col:g.c1+w.offset_x,row:g.r1+w.offset_y,orig:w},z=d.gridster.get_cells_occupied(v),E,B;$.each(z.cols,function(a,b){E=b-q[0]+1;$.each(z.rows,function(a,b){B=b-q[1]+1;l[E]?l[E][B]=u:d.slidemap[e+1]&&(d.slidemap[e+1].map[E-d.space.cols_per_window][B]=
u)})});d.slidemap[e].widgets.push(w);u.data("slide",g);var F=Math.max(1,w.row),t=d.prev_largemap[w.col]&&d.prev_largemap[w.col][F];w.col=t?t.col+t.orig.size_x:w.col;d.final_positions.push({$w:u,col:w.col,row:F,size_x:v.size_x,size_y:v.size_y});for(var t=w.col+v.size_x-1,F=F+v.size_y-1,G=w.col;G<=t;G++){d.prev_largemap[G]||(d.prev_largemap[G]=[]);for(var y=w.row;y<=F;y++)d.prev_largemap[G][y]=w}v=w.col+v.size_x-1;for(w=w.col;w<=v;w++)d.final_slidemap[w]=true})},this));this.remove_empty_cols();this.build_largemap();
this.highlight_current();this.preview();return this},exit:function(){this.$dashboard.attr("data-display-mode",null);this.unset_background();this.gridster.$widgets.each(function(a,d){var e=$(d),g=e.data("coords").grid;e.attr({"data-row":g.row,"data-col":g.col})});this.current=0;this.gridster.$el.addClass("fade-out");this.gridster.$el.transition({opacity:0,easing:"in-out"},200,_.bind(function(){this.gridster.$el.css({"margin-left":this.init_values["margin-left"],"margin-top":this.init_values["margin-top"],
transform:"translate3d(0, 0, 0)",left:this.init_values.left});this.gridster.$el.removeClass("fade-out");this.gridster.$el.transition({opacity:1,easing:"in-out"},200)},this));this.hide_preview(true);return this},build_slidemap:function(){var a=[],d=0,e,g,j,q,l,k=0,n=this.space.rows_per_window-1,x=this.space.cols_per_window-1,v=[];for(e=this.space.cols_per_window;e>=1;e--){v[e]=[];for(g=this.space.rows_per_window;g>=1;g--)v[e][g]=false}var w=0;for(j=0;j<=this.slides_y;j++)for(g=0;g<=this.slides_x;g++){k=
d*this.space.cols_per_window+1;q=g*this.space.cols_per_window+1;l=j*this.space.rows_per_window+1;e=this.gridster.widgets_in_range(q,l,q+x,l+n);if(!(e===false||e.length===0)){d=d+1;a.push({c1:k,c2:k+x,r1:1,r2:1+n,n:d,orig:{c1:q,c2:q+x,r1:l,r2:l+n},map:v,$widgets:e});w=w+this.space.cols_per_window}}this.slidemap=a;this.gridster.generate_stylesheet({cols:w,namespace:this.gridster_conf.namespace,widget_base_dimensions:this.dimensions,widget_margins:this.margins});return this},assign_widget_to_largemap_cell:function(a,
d,e){for(c=d[0];c<=d[1];c++){this.largemap[c]||(this.largemap[c]=[]);for(r=e[0];r<=e[1];r++)this.largemap[c][r]=a}},unassign_widget_from_largemap_cell:function(a){if(!this.largemap)return this;var d,h,g=this.largemap.length,j=this.largemap[1].length;for(d=0;d<=g;d++)if(this.largemap[d])for(h=1;h<=j;h++)this.largemap[d][h]&&this.largemap[d][h].is(a)&&(this.largemap[d][h]=e)},build_largemap:function(){this.largemap=[];var a,d,e,g,j,q,l,k,n;this.gridster.$widgets.each(_.bind(function(k,n){a=$(n);d=a.data("coords").grid;
e=a.data("tvmode_coords");g=e.col;j=e.col+d.size_x-1;q=e.row;l=e.row+d.size_y-1;this.assign_widget_to_largemap_cell(a,[g,j],[q,l])},this));for(k=1;k<this.largemap.length;k++)for(n=1;n<=this.largemap[k].length;n++)if(this.largemap[k]&&this.largemap[k][n])break;else this.raise_widgets_below(k,n);this.max_slide=Math.ceil((this.largemap.length-1)/this.space.cols_per_window);return this},raise_widgets_below:function(a,d){for(var e=this.largemap[a],g=e.length,j=d;j<g;j++){var q=e[j];q&&this.move_widget_up(q,
a,d)}return this},move_widget_up:function(a,d,e){var g=a.data("coords").grid,j=a.data("tvmode_coords"),q=[],l;if(g.size_x>1)d=j.col;for(var k=d+g.size_x-1,n=e;n>=1;n--){l=true;for(e=d;e<=k;e++)if(!this.largemap[e]||this.largemap[e]&&this.largemap[e][n])l=false;l&&q.push(n)}if(!q[0])return this;a.attr({"data-row":q[0]});this.unassign_widget_from_largemap_cell(a);this.assign_widget_to_largemap_cell(a,[j.col,j.col+g.size_x-1],[q[0],q[0]+g.size_y-1]);return this},remove_empty_cols:function(){for(var a=
this.final_slidemap.length-1,d=[],e=0,g,j=1;j<=a;j++){this.final_slidemap[j]||(e=e+1);d[j]=e}$.each(this.final_positions,function(a,b){g=b.col-d[b.col];b.$w.attr({"data-col":g,"data-row":b.row});b.$w.data("tvmode_coords",{col:g,row:b.row})});a=_.max(d,function(a){return a});a=Math.ceil(a/this.space.cols_per_window);this.max_slide=this.slidemap.length-a;return this},get_free_space:function(){var b={cols:0,rows:0},d=$(a).width(),e=$(a).height(),g=this.dimensions[0]+2*this.margins[0],j=this.dimensions[1]+
2*this.margins[1];b.widget_width=g;b.widget_height=j;b.cols_per_window=Math.max(0,Math.floor(d/g),this.gridster_conf.min_visible_cols||0);b.rows_per_window=Math.max(0,Math.floor(e/j),this.gridster_conf.min_visible_rows||0);var q=(this.gridster_conf.min_visible_cols||0)*g,l=(this.gridster_conf.min_visible_rows||0)*j;b.diff_w=d-q;b.diff_h=e-l;if(q<d&&b.diff_w>=g){b.cols=Math.floor(b.diff_w/g);b.diff_w=b.diff_w-b.cols*g}if(l<e&&b.diff_h>=j){b.rows=Math.floor(b.diff_h/j);b.diff_h=b.diff_h-b.rows*j}b.diff_h=
Math.max(0,b.diff_h);b.diff_w=Math.max(0,b.diff_w);b.widgets_w=q+b.cols*g;b.widgets_h=l+b.rows*j;return b}});var g=function(a){this.size=a;this.dashboards=D.bb.dashboards.in_tvmode_dashboards();if(this.not_in_reel=this.dashboards.indexOf(D.bb.dashboards.current)===-1)this.dashboards=[D.bb.dashboards.current];this.current={dashboard:D.bb.dashboards.current,widget_rot:null};this.$container=this.current.dashboard.view.$el.parent();this.initial_index=this.index=this.dashboards.indexOf(this.current.dashboard);
this.initial_offsets=[];this.d_transit_enter=$.Deferred();this.d_transit_exit=$.Deferred();this.init()};g.widget_rot_ins=[];_.extend(g.prototype,{init:function(){this.bind_events();this.preview()},bind_events:function(){var a={32:"toggle_play",37:"left",39:"right"};this.unbind_events();$(j.body).on({"keydown.widget_rotation":_.bind(function(d){if(!(this.current.widget_rot.max_slide<1)){var e=a[d.keyCode];if(e){d.preventDefault();this.current.widget_rot[e]()}}},this),"beginning_of_dashboard.widget_rotation":_.bind(function(a){a.stopImmediatePropagation();
this.prev()},this),"end_of_dashboard.widget_rotation":_.bind(function(a){a.stopImmediatePropagation();this.next()},this)});return this},unbind_events:function(){$(j.body).off(".widget_rotation");return this},set_dashboard_position:function(b,d){var e=$(a).width();b.addClass("no-anim").css("left","");this.index!==d&&(Modernizr.csstransforms3d?b.css("transform","translate3d("+e+"px, 0, 0)"):b.css("left",e+"px"));b.removeClass("no-anim");return this},unset_dashboards_position:function(){_.each(this.dashboards,
_.bind(function(a,d){a.view.$el.css("left",this.initial_offsets[d]);a.view.$el.css("transform","translate3d(0, 0, 0)")},this));return this},start_only_widget_rotation:function(){var a=new Ducksboard.WidgetRotation(this.current.dashboard,this.size);a.dashboard_rotation=this;a.enter().play()},enter:function(){this.initial_offsets=[];_.each(this.dashboards,_.bind(function(a,d){var e=d===this.index,j=a.view.$el;j.show();this.initial_offsets[d]=j.css("left");!e&&j.hide();this.set_dashboard_position(j,
d);!e&&j.show();j=new Ducksboard.WidgetRotation(a,this.size);j.dashboard_rotation=this;j.enter();a.view.gridster.$widgets.not(".transparent").find(".widget").each($.proxy(function(a,b){var d=$(b).tmplItem().model;if(e){this.d_transit_enter.resolve();d&&d.reload_slots(null,0,this.d_transit_enter.promise())}else{d.slot_attrs=d.extract_slot_attrs();d.create_slots(null,false);d.slots.each(function(a){a.view.render().$el.css({opacity:1});a.start()})}},this));if(e){j.play().show_preview();this.current.widget_rot=
j}g.widget_rot_ins.push(j)},this));this.go(this.index,true);return this},exit:function(){this.$container.css({width:"",left:""});_.each(g.widget_rot_ins,_.bind(function(a,d){var e=d===this.initial_index;e||a.$dashboard.hide();a.remove_preview();a.exit().disable();a.dashboard.view.gridster.$widgets.find(".widget").each($.proxy(function(a,b){var d=$(b).tmplItem().model;if(e){this.d_transit_exit.resolve();d&&d.reload_slots(null,20,this.d_transit_exit.promise())}else d&&d.delete_slots(0)},this));a.dashboard.view.gridster.$widgets.removeClass("transparent")},
this));this.$container.attr("style","");this.unset_dashboards_position();this.hide_preview(true);g.widget_rot_ins=[];this.unbind_events();return this},go:function(b,d){if(!this.is_animated){var e=$(a).width(),j=this,u=this.current.widget_rot,q=this.current.dashboard;u&&u.stop();this.current.dashboard=this.dashboards[b];this.current.widget_rot=g.widget_rot_ins[b];this.index=b;var l=this.current.dashboard.view.$el,k=q.view.$el.is(l)?$():q.view.$el;if(this.$preview){this.$preview.find(".active").removeClass("active");
this.$preview.find("li").eq(b).addClass("active")}var n=-e+"px",x=e+"px";if(d)if(Modernizr.csstransforms3d){l.addClass("no-anim").css("transform","translate3d(0, 0, 0)");k.addClass("no-anim").css("transform","translate3d("+x+", 0, 0)");_.defer(function(){k.add(l).removeClass("no-anim")})}else{l.css("left",0);k.css(x)}else{this.is_animated=true;l.add(k).removeClass("no-anim");if(Modernizr.csstransforms3d){l.transEnd("dashboard-rotation-"+b,function(){j.is_animated=false;u&&u.go(0);k.addClass("no-anim");
_.defer(function(){k.css("transform","translate3d("+x+", 0, 0)")})});_.defer(function(){l.css("transform","translate3d(0, 0, 0)");k.css("transform","translate3d("+n+", 0, 0)")})}else{q=Modernizr.csstransitions?"transition":"animate";l[q]({left:0},700,_.bind(function(){u&&u.go(0);j.is_animated=false},this));k[q]({left:n},700,function(){k.css("left",x)})}}this.show_preview();this.$container.css("width",e);this.current.dashboard.view.$el.fadeIn();this.current.widget_rot.play().show_preview();return this}},
next:function(){var a=this.index+1;a>=this.dashboards.length&&(a=0);this.current.widget_rot.stop();this.go(a);return this},prev:function(){var a=this.index-1;a<0&&(a=this.dashboards.length-1);this.current.widget_rot.stop();this.go(a);return this},preview:function(){$(".tvmode-dashboards-nav").remove();if(!(this.dashboards.length<=1)){var a="<ol>";_.each(this.dashboards,function(d){a=a+("<li>"+d.get("label")+"</li>")});a=a+"</ol>";this.$preview=$("<div />",{"class":"tvmode-dashboards-nav",style:"opacity: 0;",
html:a}).insertAfter(this.$container);this.$preview.find("li").first().addClass("active")}},show_preview:function(){if(this.$preview){clearTimeout(this.preview_delay);if(this.preview_visible){this.preview_visible=true;this.preview_delay=_.delay(_.bind(this.hide_preview,this),1E3)}else{D.d.modes.tv.close_notice();this.preview_visible=true;this.$preview.transition({opacity:1},"slow",_.bind(function(){this.preview_delay=_.delay(_.bind(this.hide_preview,this),1E3)},this))}}},hide_preview:function(a){if(this.$preview){this.preview_visible=
false;this.$preview.transition({opacity:0},"slow",function(){a===true&&$(this).remove()});this.$preview.find(".active").removeClass("active")}}});_.extend(Ducksboard,{WidgetRotation:d,wr:d,DashboardRotation:g,dr:g})})(window,document);
(function(){var a=function(){};_.extend(a.prototype,{id:void 0,enter:function(){},exit:function(){}});a.extend=Backbone.Model.extend;var j=new (a.extend({id:"pc",enter:function(){$("body > menu > ul").transition({opacity:1},650,function(){D.bb.dashboards.current.view.adjust_preferences_bar()});!D.bb.account.get("readonly")&&D.bb.dashboards.current.kind.get("editable")&&D.bb.dashboards.current.view.gridster.enable();D.d.interactive=true},exit:function(){}})),a=new (a.extend({backup:{dashboard_width:void 0},
close_notice:function(){this.$notice&&this.$notice.transition({opacity:0,top:-50},"slow",function(){$(this).remove()})},screen_size:function(){var a;switch(true){case Modernizr.mq("(min-device-height: 1080px)"):a=1080;break;case Modernizr.mq("(min-device-height: 720px)"):a=720;break;default:a=false}return a},enter:function(a){var d=this;this.size=this.screen_size();if(!this.size)throw"your screen is too small for tv mode";this.id=_.sprintf("tv%d",this.size);$("body > menu").css({overflow:"hidden"});
$("body").addClass(this.id).addClass("tvmode");this.rotation=(new Ducksboard.DashboardRotation(this.id)).enter();!$.browser.mozilla&&$(document.body).css({overflow:"hidden"});if(!a.hide_notice){d.rotation.show_preview();d.$notice=$.tmpl("tvmode_notice",{size:d.id}).appendTo("body");d.$notice.transition({opacity:1,top:0},"slow",function(){_.delay(function(){d.close_notice()},1E3)})}$("body > menu > ul").transition({opacity:0},650,function(){d.rotation.d_transit_enter.resolve();$(document.body).css({overflow:"hidden"})});
D.d.interactive=false;D.bb.account.get("readonly")||!D.bb.account.get("no_branding")&&!D.bb.account.get("has_used_tvmode")&&$.get("/accounts/tvmode/").success(function(a){D.bb.account.set(a)}).error(function(){var a=_.sprintf("error adding tvmode_used tag to %s",D.bb.account.get("email"));Raven.captureMessage(a)})},exit:function(a){var d=this;this.close_notice();$("body > menu > ul").transition({opacity:1},650,_.bind(function(){$("body").css({overflow:"visible"});$("body > menu").css({overflow:"visible"});
d.rotation.d_transit_exit.resolve()},this));this.rotation.exit();$("body").removeClass(this.id).removeClass("tvmode");a.user_triggered&&$(document.body).trigger("exits.tvmode")}})),j=_.extend({interactive:true,modes:{pc:j,tv:a},current:j,_switch_to:function(a,d){d||(d={});if(!_.include(_.values(this.modes),a))throw"not a valid mode";if(a!==this.current){this.current.exit(d);this.current=a;a.enter(d)}}});j.switch_to=_.debounce(j._switch_to,650,true);_.extend(function(a){this.size=a;this.gridster=D.bb.dashboards.current.view.gridster;
this.dashboard_kind=D.bb.dashboards.current.kind.id;this.gridster_conf=D.u.constants.gridster[this.dashboard_kind][a];this.dimensions=this.gridster_conf.widget_base_dimensions;this.margins=this.gridster_conf.widget_margins;this.stopped=true;this.is_animated=false;this.speed=15E3;this.init()}.prototype,{init:function(){$("body").css("overflow","hidden");this.space=this.get_free_space();this.$widgets_to_resize=$([]);this.final_positions=[];this.final_slidemap=[];this.prev_largemap=[];var a=this.space.cols_per_window,
d=this.space.rows_per_window;this.backup=$.extend(true,[],this.gridster.gridmap);this.most_right_col=this.gridster.get_right_most_occupied_cell().col;this.most_bottom_row=this.gridster.get_bottom_most_occupied_cell().row;this.slides_x=Math.ceil(this.most_right_col/a);this.slides_y=Math.ceil(this.most_bottom_row/d);this.n_slides=this.slides_x*this.slides_y;this.build_slidemap();this.events();return this},events:function(){var a={32:"toggle_play",37:"left",39:"right"};this.current=0;$(document.body).on("keydown.widget_rotation",
_.bind(function(d){if(!(this.max_slide<1)){var g=a[d.keyCode];if(g){d.preventDefault();this[g]()}}},this));return this},center:function(){var a=this.space.diff_w,d=this.space.diff_h;if(this.slides_x==1&&this.slides_y==1&&this.slidemap.length<=1){a=$(window).width()-this.space.widget_width*this.most_right_col;d=$(window).height()-this.space.widget_height*this.most_bottom_row}this.gridster.$el.css({"margin-left":Math.max(a/2,0),"margin-top":Math.max(d/2,0)})},preview:function(){$(".tvmode-nav-preview").remove();
if(!(this.max_slide<=1)){for(var a="<ol>",d=0;d<this.max_slide;d++)a=a+('<li data-slide="'+d+'">'+d+"</li>");this.$preview=$("<div />",{"class":"tvmode-nav-preview",style:"opacity: 0;",html:a+"</ol>"}).appendTo(this.gridster.$wrapper);this.$preview.find("li").first().addClass("active")}},show_preview:function(){if(this.$preview){D.d.modes.tv.close_notice();this.preview_visible&&clearTimeout(this.preview_delay);var a=function(){this.preview_delay=setTimeout(_.bind(function(){this.preview_visible=false;
this.hide_preview()},this),1E3)};this.preview_visible=true;Modernizr.csstransitions?this.$preview.transEnd("tvmode-preview",_.bind(a,this)):a.call(this);this.$preview.css("opacity",1)}},hide_preview:function(a){if(this.$preview){this.$preview.transEnd("tvmode-preview",_.bind(function(){a&&$(this.$preview).remove()},this));this.$preview.css("opacity",0);this.$preview.find(".active").removeClass("active")}},toggle_play:function(){return this.stopped?this.play():this.stop()},play:function(){this.stopped=
false;clearTimeout(this.delay);this.delay=setTimeout(_.bind(function(){if(!this.stopped){this.next();this.stopped||this.play()}},this),this.speed);return this},stop:function(){this.stopped=true;clearTimeout(this.delay);return this},next:function(){var a=this.current+1,d=this.max_slide-1,g=a>d?0:a;a>d&&$(document.body).trigger("finished.widget_rotation");this.go(g);return this},right:function(){var a=Math.min(this.max_slide-1,this.current+1);this.stop().go(a);return this},left:function(){var a=Math.max(0,
this.current-1);this.stop().go(a);return this},go:function(a,d){var g=this.slidemap[a],b=this;if(g&&!(a>this.max_slide||a<0)){this.show_preview();if(this.$preview){this.$preview.find(".active").removeClass("active");this.$preview.find("li").eq(a).addClass("active")}g=-((g.c1-1)*b.space.widget_width);this.is_animated=true;if(Modernizr.csstransforms3d){this.gridster.$el.transEnd("tvmode-go",function(){b.is_animated=false;d&&d.call(b)});this.gridster.$el.css("transform","translate3d("+g+"px, 0, 0)")}else this.gridster.$el.transition({left:g},
500,function(){d&&d.call(b);b.is_animated=false});this.current=a;this.highlight_current();return this}},disable:function(){$(document.body).css("overflow","auto").off("keydown.widget_rotation");this.stop();return this},highlight_current:function(){var a,d,g;a=this.current*this.space.cols_per_window+1;for(var b=a+this.space.cols_per_window-1,f=$([]);a<=b;a++)if(this.largemap[a])for(d=1;d<=this.largemap[a].length;d++)(g=this.largemap[a][d])&&(f=f.add(g));this.gridster.$widgets.removeClass("translucid");
this.gridster.$widgets.not(f).addClass("translucid");return this},stretch_out:function(){var a=[],d=this;this.init_values={"margin-left":this.gridster.$el.css("margin-left"),"margin-top":this.gridster.$el.css("margin-top"),left:this.gridster.$el.css("left")};this.center();$.each(this.slidemap,_.bind(function(g,b){var f=b.orig,h=[f.c1,f.r1],j=b.map;if(!b.$widgets)return true;this.slidemap[g].widgets=[];b.$widgets.each(function(f,q){var l=$(q);if($.inArray(q,a)>-1)return true;a.push(l);var k=l.data("coords").grid,
n={$el:l,col:k.col,row:k.row,offset_x:k.col-h[0],offset_y:k.row-h[1],size_x:k.size_x,size_y:k.size_y},n={$el:l,col:b.c1+n.offset_x,row:b.r1+n.offset_y,orig:n},x=d.gridster.get_cells_occupied(k),v,w;$.each(x.cols,function(a,b){v=b-h[0]+1;$.each(x.rows,function(a,b){w=b-h[1]+1;j[v]?j[v][w]=l:d.slidemap[g+1]&&(d.slidemap[g+1].map[v-d.space.cols_per_window][w]=l)})});d.slidemap[g].widgets.push(n);l.data("slide",b);var z=Math.max(1,n.row),E=d.prev_largemap[n.col]&&d.prev_largemap[n.col][z];n.col=E?E.col+
E.orig.size_x:n.col;d.final_positions.push({$w:l,col:n.col,row:z,size_x:k.size_x,size_y:k.size_y});for(var E=n.col+k.size_x-1,z=z+k.size_y-1,B=n.col;B<=E;B++){d.prev_largemap[B]||(d.prev_largemap[B]=[]);for(var F=n.row;F<=z;F++)d.prev_largemap[B][F]=n}k=n.col+k.size_x-1;for(n=n.col;n<=k;n++)d.final_slidemap[n]=true})},this));this.remove_empty_cols();this.build_largemap();this.highlight_current();this.preview();return this},stretch_in:function(){this.gridster.$widgets.each(function(a,d){var g=$(d),
b=g.data("coords").grid;g.attr({"data-row":b.row,"data-col":b.col})});this.current=0;this.gridster.$el.addClass("fade-out");this.gridster.$el.transition({opacity:0,easing:"in-out"},200,_.bind(function(){this.gridster.$el.css({"margin-left":this.init_values["margin-left"],"margin-top":this.init_values["margin-top"],transform:"translate3d(0, 0, 0)",left:this.init_values.left});this.gridster.$el.removeClass("fade-out");this.gridster.$el.transition({opacity:1,easing:"in-out"},200)},this));this.hide_preview(true);
return this},build_slidemap:function(){var a=[],d=0,g,b,f,h,j,u=0,q=this.space.rows_per_window-1,l=this.space.cols_per_window-1,k=[];for(g=this.space.cols_per_window;g>=1;g--){k[g]=[];for(b=this.space.rows_per_window;b>=1;b--)k[g][b]=false}var n=0;for(f=0;f<=this.slides_y;f++)for(b=0;b<=this.slides_x;b++){u=d*this.space.cols_per_window+1;h=b*this.space.cols_per_window+1;j=f*this.space.rows_per_window+1;g=this.gridster.widgets_in_range(h,j,h+l,j+q);if(!(g===false||g.length===0)){d=d+1;a.push({c1:u,
c2:u+l,r1:1,r2:1+q,n:d,orig:{c1:h,c2:h+l,r1:j,r2:j+q},map:k,$widgets:g});n=n+this.space.cols_per_window}}this.slidemap=a;this.gridster.generate_stylesheet({cols:n,namespace:this.gridster_conf.namespace,widget_base_dimensions:this.dimensions,widget_margins:this.margins});return this},assign_widget_to_largemap_cell:function(a,d,g){for(c=d[0];c<=d[1];c++){this.largemap[c]||(this.largemap[c]=[]);for(r=g[0];r<=g[1];r++)this.largemap[c][r]=a}},unassign_widget_from_largemap_cell:function(a){if(!this.largemap)return this;
var d,g,b=this.largemap.length,f=this.largemap[1].length;for(d=0;d<=b;d++)if(this.largemap[d])for(g=1;g<=f;g++)this.largemap[d][g]&&this.largemap[d][g].is(a)&&(this.largemap[d][g]=void 0)},build_largemap:function(){this.largemap=[];var a,d,g,b,f,h,j,u,q;this.gridster.$widgets.each(_.bind(function(l,k){a=$(k);d=a.data("coords").grid;g=a.data("tvmode_coords");b=g.col;f=g.col+d.size_x-1;h=g.row;j=g.row+d.size_y-1;this.assign_widget_to_largemap_cell(a,[b,f],[h,j])},this));for(u=1;u<this.largemap.length;u++)for(q=
1;q<=this.largemap[u].length;q++)if(this.largemap[u]&&this.largemap[u][q])break;else this.raise_widgets_below(u,q);this.max_slide=Math.ceil((this.largemap.length-1)/this.space.cols_per_window);return this},raise_widgets_below:function(a,d){for(var g=this.largemap[a],b=g.length,f=d;f<b;f++){var h=g[f];h&&this.move_widget_up(h,a,d)}return this},move_widget_up:function(a,d,g){var b=a.data("coords").grid,f=a.data("tvmode_coords"),h=[],j;if(b.size_x>1)d=f.col;for(var u=d+b.size_x-1,q=g;q>=1;q--){j=true;
for(g=d;g<=u;g++)if(!this.largemap[g]||this.largemap[g]&&this.largemap[g][q])j=false;j&&h.push(q)}if(!h[0])return this;a.attr({"data-row":h[0]});this.unassign_widget_from_largemap_cell(a);this.assign_widget_to_largemap_cell(a,[f.col,f.col+b.size_x-1],[h[0],h[0]+b.size_y-1]);return this},remove_empty_cols:function(){for(var a=this.final_slidemap.length-1,d=[],g=0,b,f=1;f<=a;f++){this.final_slidemap[f]||(g=g+1);d[f]=g}$.each(this.final_positions,function(a,e){b=e.col-d[e.col];e.$w.attr({"data-col":b,
"data-row":e.row});e.$w.data("tvmode_coords",{col:b,row:e.row})});a=_.max(d,function(a){return a});a=Math.ceil(a/this.space.cols_per_window);this.max_slide=this.slidemap.length-a;return this},get_free_space:function(){var a={cols:0,rows:0},d=$(window).width(),g=$(window).height(),b=this.dimensions[0]+2*this.margins[0],f=this.dimensions[1]+2*this.margins[1];a.widget_width=b;a.widget_height=f;a.cols_per_window=Math.max(0,Math.floor(d/b),this.gridster_conf.min_visible_cols||0);a.rows_per_window=Math.max(0,
Math.floor(g/f),this.gridster_conf.min_visible_rows||0);var h=(this.gridster_conf.min_visible_cols||0)*b,j=(this.gridster_conf.min_visible_rows||0)*f;a.diff_w=d-h;a.diff_h=g-j;if(h<d&&a.diff_w>=b){a.cols=Math.floor(a.diff_w/b);a.diff_w=a.diff_w-a.cols*b}if(j<g&&a.diff_h>=f){a.rows=Math.floor(a.diff_h/f);a.diff_h=a.diff_h-a.rows*f}a.diff_h=Math.max(0,a.diff_h);a.diff_w=Math.max(0,a.diff_w);a.widgets_w=h+a.cols*b;a.widgets_h=j+a.rows*f;return a}});_.extend(Ducksboard,{Display:j,d:j})})();
(function(){var a=D.Backbone.View.extend({template:"preferences",events:{"click .settings":"show_settings","click .logout":"logout","click .subscription":"show_subscription","click .upgrade_now":"upgrade_now","click .signup":"show_notification","click .notification .close":"hide_notification"},template_data:function(){var a=D.bb.account.get("has_trial_account")&&!D.bb.account.get("no_branding"),e=_.extend(D.Backbone.account.toJSON(),{signup:Ducksboard.config.signup,current_is_serviceboard:D.bb.dashboards.current_is_serviceboard(),
current_is_chromeboard:D.bb.dashboards.current_is_chromeboard(),has_trial_account:a,trial_expiration_date:null});if(a){var a=moment(),d=moment(D.bb.account.get("status_change_date"));d.diff(a,"days")<=15&&_.extend(e,{trial_expiration_date:d.format("MMMM Do YYYY")})}return e},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.$el.prependTo("body");this.$notification=this.$(".notification");this.$notification_tmplitem=this.$notification.length&&this.$notification.tmplItem();
this.$list=this.$(".settings-list");this.$list.data("cleanup",_.bind(function(){this.confirm_view&&this.confirm_view.hide()},this));this.$el.fadeIn();return this},render_notification:function(){if(this.$notification.length){this.$notification_tmplitem.data=this.template_data();this.$notification_tmplitem.update()}return this},show_settings:function(a){a.preventDefault();this.$list.fadeToggle();a.originalEvent.$contextual=this.$list},logout:function(){this.confirm_view=this.$(".logout-wrap").confirm({text:"Log out?",
continue_text:"Yes",discard_text:"Stay",continue_css_class:"btn btn-action-medium btn-light",discard_css_class:"btn btn-action-medium btn-light",continue_icon:false,continue_action:function(){window.location="/accounts/logout/"}}).data("confirm_view");return false},show_subscription:function(){mixpanel.track("trial end button")},upgrade_now:function(){mixpanel.track("upgrade now button")},show_notification:function(a){this.hide_notification(a,false)},hide_notification:function(a,e){e&&a.preventDefault();
$(a.target).closest("li").transition({opacity:0},600,function(){$(this).remove();D.bb.dashboards.current.view.adjust_preferences_bar()})},remove_upgrade_now:function(){this.$(".upgrade-now-wrap").remove()}});_.extend(Ducksboard.Backbone,{preferences:new a})})();
(function(){var a=D.Backbone.Model.extend({idAttribute:"service_id",description:void 0,signup_url:void 0,button_text:void 0,create_tip:void 0,kind:void 0,kind_name:void 0,user_managed:void 0,uses_external_authentication:void 0,api_translation:[["service_id","id"],["service_username","username"],["service_kind","kind"]],defaults:{service_username:void 0,auth_user:null,auth_password:null,auth_domain:null},initialize:function(){this.item_view=new j({model:this});this.selectable=new e({model:this});this.form_view=
new D.Backbone.FormView({model:this});this.initial_form_view=new D.Backbone.FormView({model:this})},auth_url:function(a){var b=_.sprintf("/services/add/%s/",this.kind);a&&(b=_.sprintf("%s/%d/",b,this.id));return b},sync:function(a,b,d){if(_.include(["create","update"],a)){d.contentType="application/json";d.data=JSON.stringify(_.extend(this.toDucksboardJSON(),{kind:this.kind}))}return Backbone.sync.call(this,a,this,d)},parse:function(a,b){return _.extend(D.bb.Model.prototype.parse.apply(this,arguments),
{auth_user:void 0,auth_password:void 0})}}),j=D.Backbone.View.extend({template:"service_item",events:{"click .delete":"destroy","click .authorize":"authorize"},template_data:function(){var a=D.bb.account.get("has_trial_expired")===true&&D.bb.dashboards.current_is_serviceboard()===false&&D.bb.dashboards.current_is_chromeboard()===false&&D.bb.account.get("is_beta")===false,a=a||D.bb.account.get("has_recurly_account_expired")===true&&D.bb.dashboards.current_is_serviceboard()===false&&D.bb.dashboards.current_is_chromeboard()===
false;return _.extend(this.model.toJSON(),{can_relink:!a,kind:this.model.kind,kind_name:this.model.kind_name,uses_external_authentication:this.model.uses_external_authentication})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));return this},destroy:function(){this.confirm_view=this.$el.confirm({text:_.sprintf("Unlinking this %s account will erase all related widgets and data. Sure you want to unlink it?",_.capitalize(this.model.kind_name)),continue_text:"Unlink",discard_text:"Keep",
continue_action:_.bind(this._destroy,this),continue_icon:false}).data("confirm_view")},_destroy:function(){_.map(D.bb.dashboards.get_service_widgets(this.model.id),function(a){a.view.remove_from_frontend()});this.model.destroy({wait:true}).complete(_.bind(function(){this.confirm_view.hide();this.$el.fadeOut(_.bind(function(){this.remove()},this))},this));this.model.collection.remove(this.model)},authorize:function(){if(this.model.uses_external_authentication)return window.open(this.model.auth_url(true));
this.model.trigger("relink",this.model)}}),e=D.Backbone.View.extend({template:"service_selectable",render:function(a,b){var d=D.u.break_space(this.model.get("service_username")),d=_.extend(this.model.toJSON(),{selected:!!a,username_multiline:d,service:this.model.get("service_kind"),in_dashboard_creation:!!b});this.setElement($.tmpl(this.template,d,{model:this.model}));return this}}),d=new (D.Backbone.Collection.extend({model:a,url:"/api/accounts/",comparator:function(a){return[a.kind,a.id]},parse:function(d){return _.map(d.data,
function(b){b=D.u.from_api(a.prototype.api_translation,b);return new D.Backbone.service_kinds[b.service_kind](b)},this)}}));_.extend(Ducksboard.Backbone,{Service:a,services:d,service_kinds:{}})})();
(function(){var a={condition_params:{greater_than:{limit:{template:"input_text",cast:parseFloat}},lower_than:{limit:{template:"input_text",cast:parseFloat}},equals_to:{limit:{template:"input_text",cast:parseFloat}},value_changes:{},status_equals:{limit:{template:"select",template_data:{options:[{value:"0",display_name:"OK"},{value:"1",display_name:"ERROR"},{value:"2",display_name:"WARNING"},{value:"3",display_name:"UNKNOWN"}]}}},message_contains:{value:{template:"input_text"}}},action_params:{send_mail:{to_addr:{template:"input_text"}},
webhook:{url:{template:"input_text",template_data:{placeholder:"Webhook url"}}}}},j=D.Backbone.Model.extend({idAttribute:"id",initialize:function(a,e){this.collection=e.collection;this.item_view=new g({model:this});this.form_view=new d({model:this})}}),e=D.Backbone.Collection.extend({model:j,initialize:function(a,d){this.widget=d.widget},url:function(){return _.sprintf("%s/alerts/",this.widget.url())},parse:function(a){return a.data}}),d=D.Backbone.View.extend({template:"widget_notification_form",
events:{"change .field-layout":"slot_select","change .field-condition_kind":"condition_select","change .field-action_kind":"action_select","submit form":"save_notification","click .back":"close"},initialize:function(a){this.model=a.model;this.condition_kinds=_.groupBy(D.config.condition_kinds,function(a){return a.slot_type})},template_data:function(){return _.extend(this.model.toJSON(),{slots:this.model.collection.widget.slots.filter(function(a){return this.condition_kinds[a.get_slot_type()]},this).map(function(a){s=
a.toJSON();return _.isString(s.subtitle)&&$.trim(s.subtitle).length?s:_.extend(s,{subtitle:a.get_slot_type()})}),action_kinds:D.config.action_kinds,edition:!this.model.isNew()})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.$field_layout=this.$(".field-layout");this.$field_condition_kind=this.$(".field-condition_kind");this.$field_action_kind=this.$(".field-action_kind");this.$condition_params=this.$(".condition-params");this.$action_params=this.$(".action-params");
this.$server_error=this.$(".server-error");this.slot_select();this.action_select();return this},slot_select:function(){var a=this.$field_layout.val(),d=this.model.collection.widget.slots.get(a).get_slot_type(),a=this.$field_condition_kind,e=this;a.find("option").remove();d=$.map(this.condition_kinds[d],function(a){a=$('<option value="'+a.kind+'">'+a.display_name+"</option>");e.model.get("condition_kind")==a.val()&&a.attr("selected","selected");return a[0]});$(d).appendTo(a);a.trigger("liszt:updated");
this.condition_select()},condition_select:function(){var a=this.$field_condition_kind.val();this.change_params("condition_params",a,this.$condition_params)},action_select:function(){var a=this.$field_action_kind.val();this.change_params("action_params",a,this.$action_params)},change_params:function(b,d,e){e.html("");_.each(a[b][d],function(a,g){action=$.tmpl(a.template,_.extend({name:g,value:this.get_param_value(b,d,g)},_.isFunction(a.template_data)?a.template_data():a.template_data));e.append(action)},
this)},cb_appended:function(){this.$("input[placeholder], textarea[placeholder]").placeholder();this.$("select").chosen({disable_search_threshold:10})},params_field_values:function(b,d){var e={};_.each(a[b][d],function(a,b){e[b]=this.$(".field-"+b).val()},this);return e},field_values:function(){var a=this.$field_condition_kind.val(),d=this.$field_action_kind.val();return{layout:this.$field_layout.val(),condition_kind:a,condition_params:this.params_field_values("condition_params",a),action_kind:d,
action_params:this.params_field_values("action_params",d)}},set_from_fields:function(){var a=_.map(this.field_values(),function(a,b){return this.model.set(b,a)},this);return _.all(a,_.identity)},get_param_value:function(b,d,e){if(!this.model.isNew()){var g=this.model.get(b)[e];if(g)return(b=a[b][d][e].cast)?b(g):g}},save_notification:function(a){a.preventDefault();this.clean_server_error();if(this.set_from_fields()){a=$(a.currentTarget).find("button");this.sending=D.u.sending(a,"sending");if(!this.sending.blocked){var d=
this.model.isNew();this.model.save({},{complete:this.sending.complete,success:_.bind(function(a){var b=d?"added":"updated";D.bb.account.refresh_alert_count().done(_.bind(function(){this.close();this.model.collection.trigger(b,a)},this))},this),error:_.bind(function(a,b){b=JSON.parse(b.responseText);errors=b.errors;_.isString(errors)?this.show_server_error(b.code,errors):this.show_errors(b.errors)},this)})}}else this.show_errors(this.errors)},show_server_error:function(a,d){a===101&&(d="This alert already exists.");
this.$server_error.append(_.sprintf("<span>%s</span>",d)).fadeIn()},clean_server_error:function(){this.$server_error.hide().empty()},close:function(a){a&&a.preventDefault();this.$el.fadeOut(function(){$(this).data("related_view").fadeIn();$(this).remove()})},remove:function(){this.$("select").unchosen();D.Backbone.View.prototype.remove.apply(this)}}),g=D.Backbone.View.extend({template:"widget_notification_item",events:{"click .button-edit":"edit_notification","click .button-delete":"show_confirmation"},
initialize:function(a){this.model=a.model},template_data:function(){var a=_.find(D.config.condition_kinds,_.bind(function(a){return a.kind===this.model.get("condition_kind")},this)),d=_.find(D.config.action_kinds,_.bind(function(a){return a.kind===this.model.get("action_kind")},this)),e=this.model.collection.widget.slots.get(this.model.get("layout")),g=this.get_params_values("condition_params",a.kind),a=[e.get("subtitle")||e.get_slot_type(),a.display_name].concat(g).join(" "),e=this.get_params_values("action_params",
d.kind).join(" ");return _.extend(this.model.toJSON(),{condition:a,action:e,action_name:d.display_name})},get_params_values:function(b,d){var e=this.model.get(b);return _.map(a[b][d],function(a,b){return a.template==="select"?_.find(a.template_data.options,function(a){return a.value===e[b]}).display_name:a.cast?a.cast(e[b]):e[b]},this)},render:function(){this.setElement($.tmpl(this.template,this.template_data()));return this},edit_notification:function(a){a.preventDefault();var d=this.$el.closest("section").find(".notifications-main-view"),
e=this.model.form_view.render().$el.hide();e.data("related_view",d);d.fadeOut(_.bind(function(){e.insertBefore(d).fadeIn();this.model.form_view.cb_appended()},this))},show_confirmation:function(a){a.preventDefault();this.confirm_view=this.$el.confirm({text:"Sure you want to delete this alert?",continue_text:"Delete",discard_text:"Keep",continue_action:_.bind(this.destroy,this)})},destroy:function(){var a=this.model,d=this.model.collection;this.model.destroy({wait:true,success:_.bind(function(){D.bb.account.refresh_alert_count().done(function(){d.trigger("removed",
a)})},this)})},remove:function(){this.confirm_view&&this.confirm_view.remove();D.Backbone.View.prototype.remove.apply(this)}});_.extend(Ducksboard.Backbone,{Notification:j,NotificationList:e})})();
(function(){var a=D.Backbone.Model.extend({initialize:function(a,d){this.slot=d.slot;this.widget=d.widget;this.view_cls=j},load_service_params:function(){return false},url:function(){return _.sprintf("/push/values/%s/",this.slot.get("label"))}}),j=D.Backbone.FormView.extend({template:"slot_data",events:{"click .button":"send_data"},template_data:function(){return _.extend(this.model.slot.toJSON(),{unit:this.model.slot.send_data_unit})},send_data:function(a){var d=D.u.sending($(a.currentTarget),"sending");
if(!d.blocked){this.set_from_fields();this.model.save({},{complete:function(){d.complete()},success:_.bind(function(){this.clear()},this),error:_.bind(function(a,b){this.show_response_errors(b)},this)})}},render:function(){D.Backbone.FormView.prototype.render.apply(this,arguments);this.$(".datepicker-wrap").timestamp_picker();this.clear();return this}}),a=D.Backbone.Model.extend({idAttribute:"layout",started:false,initial_data_type:void 0,initial_msg_id:void 0,allowed_timespans:["daily","weekly",
"monthly","quarterly","yearly"],last_value:void 0,send_data_cls:a,send_data_params:void 0,send_data_unit:void 0,csv_valid_types:["count","percentage","relative"],feedback_while_fetching:true,initialize:function(a,e){this.widget=e.widget;if(this.widget.service_kind==="custom"){this.url_view_cls=d;this.send_data=new this.send_data_cls({},{slot:this,widget:this.widget});this.send_data.params=this.send_data_params}this.on("change:label",function(){this.old_label=this.previous("label")});if(this.widget.timezone!==
D.bb.account.get("timezone"))this.extra_timezone=this.widget.timezone;this.listenTo(D.ws,"websocket:reconnection",this.start);this.listenTo(D.ws,"websocket:reconnection",this.subscribe)},in_current_dashboard:function(){var a=this.widget.dashboard;return D.d.current.id!=="pc"?true:a&&a.kind.id!=="embed"&&a!==D.bb.dashboards.current?false:true},should_start:function(){return this.started?false:this.should_subscribe()},should_subscribe:function(){if(!this.in_current_dashboard()||this.widget.isNew())return false;
if(!this.get("label"))throw Error("Tried to start slot "+this.id+" of widget "+(this.widget?this.widget.constructor.prototype.kind:"?")+" (ID "+(this.widget?this.widget.id:"?")+") but it has no label");return true},start:function(){if(this.should_start()&&D.ws.connected){this.get_initial_data();this.started=true}},bind_data_source:function(){this.listenTo(D.ws,"data:"+this.get("label"),this._update);this.listenTo(D.ws,"clean:"+this.get("label"),this.clean_data);this.subscribe()},subscribe:function(){if(this.should_subscribe()&&
D.ws.connected){D.ws.subscribe(this.get("label"));this.extra_timezone&&D.ws.timezone(this.extra_timezone)}},unsubscribe:function(a){a=a||this.old_label||this.get("label");this.stopListening();a&&D.ws.unsubscribe(a)},update:function(a){return a},display:function(){},clear_enqueued:function(){this.enqueued_update=null},display_enqueued:function(){this.update_running=false;if(this.enqueued_update){this._display(this.enqueued_update);this.clear_enqueued()}},_update:function(a){var d=this.update(a);if(this.update_running&&
d)this.enqueued_update=d;!this.update_running&&d&&this._display(d);this.set_last_value(a)},_display:function(a){this.update_running=true;this.view.remove_loading_layer();this.display(a)},clean_data:function(){},tick:function(){},get_initial_data:function(){var a=this._prepare_initial_params();this.initial_msg_id=D.ws.fetch(this.get("label"),a);this.listenTo(D.ws,"fetched:"+this.initial_msg_id,this.got_initial_data)},got_initial_data:function(a){this.stopListening(D.ws,"fetched:"+this.initial_msg_id);
delete this.initial_msg_id;this._process_initial_data(a);a=this.extra_timezone?_.sprintf("tick:%s",this.extra_timezone):"tick";this.listenTo(D.ws,a,this.tick);D.ws.connected&&this.bind_data_source()},process_initial_data:function(){},_process_initial_data:function(a){if(this.view){this.process_initial_data(a);this.view.remove_loading_layer()}},data_is_empty:function(a){return!_.any(_.pluck(a,"value"))},get_last_value:function(a){return _.isArray(a)?_.last(_.pluck(a,"value")):a.value},set_last_value:function(a){a=
this.get_last_value(a);a!==this.last_value&&this.widget.view.notify();this.last_value=a},get_data_source_kind:function(){return D.Backbone.widget_kinds[this.widget.kind].prototype.slots[this.get("layout")].data_source_kind},get_slot_type:function(){return D.Backbone.widget_kinds[this.widget.kind].prototype.slots[this.get("layout")].slot_type},get_slot_kind:function(){return D.Backbone.widget_kinds[this.widget.kind].prototype.slots[this.get("layout")].slot_kind},_prepare_initial_params:function(){var a=
this.widget.timezone.replace(" ","_"),a={label:this.get("label"),timezone:a};switch(this.initial_data_type){case "last":a=_.extend(a,{kind:"last"},this._prepare_params_last());break;case "since":a=_.extend(a,{kind:"since"},this._prepare_params_since());break;case "timespan":a=_.extend(a,{kind:"timespan"},this._prepare_params_timespan());break;default:throw Error('slot subclass must set initial_data_type to "last", "since" or "timespan"');}return a},_prepare_params_since:function(){return{seconds:this.get("since")}},
_prepare_params_last:function(){return{count:this.get("last")}},_prepare_params_timespan:function(){_.include(["daily","weekly","monthly","quarterly","yearly"],this.get("timespan"))||$.error("invalid timespan "+this.get("timespan"));return{timespan:this.get("timespan")}},is_visible:function(){return D.bb.dashboards.current&&this.widget.dashboard===D.bb.dashboards.current},is_exportable_to_csv:function(){return _.contains(this.csv_valid_types,this.get_slot_type())}}),e=D.Backbone.View.extend({template_data:function(){return _.extend(this.model.toJSON(),
{data_source_kind:this.model.get_data_source_kind()})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.$el.appendTo(this.model.widget.view.$(".inner"));return this},add_loading_layer:function(a){a||(a=this.model.widget);slot=a.slots.at(a?0:this);if(!(a.dashboard.kind.get("kind")!=="default"===true||a.service.kind==="custom"||slot.feedback_while_fetching===false)){a.view.$el.addClass("is-loading");if(!a.view.$loading){var d=$.tmpl("widget_fetching_data",{widget_id:a.id});
a.view.$loading=d;d.appendTo(a.view.$el)}}},remove_loading_layer:function(){var a=this.model.widget.view;if(a.$loading){var d=function(){a.$loading.remove();delete a.$loading};Modernizr.csstransitions?a.$loading.transEnd("fetching_data_layer",d()):d();a.$el.removeClass("is-loading")}},add_context_action:function(a,d){var e=a.originalEvent;e.ducksboard_actions||(e.ducksboard_actions=[]);e.ducksboard_actions.push(d)}}),d=D.Backbone.View.extend({template:"slot_url",url_pattern:function(){return _.sprintf("%s/v/",
D.config.push_host)},events:{"click .label":"edit","click .cancel":"cancel"},initialize:function(a){this.model=a.model;this.pull_param=a.pull_param},template_data:function(){return _.extend(this.model.toJSON(),{url_pattern:this.url_pattern,has_send_data:this.model.send_data_params})},render:function(){this.url_pattern();this.setElement($.tmpl(this.template,this.template_data()));if(this.model.send_data){this.send_data_view=new this.model.send_data.view_cls({model:this.model.send_data});this.send_data_view.render(true).$el.appendTo(this.$el.filter(".send-value"))}return this},
edit:function(a){var d=$(a.target).closest(".m-editable-url");d.find(".more").smartFadeOut();d.find(".url").smartFadeOut(function(){d.find("fieldset").smartFadeIn()})},cancel:function(a){var d=$(a.target).closest(".m-editable-url");d.find("fieldset").smartFadeOut(_.bind(function(){d.find(".field-label").val(this.model.get("label"));d.find(".url").width("").smartFadeIn();this.resize()},this))},set_from_input:function(){var a=this.$(".field-label").val(),d=this.model.get("label");a&&a!==d&&this.model.set({label:a})},
resize:function(a){a||(a=this.$(".url"));if(a.actual("width")>300){a.width(276).siblings(".more").show();a.siblings(".more").data("tooltip")||D.bb.FormView.prototype.setup_tooltip(a.parent("div"))}},remove:function(){this.send_data_view.remove();Backbone.View.prototype.remove.apply(this)}}),g=D.Backbone.Collection.extend({model:a,comparator:function(a){return a.get("layout")}});_.extend(Ducksboard.Backbone,{Slot:a,SlotView:e,SlotUrlView:d,SlotList:g,slot_kinds:{},slot_views:{},CustomDataFormView:j})})();
(function(){var a=D.Backbone.Slot.extend({initial_data_type:"last",defaults:{last:1,no_appearance:true},feedback_while_fetching:false,initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new e({model:this})},process_initial_data:function(a){(a=_.last(a))&&this.view.update_text(a)},clean_data:function(){this.view.remove()},display:function(a){this.view.update_text(a)}}),j=D.Backbone.Slot.extend({poll_id:void 0,POLL_FREQUENCY:3E5,defaults:{no_appearance:true},feedback_while_fetching:false,
initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new e({model:this})},start:function(){this.in_current_dashboard()&&this.poll_data()},add_timestamp:function(a,e){return/\?.+$/.test(a)?a+"&"+e:a+"?"+e},get_data:function(){return{timestamp:moment().unix(),value:{content:this.widget.data_source.get("content")}}},poll_data:function(){this.clear_timers();data=this.get_data();this.view.update_text(data);this.poll_id=setTimeout($.proxy(function(){this.poll_data()},
this),this.POLL_FREQUENCY)},clear_timers:function(){this.poll_id&&window.clearTimeout(this.poll_id)},unsubscribe:function(){D.Backbone.Slot.prototype.unsubscribe.apply(this,arguments);this.clear_timers()}}),e=D.Backbone.SlotView.extend({template:"slot_text",events:{"click .content a":"prevent"},update_text:function(a){this.$content=this.$(".content");this.$content.smartFadeOut(_.bind(function(){this.update_content(a.value.content);this.$content.smartFadeIn(_.bind(this.model.display_enqueued,this.model))},
this))},prevent:function(a){a.stopImmediatePropagation()},update_content:function(a){this.$content.html(D.u.bbcode(a))}});_.extend(Ducksboard.Backbone.slot_kinds,{StaticText:j,Text:a})})();
(function(){var a=D.Backbone.Slot.extend({POLL_JITTER:3E5,current_time:void 0,defaults:{no_appearance:true},feedback_while_fetching:false,initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new j({model:this});delete this.url_view},start:function(){if(this.should_start()){this.listenTo(D.ws,"current_time:"+this.get("label"),this.process_current_time);if(D.ws.connected){this.get_current_time();this.started=true}}},get_current_time:function(){var a=this.widget.data_source.get("timezone").replace(" ",
"_");D.ws.get_current_time(this.get("label"),{timezone:a})},process_current_time:function(a){this.clear_timers();this.set_current_time(moment(a[0].value));a=(60-this.current_time.seconds())*1E3;this.min_timeout_id=setTimeout(_.bind(function(){this._minute_updates()},this),a);this.sync_timeout_id=setTimeout(_.bind(function(){this.get_current_time()},this),this._sync_timeout())},set_current_time:function(a){this.current_time=a;this.view.update_time(a)},clear_timers:function(){this.sync_timeout_id&&
clearTimeout(this.sync_timeout_id);this.min_timeout_id&&clearTimeout(this.min_timeout_id);this.min_interval_id&&clearInterval(this.min_interval_id)},unsubscribe:function(a){D.Backbone.Slot.prototype.unsubscribe.apply(this,arguments);this.clear_timers();a||(a=this.get("label"));this.stopListening(D.ws,"current_time:"+a)},_minute_updates:function(){this.set_current_time(this.current_time.add("m",1));this.min_interval_id=setInterval(_.bind(function(){this.set_current_time(this.current_time.add("m",1))},
this),6E4)},_sync_timeout:function(){var a=0,d=moment(),a=d.minutes()>=30?60-d.minutes():30-d.minutes(),a=a*6E4-d.seconds()*1E3-d.milliseconds(),d=Math.random()*this.POLL_JITTER;return a+d}}),j=D.Backbone.SlotView.extend({template:"slot_current_time",render:function(){this.setElement($.tmpl(this.template,this.model.toJSON()));this.$(".city").text(this.model.widget.data_source.get("city"));var a=this.model.widget.data_source.get("time_mode")=="12"?"clock-12h":"clock-24h";this.$(".time").addClass(a);
this.$el.appendTo(this.model.widget.view.$(".inner"));return this},update_time:function(a){var d=a.format("dddd, MMMM Do YYYY");if(this.model.widget.data_source.get("time_mode")=="12")var g=a.format("h:mm"),a=a.format("A");else{g=a.format("H:mm");a=""}this.model.widget.view.$("h4").text(d);this.$(".time").text(g);this.$(".am_pm").text(a)}});_.extend(Ducksboard.Backbone.slot_kinds,{CurrentTime:a})})();
(function(){var a=D.Backbone.Slot.extend({initial_data_type:"last",defaults:{last:1},initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new j({model:this})},process_initial_data:function(a){a[0]&&this.view.render_funnel(a[0].value.funnel)},display:function(a){this.view.update_funnel(a.value.funnel,false)},clean_data:function(){this.view.remove_items()}}),j=D.Backbone.SlotView.extend({template:"slot_funnel",initialize:function(a){this.item_view=a.item_view||
e},render_funnel:function(a){this.$(".funnel").smartFadeOut(_.bind(function(){this.update_funnel(a,true)},this))},update_funnel:function(a,e){var b=this.$(".funnel");this.$rows=b.find("tbody tr");a.sort(function(a,b){return b.value>a.value?1:-1});var f=a[0].value||1;this.$rows.filter(":gt("+(a.length-1)+")").remove();_.each(a,_.bind(function(b,j){if(!(j>=this.model.widget.get("max_steps"))){var u=j===0;b.amount=D.u.format_number(b.value,2,10);b.percent=u?100:D.u.format_number(b.value*100/f);b.percent_lost=
u?null:D.u.format_number(b.percent-a[j-1].percent);e?this.add_item(b):this.update_item(j,b)}},this));this.colorify();this.fill_widget_data(a,f);(!$.support.transition||!e)&&this.unfold_bars();b.smartFadeIn(_.bind(function(){this.unfold_bars()},this))},fill_widget_data:function(a,e){var b=D.u.format_number(a[a.length-1].value*100/e,2,4);this.$(".subtitle").text(this.model.get("subtitle"));this.$(".value").html(b+"<span>%</span>")},update_item:function(a,e){var b=this.$rows.eq(a);b.length||(b=this.add_item(e));
b.find(".label").text(e.name);b.find(".amount").text(e.amount+" / "+(e.percent_lost?e.percent_lost+"%":""));b.find(".bar span").css("width",e.percent+"%");b.find(".percent").text(e.percent+"%")},add_item:function(a){var e=(new this.item_view({item:a})).render().$el;this.$(".funnel tbody").append(e);e.find(".bar span").css("width",a.percent+"%");return e.show()},remove_items:function(){this.$(".funnel tbody").empty()},colorify:function(){var a=this.model.get("color")||this.$el.css("color"),e=jQuery.Color(a).alpha(1);
this.$(".bar span").css("background-color",a);this.$(".percent").css("color",e.lightness("-=0.25"));this.$("p").css("color",a)},unfold_bars:function(){this.$(".bar span").last().transEnd("funnel",_.bind(this.model.display_enqueued,this.model));this.$(".folded").removeClass("folded")}}),e=D.Backbone.SlotView.extend({template:"slot_funnel_item",initialize:function(a){this.item=a.item},render:function(){this.setElement($.tmpl(this.template,this.item));this.$el.hide();return this}});_.extend(Ducksboard.Backbone.slot_kinds,
{Funnel:a});_.extend(Ducksboard.Backbone.slot_views,{FunnelItemView:e})})();
(function(){var a=D.Backbone.Slot.extend({initial_data_type:"last",defaults:{multiple_subtitles:true,has_title:false,last:1},initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new e({model:this});if(this.widget.service_kind==="custom")this.url_view_cls=l},process_initial_data:function(a){a[0]&&this.view.render_board(a[0].value.board.slice(0,30))},display:function(a){this.view.render_board(a.value.board.slice(0,30))},clean_data:function(){this.view.remove_items()},
get_columns:function(){var a=this.get("total_subtitles");return this.get("has_title")?a-1:a},get_title:function(){if(this.get("has_title"))return this.get("subtitle1")},get_title_color:function(){if(this.get("has_title"))return this.get("color1")},get_headers:function(){var a=[];for(i=this.get("has_title")?2:1;i<=this.get("total_subtitles");i++)a.push(this.get("subtitle"+i));return a},get_colors:function(){var a=[];for(i=this.get("has_title")?2:1;i<=this.get("total_subtitles");i++)a.push(this.get("color"+
i));return a},is_numeric:function(a){var b=this.get("numeric_columns");return b&&_.contains(b,a)}}),j=D.Backbone.SlotView.extend({format_from:7,format_limit:5}),e=j.extend({template:"slot_leaderboard",extra_header:null,initialize:function(a){this.item_view=a.item_view||o;this.extra_header=a.extra_header||null},template_data:function(){return _.extend(this.model.toJSON(),{data_source_kind:this.model.get_data_source_kind(),title:this.model.get_title(),headers:this.model.get_headers(),extra_header:this.extra_header})},
render_board:function(a){var b=this.model.get_columns(),d=this.model.get_headers(),e=this.$(".board");this.cols_map=[];this.cols_map_sum=[];this.rows=a.length;e.smartFadeOut(_.bind(function(){this.remove_items();_.each(a,_.bind(function(a){for(var d=a.values.length;d<=b;d++)a.values.push("");a.values=a.values.slice(0,b-1);this.add_item(a)},this));this.calculate_lengths({name:d[0],values:d.slice(1)});this.colorify();e.smartFadeIn(_.bind(this.model.display_enqueued,this.model));this.$("tr").css("display",
"table-row")},this));this.distribute_cols()},add_item:function(a){var b=(new this.item_view({item:a})).render().$el;this.$(".board").append(b);b.show();this.calculate_lengths(a)},remove_items:function(){this.$(".board tbody").empty()},colorify:function(){this.$("h4").css("color",this.model.get_title_color());_.each(this.model.get_colors(),function(a,b){b++;this.$(_.sprintf("td:nth-child(%d)",b)).css("color",a)},this)},calculate_lengths:function(a){var b=a.name||" ",d=this.model.widget.get("width")===
1?10:20,b=Math.min(b.length,d);if(!this.cols_map[0]||b>this.cols_map[0])this.cols_map[0]=b;this.cols_map_sum[0]||(this.cols_map_sum[0]=0);this.cols_map_sum[0]=this.cols_map_sum[0]+b;_.each(a.values||[],_.bind(function(a,b){var d=b+1,e=Math.max(3,a&&a.toString().length||1);if(!this.cols_map[d]||e>this.cols_map[d])this.cols_map[d]=Math.min(e,7);this.cols_map_sum[d]||(this.cols_map_sum[d]=0);this.cols_map_sum[d]=this.cols_map_sum[d]+e},this))},distribute_cols:function(){var a=_.reduce(this.cols_map,
function(a,b){return a+b},0),b=_.map(this.cols_map,function(b){return b/a*100});_.each(b,_.bind(function(a,b){this.$("th").eq(b).css("width",a+"%")},this))}}),d=e.extend({add_item:function(a){var b=_.clone(a),a=_.clone(a.values);b.values=a;a.splice(-1,1,D.u.format_number(_.last(a),1,6,true)+"%");a=(new this.item_view({item:b})).render().$el;this.$(".board").append(a);a.show();this.calculate_lengths(b)}}),g=a.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);
this.view=new d({model:this});if(this.widget.service_kind==="custom")this.url_view_cls=l}}),b=a.extend({defaults:{multiple_subtitles:true,last:2},precision_limit:null,previous_items:void 0,initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new e({model:this,item_view:u,extra_header:"\u00b1"});if(this.widget.service_kind==="custom")this.url_view_cls=l},process_initial_data:function(a){if(a.length===2&&a[1])this.previous_items=a[1].value.board.slice(0,30);if(a[0]){a=
a[0].value.board.slice(0,30);_.each(a,_.bind(function(a){this.calculate_trend(this.previous_items,a)},this));this.view.render_board(a);this.previous_items=a}},update:function(a){a=a.value.board.slice(0,30);_.each(a,_.bind(function(a){this.calculate_trend(this.previous_items,a)},this));this.previous_items=a;return{items:a}},display:function(a){this.view.render_board(a.items.slice(0,30))},clean_data:function(){a.prototype.clean_data.apply(this,arguments);this.previous_items=void 0},calculate_trend:function(a,
b){if(!_.isEmpty(b.values)){var d=this.get("has_title")?3:2,e=this.get("total_subtitles")-d,d=parseFloat(b.values[e]);if(_.isFinite(d))if(a===void 0)_.defaults(b,{trend:"equal"});else{var f=_.filter(a,function(a){return a.name===b.name});if(_.isEmpty(f))_.defaults(b,{trend:"up"});else{f=f[0];if(_.isEmpty(f.values))_.defaults(b,{trend:"up"});else{e=parseFloat(f.values[e]);if(_.isFinite(e)){if(this.precision_limit!==null){f=Math.pow(10,this.precision_limit);d=Math.round(d*f)/f;e=Math.round(e*f)/f}_.defaults(b,
{trend:d>e?"up":d<e?"down":"equal"})}else _.defaults(b,{trend:"equal"})}}}}}}),f=b.extend({precision_limit:2,initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new d({model:this,item_view:u,extra_header:"\u00b1"});if(this.widget.service_kind==="custom")this.url_view_cls=l}}),h=a.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new e({model:this,item_view:q,extra_header:"<span>\u2022</span><span>\u2022</span><span>\u2022</span>"});
if(this.widget.service_kind==="custom")this.url_view_cls=l}}),o=j.extend({template:"slot_leaderboard_item",initialize:function(a){this.item=a.item},format_item:function(a){_.each(a.values,_.bind(function(b,d){a.values[d]=b&&_.isNumber(b)&&b.toString().length>this.format_from?D.u.format_number(b,2,this.format_limit):b},this));return a},render:function(){this.setElement($.tmpl(this.template,this.format_item(this.item)));this.$el.hide();return this}}),u=o.extend({template:"slot_leaderboard_trend_item"}),
q=o.extend({template:"slot_leaderboard_status_item"}),l=D.bb.SlotUrlView.extend({events:{"input .field-label":"propagate","change .field-label":"propagate"},initialize:function(){this._super=D.bb.SlotUrlView;this._super.prototype.initialize.apply(this,arguments);_.extend(this.events,this._super.prototype.events)},$all:function(a){var b=this.$el.closest("fieldset").siblings("fieldset").andSelf().find(".m-editable-url");return $(a,b)},edit:function(){this.$all(".more").smartFadeOut();this.$all(".url").smartFadeOut(function(){$(this).siblings(".more").andSelf().hide();
$(this).siblings("fieldset").smartFadeIn()})},cancel:function(){var a=this;this.$all("fieldset").smartFadeOut(function(){$(this).hide();$(this).find(".field-label").val(a.model.get("label"));$(this).siblings(".url").width("").smartFadeIn();a.resize()})},resize:function(){var a=this;this.$all(".url").each(function(){a._super.prototype.resize.call(this,$(this))})},propagate:function(a){this.$all(".field-label").val($(a.target).val())}});_.extend(Ducksboard.Backbone.slot_kinds,{Leaderboard:a,RoundedLeaderboard:g,
TrendLeaderboard:b,RoundedTrendLeaderboard:f,StatusLeaderboard:h});_.extend(Ducksboard.Backbone.slot_views,{TrendLeaderboardItemView:u,LeaderboardItemView:o,LeaderboardView:e})})();
(function(){var a=D.Backbone.Slot.extend({initial_data_type:"last",defaults:{last:1},send_data_params:{value:{template:"input_text",template_data:{placeholder:76}}},initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new j({model:this})},process_initial_data:function(a){a.length&&this.view.update_counter(a[0].value)},clean_data:function(){this.update({value:0})},update:function(a){return a},display:function(a){this.view.update_counter(a.value)}}),j=D.Backbone.SlotView.extend({template:"slot_counter_subtitle",
render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.colorify();this.$el.appendTo(this.model.widget.view.$(".inner"));return this},colorify:function(){if(this.model.get("color")){this.$el.css("color",this.model.get("color"));this.$(".subtitle").css("color",this.model.get("color"))}},update_counter:function(a){var d=this.$(".value"),g=this.format_value(a),a=Raphael.constants.UPDATE_ANIMATION_DURATION/2;d.smartFadeOut(a,function(){$(this).text(g)}).smartFadeIn(a,_.bind(this.model.display_enqueued,
this.model))},format_value:function(a){return D.u.format_number(a,2,4)}});_.extend(Ducksboard.Backbone.slot_kinds,{CounterSubtitle:a});_.extend(Ducksboard.Backbone.slot_views,{CounterSubtitleView:j})})();
(function(){var a=D.Backbone.slot_kinds.CounterSubtitle.extend({status_map:{"0":"up",1:"down",2:"warning",3:"unknown"},send_data_placeholder:[0,"code"],feedback_while_fetching:false,initialize:function(){D.Backbone.slot_kinds.CounterSubtitle.prototype.initialize.apply(this,arguments);this.view=new j({model:this})},process_initial_data:function(a){a.length&&this.view.update_status(this.parse_value(a[0]))},display:function(a){this.view.update_status(this.parse_value(a))},parse_value:function(a){return{status:this.status_map[a.value]||
"unknown",time:a.timestamp}}}),j=D.Backbone.slot_views.CounterSubtitleView.extend({template:"slot_status",text_sizes:{"short":[0,5],medium:[5,14],large:[15,99]},get_size:function(a){var d,g=(a||"").length;$.each(this.text_sizes,function(a,e){if(g>=e[0]&&g<=e[1]){d=a;return false}});return d},render:function(){var a=this.template_data();this.setElement($.tmpl(this.template,_.extend(a,{subtitle_size:this.get_size(a.subtitle)})));this.$el.appendTo(this.model.widget.view.$(".inner"));this.update_status({status:"unknown"});
return this},update_status:function(a){this.$(".status").text(a.status).attr("data-status",a.status);this.update_time(a)},update_time:function(a){var d=this.$("time");d.data("timeago")||d.timeago();d.smartFadeOut(_.bind(function(){d.timeago("update",D.u.unix_to_iso8601(a.time));d.smartFadeIn(_.bind(this.model.display_enqueued,this.model))},this))}});_.extend(Ducksboard.Backbone.slot_kinds,{Status:a})})();
(function(){var a=D.Backbone.slot_kinds.CounterSubtitle.extend({defaults:{view_cls:e},send_data_params:void 0,send_data_unit:void 0,initialize:function(){D.Backbone.slot_kinds.CounterSubtitle.prototype.initialize.apply(this,arguments);this.view=new (this.get("view_cls")||e)({model:this})},process_initial_data:function(a){a.length&&this.view.update(this.clamp_value(a[0].value))},display:function(a){this.view.update(this.clamp_value(a.value))},clamp_value:function(a){a.min||(a.min=0);a.current_orig=
a.current;a.current=Math.min(Math.max(a.current,a.min),a.max);return a}}),j={get_ticks:function(a){var e=Raphael.tools.rounded_tick_size(a.max-a.min,3),b=[{orig:a.min}];_.each(_.range(1,3),function(f){b.push({orig:a.min+f*e[0]})});b.push({orig:a.max});_.each(b,function(a,d){b[d].formatted=D.u.format_number(a.orig,e[1],e[1])});return b},render_ticks:function(a){var e=this.$(".refs").empty(),b=$([]);_.each(a,function(a,d){b=b.add($("<li />",{"class":"ref-"+d,text:a.formatted}))});e.append(b)}},e=D.Backbone.slot_views.CounterSubtitleView.extend(j).extend({template:"slot_completion_gauge",
render:function(){D.Backbone.slot_views.CounterSubtitleView.prototype.render.apply(this,arguments);this.update_gauge(0);return this},update:function(a){var e=(a.current-a.min)/(a.max-a.min),b=this.$(".value"),f=this.$(".subtitle"),h=Raphael.constants.UPDATE_ANIMATION_DURATION/2,j=this.get_ticks(a);this.render_ticks(j);b.stop(true,true);b.smartFadeOut(h,function(){$(this).text(D.u.format_number(a.current_orig,5,5))}).smartFadeIn(h);f.stop(true,true);f.smartFadeOut(h).smartFadeIn(h);this.update_gauge(e,
j)},update_gauge:function(a,e){var b=this.model.get("color")||this.$el.css("color"),b={slot:this,percent:a,path_attrs:{fill:b},ticks:e,callback:_.bind(this.model.display_enqueued,this.model)};this.$el.graph("gauge",b)}}),j=D.Backbone.slot_views.CounterSubtitleView.extend(j).extend({template:"slot_completion_progress",render:function(){D.Backbone.slot_views.CounterSubtitleView.prototype.render.apply(this,arguments);this.update_progress_bar(0);return this},update:function(a){var e=this,b=(a.current-
a.min)*100/(a.max-a.min),f=this.$(".preview .value"),h=Raphael.constants.UPDATE_ANIMATION_DURATION/2,j=this.get_ticks(a);this.render_ticks(j);f.stop(true,true);f.smartFadeOut(h,function(){$(this).text(D.u.format_number(a.current_orig,5,5));f.smartFadeIn(h,_.bind(e.model.display_enqueued,e.model))});this.update_progress_bar(b)},update_progress_bar:function(a){var e=this.model.get("color")||this.$el.css("color");this.$(".preview, .bar").find(".value").css({color:e});this.$(".preview > p, .bar .value").css({width:a+
"%"});this.$(".bar .value").css("background-color",e)}});_.extend(Ducksboard.Backbone.slot_kinds,{Completion:a});_.extend(Ducksboard.Backbone.slot_views,{CompletionGaugeView:e,CompletionProgressView:j})})();
(function(){var a=D.Backbone.slot_kinds.CounterSubtitle.extend({current_value:void 0,initialize:function(){D.Backbone.slot_kinds.CounterSubtitle.prototype.initialize.apply(this,arguments);this.view=new j({model:this})},process_initial_data:function(a){this.current_value=a.length?a[0].value:void 0;this.new_slot_value()},update:function(a){this.current_value=a.value;return a},display:function(){this.new_slot_value()},new_slot_value:function(){var a=this.collection.map(function(a){return a.current_value||
0}),d=Raphael.tools.zoom(a,this.view.$el.height()*0.8);this.collection.each(function(a){a.view.update_bar(d)})}}),j=D.Backbone.slot_views.CounterSubtitleView.extend({template:"slot_counter_bar",colorify:function(){var a=this.model.get("color");if(a){var d=Raphael.tools.darken(a,0.55);this.$el.css("color",a);this.$(".subtitle").css("color",d)}},update_bar:function(a){var d=a[0],g=a[1],a=this.$el.css("color"),d=(this.model.current_value||0)*d+g;this.$el.graph("bar",{slot:this,height:d,path_attrs:{fill:a}});
a=D.u.actual("height",this.$el);d=_.max([d+a*0.04,a*0.19]);this.model.current_value!==void 0&&this.update_counter(this.model.current_value);a=Raphael.constants.UPDATE_ANIMATION_DURATION;g=Raphael.constants.UPDATE_ANIMATION_EASING;this.$(".value").smartAnimate({bottom:d},{duration:a,easing:g,queue:false,callback:_.bind(this.model.display_enqueued,this.model)}).show()}});_.extend(Ducksboard.Backbone.slot_kinds,{CounterBar:a});_.extend(Ducksboard.Backbone.slot_views,{CounterBarView:j})})();
(function(){var a=D.Backbone.slot_kinds.CounterSubtitle.extend({initialize:function(){D.Backbone.slot_kinds.CounterSubtitle.prototype.initialize.apply(this,arguments);this.view=new j({model:this})}}),j=D.Backbone.slot_views.CounterSubtitleView.extend({template:"slot_counter_box"});_.extend(Ducksboard.Backbone.slot_kinds,{CounterBox:a})})();
(function(){var a=D.Backbone.slot_kinds.CounterSubtitle.extend({initialize:function(){D.Backbone.slot_kinds.CounterSubtitle.prototype.initialize.apply(this,arguments);this.view=new j({model:this})}}),j=D.Backbone.slot_views.CounterSubtitleView.extend({template:"slot_counter_pin",render:function(){D.Backbone.slot_views.CounterSubtitleView.prototype.render.apply(this,arguments);var a={slot:this,path_attrs:{fill:this.model.get("color")||this.$el.css("color")}};this.$el.graph("pin",a);return this}});
_.extend(Ducksboard.Backbone.slot_kinds,{CounterPin:a})})();
(function(){var a=D.Backbone.slot_kinds.CounterSubtitle.extend({send_data_unit:"%",send_data_params:{value:{template:"input_text",template_data:{placeholder:0.67}}},initialize:function(){D.Backbone.slot_kinds.CounterSubtitle.prototype.initialize.apply(this,arguments);this.view=new j({model:this})},process_initial_data:function(a){a.length&&this.view.update_counter(this.clamp_value(a[0].value))},display:function(a){this.view.update_counter(this.clamp_value(a.value))},clamp_value:function(a){return Math.min(Math.max(a,
0),1)}}),j=D.Backbone.slot_views.CounterSubtitleView.extend({template:"slot_gauge",render:function(){D.Backbone.slot_views.CounterSubtitleView.prototype.render.apply(this,arguments);this.update_gauge(0);return this},update_counter:function(a){var d=this.$(".value"),g=this.$(".subtitle"),b=this.format_value(a),f=Raphael.constants.UPDATE_ANIMATION_DURATION/2;d.stop(true,true);d.smartFadeOut(f,function(){$(this).text(b)}).smartFadeIn(f);g.stop(true,true);g.smartFadeOut(f).smartFadeIn(f);this.update_gauge(a)},
update_gauge:function(a){var d=this.model.get("color")||this.$el.css("color"),a={slot:this,percent:a,path_attrs:{fill:d},callback:_.bind(this.model.display_enqueued,this.model)};this.$el.graph("gauge",a)},format_value:function(a){return D.u.format_number(a*100,1,4)+"%"}});_.extend(Ducksboard.Backbone.slot_kinds,{Gauge:a})})();
(function(){var a=D.Backbone.Slot.extend({initial_data_type:"since",feedback_while_fetching:false,process_initial_data:function(a){var e={};a.reverse();_.each(a,_.bind(function(a){e[a.value["for"]]=a.value.code},this));_.each(e,this.notification)},update:function(a){this.notification(a.value.code,a.value["for"])},notification:function(a,e){D.u.is_error(a)?D.ws.trigger(_.sprintf("error:%s",e),a):D.ws.trigger(_.sprintf("success:%s",e))}});_.extend(Ducksboard.Backbone.slot_kinds,{Notification:a})})();
(function(){var a=D.Backbone.Model.extend({initialize:function(a,b){this.slot=b.slot;this.widget=b.widget;this.view_cls=j},load_service_params:function(){return false},url:function(){return _.sprintf("/push/image/%s/",this.slot.get("label"))},save_image:function(a,b){if(!D.u.support_xhr_upload())return this._iframe_upload(a,b);this.file=a[0].files[0];if(!this.file)return this;this.file_size=this.file.size;var d=new FormData;d.append("file",this.file);_.each(this.attributes,function(a,b){d.append(b,
a)});this.xhr=new XMLHttpRequest;this.xhr.open("POST",this.url());this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xhr.setRequestHeader("X-CSRFToken",$.cookie("csrftoken"));b.progress&&this.xhr.upload.addEventListener("progress",b.progress,false);this.xhr.addEventListener("load",_.bind(function(a){this._upload_completed(a,b.success,b.error)},this),false);b.upload_start&&b.upload_start();this.xhr.send(d);return this},_upload_completed:function(a,b,d){var e=a;if(a.target){if(a.target.status!==
200)return this._upload_failed({code:a.target.status,errors:"Unexpected error uploading file"},d);e=JSON.parse(a.target.responseText)}D.bb.account.set(e);b&&b()},_upload_failed:function(a,b){if(a.code===413){a.errors="File is too large";a.details="max. 1Mb"}b&&b(a)},_iframe_upload:function(a,b){var d="file_upload_iframe_"+Date.now(),e=$("<iframe />",{id:d,name:d}).hide(),f=$("<form />",{enctype:"multipart/form-data",target:d,action:this.url(),method:"POST"}).hide();$("<input />",{type:"hidden",name:"csrfmiddlewaretoken",
value:$.cookie("csrftoken")}).appendTo(f);$("<input />",{type:"hidden",name:"iframe",value:true}).appendTo(f);a.attr("name","file").appendTo(f);_.each(this.params,function(a,b){$.tmpl(a.template,_.extend({name:b,value:this.get(b)},_.isFunction(a.template_data)?a.template_data():a.template_data)).appendTo(f)},this);$(document.body).prepend(e);$(document.body).prepend(f);var h=this;e[0].onreadystatechange=function(){if(!(h.upload_canceled||this.readyState!=="complete")){var a={code:400,errors:"Unexpected error uploading file"};
try{var d=$(e[0].contentWindow.document.body).find("pre").text();if(d){var f=JSON.parse(d);f.source?h._upload_completed(f,b.success,b.error):h._upload_failed(f,b.error)}else throw new Exception;}catch(g){h._upload_failed(a,b.error)}}};e[0].load_successfully=false;d=f.submit();b.upload_start&&b.upload_start();return d}}),j=D.bb.CustomDataFormView.extend({template:"slot_data_image",events:{'change input[type="file"]':"send_image_data","click .button":"send_data","click .cancel":"cancel"},initialize:function(){D.bb.FormView.prototype.initialize.apply(this,
arguments);_.bindAll(this,"upload_start","show_progress","uploaded","show_error");this.listenTo(this.model.slot,"image-updated",this.update_preview);this.listenTo(this.model.slot,"image-updated",this.update_fields)},template_data:function(){return this.model.slot.toJSON()},render:function(){D.bb.FormView.prototype.render.apply(this,arguments);this.$captionfield=this.$(".field-caption");this.$fileinput=this.$('input[type="file"]');this.$preview=this.$(".preview");this.$img_preview_wrap=this.$(".img-preview-wrap",
this.$preview);this.$caption=this.$(".caption",this.$preview);this.$loader=this.$(".loading",this.$preview);this.$upload_bar=this.$(".upload-bar",this.$preview);this.$upload_percent=this.$upload_bar.find("> span");this.model.slot.initial_data.value.source&&this.update_preview(this.model.slot.initial_data.value);return this},send_data:function(a){var b=D.u.sending($(a.currentTarget),"sending");if(!b.blocked){this.set_from_fields();this.model.save({},{complete:function(){b.complete()},error:_.bind(function(a,
b){this.show_response_errors(b)},this)})}},send_image_data:function(){this.set_from_fields();this.$cloned=this.$fileinput.clone(true);this.$error&&this.$error.smartFadeOut(_.bind(function(){this.$error.remove()},this));return this.model.save_image(this.$fileinput,{upload_start:this.upload_start,progress:this.show_progress,success:this.uploaded,error:this.show_error})},upload_start:function(){this.model.upload_canceled=false;this.$preview.addClass("is_uploading").removeClass("is_finished");this.$preview.closest(".editor").addClass("is_uploading");
this.$caption.smartFadeOut(function(){$(this).empty()});this.$upload_percent.html("0%");this.$upload_bar.css("height","0%");this.$upload_bar.removeClass("hidden").addClass("visible");this.$img_preview_wrap.smartFadeOut();$.browser.msie&&this.$loader.show();this.$cloned.appendTo(this.$(".file"));this.$fileinput.remove();this.$fileinput=this.$cloned},show_progress:function(a){if(a.lengthComputable){var a=parseInt(a.loaded*100/a.total,0),b=a+"%";this.$upload_percent.html(b);this.$upload_bar.css("height",
b);a>=98&&this.$preview.addClass("is_almost_finished")}},uploaded:function(){this.$preview.removeClass("is_uploading").addClass("is_finished");this.$preview.closest(".editor").removeClass("is_uploading");$.browser.msie&&this.$loader.hide()},show_error:function(a){this.$upload_bar.removeClass("visible").addClass("hidden");this.$preview.removeClass("is_uploading").addClass("is_finished");this.$preview.closest(".editor").removeClass("is_uploading");if(a&&a.errors){a=new e(a);this.$error=a.$el;a.parent=
this;this.$error.appendTo(this.$preview).smartFadeIn()}},cancel:function(){if(this.model.xhr){this.model.upload_canceled=true;this.model.xhr.abort&&this.model.xhr.abort();this.model.xhr=null;this.$img_preview_wrap.smartFadeIn();this.$upload_bar.fadeOut(_.bind(function(){this.$upload_bar.css("height","0%");this.$upload_percent.empty()},this));this.$preview.removeClass("is_uploading");this.$preview.closest(".editor").removeClass("is_uploading");$.browser.msie&&this.$loader.show()}return this},update_preview:function(a){if(this.model.upload_canceled){a=
this.model.slot.initial_data.value;this.$img_preview_wrap.hide()}if(this.$preview&&a.source){this.model.slot.initial_data.value.source=a.source;var b=this.model.slot.view,d=$.tmpl(b.img_template||b.item_template,_.extend(a,{klass:"new"}));d.appendTo(this.$img_preview_wrap);d.one("load",_.bind(function(){d.prependTo(this.$img_preview_wrap);var b=d.get(0).width,e=d.get(0).height;this.model.slot.view.update_preview.call(this,a,d,b,e);this.$preview.removeClass("is_uploading").addClass("is_finished");
this.$preview.removeClass("is_almost_finished")},this))}if(this.$caption&&a.caption){this.model.slot.initial_data.value.caption=a.caption;this.$caption.text(a.caption||"").smartFadeIn()}},update_fields:function(a){this.model.set({caption:a.caption});this.$captionfield&&this.$captionfield.val(a.caption)}}),e=D.Backbone.View.extend({template:"upload_error",events:{"click a":"remove"},initialize:function(a){this.render(a)},render:function(a){this.setElement($.tmpl(this.template,a));return this},remove:function(a){a.preventDefault();
a.stopImmediatePropagation();this.parent.$upload_bar.css("height","0%");this.parent.$upload_percent.empty();this.$el.closest(".preview").find(".img-preview-wrap").fadeIn();this.$el.fadeOut(function(){$(this).remove()})}}),a=D.Backbone.Slot.extend({initial_data_type:"last",defaults:{last:1,no_appearance:true},feedback_while_fetching:false,send_data_cls:a,send_data_params:{caption:{template:"input_textarea",template_data:{placeholder:"Lorem ipsum..."}}},initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,
arguments);this.view=new f({model:this});this.initial_data={value:{}}},process_initial_data:function(a){if(a=_.last(a)){this.initial_data=a;this.view.update_image(a)}},clean_data:function(){this.view.remove_image()},display:function(a){this.view.update_image(a)}}),d=a.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new h({model:this});this.initial_data={value:{}}}}),g=D.Backbone.Slot.extend({poll_id:void 0,defaults:{no_appearance:true},feedback_while_fetching:false,
initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new f({model:this})},start:function(){this.in_current_dashboard()&&this.poll_data()},append_widget_id:function(a){return/\?.+$/.test(a)?a+"&"+this.widget.id:a+"?"+this.widget.id},get_data:function(){var a=this.widget.data_source.get("image_url"),b=this.widget.data_source.get("refresh_mode")||"0";return{timestamp:moment().unix(),value:{caption:this.widget.data_source.get("caption")||"",source:this.append_widget_id(a),
poll_frequency:parseInt(b,0)*6E4}}},poll_data:function(){this.clear_timers();data=this.get_data();this.view.update_image(data);if(data.value.poll_frequency)this.poll_id=setTimeout(_.bind(function(){this.poll_data()},this),data.value.poll_frequency)},clear_timers:function(){this.poll_id&&window.clearTimeout(this.poll_id)},unsubscribe:function(){D.Backbone.Slot.prototype.unsubscribe.apply(this,arguments);this.clear_timers()}}),b=g.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,
arguments);this.view=new h({model:this})}}),f=D.Backbone.SlotView.extend({template:"slot_image",img_template:"slot_image_item",crossfade_duration:1500,events:{click:"view_image"},template_data:function(){var a=D.Backbone.SlotView.prototype.template_data.apply(this,arguments);return _.extend(a,{widget_id:this.model.widget.id})},scale:function(a,b,d){return D.u.scale_image(a,b,d)},update_image:function(a){var b=this;this.url=a.value.source;this.$("img:not(.new)").not(":last").remove();this.$("img.new").not(":last").remove();
this.$("div.empty").remove();this.$el.removeClass("empty");this.$("img.new").each(function(){$(this).stop(true,true)});var d=this.$("img"),e=$.tmpl(this.img_template,_.extend(a.value,{klass:"new invisible"}));e.prependTo(this.$el);e.one("load",_.bind(function(){e.prependTo(this.$el);var f=e.get(0).width,h=e.get(0).height;e.removeClass("invisible");D.u.scale_image(e,f,h);this.update_caption(a.value.caption);this.update_time(a.timestamp);d.filter(":not(.new)").smartFadeOut(this.crossfade_duration);
e.smartFadeIn(this.crossfade_duration,function(){$(this).removeClass("new");d.remove();b.model.display_enqueued()});this.model.trigger("image-updated",a.value)},this))},remove_image:function(){this.$("img").remove()},update_caption:function(a){this.$(".caption").smartFadeOut(function(){$(this).text(a||"").smartFadeIn()})},update_time:function(a){var b=this.$("time");b.data("timeago")||b.timeago();b.smartFadeOut(function(){b.timeago("update",D.u.unix_to_iso8601(a));b.smartFadeIn()})},view_image:function(a){this.url&&
this.add_context_action(a,{label:"View original image",url:this.url,is_public:true})},update_preview:function(a,b,d,e){var f=this;b.removeClass("invisible");D.u.scale_image(b,d,e);this.$img_preview_wrap.show();b.smartFadeIn(this.crossfade_duration,function(){$(this).removeClass("new");f.$upload_bar.removeClass("visible").addClass("hidden")})}}),h=f.extend({template:"slot_image_full",item_template:"slot_image_full_item",update_image:function(a){var b=this;this.url=a.value.source;this.$("img").remove();
this.$(".picture:not(.new)").not(":last").remove();this.$(".picture.new").not(":last").remove();this.$(".picture.new").each(function(){$(this).stop(true,true)});var d=this.$(".picture"),e=$.tmpl(this.img_template,_.extend(a.value,{klass:"new"}));e.appendTo(this.$el);e.one("load",_.bind(function(){e.appendTo(this.$el);var f=e.get(0).width,h=e.get(0).height;e.remove();var g=$.tmpl(this.item_template,a.value);g.appendTo(this.$el);f=D.u.scale_image_sizes(g,f,h,true);g.css({"background-size":_.sprintf("%dpx %dpx",
f.width,f.height),"background-position":_.sprintf("%dpx %dpx",f["margin-left"],f["margin-top"])});f=$(".caption",g);h=(g.actual("height")-f.actual("height"))/2;h<0&&(h=0);f.css({"margin-top":h+"px"});d.filter(":not(.new)").smartFadeOut(this.crossfade_duration);g.smartFadeIn(this.crossfade_duration,function(){$(this).removeClass("new");d.remove();b.model.display_enqueued()});this.model.trigger("image-updated",a.value)},this))},remove:function(){D.Backbone.SlotView.prototype.remove.apply(this,arguments)},
update_preview:function(a,b,d,e){b.remove();b=D.u.scale_image_sizes(this.$img_preview_wrap,d,e,true);this.$img_preview_wrap.hide().css({"background-size":_.sprintf("%dpx %dpx",b.width,b.height),"background-position":_.sprintf("%dpx %dpx",b["margin-left"],b["margin-top"]),"background-image":"url("+a.source+")"});a=this.$img_preview_wrap.actual("height")-this.$caption.actual("height");this.$caption.css({top:Math.max(a/2,0)+"px"});_.defer(_.bind(function(){this.$upload_bar.removeClass("visible").addClass("hidden");
this.$img_preview_wrap.fadeIn()},this))}});_.extend(Ducksboard.Backbone.slot_kinds,{Image:a,ImageFull:d,StaticImage:g,StaticImageFull:b})})();
(function(){var a=D.Backbone.SlotView.extend({template:"slot_countdown",detail_template:"slot_countdown_detail",render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.$(".event").text(this.model.widget.data_source.get("event"));this.$el.appendTo(this.model.widget.view.$(".inner"));return this},update_countdown:function(a){this.$(".countdown").removeClass("details").text(a)},update_detail_countdown:function(a,d,g){a=$.tmpl(this.detail_template,{hours:_.sprintf("%02d",a),
minutes:_.sprintf("%02d",d),seconds:_.sprintf("%02d",g)});this.$(".countdown").addClass("detail").html(a)}}),j=D.Backbone.Slot.extend({POLL_JITTER:3E5,defaults:{no_appearance:true},seconds:void 0,delta_seconds:0,view_cls:a,initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new this.view_cls({model:this});delete this.url_view},start:function(){if(this.should_start()){this.listenTo(D.ws,"seconds_until:"+this.get("label"),this.process_seconds_until);if(D.ws.connected){this.get_seconds_until();
this.started=true}}},get_seconds_until:function(){var a=D.Backbone.account.get("timezone").replace(" ","_"),d=this.widget.data_source.get("target");D.ws.get_seconds_until(this.get("label"),{timezone:a,target:d})},seconds_from_data:function(a){return a[0].value},process_seconds_until:function(a){this.clear_timers();this.sync_timeout_id=setTimeout(_.bind(function(){this.get_seconds_until()},this),this._sync_timeout());this.seconds=this.seconds_from_data(a);this.update_countdown(this.seconds);this.seconds<
86400&&this.update_countdown_seconds()},on_seconds_negative:function(){},on_seconds_detail:function(){},on_seconds_default:function(){},update_countdown:function(a){if(a<0)this.on_seconds_negative(a);else if(a<86400)this.on_seconds_detail(a);else this.on_seconds_default(a)},update_countdown_seconds:function(){this.update_time_interval_id=setInterval(_.bind(function(){this.seconds=this.seconds-this.delta_seconds;this.update_countdown(this.seconds)},this),1E3)},clear_timers:function(){this.sync_timeout_id&&
clearTimeout(this.sync_timeout_id);this.update_time_interval_id&&clearInterval(this.update_time_interval_id)},unsubscribe:function(a){D.Backbone.Slot.prototype.unsubscribe.apply(this,arguments);this.clear_timers();a||(a=this.get("label"));this.stopListening(D.ws,"seconds_until:"+a)},_sync_timeout:function(){var a=0,d=moment(),a=d.minutes()>=30?60-d.minutes():30-d.minutes(),a=a*6E4-d.seconds()*1E3-d.milliseconds(),d=Math.random()*this.POLL_JITTER;return a+d}});_.extend(Ducksboard.Backbone.slot_kinds,
{Countdown:j});_.extend(Ducksboard.Backbone.slot_views,{CountdownView:a})})();
(function(){var a=D.Backbone.Slot.extend({initial_data_type:"last",reverse:true,defaults:{last:5,no_appearance:true},initialize:function(){this.timeline_size=parseInt(this.get("last"));D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new d({model:this})},process_initial_data:function(a){a=this.reverse?a.reverse():a;a=_.map(a,_.bind(function(a){return this.parse_value(a)},this));this.view.render_initial_data(a)},clean_data:function(){this.view.remove_items()},update:function(a){this.view.add_item(this.parse_value(a),
true)},parse_value:function(a){return{title:a.value.title,image:a.value.image,timestamp:a.timestamp,time:D.u.unix_to_iso8601(a.timestamp),content:a.value.content,link:a.value.link}}}),j=a.extend({initial_data_type:"last",defaults:{timeline_size:D.u.constants.timeline_size,last:1,reverse:false,no_appearance:true},initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new d({model:this});this.timeline_size=parseInt(this.get("timeline_size"));this.reverse=this.get("reverse")},
process_initial_data:function(a){a[0]&&this.render_timeline(a[0].value.timeline)},clean_data:function(){this.view.remove_items()},update:function(a){this.render_timeline(a.value.timeline)},render_timeline:function(a){this.view.remove_items();a=this.reverse?a.reverse():a;a=_.map(a,_.bind(function(a){return this.parse_value(a)},this));this.view.render_initial_data(a)}}),e=D.Backbone.SlotView.extend({template:"slot_timeline_item",events:{click:"follow_link"},initialize:function(a){this.item=a.item},
render:function(){this.setElement($.tmpl(this.template,this.item,{is_color:function(){return/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/.test(this.data.image)}}));this.$el.hide();this.$("img").preload({placeholder:"/static/dashboard/img/empty.png",notFound:"/static/dashboard/img/empty.png",onFinish:_.bind(function(){this.$("img").smartTransition({opacity:1})},this)});return this},follow_link:function(a){this.item.link&&this.add_context_action(a,{label:"Follow link",url:this.item.link,is_public:true})}}),
d=D.Backbone.SlotView.extend({template:"slot_timeline",initialize:function(a){this.item_view=a.item_view||e},render_initial_data:function(a){_.each(a,_.bind(function(a){this.add_item(a,false)},this));this.$("time").timeago();this.$("ul").smartFadeIn()},add_item:function(a,b){b?this.$(".placeholder").smartFadeOut():this.$(".placeholder").hide();var d=new this.item_view({item:a}),e=d.render().$el;e.data("view",d);e.insertBefore(this.find_predecessor(e));this.$("time").timeago();if(b&&this.$("ul").is(":visible")){d=
e.outerHeight();e.css({height:0,opacity:0,display:"block"});e.smartAnimate({height:d,opacity:"1"})}else e.show();this.delete_old_items()},find_predecessor:function(a){var b=this.$("li.placeholder"),d=a.tmplItem().data.timestamp,e=this.model.reverse;this.$("li:not(.placeholder)").each(function(){if(e&&$(this).tmplItem().data.timestamp<=d||!e&&$(this).tmplItem().data.timestamp>=d){b=$(this);return false}});return b},remove_items:function(){this.$("li:not(.placeholder)").each(function(){$(this).data("view").remove()});
this.$(".placeholder").smartFadeIn()},delete_old_items:function(){var a=_.sprintf("li:gt(%d):not(.placeholder)",this.model.timeline_size);this.$(a).each(function(){$(this).data("view").remove()})}});_.extend(Ducksboard.Backbone.slot_kinds,{Timeline:a,CompleteTimeline:j});_.extend(Ducksboard.Backbone.slot_views,{TimelineView:d,TimelineItemView:e})})();
(function(){var a=D.Backbone.Slot.extend({initial_data_type:"timespan",data_last:void 0,oldest_value:null,data_last_timestamps:void 0,periods:void 0,period_limits:void 0,send_data_params:{value:{template:"input_text",template_data:{placeholder:76}},timestamp:{template:"input_date",template_data:{placeholder:"timestamp (optional)"}}},initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new j({model:this})},process_initial_data:function(a){this.oldest_value=a.shift().value;
this.data_last=_.pluck(a,"value");this.periods=_.pluck(a,"period");this.period_limits=_.pluck(a,"timestamp");this.data_last_timestamps=this.period_limits.slice(0);this.periods.shift();this.view.render_initial_data(this.filled_data())},update:function(a){var d=this.data_last_index(a);if(d<0&&this.data_last[0]!==null)return false;d<0&&(d=0);if(this.data_last_timestamps[d]>a.timestamp)return false;var g=a.value!==this.data_last[d];this.data_last[d]=a.value;this.data_last_timestamps[d]=a.timestamp;return{data:a,
idx:d,changed:g}},display:function(a){var d=this.filled_data();this.view.update_trend(d);var g=_.filter(this.data_last,function(b,d){return d>a.idx-1&&b===null});this.view.update_counter(d,a.idx+g.length,a.changed);this.view.update_delta(d,a.idx,a.changed)},clean_data:function(){this.data_last=_.map(this.data_last,function(){return null});this.data_last_timestamps=this.period_limits.slice(0);var a=this.filled_data();this.view.update_trend(a);this.view.update_counter(a,this.data_last.length-1);this.view.update_delta(a,
this.data_last.length-1)},data_last_index:function(a){for(var a=a.timestamp,d=this.period_limits.length-1;d>=0;d--)if(a>=this.period_limits[d])break;return d},filled_data:function(){var a=this.oldest_value,d=-1;return[_.map(this.data_last,function(g,b){g!==null&&(a=g);a===null&&(d=b);return a===null?0:a}),d]},tick:function(a){var d=a[this.get("timespan")];if(_.last(this.periods)!==d){a.current_time||moment().unix();this.periods.shift();this.periods.push(d);this.period_limits.shift();this.period_limits.push(a.current_time);
d=this.data_last.shift();if(d!==null)this.oldest_value=d;this.data_last.push(null);this.data_last_timestamps.shift();this.data_last_timestamps.push(a.current_time);this.view.tick(this.filled_data())}},new_period_value:function(){return null}}),j=D.Backbone.SlotView.extend({template:"slot_counter_trend",timespan_class:"timespan-soft",timespans:{daily:{modulus:3,mapper:function(a){a=""+a;return a.length<2?"0"+a:a},extra_class:"small"},weekly:{modulus:1,mapper:function(a){return["Mon","Tue","Wed","Thu",
"Fri","Sat","Sun"][a-1]},extra_class:"big"},monthly:{modulus:5,mapper:function(a){a=""+a;return a.length<2?"0"+a:a},extra_class:"small"},quarterly:{modulus:2,mapper:function(a){return"W"+a},extra_class:"small"},yearly:{modulus:1,mapper:function(a){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a-1]},extra_class:"small"}},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.colorify();this.$el.appendTo(this.model.widget.view.$(".inner"));
return this},colorify:function(){if(this.model.get("color")){this.$(".value").css("rgba",this.model.get("color"));this.$(".subtitle").css("rgba",this.model.get("color"))}},render_initial_data:function(a){var d=this._create_periods(this.model.periods);this.$el.append(d);this.update_counter(a);this.update_delta(a);this.update_trend(a)},update_counter:function(a,d,g){_.isUndefined(g)&&(g=true);if(!(d&&d!==a[0].length-1)&&g){var d=this.$(".value"),b=this.format_value(_.last(a[0])),a=Raphael.constants.UPDATE_ANIMATION_DURATION/
2;d.stop(true,true);d.smartFadeOut(a,function(){$(this).text(b)}).smartFadeIn(a)}},update_delta:function(a,d,g){_.isUndefined(g)&&(g=true);if((!d||!(d!==a[0].length-1&&d!==a[0].length-2))&&g){var d=this.$(".delta"),a=a[0].slice(-2),a=a[1]-a[0],g=this.format_value(a),b=(a>=0?"+":"")+g;d.stop(true,true);d.smartFadeOut(500,function(){$(this).text(b)}).smartFadeIn(500)}},update_trend:function(a){this.$el.graph("trend",{data:a[0],slot:this,padding_offset:a[1],callback:_.bind(this.model.display_enqueued,
this.model)})},tick:function(a){this.new_period();this.update_delta(a);this.update_trend(a)},_create_periods:function(a){var d=Raphael.tools.width_distribution(a.length,this.$el.actual("width")),g=this.timespan_class,b=this.timespans[this.model.get("timespan")],f=b.mapper,h=b.modulus,j=b.extra_class||"",u=0,a=$.map(a,function(a,b){var e='<span class="'+g+" "+j+'" style="left:'+u+"px;width:"+d[b]+'px">'+(b%h===0?f(a):"")+"</span>";u=u+d[b];return e});return $(a.join(""))},new_period:function(){var a=
this.timespans[this.model.get("timespan")],d=a.mapper,g=a.modulus,a=Raphael.constants.UPDATE_ANIMATION_DURATION/2,b=this.$("span."+this.timespan_class),f=this.model.periods;b.stop(true,true);b.smartFadeOut(a,_.bind(function(){_.each(b,function(a,b){b%g===0&&$(a).text(d(f[b]))})},this)).smartFadeIn(a)},format_value:function(a){return D.u.format_number(a,2,6)}});_.extend(Ducksboard.Backbone.slot_kinds,{CounterTrend:a});_.extend(Ducksboard.Backbone.slot_views,{CounterTrendView:j})})();
(function(){var a=D.Backbone.slot_kinds.CounterTrend.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new d({model:this})}}),j=a.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new g({model:this})},process_initial_data:function(a){this.data_last=_.pluck(a,"value");this.data_last_timestamps=_.pluck(a,"timestamp");a.shift();this.periods=_.pluck(a,"period");this.period_limits=_.pluck(a,"timestamp");this.periods.shift();
this.view.render_initial_data(this.filled_data())},clean_data:function(){a.prototype.clean_data.apply(this,arguments);this.data_last_timestamps.unshift(null)},data_last_index:function(){return a.prototype.data_last_index.apply(this,arguments)+1},filled_data:function(){var a=null,d=-1,e=_.map(this.data_last,function(e,h){if(e===null){a===null&&(d=h);return 0}if(a===null){a=e;return 0}var g=e-a;a=e;return g});e.shift();return[e,d]}}),e=D.Backbone.slot_views.CounterTrendView.extend({render_initial_data:function(a){var d=
this._create_periods(this.model.periods);this.$el.append(d[0]);this.$el.append(d[1]);this.update_counter(a);this.update_delta(a);this.update_trend(a)},_create_periods:function(a){var d=Raphael.tools.width_distribution(a.length,this.$el.actual("width")),e=this.timespan_class,g=this.timespans[this.model.get("timespan")],j=g.mapper,q=g.modulus,l=g.extra_class||"",g=$.map(a,function(a,b){return'<div class="'+e+'" style="width:'+d[b]+'px"></div>'}),k=0,a=$.map(a,function(a,b){var g='<span class="'+e+" "+
l+'" style="left:'+k+"px;width:"+d[b]+'px">'+(b%q===0?j(a):"")+"</span>";k=k+d[b];return g});return[$(g.join("")),$(a.join(""))]}}),d=e.extend({template:"slot_chart",timespan_class:"timespan-hard",colorify:function(){},update_delta:function(){},update_trend:function(a){var d={stroke:this.model.get("color")?this.model.get("color"):this.$el.css("color"),fill:"none","stroke-width":this.get_stroke_width()};this.$el.graph("line",{data:a[0],slot:this,padding_offset:a[1],path_attrs:d,callback:_.bind(this.model.display_enqueued,
this.model)})},format_value:function(a){return D.u.format_number(a,2,18)},get_stroke_width:function(){var a;switch(D.d.current.id){case "tv1080":a=7;break;case "tv720":a=5;break;default:a=4}return a}}),g=d.extend({update_counter:function(a){var e=d,a=_.reduce(a[0],function(a,b){return a+b},0);e.prototype.update_counter.call(this,[[a]])}});_.extend(Ducksboard.Backbone.slot_kinds,{AbsoluteChart:a,Chart:j});_.extend(Ducksboard.Backbone.slot_views,{AbsoluteChartView:d,BaseChartView:e,ChartView:g})})();
(function(){var a=D.Backbone.slot_kinds.Chart.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new e({model:this});this._super=D.Backbone.slot_kinds.Chart},process_initial_data:function(){this._super.prototype.process_initial_data.apply(this,arguments);this.trigger("initialdata",this)},update:function(a){return this._super.prototype.update.call(this,a)},display:function(a){this._super.prototype.display.call(this,a);this.widget.draw_all_slots()},tick:function(a){var e=
a[this.get("timespan")];if(_.last(this.periods)!==e){this._super.prototype.tick.apply(this,arguments);this.trigger("periods",this)}}}),j=a.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new e({model:this});this._super=D.Backbone.slot_kinds.AbsoluteChart},clean_data:D.Backbone.slot_kinds.AbsoluteChart.prototype.clean_data,data_last_index:D.Backbone.slot_kinds.AbsoluteChart.prototype.data_last_index,filled_data:D.Backbone.slot_kinds.AbsoluteChart.prototype.filled_data}),
e=D.Backbone.slot_views.ChartView.extend({header_legend_template:"slot_line_chart_header_legend",bottom_legend_template:"slot_line_chart_legend",render_initial_data:function(){},update_trend:function(){this.model.widget.draw_all_slots()},tick:function(){},colorify:function(){},update_delta:function(){},update_counter:function(){},render:function(){this.setElement(this.render_header_legend());this.render_bottom_legend();this.colorify();return this},render_header_legend:function(){var a=this.model.widget.view.$("header span:last"),
e=$.tmpl(this.header_legend_template,this.template_data());a.length===0?e.prependTo(this.model.widget.view.$("header h4")):e.insertAfter(a);this.model.get("color")&&e.css("color",this.model.get("color"));return e},render_bottom_legend:function(){var a=this.model.widget.view.$("section ul.legend"),e=this.template_data(),b=$.tmpl(this.bottom_legend_template,e),e=a.find(".label-"+e.layout);e.length?e.replaceWith(b):b.appendTo(a);this.model.get("color")&&$("span.icon",b).css("background-color",this.model.get("color"))},
update_line:function(a){var e=this.model.get("color")?this.model.get("color"):this.$el.css("color"),b=this.model.filled_data();if(b[0].length!==0){e={stroke:e,fill:"none","stroke-width":this.get_stroke_width()-1};this.model.widget.view.chart.graph("line",{data:b[0],slot:this,padding_offset:b[1],path_attrs:e,paper:this.model.widget.view.paper,factors:a,callback:_.bind(this.model.display_enqueued,this.model)})}},_create_periods:function(){},new_period:function(){}});_.extend(Ducksboard.Backbone.slot_kinds,
{LineChart:a,AbsoluteLineChart:j});_.extend(Ducksboard.Backbone.slot_views,{LineChartView:e})})();
(function(){var a=D.Backbone.slot_kinds.LineChart.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new e({model:this});this._super=D.Backbone.slot_kinds.Chart}}),j=D.Backbone.slot_kinds.AbsoluteLineChart.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new e({model:this});this._super=D.Backbone.slot_kinds.AbsoluteChart}}),e=D.Backbone.slot_views.LineChartView.extend({update_line:function(a){var e=this.model.get("color")?
this.model.get("color"):this.$el.css("color"),b=this.model.filled_data();if(b[0].length!==0){e={stroke:e,fill:e,"stroke-width":this.get_stroke_width()-2};this.model.widget.view.chart.graph("area",{data:b[0],slot:this,padding_offset:b[1],path_attrs:e,paper:this.model.widget.view.paper,factors:a,callback:_.bind(this.model.display_enqueued,this.model)})}}});_.extend(Ducksboard.Backbone.slot_kinds,{AreaChart:a,AbsoluteAreaChart:j});_.extend(Ducksboard.Backbone.slot_views,{AreaChartView:e})})();
(function(){var a=D.Backbone.slot_kinds.AbsoluteLineChart.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new e({model:this});this._super=D.Backbone.slot_kinds.AbsoluteChart},filled_data:function(){var a=this.collection.indexOf(this);if(a>0)var e=this.collection.models[a-1].filled_data()[0];var b=this.oldest_value,f=-1;return[_.map(this.data_last,function(a,d){a!==null&&(b=a);b===null&&(f=d);b=b===null?0:b;return e?b+e[d]:b}),f,e]}}),j=D.Backbone.slot_kinds.LineChart.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,
arguments);this.view=new e({model:this});this._super=D.Backbone.slot_kinds.Chart},filled_data:function(){var a=this.collection.indexOf(this);if(a>0)var e=this.collection.models[a-1].filled_data()[0];var b=this.oldest_value?this.oldest_value:0,f=-1,a=_.map(this.data_last,function(a,d){fill=e?e[d-1]:0;if(a===null){b===null&&(f=d);return fill}if(b===null){b=a;return fill}var j=a-b+fill;b=a;return j});a.shift();return[a,f,e]}}),e=D.Backbone.slot_views.LineChartView.extend({update_line:function(a){var e=
this.model.get("color")?this.model.get("color"):this.$el.css("color"),b=this.model.filled_data();b[0].length!==0&&this.model.widget.view.chart.graph("stacked",{data:b[0],base_data:b[2],slot:this,padding_offset:b[1],path_attrs:{stroke:e,fill:e,"stroke-width":0},paper:this.model.widget.view.paper,factors:a,callback:_.bind(this.model.display_enqueued,this.model)})}});_.extend(Ducksboard.Backbone.slot_kinds,{StackedChart:a,RelativeStackedChart:j});_.extend(Ducksboard.Backbone.slot_views,{StackedChartView:e})})();
(function(){var a=D.Backbone.Slot.extend({poll_id:void 0,defaults:{no_appearance:true},feedback_while_fetching:false,initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new j({model:this})},start:function(){this.in_current_dashboard()&&this.poll_data()},append_widget_id:function(a){return/\?.+$/.test(a)?a+"&"+this.widget.id:a+"?"+this.widget.id},get_data:function(){var a=this.widget.data_source.get("iframe_url"),d=this.widget.data_source.get("refresh_mode")||
"0";return{timestamp:moment().unix(),value:{source:this.append_widget_id(a),poll_frequency:parseInt(d,0)*6E4}}},poll_data:function(){this.clear_timers();data=this.get_data();this.view.update_iframe(data);if(data.value.poll_frequency)this.poll_id=setTimeout(_.bind(function(){this.poll_data()},this),data.value.poll_frequency)},clear_timers:function(){this.poll_id&&window.clearTimeout(this.poll_id)},unsubscribe:function(){D.Backbone.Slot.prototype.unsubscribe.apply(this,arguments);this.clear_timers()}}),
j=D.Backbone.SlotView.extend({template:"slot_iframe",item_template:"slot_iframe_item",crossfade_duration:1500,events:{click:"view_iframe"},template_data:function(){var a=D.Backbone.SlotView.prototype.template_data.apply(this,arguments);return _.extend(a,{widget_id:this.model.widget.id})},update_iframe:function(a){this.url=a.value.source;var d=this.$("iframe"),a=$.tmpl(this.item_template,_.extend(a.value,{klass:"new"}));d.replaceWith(a);d.filter(":not(.new)").smartFadeOut(this.crossfade_duration);
a.smartFadeIn(this.crossfade_duration,function(){$(this).removeClass("new");d.remove()})},remove_iframe:function(){this.$("").remove()},view_iframe:function(a){this.url&&this.add_context_action(a,{label:"View original site",url:this.url,is_public:true})}});_.extend(Ducksboard.Backbone.slot_kinds,{Iframe:a})})();
(function(){var a=D.Backbone.Model.extend({idAttribute:"service_id",api_translation:[["service_id","account_id"]],initialize:function(a,d){this.widget=d.widget},load_service_params:function(){return _.any(this.params,function(a){return a.template_data&&a.template_data.load_service_params})},retry_service_params:function(){return this.widget.retry_service_params}}),j=D.Backbone.Model.extend({idAttribute:"widget_id",urlRoot:"/api/widgets/",current_error_code:null,retry_service_params:void 0,kind:void 0,
kind_name:void 0,service_kind:void 0,description:void 0,slots:void 0,timezone:void 0,api_translation:[["widget_id","id"]],slot_attrs:{},initialize:function(b,d){this.dashboard=d&&d.dashboard;this.service=d&&d.service;var h=this.__proto__&&this.__proto__.available_sizes;if(h){this.get("width")||this.set({width:h[0][0]});this.get("height")||this.set({height:h[0][1]})}_.each(["width","height","row","column"],_.bind(function(a){this.set(a,parseInt(this.get(a)));this.on("change:"+a,function(b,d){b.set(a,
parseInt(d))})},this));this.timezone=this.timezone||D.bb.account.get("timezone");this.data_source=new a({},{widget:this});this.data_source.params=this.data_source_params;this.slots=new D.Backbone.SlotList;this.create_slots();this.view=new (this.view_cls?this.view_cls:e)({model:this})},slot_defs:{},data_source_params:{},css_classes:"",create_slots:function(a,d){var e=_.isFunction(this.slot_defs)?this.slot_defs():this.slot_defs;_.each(e,_.bind(function(e,h){var g=new e.kind(_.extend({layout:h},e.defaults),
{widget:this});a?g.set(a[h]):this.slot_attrs&&g.set(this.slot_attrs[h]);this.slots.add(g);d&&g.start()},this));d&&this.bind_error_notifications()},delete_slots:function(a){_.isUndefined(a)&&(a=400);var d=this.slots.map(_.bind(function(d){d.unsubscribe();var e=$.Deferred();d.view.$el.transition({opacity:0},a,_.bind(function(){this.view.remove();this.url_view&&this.url_view.remove();e.resolve()},d));return e.promise()},this));this.slots=new D.Backbone.SlotList;return d},extract_slot_attrs:function(){var a=
{};this.slots.each(function(d){a[d.get("layout")]=d.toJSON()});return _.isEmpty(a)?this.slot_attrs:a},reload_slots:function(a,d,e){_.isUndefined(d)&&(d=400);this.slot_attrs=this.extract_slot_attrs();a=this.delete_slots(d);e&&a.push(e);$.when.apply(null,a).then(_.bind(function(){this.create_slots(null,false);this.slots.each(function(a){a.view.render().$el.css({opacity:1});a.start()})},this))},can_edit_appearance:function(){return!_.all(this.slots.pluck("no_appearance"),_.identity)||this.isNew()&&this.service.kind===
"custom"},get_timespan_slots:function(){var a=this.slots.select(function(a){return a.initial_data_type==="timespan"});return!_.any(a,function(a){return a.allowed_timespans.length>1})?[]:a},toDucksboardJSON:function(){var a={};this.slots.each(function(d){a[d.get("layout")]=d.toDucksboardJSON()});var d=_.extend(this.toJSON(),{kind:this.kind,dashboard:this.dashboard.get("slug"),wiki_url:this.wiki_url});return{widget:D.u.to_api(this.api_translation,d),slots:a,content:this.data_source.toDucksboardJSON()}},
current_status:function(){var a={widget:this.toJSON(),data_source:this.data_source.toJSON(),slots:{}};this.slots.each(function(d){a.slots[d.get("layout")]=d.toJSON()});return a},set_all:function(a){a.widget&&this.set(a.widget);a.data_source&&this.data_source.set(a.widget);_.each(_.pairs(a.slots),_.bind(function(a){var b=a[0],a=a[1];this.slots.get(b).set(a);this.slots.get(b).old_label=void 0},this))},from_api:function(a){a.content=D.u.from_api(this.data_source.api_translation,a.content);a.widget=D.u.from_api(this.api_translation,
a.widget);_.each(a.slots,function(d,e){a.slots[e]=D.u.from_api(this.slots.get(e).api_translation,d)},this);return a},sync:function(a,d,e){if(_.include(["create","update"],a)){d=JSON.stringify(this.toDucksboardJSON());e.contentType="application/json";e.data=e.data||d}return Backbone.sync.call(this,a,this,e)},parse:function(a){return D.u.from_api(this.api_translation,a.widget)},clone_url:function(){return this.url()+"/copy"},start:function(a){this.view.render();this.slots.each(function(d){d.view.$el.show();
if(a){d.view.render();d.start()}})},setup_new:function(b){var d=D.u.from_api(a.api_translation,b.content),e=d.service_id;if(e&&D.Backbone.services.get(e))this.service=D.Backbone.services.get(e);this.data_source.set(d);this.slots.each(function(a){a.set(b.slots[a.get("layout")])});this.set(b.widget);D.bb.account.update_mixpanel()},setup_and_start:function(a,d){_.isUndefined(d)&&(d=true);this.setup_new(a);this.start(d)},bind_error_notifications:function(){_.each(this.slots.pluck("label"),function(a){this.listenTo(D.ws,
"error:"+a,this.error);this.listenTo(D.ws,"success:"+a,this.success)},this);this.listenTo(this.data_source,"change",this.success)},unbind_error_notifications:function(){_.each(this.slots.pluck("label"),function(a){this.stopListening(D.ws,"error:"+a);this.stopListening(D.ws,"success:"+a)},this);this.stopListening(this.data_source,"change")},error:function(a){if(a!==this.current_error_code&&this.handles_error_code(a)){this.current_error_code=a;this.view.error(a)}},success:function(){if(this.current_error_code){this.current_error_code=
null;this.view.success()}},handles_error_code:function(a){return a===401},has_multiple_slot_kinds:function(){var a=_.keys(this.slots.groupBy(function(a){return a.get_slot_kind()}));this.slot_kinds=a;return a.length>1},is_visible:function(){return D.bb.dashboards.current&&this.dashboard===D.bb.dashboards.current},is_exportable_to_csv:function(){return _.some(this.slots.filter(function(a){return a.is_exportable_to_csv()},this))}}),e=D.Backbone.View.extend({template:"widget",contextual_template:"widget_contextual",
error_template:"widget_error",events:{click:"show_contextual","click .dragger":"dragging","click .error .authorize":"authorize","click .error .preferences":"show_preferences"},initialize:function(){_.extend(this.events,e.prototype.events);this.container=this.setup_container()},setup_container:function(a,d){if(this.model.dashboard){var e,a=a||this.model.get("width"),d=d||this.model.get("height");if(this.model.isNew()){var g=this.model.dashboard.view.gridster;e=g.next_position(a,d);this.model.set({column:e.col,
row:e.row});e=$("<li></li>");g.add_widget(e,a,d)}else e=$.tmpl("gridster_container",{col:this.model.get("column"),row:this.model.get("row"),sizex:a,sizey:d});return e}},template_data:function(){return _.extend({kind:this.model.kind,css_classes:_.result(this.model,"css_classes")},this.model.toJSON())},render:function(){this.setElement($.tmpl(this.template,this.template_data(),{model:this.model}));this.append();this.prepare_slots_rendering();this.model.slots.each(function(a){a.view.add_loading_layer()});
this.$el.show();return this},prepare_slots_rendering:function(){},notify:function(){this.model.get("sound")&&this.play_sound();var a=this.$el;if(this.model.is_visible()&&!a.hasClass("updated")){a.addClass("updated");var d=function(){a.removeClass("updated")};Modernizr.cssanimations&&a.animationEnd("glow",d);_.delay(d,3E3)}},error:function(a){a={message:this.error_code_to_message(a),uses_external_authentication:this.model.service.uses_external_authentication,is_public:D.bb.account.get("readonly")};
a=$.tmpl(this.error_template,a);this.$(".error").remove();this.$el.prepend(a)},success:function(){this.$(".error").remove()},error_code_to_message:function(a){return D.u.error_message(a)},play_sound:_.throttle(function(){$("#sound-player").data("ready")&&$("#sound-player").jPlayer("stop").jPlayer("play")},Raphael.constants.UPDATE_ANIMATION_DURATION),show_contextual:function(a){var d="/api/widgets/"+this.model.id+"/export";this.add_context_action(a,{label:"Widget preferences",url:"#settings/widget/"+
this.model.id,css_class:"preferences",icon:"settings"});D.bb.account.can_export_data()&&this.model.is_exportable_to_csv()&&this.add_context_action(a,{label:"Export CSV",url:d,css_class:"export-csv",icon:"csv icon-small",external:true});this.render_contextual(a)},dragging:function(a){a.stopImmediatePropagation()},show_preferences:function(a){a.stopPropagation();D.Backbone.app.navigate(_.sprintf("settings/widget/%d",this.model.id),true)},authorize:function(a){a.stopPropagation();return window.open(this.model.service.auth_url(true))},
hide_widget:function(){this.model.dashboard.view.gridster.remove_widget(this.container,_.bind(function(){this.model.delete_slots();this.model.dashboard.view.update_positions(true)},this))},remove_from_frontend:function(){this.hide_widget();this.model.collection.remove(this.model)},add_context_action:function(a,d){var e=a.originalEvent;e.ducksboard_actions||(e.ducksboard_actions=[]);e.ducksboard_actions.push(d)},render_contextual:function(a){if(!a.isPropagationStopped()&&D.d.interactive&&this.model.dashboard.kind.get("editable")){var d=
a.originalEvent.ducksboard_actions;D.Backbone.account.get("readonly")&&(d=_.filter(d,function(a){return a.is_public}));if(!_.isEmpty(d)){var e=this.model.dashboard.view.$el,d=$.tmpl(this.contextual_template,{actions:d},{is_external:D.u.is_external});d.css({top:a.pageY-e.offset().top,left:a.pageX-e.offset().left}).appendTo(e).fadeIn();a.originalEvent.$contextual=d;d.data("cleanup",function(){$(this).remove()});$("li.preferences a",d).click(_.bind(function(){mixpanel.track("widget preferences open",
{widget_kind:this.model.kind,service_kind:this.model.service.kind})},this))}}},append:function(){this.$el.appendTo(this.container)},get_position:function(){return{row:this.container.attr("data-row"),column:this.container.attr("data-col")}},remove:function(){this.model.unbind_error_notifications();this.hide_widget();D.Backbone.View.prototype.remove.apply(this)}}),d=D.Backbone.View.extend({template:"widget_settings",events:{"click .delete":"destroy","click .copy-to > a":"show_list","click #dashboards-to-copy-list li":"clone_widget",
"click .save":"save","click .sound .enable":"enable_sound","click .sound .disable":"disable_sound","click .close":"close"},tabs:["create_account","accounts","appearance","data_api","content","alerts","advanced","feedback"],template_data:function(){var a={is_new:this.model.isNew(),is_custom:this.model.service.kind=="custom"};return _.extend(a,this.model.toJSON())},render:function(a){this.setElement($.tmpl(this.template,this.template_data()));var d=this.$("nav");this.sections={};var e=0;_.each(this.tabs,
_.bind(function(a){var b=new D.Backbone.widget_tabs[a]({container:this});if(b.enabled){this.sections[a]=b;this.sections[a].tab=d.find("a").eq(e++)}else b.remove()},this));var g=_.indexOf(_.keys(this.sections),a),g=g>-1?g:0;d.tabs(this.$(".pane"),{initialIndex:g,onBeforeClick:function(){D.u.hide_tooltips()},onClick:_.bind(function(a,b){var d=_.keys(this.sections)[b],e=this.sections[d];D.u.track_tab(a,"select widget tab",{tab:d,widget_kind:this.model.kind,service_kind:this.model.service.kind});e&&D.u.focus_on_first(e.$el)},
this)});this.render_dashboards();_.each(this.sections,function(a){_.isFunction(a.cb_appended)&&a.cb_appended()});_.defer(_.bind(function(){var a=_.keys(this.sections)[g];D.u.focus_on_first(this.sections[a].$el)},this));return this},render_dashboards:function(){var a=this.$("#dashboards-to-copy-list"),d=D.Backbone.dashboards.filter(function(a){return a.kind.get("editable")});_.each(d,function(d){$.tmpl("dashboard_to_copy_item",d.toJSON(),{truncate:function(a){var b=this.data.label;return b.length>
a+3?b.substring(0,30)+"...":b}}).appendTo(a)})},save:function(a){if(this.$(".error").length){a=_.keys(_.groupBy(this.$(".error"),function(a){return $(a).parents(".pane").tmplItem().data.section}));_.each(a,_.bind(function(a){(a=this.sections[a])&&this._mark_tab(a.tab)},this))}else{var d=this.model.current_status();this.model.set({title:this.$(".title input").val(),sound:this.$(".sound").hasClass("enabled")},{silent:true});_.each(this.sections,function(a){a.set_from_input()});var e=D.u.sending($(a.currentTarget),
"saving preferences");if(e.blocked)return false;var g=this.model.isNew();this.model.save({},{success:_.bind(function(a,b){e.complete();b=this.model.from_api(b);g?this.setup_new_widget(a,b):this.update_on_changes(a,b)},this),error:_.bind(function(a,b){e.complete();this.model.set_all(d);this._show_all_errors(a,b);mixpanel.track(g?"create widget error":"update widget error",{widget_kind:this.model.kind,service_kind:this.model.service.kind})},this)})}},destroy:function(a){a&&a.preventDefault();if(!this.model.isNew())this.confirm_view=
this.$("header").confirm({text:_.sprintf("Sure you want to delete this %s widget? It won't come back...",_.capitalize(this.model.service.kind_name)),continue_text:"Delete",discard_text:"Keep",continue_action:_.bind(this._destroy,this)}).data("confirm_view")},_destroy:function(){this.model.destroy({wait:true}).complete(_.bind(function(){this.confirm_view&&this.confirm_view.hide();$.fancybox.close();this.model.view.remove()},this))},show_list:function(a){a&&a.preventDefault();if(this.model.isNew())return false;
var d=D.bb.account.available_widgets_count(),e=this.model.service_kind=="custom"&&d.custom<=0;if(d.total<=0||e){e?Backbone.history.navigate("upgrade/custom_widget_count",true):Backbone.history.navigate("upgrade/widget_count",true);return false}d=$("#dashboards-to-copy-list");d.fadeToggle();a.originalEvent.$contextual=d},clone_widget:function(a){$("#dashboards-to-copy-list").fadeOut();if(this.model.isNew())return false;a=D.Backbone.dashboards.get(a.currentTarget.id);this._clone_widget(a);return false},
_clone_widget:function(a){var d=D.u.sending($(".copy-to > a"),"copying widget");if(d.blocked)return false;var e=this.model.clone_url(),g=this.model.clone({silent:true}),j=g.get("width"),q=g.get("height");g.clear();g.dashboard=a;g.view.container=g.view.setup_container(j,q);g.service=this.model.service;g.save({},{url:e,data:JSON.stringify({dashboard:a.get("slug"),row:g.get("row"),column:g.get("column")}),complete:d.complete,success:function(d,e){e=g.from_api(e);a.widgets.add(g);g.setup_and_start(e,
false)},error:_.bind(function(a,b){this._show_all_errors(a,b)},this)})},enable_sound:function(){this.$(".sound").addClass("enabled")},disable_sound:function(){this.$(".sound").removeClass("enabled")},close:function(a){a.preventDefault();this.abort_creation();$.fancybox.close()},abort_creation:function(){if(this.model.isNew()){this.model.dashboard.view.gridster.remove_widget(this.model.view.container);this.track_create_abandon();D.Backbone.dashboards.current.widgets.remove(this.model)}},track_create_abandon:function(){var a=
true;this.model.service.user_managed&&(a=D.Backbone.services.any(function(a){return a.get("service_kind")===this.model.service.kind},this));mixpanel.track("create widget abandon",{widget_kind:this.model.kind,service_kind:this.model.service.kind,has_service:a?1:0})},setup_new_widget:function(a,d){this.model.setup_and_start(d);this.model.service.kind==="custom"?D.Backbone.app.navigate("settings/widget/"+this.model.id+"/data_api",true):$.fancybox.close()},update_on_changes:function(a,d){$.fancybox.close();
if(_.any(d.changed)){if(d.changed.widget){this.model.set(d.widget);var e=this.model.get("title");this.model.view.$("header h4").fadeOut(function(){spans=$(this).children();$(this).text(e).fadeIn();$(this).prepend(spans)})}if(d.changed.slots||d.changed.content){this.model.data_source.set(d.content);this.model.reload_slots(d.slots,false)}}},_mark_tab:function(a){if(!a.hasClass("current"))a.addClass("error").one("click",function(){$(this).removeClass("error")})},_show_all_errors:function(a,d){if(_.str.include(d.getResponseHeader("Content-Type"),
"application/json")){var e=JSON.parse(d.responseText);if("errors"in e)if(e.code===D.u.api_error_codes.unique_error){_.each(e.errors.labels,_.bind(function(a,b){var d=this.model.slots.get(b);d.url_view.show_errors({label:a});d.set({label:d.previous("label")})},this));this._mark_tab(this.sections.urls.tab)}else{e=e.errors;if(!_.isString(e)){e.widget&&this.show_errors(e.widget);if(e.content){var g=this.model.service.kind==="custom"?this.sections.data_api:this.sections.content;g.show_errors(e.content);
this._mark_tab(g.tab)}if(e.slots){g=this.sections.appearance;g.show_errors(e.slots);this._mark_tab(g.tab)}}}}},remove:function(){this.$("nav").data("tabs").destroy();_.each(this.sections,function(a){a.remove()});this.sections={};D.Backbone.View.prototype.remove.apply(this)}}),g=D.Backbone.Collection.extend({model:j,url:"/api/widgets/",comparator:function(a){var d=a.get("column")?a.get("column"):9999,a=a.get("row")?a.get("row"):9999;return parseInt(a)*1E3+parseInt(d)},get_by_service:function(a){return this.filter(function(d){return d.service&&
d.service.id===a})},save_positions:function(){var a={};_.each(this.models,function(d){a[d.id]={column:d.get("column"),row:d.get("row")}});$.ajax(this.url+"/positions",{type:"POST",data:JSON.stringify(a),contentType:"application/json"})},save_positions_with_delay:_.debounce(function(){this.save_positions()},2E3)});_.extend(Ducksboard.Backbone,{Widget:j,WidgetView:e,WidgetSettingsView:d,WidgetList:g,widget_kinds:{},widget_tabs:{}})})();
(function(){var a=D.Backbone.WidgetView.extend({fake_slot_template:"slot_line_chart",timespan_class:"timespan-hard",timespan_span_class:"timespan-hard",tick_count:5,section:void 0,timespans:{daily:{modulus:3,mapper:function(a){a=""+a;return a.length<2?"0"+a:a},extra_class:"small"},weekly:{modulus:1,mapper:function(a){return["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][a-1]},extra_class:"big"},monthly:{modulus:5,mapper:function(a){a=""+a;return a.length<2?"0"+a:a},extra_class:"small"},quarterly:{modulus:2,
mapper:function(a){return"W"+a},extra_class:"small"},yearly:{modulus:1,mapper:function(a){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a-1]},extra_class:"small"}},render:function(){if(!this.model.is_compound()&&this.model.get("height")==2){this.timespan_span_class="timespan-hard-double";this.tick_count=11}D.Backbone.WidgetView.prototype.render.apply(this,arguments);this.chart=this.$("section .timespan .canvas");this.timespan=this.$("section .timespan");this._render_paper();
this._render_ticks();this.$el.fadeIn();return this},prepare_slots_rendering:function(){$.tmpl(this.fake_slot_template,{kind:this.model.kind,extra_classes:this.model.fake_slot_extra_css}).appendTo(this.$(".inner"));D.bb.SlotView.prototype.add_loading_layer.call(this.model,this.model)},clean:function(){var a=$.Deferred();this.timespan.fadeOut(_.bind(function(){$(this.timespan).find(":not(div.canvas)").remove()},this)).fadeIn(_.bind(function(){this._render_paper();this._render_ticks();a.resolve()},this));
return a.promise()},new_ticks:function(a){var b=Raphael.constants.UPDATE_ANIMATION_DURATION/2,d=this.$("span.ticks");d.stop(true,true);d.fadeOut(b,_.bind(function(){_.each(d,function(b,d){$(b).text(a[d])})},this)).fadeIn(b)},render_periods:function(){var a=this._create_periods(this.model.periods());this.timespan.prepend(a[0]);this.timespan.prepend(a[1])},new_period:function(){var a=this.timespans[this.model.current_timespan()],b=a.mapper,d=a.modulus,a=Raphael.constants.UPDATE_ANIMATION_DURATION/2,
e=this.$("span."+this.timespan_span_class),f=this.model.periods();e.stop(true,true);e.fadeOut(a,_.bind(function(){_.each(e,function(a,e){e%d===0&&$(a).text(b(f[e]))})},this)).fadeIn(a)},_create_periods:function(a){var b=Raphael.tools.width_distribution(a.length,this.$el.actual("width")),d=this.timespan_class,e=this.timespans[this.model.current_timespan()],f=e.mapper,h=e.modulus,g=e.extra_class,e=$.map(a,function(a,e){return'<div class="'+d+'" style="width:'+b[e]+'px"></div>'}),j=0,a=$.map(a,function(a,
e){var n='<span class="'+d+" "+g+'" style="left:'+j+"px;width:"+b[e]+'px">'+(e%h===0?f(a):"")+"</span>";j=j+b[e];return n});return[$(e.join("")),$(a.join(""))]},_render_paper:function(){this.chart.graph("paper",{widget:this})},_render_ticks:function(){var a=this.tick_count+1,b=Raphael.tools.width_distribution(a,this.chart.actual("height")),d=0,e=$.map(_.range(1,a),function(a,e){var f=$.tmpl('<div class="${klass}"></div>',{klass:"ticks"});d=d+b[e];f.css({height:b[e],"line-height":b[e]+10+"px",bottom:d});
return f.tmplItem().nodes}),d=0,a=$.map(_.range(1,a),function(a,e){var f=$.tmpl('<span class="${klass}">${value}</div>',{klass:"ticks",value:a});d=d+b[e];f.css({height:b[e],"line-height":b[e]+7+"px",bottom:d});return f.tmplItem().nodes});this.chart.append(e);this.chart.append(a)}}),j=D.Backbone.Widget.extend({subtitles:[],colors:[],centered:true,multiline_slots:[],slots_fetched:[],slots_ticked:[],trend_defs:{},kind_cls:D.Backbone.slot_kinds.LineChart,view_cls:a,fake_slot_extra_css:"s-line-chart",
create_slots:function(){if(this.view){$(this.view.timespan).find(":not(div.canvas)").remove();this.view._render_paper();this.view._render_ticks()}this.multiline_slots=[];D.Backbone.Widget.prototype.create_slots.apply(this,arguments);this.slots.each(function(a){if(a.get("timespan")){this.listenTo(a,"initialdata",this.got_slot_initial_data);this.listenTo(a,"periods",this.new_periods);this.multiline_slots.push(a)}},this)},delete_slots:function(){var a=D.Backbone.Widget.prototype.delete_slots.apply(this,
arguments);a.push(this.view.clean());return a},slot_defs:function(){_.isEmpty(this.trend_defs)&&$.error("Subclasses must define trend_defs");ret={};_.each(this.subtitles,function(a,b){ret[b+1]={kind:this.kind_cls,defaults:_.extend({subtitle:a,timespan:"daily"},this.trend_defs)}},this);_.each(this.colors,function(a,b){ret[b+1].defaults.color=a},this);return ret},get_slots_data:function(){var a=_.map(this.multiline_slots,function(a){filled=a.filled_data();return filled[0]});return _.flatten(a)},find_best_ticks:function(){return Raphael.tools.zoom_ticks(this.get_slots_data(),
this.view.chart.actual("height"),this.view.tick_count,this.centered)},got_slot_initial_data:function(a){this.slots_fetched.push(a);if(!_.difference(this.multiline_slots,this.slots_fetched).length){this.view.render_periods();this.draw_all_slots();this.slots_fetched=[]}},draw_all_slots:function(){var a=this.find_best_ticks();if(a[2]){this.view.new_ticks(a[2]);_.each(this.multiline_slots,function(b){b.view.update_line(a)})}},new_periods:function(a){this.slots_ticked.push(a);if(!_.difference(this.multiline_slots,
this.slots_ticked).length){this.view.new_period();this.draw_all_slots();this.slots_ticked=[]}},periods:function(){return this.multiline_slots[0].periods},current_timespan:function(){return this.multiline_slots[0].get("timespan")},is_compound:function(){return this.multiline_slots.length<this.slots.length},css_classes:"floating-header"}),e=j.extend({kind_cls:D.Backbone.slot_kinds.AbsoluteLineChart}),d={centered:false,get_slots_data:function(){var a=_.map(this.multiline_slots,function(a){filled=a.filled_data();
return filled[0]}),a=_.flatten(a);a.push(0);return a}},g=j.extend(d).extend({kind_cls:D.Backbone.slot_kinds.AreaChart,fake_slot_extra_css:"s-area-chart s-relative-area-chart"}),b=e.extend(d).extend({kind_cls:D.Backbone.slot_kinds.AbsoluteAreaChart,fake_slot_extra_css:"s-area-chart s-absolute-area-chart"}),f=_.extend(_.clone(d),{kind_cls:D.Backbone.slot_kinds.StackedChart,fake_slot_extra_css:"s-stacked-chart"}),d=j.extend(f),h=function(a){var b=a?" leaderboard-image":"";return{css_classes:function(){var a=
"compound floating-header "+b;this.leaderboard_defs&&(a=a+(" leaderboard-"+(this.leaderboard_defs.total_subtitles-1)));return a}}},o=j.extend({leaderboard_cls:D.Backbone.slot_kinds.Leaderboard,leaderboard_defs:{},slot_defs:function(){_.isEmpty(this.trend_defs)&&$.error("Subclasses must define trend_defs");_.isEmpty(this.leaderboard_defs)&&$.error("Subclasses must define leaderboard_defs");defs=j.prototype.slot_defs.apply(this,arguments);defs[this.colors.length+1]={kind:this.leaderboard_cls,defaults:this.leaderboard_defs};
return defs}}),f=o.extend(f).extend(h(false)),u=f.extend(h(true)).extend({leaderboard_cls:D.Backbone.slot_kinds.StatusLeaderboard}),h=o.extend(h(false)).extend({kind_cls:D.Backbone.slot_kinds.AbsoluteLineChart});_.extend(Ducksboard.Backbone,{_multiline:{MultilineChartView:a,MultilineChartWidget:j,AbsoluteMultilineChartWidget:e,MultiareaChartWidget:g,AbsoluteMultiareaChartWidget:b,StackedChartWidget:d,AbsoluteMultilineChartLeaderboardWidget:h,StackedChartLeaderboardWidget:f,StackedChartLeaderboardStatusWidget:u}})})();
(function(){var a=D.Backbone.Widget.extend({subtitles:[],colors:[],kind_cls:D.Backbone.slot_kinds.CounterSubtitle,extra_defaults:{},slot_defs:function(){ret={};_.each(this.subtitles,function(a,b){ret[b+1]={kind:this.kind_cls,defaults:{subtitle:a}}},this);_.each(this.colors,function(a,b){ret[b+1].defaults.color=a},this);return ret}}),j=D.Backbone.Widget.extend({trend_defs:{},kind_cls:D.Backbone.slot_kinds.CounterTrend,slot_defs:function(){_.isEmpty(this.trend_defs)&&$.error("Subclasses must define trend_defs");
return{1:{kind:this.kind_cls,defaults:_.extend({timespan:"daily"},this.trend_defs)}}}}),e=j.extend({kind_cls:D.Backbone.slot_kinds.Chart,css_classes:"floating-header"}),d=a.extend({kind_cls:D.Backbone.slot_kinds.CounterBar,css_classes:function(){return _.sprintf("bars-%s",this.slots.length)}}),g=a.extend({kind_cls:D.Backbone.slot_kinds.CounterBox,css_classes:function(){return _.sprintf("boxes-%s",this.slots.length)}}),b=a.extend({kind_cls:D.Backbone.slot_kinds.CounterPin,css_classes:function(){return _.sprintf("pins-%s",
this.slots.length)}}),f=a.extend({kind_cls:D.Backbone.slot_kinds.Gauge,css_classes:function(){return _.sprintf("gauges-%s",this.slots.length)}}),h=a.extend({kind_cls:D.Backbone.slot_kinds.Status}),o=D.Backbone.Widget.extend({kind_cls:D.Backbone.slot_kinds.Timeline,slot_defs:function(){return{1:{kind:this.kind_cls,defaults:{last:D.u.constants.timeline_size}}}}}),u=D.Backbone.Widget.extend({timeline_defs:{},kind_cls:D.Backbone.slot_kinds.CompleteTimeline,slot_defs:function(){return{1:{kind:this.kind_cls,
defaults:this.timeline_defs}}}}),q=D.Backbone.Widget.extend({leaderboard_defs:{},kind_cls:D.Backbone.slot_kinds.Leaderboard,slot_defs:function(){_.isEmpty(this.leaderboard_defs)&&$.error("Subclasses must define leaderboard_defs");return{1:{kind:this.kind_cls,defaults:this.leaderboard_defs}}}}),l=function(a){var b=a?" leaderboard-image":"";return{css_classes:function(){var a=b;this.leaderboard_defs&&(a=a+(" leaderboard-"+(this.leaderboard_defs.total_subtitles-1)));return a}}},k=q.extend(l(false)),
n=q.extend(l(true)).extend({kind_cls:D.Backbone.slot_kinds.TrendLeaderboard}),q=q.extend(l(true)).extend({kind_cls:D.Backbone.slot_kinds.StatusLeaderboard}),l=D.Backbone.Widget.extend({kind_cls:D.Backbone.slot_kinds.Image,slot_defs:function(){return{1:{kind:this.kind_cls,defaults:{no_appearance:true}}}}}),x=l.extend({kind_cls:D.Backbone.slot_kinds.ImageFull,css_classes:"no-border"}),v=D.Backbone.Widget.extend({kind_cls:D.Backbone.slot_kinds.StaticText,slot_defs:function(){return{1:{kind:this.kind_cls,
defaults:{no_appearance:true}}}},css_classes:"no-border post-it"}),w=D.Backbone.Widget.extend({kind_cls:D.Backbone.slot_kinds.Iframe,css_classes:"no-border",slot_defs:function(){return{1:{kind:this.kind_cls,defaults:{no_appearance:true}}}}}),z=D.Backbone.Widget.extend({trend_cls:D.Backbone.slot_kinds.CounterTrend,timeline_cls:D.Backbone.slot_kinds.Timeline,trend_defs:{},timeline_defs:{},slot_defs:function(){_.isEmpty(this.trend_defs)&&$.error("Subclasses must define trend_defs");return{1:{kind:this.trend_cls,
defaults:_.defaults(this.trend_defs,{timespan:"daily"})},2:{kind:this.timeline_cls,defaults:_.defaults(this.timeline_defs,{last:D.u.constants.timeline_size})}}},css_classes:"compound"}),E=z.extend({trend_cls:D.Backbone.slot_kinds.Chart,css_classes:"compound floating-header"}),B=a.extend({kind_cls:D.Backbone.slot_kinds.Funnel}),F=a.extend({kind_cls:D.Backbone.slot_kinds.Completion,css_classes:"floating-header",slot_defs:function(){var b=a.prototype.slot_defs.apply(this,arguments);b[1].kind=this.kind_cls;
b[1].defaults=_.extend(b[1].defaults,this.completion_defs);return b}}),j={TrendWidget:j,ChartWidget:e,BarsWidget:d,BoxesWidget:g,PinsWidget:b,GaugeWidget:f,StatusWidget:h,TimelineWidget:o,CompleteTimelineWidget:u,LeaderboardWidget:k,TrendLeaderboardWidget:n,StatusLeaderboardWidget:q,ImageWidget:l,FullImageWidget:x,TextWidget:v,TrendTimelineWidget:z,ChartTimelineWidget:E,FunnelWidget:B,IframeWidget:w,CompletionWidget:F},j=_.extend(j,D.bb._multiline);_.extend(Ducksboard.Backbone,{widget_templates:j,
wt:j})})();
(function(){var a={events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to pingdom",url:"https://my.pingdom.com"})}},j=D.Backbone.WidgetView.extend(_.clone(a)),e=D.Backbone.wt.MultilineChartView.extend(_.clone(a)),d=D.Backbone.slot_kinds.AbsoluteAreaChart.extend({allowed_timespans:["weekly","monthly"]}),g=D.Backbone.slot_kinds.AbsoluteAreaChart.extend({allowed_timespans:["daily"]}),b=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_time(a)}}),f=
D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["monthly"],initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,arguments);this.view=new b({model:this})}}),h=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["monthly"]}),o={view_cls:j,data_source_params:{check_id:{template:"select",template_data:{load_service_params:true}}}},u={view_cls:j,data_source_params:{check_id:{template:"select",template_data:{load_service_params:true}},timespan_days:{template:"select",
template_data:{options:[{value:"365",display_name:"yearly"},{value:"30",display_name:"monthly"},{value:"7",display_name:"weekly"},{value:"1",display_name:"daily"}]}}}},a=D.Backbone.wt.StatusWidget.extend(o).extend({defaults:{title:"Pingdom Current Status",sound:false},subtitles:["check"],colors:[D.colors.green]}),h=D.Backbone.wt.TrendWidget.extend(u).extend({kind_cls:h,defaults:{title:"Pingdom Average Response Time",sound:false},trend_defs:{subtitle:"ms",color:D.colors.blue,timespan:"monthly"}}),
f=D.Backbone.wt.TrendWidget.extend(u).extend({kind_cls:f,defaults:{title:"Pingdom Downtime",sound:false},trend_defs:{subtitle:"downtime",color:D.colors.red,timespan:"monthly"}}),u=D.Backbone.wt.GaugeWidget.extend(u).extend({defaults:{title:"Pingdom average uptime",sound:false},subtitles:["uptime"],colors:[D.colors.green]}),q=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend(o).extend({view_cls:e,kind_cls:d,defaults:{title:"Pingdom Daily",sound:false},subtitles:["response time"],colors:[D.colors.blue],
trend_defs:{timespan:"monthly"}}),l=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend(o).extend({view_cls:e,kind_cls:d,defaults:{title:"Pingdom Daily",sound:false},subtitles:["uptime"],colors:[D.colors.green],trend_defs:{timespan:"monthly"}}),d=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend(o).extend({view_cls:e,kind_cls:d,defaults:{title:"Pingdom Daily",sound:false},subtitles:["downtime"],colors:[D.colors.red],trend_defs:{timespan:"monthly"}}),k=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend(o).extend({view_cls:e,
kind_cls:g,defaults:{title:"Pingdom Hourly",sound:false},subtitles:["response time"],colors:[D.colors.blue],trend_defs:{timespan:"daily"}}),n=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend(o).extend({view_cls:e,kind_cls:g,defaults:{title:"Pingdom Hourly",sound:false},subtitles:["uptime"],colors:[D.colors.green],trend_defs:{timespan:"daily"}}),e=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend(o).extend({view_cls:e,kind_cls:g,defaults:{title:"Pingdom Hourly",sound:false},subtitles:["downtime"],
colors:[D.colors.red],trend_defs:{timespan:"daily"}}),o=D.Backbone.wt.TimelineWidget.extend(o).extend({view_cls:j,defaults:{title:"Pingdom status changes",sound:false}}),j=D.Backbone.wt.StatusLeaderboardWidget.extend({view_cls:j,data_source_params:{filter_checks:{template:"select_multiple",template_data:{load_service_params:true}},filter_type:{template:"select",template_data:{options:[{value:"all",display_name:"Show all types"},{value:"http",display_name:"Show http checks"},{value:"httpcustom",display_name:"Show httpcustom checks"},
{value:"tcp",display_name:"Show tcp checks"},{value:"udp",display_name:"Show udp checks"},{value:"stmp",display_name:"Show smtp checks"},{value:"pop3",display_name:"Show pop3 checks"},{value:"imap",display_name:"Show imap checks"}]}},filter_status:{template:"select",template_data:{options:[{value:"all",display_name:"Show all checks"},{value:"up",display_name:"Show up checks"},{value:"down",display_name:"Show down checks"},{value:"paused",display_name:"Show paused checks"}]}}},defaults:{title:"Pingdom checks overview",
sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"Name",color1:D.colors.black,subtitle2:"type",color2:D.colors.gray,subtitle3:"RT(ms)",color3:D.colors.gray}}),g=D.Backbone.Service.extend({description:"Uptime and performance monitoring made easy.",signup_url:"http://www.pingdom.com/",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","username"],["auth_password","password"]]),params:{auth_user:{template:"input_text",template_data:{placeholder:"E-mail"}},auth_password:{template:"input_password",
template_data:{placeholder:"Password"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{pingdom_check_status:a,pingdom_avg_response_time_counter:h,pingdom_downtime_counter:f,pingdom_avg_uptime_gauge:u,pingdom_daily_avg_response_time_absolute_area_graph:q,pingdom_daily_avg_uptime_absolute_area_graph:l,pingdom_daily_downtime_absolute_area_graph:d,pingdom_hourly_avg_response_time_absolute_area_graph:k,pingdom_hourly_avg_uptime_absolute_area_graph:n,pingdom_hourly_downtime_absolute_area_graph:e,pingdom_checks_overview_leaderboard:j,
pingdom_outages_timeline:o});_.extend(Ducksboard.Backbone.service_kinds,{pingdom:g})})();
(function(){var a={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=this.model.data_source.get("service_id");D.Backbone.services.get(b);b=_.sprintf("https://teambox.com/");this.add_context_action(a,{label:"Go to Teambox account",url:b})}}),data_source_params:{project_id:{template:"select",template_data:{load_service_params:true}}}},j=_.extend({},a,{defaults:{title:"Teambox project activity",sound:false}}),j=D.Backbone.wt.TimelineWidget.extend(j),
e=_.extend({},a,{defaults:{title:"Teambox project conversations",sound:false}}),d={subtitle:"conversations",color:"rgba(59, 121, 10, 0.65)",timespan:"daily"},g=D.Backbone.wt.TimelineWidget.extend(e),b=D.Backbone.wt.TrendWidget.extend(e).extend({trend_defs:d}),e=D.bb.wt.TrendTimelineWidget.extend(e).extend({trend_defs:d}),f=_.extend({},a,{defaults:{title:"Teambox project tasks",sound:false}}),h={subtitle:"tasks",color:"rgba(59, 121, 10, 0.65)",timespan:"daily"},d=D.Backbone.wt.TimelineWidget.extend(f),
o=D.Backbone.wt.TrendWidget.extend(f).extend({trend_defs:h}),f=D.bb.wt.TrendTimelineWidget.extend(f).extend({trend_defs:h}),u=_.extend({},a,{defaults:{title:"Teambox project tasks by status",sound:false},subtitles:["unassigned","late","hold"],colors:["rgba(59, 121, 10, 0.65)","rgba(11, 52, 2, 0.65)","rgba(37, 177, 228, 0.65)"]}),h=D.Backbone.wt.BoxesWidget.extend(u),u=D.Backbone.wt.BarsWidget.extend(u),a=D.Backbone.wt.GaugeWidget.extend(a).extend({defaults:{title:"Teambox project resolved rate",sound:false},
subtitles:["resolved"],colors:["rgba(59, 121, 10, 0.65)"]}),q=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{teambox_project_tasks_counter:o,teambox_project_tasks_counter_timeline:f,teambox_project_tasks_timeline:d,teambox_project_tasks_by_status_boxes:h,teambox_project_tasks_by_status_bars:u,teambox_project_resolved_rate_gauge:a,teambox_project_conversations_counter:b,teambox_project_conversations_counter_timeline:e,teambox_project_conversations_timeline:g,teambox_project_activity_timeline:j});
_.extend(Ducksboard.Backbone.service_kinds,{teambox:q})})();
(function(){var a=D.colors.blue,j=D.colors.black,e={events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to Google Analytics",url:"https://www.google.com/analytics/"})}},d=D.Backbone.WidgetView.extend(_.clone(e)),g=D.Backbone.wt.MultilineChartView.extend(_.clone(e)),b={view_cls:d,data_source_params:{table_id:{template:"select",template_data:{load_service_params:true}}}},f={view_cls:d,data_source_params:_.extend(_.clone(b.data_source_params),
_.clone({timespan_days:{template:"select",template_data:{options:[{value:"365",display_name:"a year's worth of data"},{value:"30",display_name:"a month's worth of data"},{value:"7",display_name:" a week's worth of data"},{value:"1",display_name:"two day's worth of data"},{value:"0",display_name:"today's data"}]}}}))},d=D.Backbone.wt.TrendWidget.extend(f).extend({defaults:{title:"GA ecommerce transactions",sound:false},trend_defs:{subtitle:"transactions",color:a,timespan:"monthly"}}),e=D.Backbone.wt.MultilineChartWidget.extend(b).extend({view_cls:g,
defaults:{title:"GA Ecommerce",sound:false},subtitles:["transactions revenue"],colors:[a],trend_defs:{timespan:"monthly"}}),h=D.Backbone.wt.TrendWidget.extend(f).extend({defaults:{title:"GA Ecommerce transactions revenue",sound:false},trend_defs:{subtitle:"revenue",color:a,timespan:"monthly"}}),o=D.Backbone.wt.MultilineChartWidget.extend(b).extend({view_cls:g,defaults:{title:"GA Ecommerce",sound:false},subtitles:["items purchased"],colors:[a],trend_defs:{timespan:"monthly"}}),u=D.Backbone.wt.TrendWidget.extend(f).extend({defaults:{title:"GA Ecommerce items purchased",
sound:false},trend_defs:{subtitle:"items",color:a,timespan:"monthly"}}),q=D.Backbone.wt.MultilineChartWidget.extend(b).extend({view_cls:g,defaults:{title:"GA Ecommerce",sound:false},subtitles:["unique purchases"],colors:[a],trend_defs:{timespan:"monthly"}}),l=D.Backbone.wt.TrendWidget.extend(f).extend({defaults:{title:"GA Ecommerce unique purchases",sound:false},trend_defs:{subtitle:"unique purchases",color:a,timespan:"monthly"}}),k=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(b).extend({view_cls:g,
kind_cls:D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["weekly","monthly"]}),defaults:{title:"GA Ecommerce",sound:false},subtitles:["average revenue"],colors:[a],trend_defs:{timespan:"monthly"}}),n=D.Backbone.wt.TrendWidget.extend(f).extend({defaults:{title:"GA Ecommerce average revenue",sound:false},trend_defs:{subtitle:"average revenue",color:a,timespan:"monthly"}}),x={allowed_timespans:["weekly","monthly"],filled_data:function(){filled=D.Backbone.slot_kinds.CounterTrend.prototype.filled_data.call(this);
return[_.map(filled[0],function(a){return a*100}),filled[1]]}},v=D.Backbone.slot_kinds.CounterTrend.extend(x),x=D.Backbone.slot_kinds.AbsoluteLineChart.extend(x),g=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(b).extend({view_cls:g,kind_cls:x,defaults:{title:"GA Ecommerce",sound:false},subtitles:["% conversion rate"],colors:[a],trend_defs:{timespan:"monthly"}}),b=D.Backbone.wt.TrendWidget.extend(f).extend({kind_cls:v,defaults:{title:"GA Ecommerce conversion rate",sound:false},trend_defs:{subtitle:"% conversion rate",
color:a,timespan:"monthly"}}),v=D.Backbone.wt.TrendLeaderboardWidget.extend(f).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Most popular products",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:a,subtitle2:"units sold",color2:j,subtitle3:"pct",color3:j}}),a=D.Backbone.wt.TrendLeaderboardWidget.extend(f).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Top sources for sales",sound:false},leaderboard_defs:{total_subtitles:3,
subtitle1:"",color1:a,subtitle2:"units sold",color2:j,subtitle3:"pct",color3:j}}),j=D.Backbone.Service.extend({description:"Your data is in there somewhere. Bring those key performance indicators to the forefront with these widgets.",signup_url:"http://www.google.com/analytics/"});_.extend(Ducksboard.Backbone.widget_kinds,{gaecommerce_transactions_counter:d,gaecommerce_transactions_revenue_counter:h,gaecommerce_transactions_revenue_graph:e,gaecommerce_popular_products_leaderboard:v,gaecommerce_sales_sources_leaderboard:a,
gaecommerce_items_purchased_counter:u,gaecommerce_items_purchased_graph:o,gaecommerce_unique_purchases_counter:l,gaecommerce_unique_purchases_graph:q,gaecommerce_conversion_rate_counter:b,gaecommerce_conversion_rate_graph:g,gaecommerce_average_revenue_counter:n,gaecommerce_average_revenue_graph:k});_.extend(Ducksboard.Backbone.service_kinds,{gaecommerce:j})})();
(function(){var a=D.colors.lightblue,j=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("url");if(d){d=_.join("","http://www.opensiteexplorer.org/",this.model.context_path,"?","site=",encodeURIComponent(d));this.add_context_action(a,{label:"See report on Moz.com",url:d,css_class:"mozscape",icon:"mozscape"})}}}),e=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly","quarterly","yearly"]}),
d={view_cls:j,kind_cls:e,data_source_params:{url:{template:"input_text",template_data:{placeholder:"the URL of the page you are interested in",tooltip:"For instance, ducksboard.com/tour/"}}}},j=D.Backbone.wt.TrendWidget.extend(d).extend({context_path:"links",defaults:{title:"External links provided by Moz.com",sound:false},trend_defs:{subtitle:"external links",color:a,timespan:"monthly"}}),e=D.Backbone.wt.TrendWidget.extend(d).extend({context_path:"links",defaults:{title:"Domain authority provided by Moz.com",
sound:false},trend_defs:{subtitle:"domain authority",color:a,timespan:"monthly"}}),g=D.Backbone.wt.TrendWidget.extend(d).extend({context_path:"links",defaults:{title:"Page authority provided by Moz.com",sound:false},trend_defs:{subtitle:"page authority",color:a,timespan:"monthly"}}),a=D.Backbone.wt.TrendWidget.extend(d).extend({context_path:"links",defaults:{title:"MozRank provided by Moz.com",sound:false},trend_defs:{subtitle:"mozrank",color:a,timespan:"monthly"}}),d=D.Backbone.Service.extend({});
_.extend(Ducksboard.Backbone.widget_kinds,{mozscape_external_links_counter:j,mozscape_domain_authority_counter:e,mozscape_page_authority_counter:g,mozscape_mozrank_counter:a});_.extend(Ducksboard.Backbone.service_kinds,{mozscape:d})})();
(function(){var a={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to flickr account",url:"http://www.flickr.com/account"})}}),defaults:{title:"Flickr random photo",sound:false},data_source_params:{tags:{template:"input_text",template_data:{placeholder:"comma-separated tags (optional)"}},only_mine:{template:"select",template_data:{options:[{value:"t",display_name:"show only my photos"},{value:"",display_name:"Show public photos marked for commercial reuse"}]}}}},
j=D.bb.wt.ImageWidget.extend(a),a=D.bb.wt.FullImageWidget.extend({css_classes:D.bb.wt.FullImageWidget.prototype.css_classes+" no-caption"}).extend(a),e=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{flickr_photos:j,flickr_photos_fullsize:a});_.extend(Ducksboard.Backbone.service_kinds,{flickr:e})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=this.model.data_source.get("service_id");if(b=D.Backbone.services.get(b)){b=_.sprintf("%s/wp-admin/",b.get("auth_domain"));this.add_context_action(a,{label:"Go to admin interface",url:b})}}}),j=D.Backbone.wt.TrendWidget.extend({view_cls:a,defaults:{title:"Wordpress comments",sound:false},trend_defs:{subtitle:"approved comments",color:"rgba(9, 9, 9, 0.65)",timespan:"daily"}}),
e=D.Backbone.wt.BoxesWidget.extend({view_cls:a,defaults:{title:"Wordpress comments by status",sound:false},subtitles:["approved","pending","spam"],colors:["rgba(9, 9, 9, 0.65)","rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)"]}),a=D.bb.wt.TimelineWidget.extend({view_cls:a,webhook_doc_url:"http://ducksboard.com/wordpress-webhooks-setup/",defaults:{title:"Wordpress comments",sound:false}}),d=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain",
"address"],["auth_user","username"],["auth_password","password"]]),params:{auth_domain:{template:"input_text",template_data:{placeholder:"Blog address",tooltip:"Your blog's home address, for instance http://myweblog.wordpress.com/ or http://blog.mycompany.com/"}},auth_user:{template:"input_text",template_data:{placeholder:"Wordpress username"}},auth_password:{template:"input_password",template_data:{placeholder:"Wordpress password"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{wordpress_comments_counter:j,
wordpress_comments_by_status_boxes:e,wordpress_comments_timeline_timeline:a});_.extend(Ducksboard.Backbone.service_kinds,{wordpress:d})})();
(function(){var a={code_messages:{400:"Got 400 Bad Request when pulling data.",401:"Got HTTP 401 Unauthorized when pulling data, possible authentication problem.",403:"Got HTTP 403 Forbiden when pulling data, possible authentication problem.",404:"Got HTTP 404 Not Found when pulling data, is the pull URL correct?",444:"Could not parse pulled data, please check the return format.",500:"Got HTTP 500 Internal Server Error when pulling data."},error_code_to_message:function(a){return this.code_messages[a]||
"Got HTTP "+a+" response when pulling data."}},j=D.bb.WidgetView.extend(a).extend({notify:function(){this.success();D.bb.WidgetView.prototype.notify.apply(this,arguments)}}),a=D.bb.wt.MultilineChartView.extend(a).extend({notify:function(){this.success();D.bb.wt.MultilineChartView.prototype.notify.apply(this,arguments)}}),e={view_cls:j,handles_error_code:function(){return true}},d=_.extend({},e,{view_cls:a}),j=D.Backbone.wt.GaugeWidget.extend(e).extend({defaults:{title:"Custom gauge",sound:false},
subtitles:["rate"],colors:["rgba(193, 31, 112, 0.65)"]}),a=D.Backbone.wt.GaugeWidget.extend(e).extend({defaults:{title:"Custom double gauge",sound:false},subtitles:["rate 1","rate 2"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"]}),g={defaults:{title:"Custom chart",sound:false}},b=_.extend({},d,{subtitles:["label1"],colors:["rgba(193, 31, 112, 0.65)"],trend_defs:{timespan:"daily"}}),f=D.Backbone.wt.MultilineChartWidget.extend(g).extend(b),h=D.bb.wt.AbsoluteMultilineChartWidget.extend(g).extend(b),
o=_.extend({},d,{subtitles:["label1","label2"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"],trend_defs:{timespan:"daily"}}),u=D.Backbone.wt.MultilineChartWidget.extend(g).extend(o),q=D.bb.wt.AbsoluteMultilineChartWidget.extend(g).extend(o),l=_.extend({},d,{subtitles:["label1","label2","label3"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"],trend_defs:{timespan:"daily"}}),k=D.Backbone.wt.MultilineChartWidget.extend(g).extend(l),n=D.bb.wt.AbsoluteMultilineChartWidget.extend(g).extend(l),
x=_.extend({},d,{subtitles:["label1","label2","label3","label4"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"],trend_defs:{timespan:"daily"}}),v=D.Backbone.wt.MultilineChartWidget.extend(g).extend(x),w=D.bb.wt.AbsoluteMultilineChartWidget.extend(g).extend(x),z=_.extend({},d,{subtitles:["label1","label2","label3","label4","label5"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)",
"rgba(193, 31, 112, 0.65)"],trend_defs:{timespan:"daily"}}),E=D.Backbone.wt.MultilineChartWidget.extend(g).extend(z),B=D.bb.wt.AbsoluteMultilineChartWidget.extend(g).extend(z),F=_.extend({},d,{subtitles:["label1","label2","label3","label4","label5","label6"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"],trend_defs:{timespan:"daily"}}),d=D.Backbone.wt.MultilineChartWidget.extend(g).extend(F),
t=D.bb.wt.AbsoluteMultilineChartWidget.extend(g).extend(F),G=D.Backbone.wt.MultiareaChartWidget.extend(g).extend(b),b=D.bb.wt.AbsoluteMultiareaChartWidget.extend(g).extend(b),y=D.Backbone.wt.MultiareaChartWidget.extend(g).extend(o),A=D.bb.wt.AbsoluteMultiareaChartWidget.extend(g).extend(o),C=D.Backbone.wt.MultiareaChartWidget.extend(g).extend(l),K=D.bb.wt.AbsoluteMultiareaChartWidget.extend(g).extend(l),m=D.Backbone.wt.MultiareaChartWidget.extend(g).extend(x),P=D.bb.wt.AbsoluteMultiareaChartWidget.extend(g).extend(x),
o=D.bb.wt.StackedChartWidget.extend(g).extend(o),l=D.bb.wt.StackedChartWidget.extend(g).extend(l),x=D.bb.wt.StackedChartWidget.extend(g).extend(x),z=D.bb.wt.StackedChartWidget.extend(g).extend(z),g=D.bb.wt.StackedChartWidget.extend(g).extend(F),F=D.Backbone.wt.TrendWidget.extend(e).extend({defaults:{title:"Custom counter trend",sound:false},trend_defs:{subtitle:"value",color:"rgba(193, 31, 112, 0.65)"}}),J=D.Backbone.wt.PinsWidget.extend(e).extend({defaults:{title:"Custom pins",sound:false},subtitles:["label1",
"label2"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"]}),T=D.Backbone.wt.BoxesWidget.extend(e).extend({defaults:{title:"Three custom boxes",sound:false},subtitles:["label1","label2","label3"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"]}),Q=D.Backbone.wt.BoxesWidget.extend(e).extend({defaults:{title:"Four custom boxes",sound:false},subtitles:["label1","label2","label3","label4"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)",
"rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"]}),I=D.Backbone.wt.BarsWidget.extend(e).extend({defaults:{title:"Three custom bars",sound:false},subtitles:["label1","label2","label3"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"]}),M=D.Backbone.wt.BarsWidget.extend(e).extend({defaults:{title:"Four custom bars",sound:false},subtitles:["label1","label2","label3","label4"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)",
"rgba(193, 31, 112, 0.65)"]}),H=D.Backbone.wt.BarsWidget.extend(e).extend({defaults:{title:"Five custom bars",sound:false},subtitles:["label1","label2","label3","label4","label5"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"]}),R=_.extend(e,{defaults:{title:"Custom timeline",sound:false}}),R=D.Backbone.wt.TimelineWidget.extend(R),N=function(a,b,d){for(var b=b||{},d=d||{},f={total_subtitles:a,subtitle1:"col1",
color1:"rgba(122, 123, 118, 0.65)"},h=2;h<=a;h++){f["subtitle"+h]="col"+h;f["color"+h]="rgba(193, 31, 112, 0.65)"}return _.extend(e,{defaults:_.extend({title:"Custom Leaderboard",sound:false},b),leaderboard_defs:_.extend(f,d)})},L=D.Backbone.wt.LeaderboardWidget.extend(N(2)),W=D.Backbone.wt.LeaderboardWidget.extend(N(3)),U=D.Backbone.wt.LeaderboardWidget.extend(N(4)),Z=D.Backbone.wt.LeaderboardWidget.extend(N(5)),fa=D.Backbone.wt.LeaderboardWidget.extend(N(6)),ha=D.Backbone.wt.LeaderboardWidget.extend(N(7)),
ia=D.Backbone.wt.LeaderboardWidget.extend(N(8)),ja=D.Backbone.wt.LeaderboardWidget.extend(N(9)),ra=D.Backbone.wt.TrendLeaderboardWidget.extend(N(2,{title:"Custom Trend Leaderboard"})),Y=D.Backbone.wt.TrendLeaderboardWidget.extend(N(3,{title:"Custom Trend Leaderboard"})),X=D.Backbone.wt.TrendLeaderboardWidget.extend(N(4,{title:"Custom Trend Leaderboard"})),da=D.Backbone.wt.TrendLeaderboardWidget.extend(N(5,{title:"Custom Trend Leaderboard"})),ba=D.Backbone.wt.TrendLeaderboardWidget.extend(N(6,{title:"Custom Trend Leaderboard"})),
la=D.Backbone.wt.TrendLeaderboardWidget.extend(N(7,{title:"Custom Trend Leaderboard"})),ea=D.Backbone.wt.TrendLeaderboardWidget.extend(N(8,{title:"Custom Trend Leaderboard"})),na=D.Backbone.wt.StatusLeaderboardWidget.extend(N(2,{title:"Custom Status Leaderboard"})),Ga=D.Backbone.wt.StatusLeaderboardWidget.extend(N(3,{title:"Custom Status Leaderboard"})),za=D.Backbone.wt.StatusLeaderboardWidget.extend(N(4,{title:"Custom Status Leaderboard"})),Aa=D.Backbone.wt.StatusLeaderboardWidget.extend(N(5,{title:"Custom Status Leaderboard"})),
ma=D.Backbone.wt.StatusLeaderboardWidget.extend(N(6,{title:"Custom Status Leaderboard"})),sa=D.Backbone.wt.StatusLeaderboardWidget.extend(N(7,{title:"Custom Status Leaderboard"})),N=D.Backbone.wt.StatusLeaderboardWidget.extend(N(8,{title:"Custom Status Leaderboard"})),ta=D.Backbone.wt.StatusWidget.extend(e).extend({defaults:{title:"Custom Status",sound:false},subtitles:["my check"],colors:[D.colors.green]}),va=_.extend(e,{defaults:{title:"Custom image",sound:false}}),Fa=D.bb.wt.ImageWidget.extend(va),
va=D.bb.wt.FullImageWidget.extend(va),qa=_.extend(e,{defaults:{title:"Custom text",sound:false}}),qa=D.bb.wt.TextWidget.extend(qa).extend({kind_cls:D.Backbone.slot_kinds.Text}),Ha=D.Backbone.wt.FunnelWidget.extend(e).extend({defaults:{title:"Custom Numeric Funnel",sound:false,max_steps:7},subtitles:["conversion rate"],colors:["rgba(59, 136, 177, 0.65)"]}),wa=_.extend(e,{defaults:{title:"Custom Numeric Completion",sound:false},subtitles:["conversion rate"],colors:["rgba(59, 136, 177, 0.65)"]}),ka=
D.Backbone.wt.CompletionWidget.extend(wa).extend({completion_defs:{view_cls:D.bb.slot_views.CompletionGaugeView}}),wa=D.Backbone.wt.CompletionWidget.extend(wa).extend({completion_defs:{view_cls:D.bb.slot_views.CompletionProgressView}}),Ja=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{custom_numeric_gauge:j,custom_numeric_gauges:a,custom_numeric_counter:F,custom_numeric_pins:J,custom_numeric_boxes3:T,custom_numeric_boxes4:Q,custom_numeric_bars3:I,custom_numeric_bars4:M,custom_numeric_bars5:H,
custom_textual_timeline:R,custom_textual_leaderboard:L,custom_textual_leaderboard2:W,custom_textual_leaderboard3:U,custom_textual_leaderboard4:Z,custom_textual_leaderboard5:fa,custom_textual_leaderboard6:ha,custom_textual_leaderboard7:ia,custom_textual_leaderboard8:ja,custom_textual_trend_leaderboard:ra,custom_textual_trend_leaderboard2:Y,custom_textual_trend_leaderboard3:X,custom_textual_trend_leaderboard4:da,custom_textual_trend_leaderboard5:ba,custom_textual_trend_leaderboard6:la,custom_textual_trend_leaderboard7:ea,
custom_textual_status_leaderboard:na,custom_textual_status_leaderboard2:Ga,custom_textual_status_leaderboard3:za,custom_textual_status_leaderboard4:Aa,custom_textual_status_leaderboard5:ma,custom_textual_status_leaderboard6:sa,custom_textual_status_leaderboard7:N,custom_textual_text:qa,custom_textual_status:ta,custom_image:Fa,custom_image_fullsize:va,custom_numeric_graph:f,custom_numeric_graph2:u,custom_numeric_graph3:k,custom_numeric_graph4:v,custom_numeric_graph5:E,custom_numeric_graph6:d,custom_numeric_absolute_graph:h,
custom_numeric_absolute_graph2:q,custom_numeric_absolute_graph3:n,custom_numeric_absolute_graph4:w,custom_numeric_absolute_graph5:B,custom_numeric_absolute_graph6:t,custom_numeric_area_graph:G,custom_numeric_area_graph2:y,custom_numeric_area_graph3:C,custom_numeric_area_graph4:m,custom_numeric_absolute_area_graph:b,custom_numeric_absolute_area_graph2:A,custom_numeric_absolute_area_graph3:K,custom_numeric_absolute_area_graph4:P,custom_numeric_stacked_graph2:o,custom_numeric_stacked_graph3:l,custom_numeric_stacked_graph4:x,
custom_numeric_stacked_graph5:z,custom_numeric_stacked_graph6:g,custom_numeric_funnel:Ha,custom_numeric_completion_gauge:ka,custom_numeric_completion_progress:wa});_.extend(Ducksboard.Backbone.service_kinds,{custom:Ja})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=_.sprintf("https://dev.flurry.com/");this.add_context_action(a,{label:"Go to Flurry account",url:b})}}),j=D.Backbone.wt.MultilineChartView.extend(a),e=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly","quarterly","yearly"]}),d=D.Backbone.slot_kinds.AreaChart.extend({allowed_timespans:["weekly","monthly","quarterly","yearly"]}),g={data_source_params:{application_api_key:{template:"select",
template_data:{load_service_params:true}},metric_name:{template:"select",template_data:{options:[{value:"active_users",display_name:"Total number of unique users"},{value:"new_users",display_name:"Total number of unique new users"},{value:"retained_users",display_name:"Total number of users who remain active"},{value:"page_views",display_name:"Total number of page views"},{value:"avg_page_views_per_session",display_name:"Average page views per session"},{value:"sessions",display_name:"Total number of user sessions"},
{value:"avg_session_length",display_name:"Average length of a user session"},{value:"median_session_length",display_name:"Median length of a user session"}]}}}},b={retry_service_params:1001,data_source_params:{application_api_key:{template:"select",template_data:{load_service_params:true,klass:"load:event_name"}},event_name:{template:"select",template_data:{load_service_params:true}},metric_name:{template:"select",template_data:{options:[{value:"users",display_name:"Total number of unique users"},
{value:"avgUsers",display_name:"Average of the number of unique users"},{value:"totalCount",display_name:"Total number of time the event occurred"},{value:"totalSessions",display_name:"Total number of sessions"}]}}}},f=D.colors.lightblue,h=D.Backbone.wt.TrendWidget.extend(g).extend({view_cls:a,kind_cls:e,defaults:{title:"Flurry application metric",sound:false},trend_defs:{subtitle:"metric",color:f,timespan:"monthly"}}),g=D.Backbone.wt.MultiareaChartWidget.extend(g).extend({view_cls:j,kind_cls:d,defaults:{title:"Application metric growth",
sound:false},subtitles:["metric"],colors:[f],trend_defs:{timespan:"monthly"}}),a=D.Backbone.wt.TrendWidget.extend(b).extend({view_cls:a,kind_cls:e,defaults:{title:"Flurry application event metric",sound:false},trend_defs:{subtitle:"metric",color:f,timespan:"weekly"}}),j=D.Backbone.wt.MultiareaChartWidget.extend(b).extend({view_cls:j,kind_cls:d,defaults:{title:"Application event metric growth",sound:false},subtitles:["metric"],colors:[f],trend_defs:{timespan:"weekly"}}),d=D.Backbone.Service.extend({description:"Use these widgets to keep tabs on your Flurry-managed applications. Stay up to date in your application metrics growth rate.",
signup_url:"http://www.flurry.com/signup.html",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_access_code"]]),params:{auth_user:{template:"input_text",template_data:{placeholder:"API access code",tooltip:'You can find your API access code for your Flurry account <a href="https://dev.flurry.com/manageCompany.do" target="_blank">here</a>.'}}}});_.extend(Ducksboard.Backbone.widget_kinds,{flurry_application_metrics_counter:h,flurry_application_metrics_area_graph:g,
flurry_application_event_metrics_counter:a,flurry_application_event_metrics_area_graph:j});_.extend(Ducksboard.Backbone.service_kinds,{flurry:d})})();
(function(){var a=D.Backbone.WidgetView.extend({}),j=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["yearly"]}),a=D.Backbone.wt.TrendWidget.extend({view_cls:a,kind_cls:j,defaults:{title:"Compete rank",sound:false},trend_defs:{subtitle:"site rank",color:"rgba(134, 197, 64, 0.65)",timespan:"yearly"},data_source_params:{domain:{template:"input_text",template_data:{placeholder:"domain",tooltip:'Please write just the domain name without a leading "http://" and without a leading www. You can also search for a specific subdomain if desired. Please note that Compete has data for many, although not all, subdomains.'}}}}),
j=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{compete_site_rank_counter:a});_.extend(Ducksboard.Backbone.service_kinds,{compete:j})})();
(function(){var a=function(a,b){return(b?D.Backbone.wt.MultilineChartView:D.Backbone.WidgetView).extend({events:{"click .inner":"external_account"},external_account:function(b){var d=this.model.data_source.get("advertiser"),e=this.model.data_source.get("keyword");if(d=d||e){e=/\?/.test(a)?"&":"?";d="http://mixrank.com"+_.sprintf(a,d)+e+"utm_source=ducksboard";this.add_context_action(b,{label:"Go to MixRank report",url:d})}}})},j={data_source_params:{advertiser:{template:"input_text",template_data:{placeholder:"advertiser",
tooltip:'The advertiser\'s domain name. Use the root domain name; in particular, do not prefix with "www." or any other subdomain.'}}}},e=D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["weekly","monthly"]}),d=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly"]}),g=D.Backbone.wt.AbsoluteMultilineChartLeaderboardWidget.extend(j).extend({defaults:{title:"Google Display Network",sound:false},view_cls:a("/a/%s",true),kind_cls:e,trend_defs:{timespan:"monthly"},
leaderboard_defs:{total_subtitles:4,subtitle1:"ad type breakdown",color1:"rgba(122, 123, 118, 0.65)",subtitle2:"",color2:"rgba(122, 123, 118, 0.65)",subtitle3:"count",color3:"rgba(203, 25, 28, 0.65)",subtitle4:"first seen",color4:"rgba(203, 25, 28, 0.65)",has_title:true},subtitles:["text ads","banners"],colors:["rgba(203, 25, 28, 0.65)","rgba(59, 136, 177, 0.65)"]}),b=D.Backbone.wt.LeaderboardWidget.extend({data_source_params:{keyword:{template:"input_text",template_data:{placeholder:"keyword",tooltip:'A keyword, e.g. "affordable life insurance", "cheap auto insurance".'}}}}).extend({defaults:{title:"Landing page summary",
sound:false},view_cls:a("/search?q=%s&type=landingpage"),leaderboard_defs:{total_subtitles:5,subtitle1:"page",color1:"rgba(122, 123, 118, 0.65)",subtitle2:"first seen",color2:"rgba(203, 25, 28, 0.65)",subtitle3:"last seen",color3:"rgba(203, 25, 28, 0.65)",subtitle4:"avg position",color4:"rgba(203, 25, 28, 0.65)",subtitle5:"times seen",color5:"rgba(203, 25, 28, 0.65)"}}),f=D.Backbone.wt.TrendWidget.extend(j).extend({defaults:{title:"Active text ads",sound:false},kind_cls:d,view_cls:a("/a/%s/display/gdn/textads"),
trend_defs:{subtitle:"active text ads",color:"rgba(203, 25, 28, 0.65)",timespan:"monthly"}}),h=D.Backbone.wt.TrendWidget.extend(j).extend({defaults:{title:"Active banners",sound:false},kind_cls:d,view_cls:a("/a/%s/display/banners"),trend_defs:{subtitle:"active banners",color:"rgba(59, 136, 177, 0.65)",timespan:"monthly"}}),o=D.Backbone.wt.TrendWidget.extend(j).extend({defaults:{title:"New text ads",sound:false},kind_cls:d,view_cls:a("/a/%s/display/gdn/textads"),trend_defs:{subtitle:"new text ads",
color:"rgba(81, 0, 14, 0.65)",timespan:"monthly"}}),u=D.Backbone.wt.TrendWidget.extend(j).extend({defaults:{title:"New banners",sound:false},kind_cls:d,view_cls:a("/a/%s/display/banners"),trend_defs:{subtitle:"new banners",color:"rgba(75, 99, 149, 0.65)",timespan:"monthly"}}),e=D.Backbone.wt.AbsoluteMultilineChartLeaderboardWidget.extend(j).extend({defaults:{title:"New and active",sound:false},kind_cls:e,view_cls:a("/a/%s",true),trend_defs:{timespan:"monthly"},leaderboard_defs:{total_subtitles:4,
subtitle1:"ad type breakdown",color1:"rgba(122, 123, 118, 0.65)",subtitle2:"",color2:"rgba(122, 123, 118, 0.65)",subtitle3:"count",color3:"rgba(203, 25, 28, 0.65)",subtitle4:"most times seen",color4:"rgba(203, 25, 28, 0.65)",has_title:true},subtitles:["new text ads","active text ads","new banners","active banners"],colors:["rgba(81, 0, 14, 0.65)","rgba(203, 25, 28, 0.65)","rgba(75, 99, 149, 0.65)","rgba(59, 136, 177, 0.65)"]}),q=D.Backbone.wt.TrendWidget.extend(j).extend({defaults:{title:"Active publishers",
sound:false},kind_cls:d,view_cls:a("/a/%s/display/publishers"),trend_defs:{subtitle:"active publishers",color:"rgba(203, 25, 28, 0.65)",timespan:"monthly"}}),a=D.Backbone.wt.TrendWidget.extend(j).extend({defaults:{title:"Active keywords",sound:false},kind_cls:d,view_cls:a("/a/%s/display/gdn/keywords"),trend_defs:{subtitle:"active keywords",color:"rgba(203, 25, 28, 0.65)",timespan:"monthly"}}),j=D.Backbone.Service.extend({description:"MixRank is a spy tool for online ads. With MixRank you can see exactly where your competitors are buying traffic & which ads are performing best for them across over 100,000 sites.",
signup_url:"http://www.mixrank.com/upgrade?utm_source=ducksboard",button_text:"Gain Access to MixRank Professional for Only $1"});_.extend(Ducksboard.Backbone.widget_kinds,{mixrank_gdn_absolute_graph2_leaderboard:g,mixrank_landing_page_leaderboard:b,mixrank_active_text_ads_counter:f,mixrank_active_display_ads_counter:h,mixrank_new_text_ads_counter:o,mixrank_new_display_ads_counter:u,mixrank_new_active_ads_stacked_graph4_leaderboard:e,mixrank_active_publishers_counter:q,mixrank_active_keywords_counter:a});
_.extend(Ducksboard.Backbone.service_kinds,{mixrank:j})})();
(function(){var a=D.Backbone.slot_views.CountdownView.extend({countdown_complete:function(){this.model.widget.view.notify();var a=this.model.widget.data_source.get("event");this.$(".countdown").fadeOut();this.$(".event").addClass("complete").fadeOut(function(){$(this).text(_.sprintf("%s now!",a)).fadeIn()})}}),a=D.Backbone.slot_kinds.Countdown.extend({delta_seconds:1,view_cls:a,feedback_while_fetching:false,on_seconds_negative:function(){this.clear_timers();this.view.countdown_complete()},on_seconds_detail:function(a){a=
D.u.split_seconds(a);a.shift();this.view.update_detail_countdown.apply(this.view,a)},on_seconds_default:function(a){a=parseInt(a/86400);this.view.update_countdown(_.sprintf("%d days",a))}}),j=D.Backbone.slot_views.CountdownView.extend({countdown_pending:function(){var a=this.model.widget.data_source.get("event");this.$(".countdown").fadeOut();this.$(".event").addClass("pending").text(_.sprintf("%s pending",a))},countdown_started:function(){var a=this.model.widget.data_source.get("event");this.model.widget.view.notify();
this.$(".event").fadeOut(function(){$(this).removeClass("pending").text(a).fadeIn()});this.$(".countdown").fadeIn()}}),j=D.Backbone.slot_kinds.Countdown.extend({delta_seconds:-1,view_cls:j,feedback_while_fetching:false,seconds_from_data:function(a){return-a[0].value},on_seconds_negative:function(a){this.clear_timers();this.start_counting_interval_id=setTimeout(_.bind(function(){this.seconds=0;this.view.countdown_started();this.update_countdown_seconds()},this),-a*1E3);this.view.countdown_pending()},
on_seconds_detail:function(a){a=D.u.split_seconds(a);a.shift();this.view.update_detail_countdown.apply(this.view,a)},on_seconds_default:function(a){var a=parseInt(a/86400),e=a>1?"days":"day";this.update_time_interval_id&&clearInterval(this.update_time_interval_id);this.view.update_countdown(_.sprintf("%d %s",a,e))},clear_timers:function(){this.start_counting_interval_id&&clearTimeout(this.start_counting_interval_id);D.Backbone.slot_kinds.Countdown.prototype.clear_timers.apply(this)}}),a=D.Backbone.Widget.extend({defaults:{title:"countdown",
sound:false},slot_defs:{1:{kind:a}},data_source_params:{event:{template:"input_text",template_data:{placeholder:"event name",tooltip:"Use a name to identify the event the widget counts down to."}},target:{template:"input_text",template_data:{placeholder:"until when?",tooltip:'Enter the date and time you want to count down to in the format "14 Dec 2011, 12:34:56".'}}}}),j=D.Backbone.Widget.extend({defaults:{title:"count up",sound:false},slot_defs:{1:{kind:j}},data_source_params:{event:{template:"input_text",
template_data:{placeholder:"event name",tooltip:"Use a name to identify the event the widget counts from."}},target:{template:"input_text",template_data:{placeholder:"since when?",tooltip:'Enter the date and time you want to count from in the format "14 Dec 2011, 12:34:56".'}}}}),e=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{countdown:a,countdown_reverse:j});_.extend(Ducksboard.Backbone.service_kinds,{countdown:e})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=this.model.data_source.get("service_id");if(b=D.Backbone.services.get(b)){b=_.sprintf("https://twitter.com/%s",b.get("service_username"));this.add_context_action(a,{label:"Go to Twitter account",url:b})}}}),j=D.Backbone.slot_views.TimelineItemView.extend({events:{click:"go_to_tweet"},go_to_tweet:function(a){this.add_context_action(a,{label:"Go to this tweet",url:this.item.link,
is_public:true})}}),e={kind_cls:D.Backbone.slot_kinds.Timeline.extend({initialize:function(){D.Backbone.slot_kinds.Timeline.prototype.initialize.apply(this,arguments);this.view=new D.Backbone.slot_views.TimelineView({model:this,item_view:j})},parse_value:function(a){if(a.value.user===void 0){var b=D.Backbone.slot_kinds.Timeline.prototype.parse_value.apply(this,arguments);return b=this.choose_best_image(b)}b={title:a.value.user.name,image:a.value.user.profile_image_url_https||a.value.user.profile_image_url,
time:moment(a.value.created_at).unix(),content:a.value.text,link:_.sprintf("https://twitter.com/%s/status/%s",a.value.user.screen_name,a.value.id_str)};return b=this.choose_best_image(b)},choose_best_image:function(a){var b;switch(D.d.current.id){case "tv1080":b="reasonably_small";break;case "tv720":b="bigger"}if(b)a.image=a.image.replace(/_normal\./g,_.sprintf("_%s.",b));return a}}),view_cls:a},d=_.extend({},e,{data_source_params:{keyword:{template:"input_text",template_data:{placeholder:"search keyword",
tooltip:'To search for multiple keywords, separate them with commas, for instance "cookies,cakes" will search for both cookies and cakes. To search for tweets containing all of the keywords, separate them with spaces, for instance "home gardening" will search for tweets containing both "home" and "gardening".'}}}}),d=D.bb.wt.TimelineWidget.extend({defaults:{title:"Twitter keywords search",sound:false}}).extend(d),g=D.Backbone.wt.TrendWidget.extend({view_cls:a,defaults:{title:"Twitter followers",sound:false},
trend_defs:{subtitle:"followers",color:"rgba(37, 177, 228, 0.65)",timespan:"daily"}}),b={view_cls:a,defaults:{title:"Twitter mentions",sound:false}},f={subtitle:"mentions",color:"rgba(37, 177, 228, 0.65)",timespan:"daily"},h=D.Backbone.wt.TrendWidget.extend(b).extend({trend_defs:f}),o=D.Backbone.wt.TimelineWidget.extend(b).extend(e),b=D.bb.wt.TrendTimelineWidget.extend(b).extend({trend_defs:f}),f=D.Backbone.wt.TrendWidget.extend({view_cls:a,defaults:{title:"Twitter lists",sound:false},trend_defs:{subtitle:"listed",
color:"rgba(37, 177, 228, 0.65)",timespan:"daily"}}),u={view_cls:a,defaults:{title:"Twitter retweets",sound:false}},q={subtitle:"retweets",color:"rgba(37, 177, 228, 0.65)",timespan:"daily"},a=D.Backbone.wt.TrendWidget.extend(u).extend({trend_defs:q}),e=D.Backbone.wt.TimelineWidget.extend(u).extend(e),u=D.bb.wt.TrendTimelineWidget.extend(u).extend({trend_defs:q}),q=D.Backbone.Service.extend({description:"Graph your progress, look for prospects or protect your brand with any combination of these Twitter widgets.",
signup_url:"http://twitter.com"});_.extend(Ducksboard.Backbone.widget_kinds,{twitter_followers_counter:g,twitter_search_timeline:d,twitter_reactions_counter:h,twitter_reactions_timeline:o,twitter_reactions_counter_timeline:b,twitter_listed_counter:f,twitter_retweets_counter:a,twitter_retweets_timeline:e,twitter_retweets_counter_timeline:u});_.extend(Ducksboard.Backbone.service_kinds,{twitter:q})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("venue_id"),d=_.sprintf("https://foursquare.com/venue/%s",d);this.add_context_action(a,{label:"Go to venue",url:d})}}),a=D.Backbone.wt.PinsWidget.extend({view_cls:a,defaults:{title:"Foursquare check-ins",sound:false},subtitles:["users here now","total check-ins"],colors:["#b5d47a","#59cbdf"],data_source_params:{venue_id:{template:"input_text",template_data:{placeholder:"venue ID or twitter handle of the venue",
tooltip:'The venue ID is the sequence of numbers at the end of a venue URL. <a target="_blank" href="http://support.foursquare.com/entries/211232-How-do-I-find-the-venue-URL-">How do I find the venue URL?</a>'}}}}),j=D.Backbone.Service.extend({description:"Foursquare helps its users share and save the places they visit. Retail and hospitality brands are wise to include Foursquare in a social dashboard.",signup_url:"https://foursquare.com/signup/"});_.extend(Ducksboard.Backbone.widget_kinds,{foursquare_checkins_pins:a});
_.extend(Ducksboard.Backbone.service_kinds,{foursquare:j})})();
(function(){var a=D.colors.darkorange,j=D.colors.gray,e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=this.model.data_source.get("service_id");if(b=D.Backbone.services.get(b)){b=_.sprintf("http://%s.uservoice.com/",b.get("auth_domain"));this.add_context_action(a,{label:"Go to your UserVoice site",url:b})}}}),d=D.Backbone.wt.MultilineChartView.extend(e),g=D.bb.wt.TrendWidget.extend({view_cls:e,defaults:{title:"UserVoice open tickets",sound:false},
trend_defs:{subtitle:"open tickets",color:a,timespan:"daily"},data_source_params:{queue_id:{template:"select",template_data:{load_service_params:true}}}}),b=D.bb.wt.MultiareaChartWidget.extend({view_cls:d,defaults:{title:"UserVoice created vs closed tickets",sound:false},subtitles:["created","closed"],colors:[a,D.colors.darkgreen],trend_defs:{timespan:"daily"}}),f=D.bb.wt.TimelineWidget.extend({view_cls:e,defaults:{title:"UserVoice activities",sound:false},data_source_params:{activities:{template:"select_multiple",
template_data:{options:[{value:"vote",display_name:"Show votes"},{value:"suggestion",display_name:"Show suggestions"},{value:"comment",display_name:"Show comments"},{value:"note",display_name:"Show notes"},{value:"suggestion_merge",display_name:"Show suggestion merges"},{value:"ticket",display_name:"Show tickets"},{value:"ticket_message",display_name:"Show ticket messages"},{value:"ticket_note",display_name:"Show ticket notes"}]}}}}),h=D.bb.wt.TrendLeaderboardWidget.extend({view_cls:e,defaults:{title:"UserVoice queues summary",
sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:j,subtitle2:"updated",color2:a,subtitle3:"cnt",color3:a}}),o=D.bb.wt.TrendLeaderboardWidget.extend({view_cls:e,defaults:{title:"UserVoice top forum ideas",sound:false},leaderboard_defs:{total_subtitles:4,subtitle1:"",color1:j,subtitle2:"created",color2:a,subtitle3:"comms",color3:a,subtitle4:"votes",color4:a},data_source_params:{forum_id:{template:"select",template_data:{load_service_params:true}}}}),u=D.bb.wt.TrendWidget.extend({view_cls:e,
defaults:{title:"UserVoice forum ideas",sound:false},trend_defs:{subtitle:"ideas",color:a,timespan:"daily"},data_source_params:{forum_id:{template:"select",template_data:{load_service_params:true}}}}),j=D.bb.wt.TrendLeaderboardWidget.extend({view_cls:e,defaults:{title:"UserVoice forums summary",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:j,subtitle2:"priv?",color2:a,subtitle3:"ideas",color3:a}}),q=function(a){var b=_.map(a,function(a,b){return"queue"+(b+1)}),e={};_.each(a,
function(a,b){var d="queue_id"+(b+1);b===0&&(d="queue_id");e[d]={template:"select",template_data:{load_service_params:true}}});return D.Backbone.wt.AbsoluteMultilineChartWidget.extend({view_cls:d,defaults:{title:"UserVoice tickets in queue",sound:false},subtitles:b,colors:a,trend_defs:{timespan:"daily"},data_source_params:e})},e=q([a,D.colors.blue]),l=q([a,D.colors.blue,D.colors.purple]),k=q([a,D.colors.blue,D.colors.purple,D.colors.darkgreen]),n=q([a,D.colors.blue,D.colors.purple,D.colors.darkgreen,
D.colors.red]),a=q([a,D.colors.blue,D.colors.purple,D.colors.darkgreen,D.colors.red,D.colors.gray]),q=D.Backbone.Service.extend({description:"Stay on top of you customer's feedback with this suite of UserVoice widgets.",signup_url:"http://www.uservoice.com/plans/",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain","subdomain"]]),params:{auth_domain:{template:"input_text",template_data:{placeholder:"Your UserVoice domain (like company.uservoice.com)",tooltip:"Use the UserVoice domain, if your account is using a custom domain.<br>For instance enter company.uservoice.com instead of company.support.com"}}}});
_.extend(Ducksboard.Backbone.widget_kinds,{uservoice_open_tickets_counter:g,uservoice_open_closed_tickets_area_graph:b,uservoice_activities_timeline:f,uservoice_queues_summary_leaderboard:h,uservoice_top_forum_ideas_leaderboard:o,uservoice_forum_suggestions_counter:u,uservoice_forums_summary_leaderboard:j,uservoice_open_tickets_in_queues_absolute_graph2:e,uservoice_open_tickets_in_queues_absolute_graph3:l,uservoice_open_tickets_in_queues_absolute_graph4:k,uservoice_open_tickets_in_queues_absolute_graph5:n,
uservoice_open_tickets_in_queues_absolute_graph6:a});_.extend(Ducksboard.Backbone.service_kinds,{uservoice:q})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=_.sprintf("http://login.mailchimp.com/");this.add_context_action(a,{label:"Go to Mailchimp account",url:d})}}),j=D.Backbone.wt.TrendWidget.extend({view_cls:a,defaults:{title:"Mailchimp list subscribers",sound:false},trend_defs:{subtitle:"subscribers",timespan:"daily",color:"rgba(37, 177, 228, 0.65)"},data_source_params:{campaign_id:{template:"hidden"},list_id:{template:"select",
template_data:{load_service_params:true}}}}),e=D.Backbone.wt.GaugeWidget.extend({view_cls:a,defaults:{title:"Mailchimp clicks",sound:false},data_source_params:{campaign_id:{template:"select",template_data:{load_service_params:true}},list_id:{template:"hidden"}},subtitles:["clickrate"],colors:["rgba(37, 177, 228, 0.65)"]}),d=D.Backbone.wt.GaugeWidget.extend({view_cls:a,defaults:{title:"Mailchimp opens and clicks",sound:false},data_source_params:{campaign_id:{template:"select",template_data:{load_service_params:true}},
list_id:{template:"hidden"}},subtitles:["openrate","clickrate"],colors:["rgba(251, 136, 11, 0.65)","rgba(37, 177, 228, 0.65)"]}),a=D.Backbone.wt.GaugeWidget.extend({view_cls:a,defaults:{title:"Mailchimp opens",sound:false},data_source_params:{campaign_id:{template:"select",template_data:{load_service_params:true}},list_id:{template:"hidden"}},subtitles:["openrate"],colors:["rgba(251, 136, 11, 0.65)"]}),g=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user",
"api_key"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name"}},auth_user:{template:"input_text",template_data:{placeholder:"API key",tooltip:'You can find your API Key for your Mailchimp account here: <a href="https://admin.mailchimp.com/account/api/" target="_blank">https://admin.mailchimp.com/account/api/</a>'}}}});_.extend(Ducksboard.Backbone.widget_kinds,{mailchimp_subscribers_counter:j,mailchimp_clicks_gauge:e,mailchimp_opens_and_clicks_gauges:d,mailchimp_opens_gauge:a});
_.extend(Ducksboard.Backbone.service_kinds,{mailchimp:g})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=_.sprintf("http://klout.com/%s",this.model.data_source.get("username"));this.add_context_action(a,{label:"Go to Klout page",url:d})}}),j=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly"]}),e={view_cls:a,kind_cls:j,data_source_params:{username:{template:"input_text",template_data:{placeholder:"username",tooltip:"Please provide the username of the Klout user to track. It's the same as the Twitter username, for example: ducksboard. You can only enter one username at the time, if you want to track more users, create separate Klout widgets for them."}}}},
a=D.Backbone.wt.TrendWidget.extend(e).extend({defaults:{title:"Klout score",sound:false},trend_defs:{subtitle:"Klout score",color:"rgba(209, 59, 8, 0.65)",timespan:"weekly"}}),j=D.Backbone.wt.TrendWidget.extend(e).extend({defaults:{title:"Klout True Reach",sound:false},trend_defs:{subtitle:"True Reach",color:"rgba(37, 177, 228, 0.65)",timespan:"weekly"}}),d=D.Backbone.wt.TrendWidget.extend(e).extend({defaults:{title:"Klout Amplification",sound:false},trend_defs:{subtitle:"Amplification",color:"rgba(9, 9, 9, 0.65)",
timespan:"weekly"}}),e=D.Backbone.wt.TrendWidget.extend(e).extend({defaults:{title:"Klout Network Impact",sound:false},trend_defs:{subtitle:"Network Impact",color:"rgba(209, 59, 8, 0.65)",timespan:"weekly"}}),g=D.Backbone.Service.extend({description:"Klout helps you benchmark and chart your online influence. Watch yours or your competitors\u2019 scores with these widgets.",signup_url:"http://klout.com/home"});_.extend(Ducksboard.Backbone.widget_kinds,{klout_score_counter:a,klout_true_reach_counter:j,
klout_amplification_score_counter:d,klout_network_score_counter:e});_.extend(Ducksboard.Backbone.service_kinds,{klout:g})})();
(function(){var a={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=this.model.data_source.get("service_id");if(b=D.Backbone.services.get(b)){b=_.sprintf("https://%s.prefinery.com/",b.get("auth_domain"));this.add_context_action(a,{label:"Go to Prefinery account",url:b})}}}),data_source_params:{beta_id:{template:"select",template_data:{load_service_params:true}}}},j=D.Backbone.wt.TrendWidget.extend(a).extend({defaults:{title:"Prefinery testers",
sound:false},trend_defs:{subtitle:"testers",color:"rgba(251, 136, 11, 0.65)",timespan:"daily"}}),e=D.Backbone.wt.BoxesWidget.extend(a).extend({defaults:{title:"Prefinery testers by status",sound:false},subtitles:["pending","invited","active"],colors:["rgba(59, 136, 177, 0.65)","rgba(122, 123, 118, 0.65)","rgba(251, 136, 11, 0.65)"]}),a=D.Backbone.wt.GaugeWidget.extend(a).extend({defaults:{title:"Prefinery active rate",sound:false},subtitles:["active rate"],colors:["rgba(251, 136, 11, 0.65)"]}),d=
D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain","subdomain"],["auth_user","api_key"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name"}},auth_domain:{template:"input_text",template_data:{placeholder:"Prefinery subdomain"}},auth_user:{template:"input_text",template_data:{placeholder:"API key"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{prefinery_testers_counter:j,prefinery_testers_by_status_boxes:e,
prefinery_active_rate_gauge:a});_.extend(Ducksboard.Backbone.service_kinds,{prefinery:d})})();
(function(){var a={defaults:{title:"Static image",sound:false},data_source_params:_.extend({image_url:{template:"input_text",template_data:{placeholder:"Image URL"}},caption:{template:"input_textarea",template_data:{placeholder:"Image caption (optional)"}},refresh_mode:{template:"select",template_data:{options:[{value:"0",display_name:"Don't refresh the image"},{value:"1",display_name:"Refresh the image every minute"},{value:"5",display_name:"Refresh the image every 5 minutes"}]}}})},j={defaults:{title:"Static iframe",
sound:false},data_source_params:_.extend({iframe_url:{template:"input_text",template_data:{placeholder:"iFrame URL",tooltip:"Please note that most browsers will refuse to display a HTTP iframe on a secure HTTPS page."}},refresh_mode:{template:"select",template_data:{options:[{value:"0",display_name:"Don't refresh the iframe"},{value:"1",display_name:"Refresh the iframe every minute"},{value:"5",display_name:"Refresh the iframe every 5 minutes"}]}}})},e=D.bb.wt.ImageWidget.extend(a).extend({kind_cls:D.Backbone.slot_kinds.StaticImage}),
a=D.bb.wt.FullImageWidget.extend(a).extend({kind_cls:D.Backbone.slot_kinds.StaticImageFull}),d=D.bb.wt.TextWidget.extend({defaults:{title:"Static text",sound:false},data_source_params:{content:{template:"input_textarea",template_data:{placeholder:"Text content"}}}}),j=D.bb.wt.IframeWidget.extend(j),g=D.Backbone.Service.extend({kind:"static_image",kind_name:"Image",user_managed:false}),b=D.Backbone.Service.extend({kind:"static_text",kind_name:"Text",user_managed:false}),f=D.Backbone.Service.extend({kind:"static_iframe",
kind_name:"Iframe",user_managed:false});_.extend(Ducksboard.Backbone.widget_kinds,{static_image:e,static_image_fullsize:a,static_text:d,static_iframe:j});_.extend(Ducksboard.Backbone.service_kinds,{static_image:g,static_text:b,static_iframe:f})})();
(function(){var a={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("rss_url");this.add_context_action(a,{label:"Go to Alerts feed",url:d})}}),defaults:{title:"Alerts feed entries",sound:false},data_source_params:{rss_url:{template:"input_text",template_data:{placeholder:"Alerts feed URL",tooltip:"Enter the RSS feed URL provided by Google Alerts, e.g. http://www.google.com/alerts/feeds/XXXX"}}}},a=D.Backbone.wt.TimelineWidget.extend(a),
j=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{googlealerts_feed_entries_timeline:a});_.extend(Ducksboard.Backbone.service_kinds,{googlealerts:j})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to YouTube",url:"https://www.youtube.com/dashboard"})}}),j=D.Backbone.wt.MultilineChartView.extend(a),e=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly"]}),d=D.Backbone.slot_kinds.LineChart.extend({allowed_timespans:["weekly","monthly"]}),g=D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["weekly",
"monthly"]}),b=D.Backbone.slot_kinds.RelativeStackedChart.extend({allowed_timespans:["weekly","monthly"]}),f=D.Backbone.wt.MultilineChartWidget.extend({view_cls:j,kind_cls:d}),g=D.Backbone.wt.AbsoluteMultilineChartWidget.extend({view_cls:j,kind_cls:g}),h={view_cls:a},o={timespan_days:{template:"select",template_data:{options:[{value:"365",display_name:"yearly"},{value:"30",display_name:"monthly"},{value:"7",display_name:"weekly"},{value:"2",display_name:"daily"}]}}},a=D.Backbone.wt.TrendWidget.extend(h).extend({kind_cls:e,
defaults:{title:"YouTube Total Views",sound:false},trend_defs:{subtitle:"views",color:"rgba(203, 25, 28, 0.65)",timespan:"monthly"}}),g=g.extend({defaults:{title:"YouTube Viewers",sound:false},subtitles:["views","uniques"],colors:["rgba(203, 25, 28, 0.65)","rgba(75, 99, 149, 0.65)"],trend_defs:{timespan:"monthly"}}),d=D.Backbone.wt.TrendWidget.extend(h).extend({kind_cls:e,defaults:{title:"YouTube Total Comments",sound:false},trend_defs:{subtitle:"comments",color:"rgba(203, 25, 28, 0.65)",timespan:"monthly"}}),
u=D.Backbone.wt.TrendWidget.extend(h).extend({kind_cls:e,defaults:{title:"YouTube Total Shares",sound:false},trend_defs:{subtitle:"shares",color:"rgba(203, 25, 28, 0.65)",timespan:"monthly"}}),q=f.extend({defaults:{title:"YouTube Subscribers",sound:false},subtitles:["gained","lost"],colors:["rgba(75, 99, 149, 0.65)","rgba(203, 25, 28, 0.65)"],trend_defs:{timespan:"monthly"}}),l=D.Backbone.wt.TrendWidget.extend(h).extend({kind_cls:e,defaults:{title:"YouTube Total Subscribers",sound:false},trend_defs:{subtitle:"subscribers",
color:"rgba(203, 25, 28, 0.65)",timespan:"monthly"}}),e=D.Backbone.wt.TrendWidget.extend(h).extend({kind_cls:e,defaults:{title:"YouTube Attrition Rate",sound:false},trend_defs:{subtitle:"attrition rate",color:"rgba(203, 25, 28, 0.65)",timespan:"monthly"}}),k=D.Backbone.wt.GaugeWidget.extend(h).extend({defaults:{title:"YouTube Attrition Rate",sound:false},subtitles:["attrition rate"],colors:["rgba(203, 25, 28, 0.65)"],data_source_params:_.extend({},o)}),f=f.extend({defaults:{title:"YouTube Likes and Dislikes",
sound:false},subtitles:["likes","dislikes"],colors:["rgba(75, 99, 149, 0.65)","rgba(203, 25, 28, 0.65)"],trend_defs:{timespan:"monthly"}}),n=D.Backbone.wt.TrendLeaderboardWidget.extend(h).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Youtube Top Videos",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(203, 25, 28, 0.65)",subtitle2:"views",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"pct",color3:"rgba(9, 9, 9, 0.65)"},data_source_params:_.extend({},
o)}),x=D.Backbone.wt.LeaderboardWidget.extend(h).extend({defaults:{title:"Youtube Viewers age and gender",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"age",color1:"rgba(203, 25, 28, 0.65)",subtitle2:"male",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"female",color3:"rgba(9, 9, 9, 0.65)"},data_source_params:_.extend({},o)}),v=D.Backbone.wt.TrendLeaderboardWidget.extend(h).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Youtube Top Locations",sound:false},leaderboard_defs:{total_subtitles:3,
subtitle1:"country",color1:"rgba(203, 25, 28, 0.65)",subtitle2:"views",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"pct",color3:"rgba(9, 9, 9, 0.65)"},data_source_params:_.extend({},o)}),w=D.Backbone.wt.TrendLeaderboardWidget.extend(h).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Youtube Traffic Sources",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(203, 25, 28, 0.65)",subtitle2:"views",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"pct",color3:"rgba(9, 9, 9, 0.65)"},
data_source_params:_.extend({},o)}),j=D.Backbone.wt.StackedChartLeaderboardStatusWidget.extend(h).extend({defaults:{title:"Playback locations",sound:false},kind_cls:b,leaderboard_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,view_cls:j,trend_defs:{timespan:"monthly"},leaderboard_defs:{total_subtitles:4,subtitle1:"Top locations",color1:"rgba(122, 123, 118, 0.65)",subtitle2:"",color2:"rgba(203, 25, 28, 0.65)",subtitle3:"views",color3:"rgba(9, 9, 9, 0.65)",subtitle4:"pct",color4:"rgba(9, 9, 9, 0.65)",
has_title:true},subtitles:["watch","channel","embedded","mobile"],colors:["rgba(75, 99, 149, 0.65)","rgba(171, 227, 114, 0.65)","rgba(226, 135, 97, 0.65)","rgba(83, 169, 207, 0.65)"],data_source_params:_.extend({},o)}),b=D.Backbone.wt.GaugeWidget.extend(h).extend({defaults:{title:"Viewers gender ratio",sound:false},subtitles:["men/women ratio"],colors:["rgba(203, 25, 28, 0.65)"],data_source_params:_.extend({},o)}),h=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{youtube_views_counter:a,
youtube_views_uniques_graph:g,youtube_comments_counter:d,youtube_shares_counter:u,youtube_lost_gained_subscribers_graph:q,youtube_subscribers_counter:l,youtube_attrition_rate_counter:e,youtube_attrition_rate_gauge:k,youtube_likes_dislikes_graph:f,youtube_top_videos_leaderboard:n,youtube_demographics_leaderboard:x,youtube_gender_rate_gauge:b,youtube_top_locations_leaderboard:v,youtube_traffic_sources_leaderboard:w,youtube_playback_location_stacked_leaderboard:j});_.extend(Ducksboard.Backbone.service_kinds,
{youtube:h})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to Instagram account",url:"https://instagram.com/accounts/edit/"})}}),j=D.Backbone.wt.MultilineChartView.extend(a),e={view_cls:a},a=D.Backbone.wt.TrendWidget.extend(e).extend({defaults:{title:"Instagram followers",sound:false},trend_defs:{subtitle:"followers",color:"rgba(69, 158, 230, 0.65)",timespan:"daily"}}),d=_.extend(_.clone(e),{defaults:{title:"Instagram engagement rate",
sound:false}}),g=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_number(a,2,6)+"%"}}),b=D.Backbone.slot_kinds.CounterTrend.extend({initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,arguments);this.view=new g({model:this})}}),b=D.Backbone.wt.TrendWidget.extend(d).extend({kind_cls:b,trend_defs:{subtitle:"engagement rate",color:"rgba(69, 158, 230, 0.65)",timespan:"weekly"}}),j=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend(d).extend({view_cls:j,
subtitles:["engagement rate"],colors:["rgba(69, 158, 230, 0.65)"],trend_defs:{timespan:"weekly"}}),d=_.extend(e,{defaults:{title:"Instagram feed",sound:false}}),d=D.bb.wt.TimelineWidget.extend(d),f=_.extend(_.clone(e),{defaults:{title:"Instagram recent media",sound:false},data_source_params:{username:{template:"input_text",template_data:{placeholder:"username (optional)",tooltip:"If not indicated, your media will be retrieved"}}}}),h=_.extend(_.clone(e),{defaults:{title:"Instagram media search",sound:false},
data_source_params:{tag:{template:"input_text",template_data:{placeholder:"tag name"}}}}),o=D.bb.wt.FullImageWidget.extend({css_classes:D.bb.wt.FullImageWidget.prototype.css_classes+" no-caption"}),e=D.bb.wt.TimelineWidget.extend(f),u=D.bb.wt.ImageWidget.extend(f),f=o.extend(f),q=D.bb.wt.TimelineWidget.extend(h),l=D.bb.wt.ImageWidget.extend(h),h=o.extend(h),o=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{instagram_user_followers_counter:a,instagram_user_engagement_rate_counter:b,
instagram_user_engagement_rate_absolute_area_graph:j,instagram_user_feed_timeline:d,instagram_user_media_timeline:e,instagram_user_media_image:u,instagram_user_media_image_fullsize:f,instagram_media_search_timeline:q,instagram_media_search_image:l,instagram_media_search_image_fullsize:h});_.extend(Ducksboard.Backbone.service_kinds,{instagram:o})})();
(function(){var a={events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to Mixpanel",url:"https://mixpanel.com/"})}},j=D.Backbone.WidgetView.extend(a),e=D.bb.wt.MultilineChartView.extend(a),a=D.Backbone.wt.TrendLeaderboardWidget.extend({view_cls:j,kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Top events",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"event",color1:"#ababa3",subtitle2:"count",color2:"#4572a7",
subtitle3:"pct",color3:"#4572a7"},data_source_params:{unique_events:{template:"select",template_data:{options:[{value:"",display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),d=D.Backbone.wt.LeaderboardWidget.extend({view_cls:j,defaults:{title:"Properties breakdown",sound:false},leaderboard_defs:{total_subtitles:2,subtitle1:"value",color1:"#ababa3",subtitle2:"count",color2:"#4572a7"},data_source_params:{event_name:{template:"select",template_data:{load_service_params:true,
klass:"load:property_name"}},property_name:{template:"select",template_data:{load_service_params:true}},unit:{template:"select",template_data:{options:[{value:"day",display_name:"look at current day's events"},{value:"week",display_name:"look at current week's events"},{value:"month",display_name:"look at current month's events"}]}},unique_events:{template:"select",template_data:{options:[{value:"",display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),g={view_cls:j,
defaults:{title:"Mixpanel funnel",sound:false},data_source_params:{funnel_id:{template:"select",template_data:{load_service_params:true}},unit:{template:"select",template_data:{options:[{value:"day",display_name:"look at current day's events"},{value:"week",display_name:"look at current week's events"},{value:"month",display_name:"look at current month's events"}]}}}},b=D.Backbone.wt.FunnelWidget.extend(g).extend({subtitles:["completion"],colors:["#4572a7"]}),f=D.Backbone.wt.BarsWidget.extend(g).extend({subtitles:["step 1",
"step 2","step 3"],colors:["#4572a7","#4572a7","#4572a7"]}),h=D.Backbone.wt.BarsWidget.extend(g).extend({subtitles:["step 1","step 2","step 3","step 4"],colors:["#4572a7","#4572a7","#4572a7","#4572a7"]}),g=D.Backbone.wt.BarsWidget.extend(g).extend({subtitles:["step 1","step 2","step 3","step 4","step 5"],colors:["#4572a7","#4572a7","#4572a7","#4572a7","#4572a7"]}),o=D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["quarterly","yearly"],filled_data:function(){var a=D.Backbone.slot_kinds.AbsoluteLineChart.prototype.filled_data.apply(this,
arguments);a[0]=_.map(a[0],function(a){return a*100});return a}}),o=D.Backbone.wt.AbsoluteMultilineChartWidget.extend({kind_cls:o,view_cls:e,defaults:{title:"Funnel performance",sound:false},subtitles:["performance"],colors:["#4572a7"],trend_defs:{timespan:"quarterly"},find_best_ticks:function(){var a=D.Backbone.wt.AbsoluteMultilineChartWidget.prototype.find_best_ticks.apply(this,arguments);a[2]=_.map(a[2],function(a){return a+"%"});return a},data_source_params:{funnel_id:{template:"select",template_data:{load_service_params:true}},
funnel_length:{template:"input_text",template_data:{placeholder:"funnel length in days",tooltip:"The number of days each user has to complete the funnel, starting from the time they triggered the first step in the funnel."}}}}),u=D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["daily"]}),q=D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["weekly","monthly"]}),l=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly"]}),k={view_cls:e,defaults:{title:"Event count",
sound:false}},j=D.Backbone.wt.TrendWidget.extend({view_cls:j,kind_cls:l,defaults:{title:"Mixpanel event count",sound:false},trend_defs:{subtitle:"events",color:"#4572a7",timespan:"daily"},data_source_params:{event_name:{template:"select",template_data:{load_service_params:true}},unique_events:{template:"select",template_data:{options:[{value:"",display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),n=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(k).extend({subtitles:["event"],
colors:["#4572a7"],data_source_params:{event_name:{template:"select",template_data:{load_service_params:true}},unique_events:{template:"select",template_data:{options:[{value:"",display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),l=n.extend({kind_cls:u,trend_defs:{timespan:"daily"}}),n=n.extend({kind_cls:q,trend_defs:{timespan:"monthly"}}),x=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(k).extend({subtitles:["event 1","event 2"],colors:["#4572a7","#a94542"],data_source_params:{event_name:{template:"select",
template_data:{load_service_params:true}},event_name2:{template:"select",template_data:{load_service_params:true}},unique_events:{template:"select",template_data:{options:[{value:"",display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),v=x.extend({kind_cls:u,trend_defs:{timespan:"daily"}}),x=x.extend({kind_cls:q,trend_defs:{timespan:"monthly"}}),w=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(k).extend({subtitles:["event 1","event 2","event 3"],colors:["#4572a7",
"#a94542","#89a54e"],data_source_params:{event_name:{template:"select",template_data:{load_service_params:true}},event_name2:{template:"select",template_data:{load_service_params:true}},event_name3:{template:"select",template_data:{load_service_params:true}},unique_events:{template:"select",template_data:{options:[{value:"",display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),k=w.extend({kind_cls:u,trend_defs:{timespan:"daily"}}),w=w.extend({kind_cls:q,trend_defs:{timespan:"monthly"}}),
z={view_cls:e,defaults:{title:"Property count",sound:false}},E=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(z).extend({subtitles:["segment"],colors:["#4572a7"],data_source_params:{event_name:{template:"select",template_data:{load_service_params:true,klass:"load:property_name"}},property_name:{template:"select",template_data:{load_service_params:true,klass:"load:property_value"}},property_value:{template:"select",template_data:{load_service_params:true}},unique_events:{template:"select",template_data:{options:[{value:"",
display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),e=E.extend({kind_cls:u,trend_defs:{timespan:"daily"}}),E=E.extend({kind_cls:q,trend_defs:{timespan:"monthly"}}),B=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(z).extend({subtitles:["segment 1","segment 2"],colors:["#4572a7","#a94542"],data_source_params:{event_name:{template:"select",template_data:{load_service_params:true,klass:"load:property_name"}},property_name:{template:"select",template_data:{load_service_params:true,
klass:"load:property_value"}},property_value:{template:"select",template_data:{load_service_params:true}},property_value2:{template:"select",template_data:{load_service_params:true}},unique_events:{template:"select",template_data:{options:[{value:"",display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),F=B.extend({kind_cls:u,trend_defs:{timespan:"daily"}}),B=B.extend({kind_cls:q,trend_defs:{timespan:"monthly"}}),z=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(z).extend({subtitles:["segment 1",
"segment 2","segment 3"],colors:["#4572a7","#a94542","#89a54e"],data_source_params:{event_name:{template:"select",template_data:{load_service_params:true,klass:"load:property_name"}},property_name:{template:"select",template_data:{load_service_params:true,klass:"load:property_value"}},property_value:{template:"select",template_data:{load_service_params:true}},property_value2:{template:"select",template_data:{load_service_params:true}},property_value3:{template:"select",template_data:{load_service_params:true}},
unique_events:{template:"select",template_data:{options:[{value:"",display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),u=z.extend({kind_cls:u,trend_defs:{timespan:"daily"}}),q=z.extend({kind_cls:q,trend_defs:{timespan:"monthly"}}),z=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_key"],["auth_password","api_secret"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name",
tooltip:"Choose any name to give to this account, so you can find it later in the accounts list."}},auth_user:{template:"input_text",template_data:{placeholder:"API key"}},auth_password:{template:"input_text",template_data:{placeholder:"API secret"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{mixpanel_top_events_leaderboard:a,mixpanel_segmentation_leaderboard:d,mixpanel_funnel:b,mixpanel_funnel_bars3:f,mixpanel_funnel_bars4:h,mixpanel_funnel_bars5:g,mixpanel_funnel_performance_absolute_graph:o,
mixpanel_hourly_events_absolute_graph:l,mixpanel_hourly_events_absolute_graph2:v,mixpanel_hourly_events_absolute_graph3:k,mixpanel_daily_events_absolute_graph:n,mixpanel_daily_events_absolute_graph2:x,mixpanel_daily_events_absolute_graph3:w,mixpanel_daily_events_counter:j,mixpanel_hourly_properties_absolute_graph:e,mixpanel_hourly_properties_absolute_graph2:F,mixpanel_hourly_properties_absolute_graph3:u,mixpanel_daily_properties_absolute_graph:E,mixpanel_daily_properties_absolute_graph2:B,mixpanel_daily_properties_absolute_graph3:q});
_.extend(Ducksboard.Backbone.service_kinds,{mixpanel:z})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=this.model.data_source.get("service_id");if(b=D.Backbone.services.get(b)){b=_.sprintf("https://%s.zendesk.com/",b.get("auth_domain"));this.add_context_action(a,{label:"Go to Zendesk account",url:b})}}}),j=D.Backbone.wt.MultilineChartView.extend(a),e={view_cls:a,data_source_params:{group_name:{template:"select_multiple",template_data:{placeholder:"All groups",load_service_params:true}}}},
d={view_cls:a,data_source_params:_.extend(_.clone(e.data_source_params),_.clone({tags:{template:"select_multiple",template_data:{placeholder:"All tags",load_service_params:true}}}))},g={timespan_days:{template:"select",template_data:{options:[{value:"7",display_name:" a week's worth of data"},{value:"1",display_name:"two day's worth of data"},{value:"0",display_name:"today's data"}]}}},b={view_cls:a,data_source_params:_.extend(_.clone(e.data_source_params),_.clone(g))},f={view_cls:a,data_source_params:_.extend(_.clone(d.data_source_params),
_.clone(g))},h={view_cls:a,data_source_params:{view_id:{template:"select",template_data:{load_service_params:true}}}},o={exclude_tags:{template:"input_text",template_data:{placeholder:"optional tags to exclude",tooltip:"A comma separated list of tags to exclude when calculating"}}},g=D.Backbone.wt.BoxesWidget.extend(d).extend({defaults:{title:"Zendesk tickets by status",sound:false},subtitles:["new","open","pending"],colors:["rgba(9, 9, 9, 0.65)","rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)"]}),
u=D.Backbone.wt.BarsWidget.extend(d).extend({defaults:{title:"Zendesk tickets by status",sound:false},subtitles:["new","open","pending"],colors:["rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)"]}),q=D.Backbone.wt.BarsWidget.extend(d).extend({defaults:{title:"Zendesk tickets by type",sound:false},subtitles:["none","question","incident","problem","task"],colors:["rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)",
"rgba(157, 199, 88, 0.65)"]}),l=D.Backbone.wt.BarsWidget.extend(d).extend({defaults:{title:"Zendesk tickets by priority",sound:false},subtitles:["none","low","normal","high","urgent"],colors:["rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)"]}),k=_.extend({},d,{defaults:{title:"Zendesk unresolved tickets",sound:false},trend_defs:{subtitle:"unresolved tickets",color:"rgba(59, 121, 10, 0.65)",timespan:"daily"}}),k=
D.Backbone.wt.TrendWidget.extend(k),n=D.Backbone.wt.TrendWidget.extend(d).extend({defaults:{title:"Zendesk urgent and unresolved tickets",sound:false},trend_defs:{subtitle:"urgent & unresolved",color:"rgba(203, 25, 28, 0.65)",timespan:"daily"}}),x=D.Backbone.wt.TrendWidget.extend(d).extend({defaults:{title:"Zendesk unassigned tickets",sound:false},trend_defs:{subtitle:"unassigned tickets",color:"rgba(247, 209, 2, 0.65)",timespan:"daily"}}),v=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_time(a,
2)}}),w=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly"],initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,arguments);this.view=new v({model:this})}}),z={view_cls:a,data_source_params:_.extend(_.clone(f.data_source_params),{business_hours:{template:"select",template_data:{options:[{value:"",display_name:"regardless of business hours"},{value:"t",display_name:"within business hours"}]}}})},E=D.Backbone.wt.TrendWidget.extend(z).extend({kind_cls:w,
defaults:{title:"Zendesk response time",sound:false},trend_defs:{subtitle:"response time",color:"rgba(59, 121, 10, 0.65)",timespan:"weekly"}}),w=D.Backbone.wt.TrendWidget.extend(z).extend({kind_cls:w,defaults:{title:"Zendesk solution time",sound:false},trend_defs:{subtitle:"solution time",color:"rgba(203, 25, 28, 0.65)",timespan:"weekly"}}),z=D.Backbone.wt.GaugeWidget.extend(b).extend({view_cls:a,defaults:{title:"Zendesk customer satisfaction",sound:false},subtitles:["overall happiness"],colors:["rgba(157, 199, 88, 0.65)"]}),
B=D.Backbone.wt.TimelineWidget.extend({view_cls:a,defaults:{title:"Zendesk activity stream",sound:false}}),F=D.Backbone.wt.TrendLeaderboardWidget.extend(e).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,data_source_params:_.extend(_.clone(e.data_source_params),_.clone(o)),defaults:{title:"Zendesk top tags",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(59, 121, 10, 0.65)",subtitle2:"count",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"pct",color3:"rgba(9, 9, 9, 0.65)"}}),
b=D.Backbone.wt.TrendLeaderboardWidget.extend(b).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Zendesk satisfaction per agent",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(59, 121, 10, 0.65)",subtitle2:"ratings",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"pct",color3:"rgba(9, 9, 9, 0.65)"}}),t=D.Backbone.wt.TrendLeaderboardWidget.extend(d).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Zendesk unresolved tickets per agent",
sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(59, 121, 10, 0.65)",subtitle2:"total",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"pct",color3:"rgba(9, 9, 9, 0.65)"}}),f=D.Backbone.wt.TrendLeaderboardWidget.extend(f).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Zendesk solved tickets per agent",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(59, 121, 10, 0.65)",subtitle2:"total",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"pct",
color3:"rgba(9, 9, 9, 0.65)"}}),G=D.Backbone.wt.StackedChartWidget.extend(d).extend({view_cls:j,defaults:{title:"Zendesk tickets by priority",sound:false},subtitles:["none","low","normal","high","urgent"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(247, 209, 2, 0.65)","rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)"],trend_defs:{timespan:"daily"}}),y=_.extend({},d,{view_cls:j,defaults:{title:"Zendesk tickets by priority",sound:false},subtitles:["none","low","normal","high",
"urgent"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(247, 209, 2, 0.65)","rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)"],trend_defs:{timespan:"daily"}}),y=D.bb.wt.MultilineChartWidget.extend(y),A=D.Backbone.wt.StackedChartWidget.extend(d).extend({view_cls:j,defaults:{title:"Zendesk tickets by status",sound:false},subtitles:["new","open","pending"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(251, 136, 11, 0.65)"],trend_defs:{timespan:"daily"}}),
d=_.extend({},d,{view_cls:j,defaults:{title:"Zendesk tickets by type",sound:false},subtitles:["none","question","incident","problem","task"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(247, 209, 2, 0.65)","rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)"],trend_defs:{timespan:"daily"}}),d=D.Backbone.wt.StackedChartWidget.extend(d),C=function(a){return _.extend({},{view_cls:j,defaults:{title:"Zendesk created vs "+a+" tickets",sound:false},subtitles:["created",a],colors:["rgba(157, 199, 88, 0.65)",
"rgba(59, 136, 177, 0.65)"],trend_defs:{timespan:"daily"}})},K=D.Backbone.wt.MultiareaChartWidget.extend(C("closed")),C=D.Backbone.wt.MultiareaChartWidget.extend(C("solved")),m=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(e).extend({view_cls:j,defaults:{title:"Zendesk unresolved tickets by group",sound:false},subtitles:["group1","group2"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)"],trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:true}},
group_name2:{template:"select",template_data:{load_service_params:true}}}}),P=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(e).extend({view_cls:j,defaults:{title:"Zendesk unresolved tickets by group",sound:false},subtitles:["group1","group2","group3"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(247, 209, 2, 0.65)"],trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:true}},group_name2:{template:"select",template_data:{load_service_params:true}},
group_name3:{template:"select",template_data:{load_service_params:true}}}}),J=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(e).extend({view_cls:j,defaults:{title:"Zendesk unresolved tickets by group",sound:false},subtitles:["group1","group2","group3","group4"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(247, 209, 2, 0.65)","rgba(251, 136, 11, 0.65)"],trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:true}},
group_name2:{template:"select",template_data:{load_service_params:true}},group_name3:{template:"select",template_data:{load_service_params:true}},group_name4:{template:"select",template_data:{load_service_params:true}}}}),T=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(e).extend({view_cls:j,defaults:{title:"Zendesk unresolved tickets by group",sound:false},subtitles:["group1","group2","group3","group4","group5"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(247, 209, 2, 0.65)",
"rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)"],trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:true}},group_name2:{template:"select",template_data:{load_service_params:true}},group_name3:{template:"select",template_data:{load_service_params:true}},group_name4:{template:"select",template_data:{load_service_params:true}},group_name5:{template:"select",template_data:{load_service_params:true}}}}),e=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(e).extend({view_cls:j,
defaults:{title:"Zendesk unresolved tickets by group",sound:false},subtitles:["group1","group2","group3","group4","group5","group6"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(247, 209, 2, 0.65)","rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)","rgba(77, 34, 89, 0.65)"],trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:true}},group_name2:{template:"select",template_data:{load_service_params:true}},group_name3:{template:"select",
template_data:{load_service_params:true}},group_name4:{template:"select",template_data:{load_service_params:true}},group_name5:{template:"select",template_data:{load_service_params:true}},group_name6:{template:"select",template_data:{load_service_params:true}}}}),Q={view_cls:a,defaults:{title:"Tickets by tag",sound:false}},a=D.Backbone.wt.BarsWidget.extend(Q).extend({subtitles:["tag1","tag2","tag3"],colors:["rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)"],data_source_params:{group_name:{template:"select_multiple",
template_data:{placeholder:"Filter by group",load_service_params:true}},tag_name:{template:"input_text",template_data:{placeholder:"First tag"}},tag_name2:{template:"input_text",template_data:{placeholder:"Second tag"}},tag_name3:{template:"input_text",template_data:{placeholder:"Third tag"}}}}),I=D.Backbone.wt.BarsWidget.extend(Q).extend({subtitles:["tag1","tag2","tag3","tag4"],colors:["rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)"],data_source_params:{group_name:{template:"select_multiple",
template_data:{placeholder:"Filter by group",load_service_params:true}},tag_name:{template:"input_text",template_data:{placeholder:"First tag"}},tag_name2:{template:"input_text",template_data:{placeholder:"Second tag"}},tag_name3:{template:"input_text",template_data:{placeholder:"Third tag"}},tag_name4:{template:"input_text",template_data:{placeholder:"Fourth tag"}}}}),Q=D.Backbone.wt.BarsWidget.extend(Q).extend({subtitles:["tag1","tag2","tag3","tag4","tag5"],colors:["rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)",
"rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)"],data_source_params:{group_name:{template:"select_multiple",template_data:{placeholder:"Filter by group",load_service_params:true}},tag_name:{template:"input_text",template_data:{placeholder:"First tag"}},tag_name2:{template:"input_text",template_data:{placeholder:"Second tag"}},tag_name3:{template:"input_text",template_data:{placeholder:"Third tag"}},tag_name4:{template:"input_text",template_data:{placeholder:"Fourth tag"}},
tag_name5:{template:"input_text",template_data:{placeholder:"Fifth tag"}}}}),M=D.Backbone.wt.TrendWidget.extend(h).extend({defaults:{title:"Zendesk view tickets",sound:false},trend_defs:{subtitle:"total view tickets",color:"rgba(59, 121, 10, 0.65)",timespan:"daily"}}),h=D.Backbone.wt.TrendLeaderboardWidget.extend(h).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,data_source_params:_.extend(_.clone(h.data_source_params),_.clone(o)),defaults:{title:"Zendesk top view tags",sound:false},
leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(59, 121, 10, 0.65)",subtitle2:"count",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"pct",color3:"rgba(9, 9, 9, 0.65)"}}),o=D.Backbone.Service.extend({description:"Your brand is much more than a mark. It is the sum total of your customer\u2019s experience with you. These widgets bring your Zendesk customer service KPIs to your dash.",signup_url:"http://www.zendesk.com/",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user",
"email"],["auth_domain","subdomain"],["auth_password","password"]]),params:{auth_user:{template:"input_text",template_data:{placeholder:"E-mail"}},auth_domain:{template:"input_text",template_data:{placeholder:"Your Zendesk domain (like company.zendesk.com)",tooltip:"Use the Zendesk domain, if your account is using a custom domain.<br>For instance enter company.zendesk.com instead of company.support.com"}},auth_password:{template:"input_password",template_data:{placeholder:"Password"}}}});_.extend(Ducksboard.Backbone.widget_kinds,
{zendesk_tickets_by_status_boxes:g,zendesk_tickets_by_priority_bars:l,zendesk_tickets_by_priority_stacked_graph:G,zendesk_tickets_by_priority_graph:y,zendesk_tickets_by_status_bars:u,zendesk_tickets_by_status_stacked_graph:A,zendesk_tickets_by_type_bars:q,zendesk_tickets_by_type_stacked_graph:d,zendesk_unresolved_tickets_counter:k,zendesk_unresolved_urgent_tickets_counter:n,zendesk_unresolved_tickets_by_tag_bars3:a,zendesk_unresolved_tickets_by_tag_bars4:I,zendesk_unresolved_tickets_by_tag_bars5:Q,
zendesk_unresolved_tickets_by_group_absolute_graph2:m,zendesk_unresolved_tickets_by_group_absolute_graph3:P,zendesk_unresolved_tickets_by_group_absolute_graph4:J,zendesk_unresolved_tickets_by_group_absolute_graph5:T,zendesk_unresolved_tickets_by_group_absolute_graph6:e,zendesk_unassigned_tickets_counter:x,zendesk_average_response_time_counter:E,zendesk_average_solution_time_counter:w,zendesk_customer_satisfaction_gauge:z,zendesk_activity_stream_timeline:B,zendesk_top_active_tags_leaderboard:F,zendesk_view_tickets_counter:M,
zendesk_view_top_tags_leaderboard:h,zendesk_tickets_created_closed_area_graph:K,zendesk_tickets_created_solved_area_graph:C,zendesk_agents_satisfaction_leaderboard:b,zendesk_unresolved_tickets_agent_leaderboard:t,zendesk_solved_tickets_agent_leaderboard:f});_.extend(Ducksboard.Backbone.service_kinds,{zendesk:o})})();
(function(){var a=D.Backbone.WidgetView.extend({append:function(){},notify:function(){}}),a=D.Backbone.Widget.extend({view_cls:a,slot_defs:{1:{kind:Ducksboard.Backbone.slot_kinds.Notification,defaults:{since:86400}}}}),j=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{notification_handler:a});_.extend(Ducksboard.Backbone.service_kinds,{internal:j})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=this.model.data_source.get("service_id");if(D.Backbone.services.get(b)){b=_.sprintf("http://www.facebook.com/%s",this.model.data_source.get("object_id"));this.add_context_action(a,{label:"Go to Facebook account",url:b})}}}),j={view_cls:a,data_source_params:{object_id:{template:"select",template_data:{load_service_params:true}}}},e=D.Backbone.slot_kinds.AbsoluteChart.extend({allowed_timespans:["weekly",
"monthly"],initialize:function(){D.Backbone.slot_kinds.AbsoluteChart.prototype.initialize.apply(this,arguments);this.view=new D.Backbone.slot_views.ChartView({model:this})}}),d=D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["weekly","monthly"]}),g=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_number(a*100,1,4)+"%"}}),b=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly"],initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,
arguments);this.view=new g({model:this})}}),f=D.Backbone.wt.MultilineChartView.extend(a),h=D.Backbone.wt.TrendWidget.extend(j).extend({kind:"facebook_fans_counter",defaults:{title:"Facebook likes",sound:false},trend_defs:{subtitle:"fb likes",color:"rgba(75, 99, 149, 0.65)",timespan:"daily"}}),o=D.Backbone.wt.MultilineChartWidget.extend(j).extend({view_cls:f,defaults:{title:"Facebook",sound:false},subtitles:["likes"],colors:["rgba(75, 99, 149, 0.65)"],trend_defs:{timespan:"daily"}}),u={view_cls:a,
data_source_params:{object_id:{template:"select",template_data:{load_service_params:true}},timespan_days:{template:"select",template_data:{options:[{value:"31",display_name:"monthly attrition rate"},{value:"8",display_name:"weekly attrition rate"},{value:"2",display_name:"daily attrition rate"}]}}}},a=D.Backbone.wt.GaugeWidget.extend(u).extend({defaults:{title:"Likes attrition rate",sound:false},subtitles:["attrition rate"],colors:["rgba(75, 99, 149, 0.65)"]}),b=D.Backbone.wt.TrendWidget.extend(u).extend({kind_cls:b,
defaults:{title:"Likes attrition rate",sound:false},trend_defs:{subtitle:"attrition rate",color:"rgba(75, 99, 149, 0.65)",timespan:"monthly"}}),u=D.Backbone.wt.GaugeWidget.extend({defaults:{title:"Likes growth rate",sound:false},subtitles:["growth rate"],colors:["rgba(75, 99, 149, 0.65)"],data_source_params:{object_id:{template:"select",template_data:{load_service_params:true}},timespan_days:{template:"select",template_data:{options:[{value:"31",display_name:"monthly growth rate"},{value:"8",display_name:"weekly growth rate"},
{value:"2",display_name:"daily growth rate"}]}}}}),q=D.Backbone.wt.GaugeWidget.extend(j).extend({defaults:{title:"Likes gender ratio",sound:false},subtitles:["men/women ratio"],colors:["rgba(59, 136, 177, 0.65)"]}),l=D.Backbone.wt.PinsWidget.extend(j).extend({defaults:{title:"Likes gender breakdown",sound:false},subtitles:["men","women"],colors:["rgba(75, 99, 149, 0.65)","rgba(193, 31, 112, 0.65)"]}),k=D.Backbone.wt.LeaderboardWidget.extend(j).extend({defaults:{title:"Likes demographics",sound:false},
leaderboard_defs:{total_subtitles:4,subtitle1:"age",color1:"rgba(122, 123, 118, 0.65)",subtitle2:"men",color2:"rgba(75, 99, 149, 0.65)",subtitle3:"women",color3:"rgba(75, 99, 149, 0.65)",subtitle4:"undef",color4:"rgba(75, 99, 149, 0.65)"}}),n=D.Backbone.wt.TrendLeaderboardWidget.extend(j).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Facebook likes top sources",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"source",color1:"rgba(112, 123, 118, 0.65)",
subtitle2:"likes",color2:"rgba(75, 99, 149, 0.65)",subtitle3:"pct",color3:"rgba(75, 99, 149, 0.65)"}}),x=D.Backbone.wt.BarsWidget.extend(j).extend({defaults:{title:"Likes sources",sound:false},subtitles:["page","timeline","ticker","mobile","other"],colors:["rgba(75, 99, 149, 0.65)","rgba(75, 99, 149, 0.65)","rgba(75, 99, 149, 0.65)","rgba(75, 99, 149, 0.65)","rgba(75, 99, 149, 0.65)"]}),v=D.Backbone.wt.ChartWidget.extend(j).extend({kind_cls:e,defaults:{title:"Facebook pageviews",sound:false},trend_defs:{subtitle:"fb pageviews",
color:"rgba(157, 199, 88, 0.65)",timespan:"monthly"}}),w=D.Backbone.wt.ChartWidget.extend(j).extend({kind_cls:e,defaults:{title:"Facebook unique visitors",sound:false},trend_defs:{subtitle:"fb unique visitors",color:"rgba(157, 199, 88, 0.65)",timespan:"monthly"}}),z=D.Backbone.wt.ChartWidget.extend(j).extend({kind_cls:e,defaults:{title:"Facebook people talking about",sound:false},trend_defs:{subtitle:"fb people talking",color:"rgba(157, 199, 88, 0.65)",timespan:"monthly"}}),e=D.Backbone.wt.ChartWidget.extend(j).extend({kind_cls:e,
defaults:{title:"Facebook viral reach",sound:false},trend_defs:{subtitle:"fb viral reach",color:"rgba(157, 199, 88, 0.65)",timespan:"monthly"}}),d=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(j).extend({view_cls:f,kind_cls:d,defaults:{title:"Facebook reach",sound:false},subtitles:["organic","paid","viral"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(247, 209, 2, 0.65)"],trend_defs:{timespan:"monthly"}}),f=D.Backbone.wt.TrendLeaderboardWidget.extend(j).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,
defaults:{title:"Facebook likes top countries",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"country",color1:"rgba(112, 123, 118, 0.65)",subtitle2:"likes",color2:"rgba(75, 99, 149, 0.65)",subtitle3:"pct",color3:"rgba(75, 99, 149, 0.65)"}}),E=D.Backbone.wt.TrendLeaderboardWidget.extend(j).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Facebook likes top cities",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"city",color1:"rgba(122, 123, 118, 0.65)",
subtitle2:"likes",color2:"rgba(75, 99, 149, 0.65)",subtitle3:"pct",color3:"rgba(75, 99, 149, 0.65)"}}),B=D.Backbone.wt.TrendLeaderboardWidget.extend(j).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Facebook likes top languages",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"language",color1:"rgba(122, 123, 118, 0.65)",subtitle2:"likes",color2:"rgba(75, 99, 149, 0.65)",subtitle3:"pct",color3:"rgba(75, 99, 149, 0.65)"}}),j=D.Backbone.wt.TrendLeaderboardWidget.extend(j).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,
defaults:{title:"Facebook top external referrals",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(122, 123, 118, 0.65)",subtitle2:"visits",color2:"rgba(75, 99, 149, 0.65)",subtitle3:"pct",color3:"rgba(75, 99, 149, 0.65)"}}),F=D.Backbone.Service.extend({description:"Keep an eye on your Facebook Insights with these ready-to-go widgets.",signup_url:"http://www.facebook.com/"});_.extend(Ducksboard.Backbone.widget_kinds,{facebook_fans_counter:h,facebook_fans_graph:o,facebook_fans_attrition_rate_gauge:a,
facebook_fans_attrition_rate_counter:b,facebook_fans_growth_rate_gauge:u,facebook_fans_gender_gauge:q,facebook_fans_gender_pins:l,facebook_fans_demographics_leaderboard:k,facebook_fans_sources_leaderboard:n,facebook_fans_sources_bars:x,facebook_pageviews_absolute_graph:v,facebook_unique_pageviews_absolute_graph:w,facebook_page_storytellers_absolute_graph:z,facebook_page_viral_reach_absolute_graph:e,facebook_page_reach_absolute_graph3:d,facebook_fans_countries_leaderboard:f,facebook_fans_cities_leaderboard:E,
facebook_fans_languages_leaderboard:B,facebook_page_external_referrals_leaderboard:j});_.extend(Ducksboard.Backbone.service_kinds,{facebook:F})})();
(function(){var a=D.Backbone.Widget.extend({defaults:{title:"Clock",sound:false},slot_defs:{1:{kind:D.Backbone.slot_kinds.CurrentTime}},data_source_params:{city:{template:"input_text",template_data:{placeholder:"city name",tooltip:"This is just a label to help you identify the clock, the displayed time is defined by the timezone."}},timezone:{template:"select_timezones",template_data:function(){return{timezones:D.config.timezones,most_used_timezones:D.config.most_used_timezones}}},time_mode:{template:"select",
template_data:{options:[{value:"12",display_name:"12-hour clock"},{value:"24",display_name:"24-hour clock"}]}}}}),j=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{clock:a});_.extend(Ducksboard.Backbone.service_kinds,{clock:j})})();
(function(){D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to Google Calendar",url:"https://www.google.com/calendar/"})}});var a=D.Backbone.wt.CompleteTimelineWidget.extend({defaults:{title:"Google Calendar Events",sound:false},data_source_params:{calendar_id:{template:"select",template_data:{load_service_params:true}}}}),j=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{googlecalendar_events_timeline:a});
_.extend(Ducksboard.Backbone.service_kinds,{googlecalendar:j})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to Google Spreadsheet",url:"https://drive.google.com/"})}}),j={template:"input_text",template_data:{placeholder:"Cell or Range of cells",tooltip:'If you want to bring a single value from a given cell, use the format "D9". If you want to graph a value evolution over time, use a range to specify a column "D2:D10" and set a corresponding Dates Range. <a target="_blank" href="https://ducksboard.com/google-spreadsheet-dashboard">Learn more</a>'}},e=
{spreadsheet_id:{template:"select",template_data:{load_service_params:true,klass:"load:worksheet"}},worksheet_id:{template:"select",template_data:{load_service_params:true}}},d=_.extend(_.clone(e),{timestamp_range:{template:"input_text",template_data:{placeholder:"Dates range",tooltip:'When graphing a value evolution over time, Ducksboard needs a column identifying the timestamps corresponding to each value. Use the format "C2:C10" to specify the column. <a target="_blank" href="https://ducksboard.com/google-spreadsheet-dashboard">Learn more</a>'}}}),
g={data_source_params:_.extend(_.clone(e),{cell1_id:j})},b={data_source_params:_.extend(_.clone(e),{cell1_id:j,cell2_id:j})},f={data_source_params:_.extend(_.clone(e),{cell1_id:j,cell2_id:j,cell3_id:j})},h={data_source_params:_.extend(_.clone(e),{cell1_id:j,cell2_id:j,cell3_id:j,cell4_id:j})},o={data_source_params:_.extend(_.clone(e),{cell1_id:j,cell2_id:j,cell3_id:j,cell4_id:j,cell5_id:j})};_.extend(_.clone(e),{cell1_id:j,cell2_id:j,cell3_id:j,cell4_id:j,cell5_id:j,cell6_id:j});var u={data_source_params:_.extend(_.clone(d),
{cell1_id:j})},q={data_source_params:_.extend(_.clone(d),{cell1_id:j,cell2_id:j})},l={data_source_params:_.extend(_.clone(d),{cell1_id:j,cell2_id:j,cell3_id:j})},k={data_source_params:_.extend(_.clone(d),{cell1_id:j,cell2_id:j,cell3_id:j,cell4_id:j})},n={data_source_params:_.extend(_.clone(d),{cell1_id:j,cell2_id:j,cell3_id:j,cell4_id:j,cell5_id:j})},x={data_source_params:_.extend(_.clone(d),{cell1_id:j,cell2_id:j,cell3_id:j,cell4_id:j,cell5_id:j,cell6_id:j})},g=D.Backbone.wt.GaugeWidget.extend(g).extend({view_cls:a,
defaults:{title:"Google Spreadsheets gauge",sound:false},subtitles:["rate"],colors:["rgba(0, 170, 93, 0.65)"]}),j=D.Backbone.wt.GaugeWidget.extend(b).extend({view_cls:a,defaults:{title:"Google Spreadsheets double gauge",sound:false},subtitles:["rate 1","rate 2"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)"]}),v={view_cls:D.Backbone.wt.MultilineChartView.extend(_.clone(a)),defaults:{title:"Google Spreadsheets chart",sound:false}},w={subtitles:["label1"],colors:["rgba(0, 170, 93, 0.65)"],
trend_defs:{timespan:"yearly"}},z=_.extend(_.clone(u),w),d=D.Backbone.wt.MultilineChartWidget.extend(v).extend(z),E=D.bb.wt.AbsoluteMultilineChartWidget.extend(v).extend(z),w={subtitles:["label1","label2"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)"],trend_defs:{timespan:"yearly"}},B=_.extend(_.clone(q),w),q=D.Backbone.wt.MultilineChartWidget.extend(v).extend(B),F=D.bb.wt.AbsoluteMultilineChartWidget.extend(v).extend(B),w={subtitles:["label1","label2","label3"],colors:["rgba(0, 170, 93, 0.65)",
"rgba(255, 210, 59, 0.65)","rgba(56, 128, 253, 0.65)"],trend_defs:{timespan:"yearly"}},t=_.extend(_.clone(l),w),l=D.Backbone.wt.MultilineChartWidget.extend(v).extend(t),G=D.bb.wt.AbsoluteMultilineChartWidget.extend(v).extend(t),w={subtitles:["label1","label2","label3","label4"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)","rgba(56, 128, 253, 0.65)","rgba(216, 66, 55, 0.65)"],trend_defs:{timespan:"yearly"}},y=_.extend(_.clone(k),w),k=D.Backbone.wt.MultilineChartWidget.extend(v).extend(y),
A=D.bb.wt.AbsoluteMultilineChartWidget.extend(v).extend(y),w={subtitles:["label1","label2","label3","label4","label5"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)","rgba(56, 128, 253, 0.65)","rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)"],trend_defs:{timespan:"yearly"}},C=_.extend(_.clone(n),w),n=D.Backbone.wt.MultilineChartWidget.extend(v).extend(C),K=D.bb.wt.AbsoluteMultilineChartWidget.extend(v).extend(C),w={subtitles:["label1","label2","label3","label4","label5","label6"],
colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)","rgba(56, 128, 253, 0.65)","rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)","rgba(255, 114, 0, 0.65)"],trend_defs:{timespan:"yearly"}},m=_.extend(_.clone(x),w),x=D.Backbone.wt.MultilineChartWidget.extend(v).extend(m),w=D.bb.wt.AbsoluteMultilineChartWidget.extend(v).extend(m),P=D.Backbone.wt.MultiareaChartWidget.extend(v).extend(z),z=D.bb.wt.AbsoluteMultiareaChartWidget.extend(v).extend(z),J=D.Backbone.wt.MultiareaChartWidget.extend(v).extend(B),
T=D.bb.wt.AbsoluteMultiareaChartWidget.extend(v).extend(B),Q=D.Backbone.wt.MultiareaChartWidget.extend(v).extend(t),I=D.bb.wt.AbsoluteMultiareaChartWidget.extend(v).extend(t),M=D.Backbone.wt.MultiareaChartWidget.extend(v).extend(y),H=D.bb.wt.AbsoluteMultiareaChartWidget.extend(v).extend(y),B=D.bb.wt.StackedChartWidget.extend(v).extend(B),t=D.bb.wt.StackedChartWidget.extend(v).extend(t),y=D.bb.wt.StackedChartWidget.extend(v).extend(y),C=D.bb.wt.StackedChartWidget.extend(v).extend(C),v=D.bb.wt.StackedChartWidget.extend(v).extend(m),
u=D.Backbone.wt.TrendWidget.extend(u).extend({view_cls:a,defaults:{title:"Google Spreadsheets counter trend",sound:false},trend_defs:{subtitle:"value",color:"rgba(0, 170, 93, 0.65)"}}),b=D.Backbone.wt.PinsWidget.extend(b).extend({view_cls:a,defaults:{title:"Google Spreadsheets pins",sound:false},subtitles:["label1","label2"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)"]}),m=D.Backbone.wt.BoxesWidget.extend(f).extend({view_cls:a,defaults:{title:"Three Google Spreadsheets boxes",sound:false},
subtitles:["label1","label2","label3"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)","rgba(56, 128, 253, 0.65)"]}),R=D.Backbone.wt.BoxesWidget.extend(h).extend({view_cls:a,defaults:{title:"Four Google Spreadsheets boxes",sound:false},subtitles:["label1","label2","label3","label4"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)","rgba(56, 128, 253, 0.65)","rgba(216, 66, 55, 0.65)"]}),f=D.Backbone.wt.BarsWidget.extend(f).extend({view_cls:a,defaults:{title:"Three Google Spreadsheets bars",
sound:false},subtitles:["label1","label2","label3"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)","rgba(56, 128, 253, 0.65)"]}),h=D.Backbone.wt.BarsWidget.extend(h).extend({view_cls:a,defaults:{title:"Four Google Spreadsheets bars",sound:false},subtitles:["label1","label2","label3","label4"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)","rgba(56, 128, 253, 0.65)","rgba(216, 66, 55, 0.65)"]}),o=D.Backbone.wt.BarsWidget.extend(o).extend({view_cls:a,defaults:{title:"Five Google Spreadsheets bars",
sound:false},subtitles:["label1","label2","label3","label4","label5"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)","rgba(56, 128, 253, 0.65)","rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)"]}),a=D.Backbone.wt.FunnelWidget.extend({view_cls:a,defaults:{title:"Google Spreadsheets funnel",sound:false},subtitles:["funnel"],colors:["rgba(0, 170, 93, 0.65)"],data_source_params:_.extend({},e,{funnel_values_range:{template:"input_text",template_data:{placeholder:"Funnel values range",tooltip:'Specify the range of cells to get the funnel values from, for instance "C2:C10". <a target="_blank" href="https://ducksboard.com/google-spreadsheet-dashboard">Learn more</a> abour ranges.'}},
funnel_steps_range:{template:"input_text",template_data:{placeholder:"Funnel step names range (optional)",tooltip:'Specify the range of cells to get funnel step names, for instance "D2:D10". <a target="_blank" href="https://ducksboard.com/google-spreadsheet-dashboard">Learn more</a> abour ranges.'}}})}),e=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{googlespreadsheets_cell_gauge:g,googlespreadsheets_cell_gauges:j,googlespreadsheets_cell_counter:u,googlespreadsheets_cell_pins:b,
googlespreadsheets_cell_boxes3:m,googlespreadsheets_cell_boxes4:R,googlespreadsheets_cell_bars3:f,googlespreadsheets_cell_bars4:h,googlespreadsheets_cell_bars5:o,googlespreadsheets_cell_graph:d,googlespreadsheets_cell_graph2:q,googlespreadsheets_cell_graph3:l,googlespreadsheets_cell_graph4:k,googlespreadsheets_cell_graph5:n,googlespreadsheets_cell_graph6:x,googlespreadsheets_cell_absolute_graph:E,googlespreadsheets_cell_absolute_graph2:F,googlespreadsheets_cell_absolute_graph3:G,googlespreadsheets_cell_absolute_graph4:A,
googlespreadsheets_cell_absolute_graph5:K,googlespreadsheets_cell_absolute_graph6:w,googlespreadsheets_cell_area_graph:P,googlespreadsheets_cell_area_graph2:J,googlespreadsheets_cell_area_graph3:Q,googlespreadsheets_cell_area_graph4:M,googlespreadsheets_cell_absolute_area_graph:z,googlespreadsheets_cell_absolute_area_graph2:T,googlespreadsheets_cell_absolute_area_graph3:I,googlespreadsheets_cell_absolute_area_graph4:H,googlespreadsheets_cell_stacked_graph2:B,googlespreadsheets_cell_stacked_graph3:t,
googlespreadsheets_cell_stacked_graph4:y,googlespreadsheets_cell_stacked_graph5:C,googlespreadsheets_cell_stacked_graph6:v,googlespreadsheets_cell_funnel:a});_.extend(Ducksboard.Backbone.service_kinds,{googlespreadsheets:e})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var e=this.model.data_source.get("url");this.add_context_action(a,{label:"Go to tracked page",url:e})}}),j=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var e="https://plus.google.com/"+this.model.data_source.get("page_id");this.add_context_action(a,{label:"Go to tracked page",url:e})}}),a=D.Backbone.wt.TrendWidget.extend({view_cls:a,
defaults:{title:"Google +1 count",sound:false},trend_defs:{subtitle:"google +1s",color:"rgba(209, 59, 8, 0.65)",timespan:"daily"},data_source_params:{url:{template:"input_text",template_data:{placeholder:"Link to track",tooltip:"The full URL of the webpage you're interested in"}}}}),j=D.Backbone.wt.TrendWidget.extend({view_cls:j,defaults:{title:"Google+ Page +1 count",sound:false},trend_defs:{subtitle:"page +1s",color:"rgba(209, 59, 8, 0.65)",timespan:"daily"},data_source_params:{page_id:{template:"input_text",
template_data:{placeholder:"Google+ Page ID",tooltip:"The numeric ID of the Google+ Page you're interested in.<br>For instance, for a Google+ Page of https://plus.google.com/114974977202082010753 enter 114974977202082010753 here."}}}}),e=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{googleplusone_plusones_counter:a,googleplusone_page_plusones_counter:j});_.extend(Ducksboard.Backbone.service_kinds,{googleplusone:e})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=_.sprintf("https://app.recurly.com/");this.add_context_action(a,{label:"Go to Recurly account",url:b})}}),j=D.Backbone.wt.MultilineChartView.extend(a),e=D.Backbone.wt.BoxesWidget.extend({view_cls:a,defaults:{title:"Recurly accounts by status",sound:false},subtitles:["total","open","closed"],colors:["rgba(59, 136, 177, 0.65)","rgba(77, 34, 89, 0.65)","rgba(122, 123, 118, 0.65)"]}),
d=D.Backbone.wt.BoxesWidget.extend({view_cls:a,defaults:{title:"Subscriptions by status",sound:false},subtitles:["active","canceled","past due","expired"],colors:["rgba(77, 34, 89, 0.65)","rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)","rgba(122, 123, 118, 0.65)"]}),g=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_number(a,2,6)+"%"}}),b=D.Backbone.slot_kinds.CounterTrend.extend({initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,
arguments);this.view=new g({model:this})}}),b=D.Backbone.wt.TrendWidget.extend({view_cls:a,kind_cls:b,defaults:{title:"Churn rate",sound:false},trend_defs:{subtitle:"churn rate",color:"rgba(77, 34, 89, 0.65)",timespan:"monthly"},data_source_params:{timespan_days:{template:"select",template_data:{options:[{value:"365",display_name:"yearly"},{value:"30",display_name:"monthly"},{value:"7",display_name:"weekly"},{value:"1",display_name:"daily"}]}}}}),f=D.Backbone.wt.MultiareaChartWidget.extend({view_cls:j,
defaults:{title:"Subscriptions growth",sound:false},subtitles:["active subscriptions"],colors:["rgba(77, 34, 89, 0.65)"],trend_defs:{timespan:"monthly"}}),j=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend({view_cls:j,defaults:{title:"Accounts & subscribers",sound:false},subtitles:["accounts","subscribers"],colors:["rgba(59, 136, 177, 0.65)","rgba(77, 34, 89, 0.65)"],trend_defs:{timespan:"monthly"}}),h=D.Backbone.wt.TimelineWidget.extend({view_cls:a,defaults:{title:"Account activities",sound:false}}),
a=D.Backbone.wt.TimelineWidget.extend({view_cls:a,defaults:{title:"Transactions",sound:false}}),o=D.Backbone.Service.extend({description:"Use these widgets to keep tabs on your Recurly-managed billing. Stay up to date in your customers growth rate and don\u2019t neglect your churn rate.",signup_url:"https://app.recurly.com/signup",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_key"],["auth_domain","subdomain"]]),params:{service_username:{template:"input_text",
template_data:{placeholder:"Account name",tooltip:"Choose any name to give to this account, so you can find it later in the accounts list."}},auth_domain:{template:"input_text",template_data:{placeholder:"Recurly subdomain",tooltip:'Just the subdomain part, that would be "ducksboard" if your domain is "ducksboard.recurly.com".'}},auth_user:{template:"input_text",template_data:{placeholder:"API key",tooltip:'You can find your API Key for your Recurly account <a href="https://api.recurly.com/developer/api_access" target="_blank">here</a>.'}}}});
_.extend(Ducksboard.Backbone.widget_kinds,{recurly_accounts_boxes:e,recurly_subscriptions_boxes:d,recurly_churn_counter:b,recurly_active_subscriptions_area_graph:f,recurly_accounts_subscriptions_absolute_area_graph:j,recurly_account_activities_timeline:h,recurly_transactions_timeline:a});_.extend(Ducksboard.Backbone.service_kinds,{recurly:o})})();
(function(){var a={events:{"click .inner":"external_account"},external_account:function(a){var b=this.model.data_source.get("service_id");if(b=D.Backbone.services.get(b)){var d=this.model.context_path()||"home/home.jsp",b=_.sprintf("https://%s.salesforce.com/%s",b.get("auth_domain"),d);this.add_context_action(a,{label:"See details in Salesforce",url:b})}}},j=D.Backbone.WidgetView.extend(a),e=D.Backbone.wt.MultilineChartView.extend(a),d={date_range:{template:"select",template_data:{options:[{value:"this_month",
display_name:"this month's data"},{value:"this_week",display_name:"this week's data"},{value:"this_quarter",display_name:"this quarter's data"}]}}},g={only_mine:{template:"select",template_data:{options:[{value:"",display_name:"show all records"},{value:"t",display_name:"show only my records"}]}}},a=D.Backbone.wt.TrendWidget.extend({view_cls:j,defaults:{title:"Sales pipeline",sound:false},context_path:function(){return"00O?rt=22&open=open"},trend_defs:{subtitle:"value",color:"rgba(209, 59, 8, 0.65)",
timespan:"monthly"},data_source_params:_.extend({},g)}),b=D.bb.slot_views.LeaderboardView.extend({add_item:function(a){var b=_.clone(a),d=_.clone(a.values);b.values=_.map(d,_.bind(function(a,b){this.model.is_numeric(b+2)&&(a=D.u.format_number(a,2,6,true));return a},this));b=(new this.item_view({item:b})).render().$el;this.$(".board").append(b);b.show();this.calculate_lengths(a)}}),f=D.bb.slot_kinds.Leaderboard.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);
this.view=new b({model:this})}}),h=D.bb.slot_kinds.TrendLeaderboard.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new b({model:this,item_view:D.bb.slot_views.TrendLeaderboardItemView,extra_header:"\u00b1"})}}),o=D.Backbone.wt.TrendLeaderboardWidget.extend({view_cls:j,kind_cls:h,defaults:{title:"Sales pipeline by rep",sound:false},context_path:function(){return"00O?rt=22&open=open&break0=FULL_NAME"},leaderboard_defs:{total_subtitles:3,numeric_columns:[3],
subtitle1:"",color1:"rgba(209, 59, 8, 0.65)",subtitle2:"count",color2:"rgba(250, 136, 54, 0.65)",subtitle3:"amount",color3:"rgba(250, 136, 54, 0.65)"},data_source_params:_.extend({},d)}),f=D.Backbone.wt.LeaderboardWidget.extend({view_cls:j,kind_cls:f,defaults:{title:"Opportunity stage breakdown",sound:false},context_path:function(){return"00O?rt=22&open=open&break0=STAGE_NAME"},leaderboard_defs:{total_subtitles:3,numeric_columns:[3],subtitle1:"",color1:"rgba(209, 59, 8, 0.65)",subtitle2:"qty",color2:"rgba(250, 136, 54, 0.65)",
subtitle3:"$",color3:"rgba(250, 136, 54, 0.65)"},data_source_params:_.extend({},d)}),u=D.Backbone.wt.TrendLeaderboardWidget.extend({view_cls:j,defaults:{title:"Lead status",sound:true},context_path:function(){return"00O?rt=20&break0=STATUS"},leaderboard_defs:{total_subtitles:2,subtitle1:"",color1:"rgba(209, 59, 8, 0.65)",subtitle2:"qty",color2:"rgba(250, 136, 54, 0.65)"}}),q=D.Backbone.wt.GaugeWidget.extend({view_cls:j,defaults:{title:"Opportunity win/loss",sound:false},context_path:function(){return"00O?rt=22&open=closed&break0=WON"},
subtitles:["win","loss"],colors:["rgba(11, 52, 2, 0.65)","rgba(203, 25, 28, 0.65)"],data_source_params:_.extend({},d,g)}),h=D.Backbone.wt.TrendLeaderboardWidget.extend({view_cls:j,kind_cls:h,defaults:{title:"Opportunity source",sound:false},context_path:function(){return"00O?rt=22&open=open&break0=LEAD_SOURCE"},leaderboard_defs:{total_subtitles:3,numeric_columns:[3],subtitle1:"",color1:"rgba(209, 59, 8, 0.65)",subtitle2:"qty",color2:"rgba(250, 136, 54, 0.65)",subtitle3:"$",color3:"rgba(250, 136, 54, 0.65)"},
data_source_params:_.extend({},d)}),l=D.Backbone.wt.BoxesWidget.extend({view_cls:j,defaults:{title:"Activities",sound:false},context_path:function(){return"00U"},subtitles:["open","closed","progress"],colors:["rgba(209, 59, 8, 0.65)","rgba(11, 52, 2, 0.65)","rgba(203, 25, 28, 0.65)"],data_source_params:_.extend({},d,g)}),k=D.Backbone.wt.PinsWidget.extend({view_cls:j,defaults:{title:"Closed won sales",sound:false},context_path:function(){return"00O?rt=22&open=closedwon"},subtitles:["qty","$"],colors:["rgba(209, 59, 8, 0.65)",
"rgba(203, 25, 28, 0.65)"],data_source_params:_.extend({},d,g)}),j=D.Backbone.wt.PinsWidget.extend({view_cls:j,defaults:{title:"Cases",sound:false},context_path:function(){return"500/o"},subtitles:["closed cases","open cases"],colors:["rgba(209, 59, 8, 0.65)","rgba(203, 25, 28, 0.65)"],data_source_params:_.extend({},d,g)}),e=D.Backbone.wt.AbsoluteMultilineChartWidget.extend({view_cls:e,defaults:{title:"Sales trend",sound:false},context_path:function(){return"00O?rt=22&open=closedwon"},subtitles:["amount"],
colors:["rgba(209, 59, 8, 0.65)"],trend_defs:{timespan:"monthly"},data_source_params:_.extend({},g)}),g=D.Backbone.Service.extend({create_tip:'We get data from Salesforce via the REST API. This feature is only available for certain plans, please check if <a href="http://www.salesforce.com/crm/editions-pricing.jsp" target="_blank">your plan</a> supports integration with Web Services or contact your Salesforce representative.'});_.extend(D.Backbone.widget_kinds,{salesforce_opportunities_amount_counter:a,
salesforce_opportunities_by_rep_leaderboard:o,salesforce_opportunities_stages_leaderboard:f,salesforce_opportunities_lead_status_leaderboard:u,salesforce_opportunities_status_gauge:q,salesforce_opportunities_sources_leaderboard:h,salesforce_activities_status_boxes:l,salesforce_opportunities_summary_pins:k,salesforce_cases_status_pins:j,salesforce_sales_volume_absolute_graph:e});_.extend(D.Backbone.service_kinds,{salesforce:g})})();
(function(){var a={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=_.sprintf("http://feeds.feedburner.com/%s",this.model.data_source.get("uri"));this.add_context_action(a,{label:"Go to feed",url:b})}}),data_source_params:{uri:{template:"input_text",template_data:{placeholder:"Feed name",tooltip:"If you Feedburner URL is http://feeds.feedburner.com/MyAwesomeBlog then the feed name to use is MyAwesomeBlog. Remember that you have to enable Awareness API for that feed to be able to track it!"}}}},
j=D.Backbone.wt.TrendWidget.extend(a).extend({defaults:{title:"Feedburner subscribers",sound:false},trend_defs:{subtitle:"subscribers",color:"rgba(203, 25, 28, 0.65)",timespan:"daily"}}),e=D.Backbone.wt.TrendWidget.extend(a).extend({defaults:{title:"Feedburner requests",sound:false},trend_defs:{subtitle:"requests",color:"rgba(247, 209, 2, 0.65)",timespan:"daily"}}),a=D.Backbone.wt.PinsWidget.extend(a).extend({defaults:{title:"Feedburner popularity",sound:false},subtitles:["subscribers","requests"],
colors:["rgba(203, 25, 28, 0.65)","rgba(247, 209, 2, 0.65)"]}),d=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{feedburner_circulation_counter:j,feedburner_hits_counter:e,feedburner_circulation_and_hits_pins:a});_.extend(Ducksboard.Backbone.service_kinds,{feedburner:d})})();
(function(){var a={events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to pipedrive",url:"https://app.pipedrive.com"})}},j=D.Backbone.WidgetView.extend(_.clone(a)),e=D.Backbone.wt.MultilineChartView.extend(_.clone(a)),d={view_cls:j,data_source_params:{filter_id:{template:"select",template_data:{load_service_params:true}}}},g={view_cls:j,data_source_params:{pipeline_id:{template:"select",template_data:{load_service_params:true,klass:"load:currency"}},
currency:{template:"select",template_data:{load_service_params:true}}}},b={view_cls:j,data_source_params:{pipeline_id:{template:"select",template_data:{load_service_params:true}}}},a=D.Backbone.wt.TrendWidget.extend(d).extend({defaults:{title:"Pipedrive Deals",sound:false},trend_defs:{subtitle:"deals",color:D.colors.blue,timespan:"monthly"}}),d=D.Backbone.wt.MultilineChartWidget.extend(d).extend({view_cls:e,defaults:{title:"Pipedrive",sound:false},subtitles:["Deals"],colors:[D.colors.blue],trend_defs:{timespan:"monthly"}}),
f=D.Backbone.wt.TrendWidget.extend(g).extend({defaults:{title:"Pipedrive pipeline value",sound:false},trend_defs:{subtitle:"value",color:D.colors.green,timespan:"monthly"}}),h=D.Backbone.wt.TrendWidget.extend(g).extend({defaults:{title:"Pipedrive pipeline weighted value",sound:false},trend_defs:{subtitle:"weighted value",color:D.colors.red,timespan:"monthly"}}),e=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(g).extend({view_cls:e,defaults:{title:"Pipedrive pipeline",sound:false},subtitles:["value",
"weighted value"],colors:[D.colors.green,D.colors.red],trend_defs:{timespan:"monthly"}}),g=D.Backbone.wt.CompleteTimelineWidget.extend({view_cls:j,data_source_params:{user_id:{template:"select",template_data:{load_service_params:true}}},defaults:{title:"Pipedrive next activities",sound:false}}),o=D.Backbone.wt.CompleteTimelineWidget.extend({view_cls:j,timeline_defs:{reverse:true},defaults:{title:"Pipedrive last deals",sound:false}}),j=D.Backbone.wt.TrendLeaderboardWidget.extend(b).extend({view_cls:j,
kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Pipedrive pipeline stages",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"Name",color1:D.colors.black,subtitle2:"deals",color2:D.colors.gray,subtitle3:"pct",color3:D.colors.gray}}),b=D.Backbone.Service.extend({description:"A powerful sales CRM that small teams love to use.",signup_url:"http://www.pipedrive.com/",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_token"]]),params:{auth_user:{template:"input_text",
template_data:{placeholder:"Api token",tooltip:"Your personal API token. https://app.pipedrive.com/settings#api"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{pipedrive_deals_counter:a,pipedrive_deals_graph:d,pipedrive_pipeline_graph:e,pipedrive_pipeline_value_counter:f,pipedrive_pipeline_weighted_value_counter:h,pipedrive_stages_leaderboard:j,pipedrive_activities_timeline:g,pipedrive_last_deals_timeline:o});_.extend(Ducksboard.Backbone.service_kinds,{pipedrive:b})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var e=this.model.data_source.get("service_id");if(e=D.Backbone.services.get(e)){e=_.sprintf("http://%s.tenderapp.com/",e.get("auth_domain"));this.add_context_action(a,{label:"Go to Tender account",url:e})}}}),j=D.Backbone.wt.TrendWidget.extend({view_cls:a,defaults:{title:"Tender users",sound:false},trend_defs:{subtitle:"users count",color:"rgba(75, 99, 149, 0.65)",timespan:"daily"}}),
a=D.Backbone.wt.BoxesWidget.extend({view_cls:a,defaults:{title:"Tender discussions by state",sound:false},subtitles:["new","open","assigned","pending"],colors:["rgba(209, 59, 8, 0.65)","rgba(75, 99, 149, 0.65)","rgba(122, 123, 118, 0.65)","rgba(203, 25, 28, 0.65)"]}),e=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain","subdomain"],["auth_user","api_key"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name"}},
auth_domain:{template:"input_text",template_data:{placeholder:"Tender subdomain"}},auth_user:{template:"input_text",template_data:{placeholder:"main API key (not read-only)"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{tender_users_counter:j,tender_discussions_boxes:a});_.extend(Ducksboard.Backbone.service_kinds,{tender:e})})();
(function(){var a=D.colors.darkblue,j=D.colors.black,e={events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to Google Trends",url:"https://www.google.com/trends/"})}},d=D.Backbone.WidgetView.extend(_.clone(e)),g=D.Backbone.wt.MultilineChartView.extend(_.clone(e)),b=D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["monthly","quarterly","yearly"]}),e=_.map(D.isocountries,function(a,b){return{value:b,display_name:a}});e.unshift({value:"all",
display_name:"All Countries"});var f={search_type:{template:"select",template_data:{options:[{value:"web",display_name:"Web Search"},{value:"images",display_name:"Image Search"},{value:"news",display_name:"News Search"},{value:"froggle",display_name:"Product Search"},{value:"youtube",display_name:"YouTube Search"}]}},region:{template:"select",template_data:{options:e}}},h=D.Backbone.wt.LeaderboardWidget.extend({view_cls:d,data_source_params:_.extend({term1:{template:"input_text",template_data:{placeholder:"The search term you are interested in",
tooltip:"For instance, ducksboard"}}},_.clone(f),_.clone({timeframe:{template:"select",template_data:{options:[{value:"yearly",display_name:"a year's worth of data"},{value:"quarterly",display_name:"a quarter's worth of data"},{value:"monthly",display_name:" a month's worth of data"},{value:"weekly",display_name:"a week's worth of data"}]}}}))}),d=h.extend({defaults:{title:"Top regions",sound:false},leaderboard_defs:{total_subtitles:2,subtitle1:"",color1:a,subtitle2:"vol.",color2:j}}),e=h.extend({defaults:{title:"Top cities",
sound:false},leaderboard_defs:{total_subtitles:2,subtitle1:"",color1:a,subtitle2:"vol.",color2:j}}),o=h.extend({defaults:{title:"Top searches",sound:false},leaderboard_defs:{total_subtitles:2,subtitle1:"",color1:a,subtitle2:"vol.",color2:j}}),a=h.extend({defaults:{title:"Rising searches",sound:false},leaderboard_defs:{total_subtitles:2,subtitle1:"",color1:a,subtitle2:"growth",color2:j}}),u=function(a,d){d=d||{};type="term";var e=[D.colors.blue,D.colors.red,D.colors.yellow,D.colors.lightgreen,D.colors.purple],
h=["first","second","third","fourth","fifth"],j={},k={template:"input_text",template_data:{tooltip:"For instance, ducksboard"}},l=[];for(i=1;i<=a;i++){l.push(type+i);j[type+i]=$.extend(true,{},k,{template_data:{placeholder:_.sprintf("The %s term you are interested in",h[i-1])}})}data_source_params=_.extend(j,_.clone(f));return{timezone:"Etc/UTC",defaults:_.extend({title:"Interest over time",sound:false},d),view_cls:g,kind_cls:b,data_source_params:data_source_params,colors:e.slice(0,a),subtitles:l,
trend_defs:{timespan:"monthly"}}},j=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(1)),h=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(2)),q=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(3)),l=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(4)),u=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(5)),k=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{googletrends_top_regions_leaderboard:d,googletrends_top_cities_leaderboard:e,googletrends_top_searches_leaderboard:o,
googletrends_rising_searches_leaderboard:a,googletrends_interest_absolute_graph:j,googletrends_interest_absolute_graph2:h,googletrends_interest_absolute_graph3:q,googletrends_interest_absolute_graph4:l,googletrends_interest_absolute_graph5:u});_.extend(Ducksboard.Backbone.service_kinds,{googletrends:k})})();
(function(){var a={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=this.model.data_source.get("service_id");if(b=D.Backbone.services.get(b)){b=_.sprintf("https://github.com/%s",b.get("service_username"));this.add_context_action(a,{label:"Go to GitHub account",url:b})}}}),webhook_doc_url:"http://ducksboard.com/github-webhooks-setup/",data_source_params:{user:{template:"input_text",template_data:{placeholder:"username",tooltip:_.join(" ",
"The GitHub username whose repository","pushes you want to track.")}},repo:{template:"input_text",template_data:{placeholder:"repository",tooltip:_.join(" ","The above's GitHub user repository","you want to track.")}}}},j=_.extend({},a,{defaults:{title:"GitHub commits",sound:false},data_source_params:_.extend(_.clone(a.data_source_params),{branch:{template:"input_text",template_data:{placeholder:"branch name (defaults to master)",tooltip:_.join(" ","Optional branch name to track,","defaults to master.")}}})}),
j=D.bb.wt.TimelineWidget.extend(j),e=_.extend({},a,{defaults:{title:"GitHub watchers",sound:false}}),d={subtitle:"watchers",color:D.colors.blue,timespan:"daily"},g=D.Backbone.wt.TimelineWidget.extend(e),b=D.Backbone.wt.TrendWidget.extend(e).extend({trend_defs:d}),f=D.bb.wt.TrendTimelineWidget.extend(e).extend({trend_defs:d}),h=D.Backbone.wt.ChartWidget.extend(e).extend({trend_defs:d}),e=D.bb.wt.ChartTimelineWidget.extend(e).extend({trend_defs:d}),o=_.extend({},a,{defaults:{title:"GitHub forks",sound:false}}),
u={subtitle:"forks",color:D.colors.blue,timespan:"daily"},d=D.Backbone.wt.TimelineWidget.extend(o),q=D.Backbone.wt.TrendWidget.extend(o).extend({trend_defs:u}),l=D.bb.wt.TrendTimelineWidget.extend(o).extend({trend_defs:u}),k=D.Backbone.wt.ChartWidget.extend(o).extend({trend_defs:u}),o=D.bb.wt.ChartTimelineWidget.extend(o).extend({trend_defs:u}),n=_.extend({},a,{defaults:{title:"GitHub issues",sound:false}}),x={subtitle:"issues",color:D.colors.blue,timespan:"daily"},a=D.Backbone.wt.TimelineWidget.extend(n),
u=D.Backbone.wt.TrendWidget.extend(n).extend({trend_defs:x}),v=D.bb.wt.TrendTimelineWidget.extend(n).extend({trend_defs:x}),w=D.Backbone.wt.ChartWidget.extend(n).extend({trend_defs:x}),n=D.bb.wt.ChartTimelineWidget.extend(n).extend({trend_defs:x}),x=D.Backbone.Service.extend({description:"Whether you are collaborating, tracking issues or managing multiple projects, these widgets will give you a visualization of your most crucial data.",signup_url:"https://github.com/"});_.extend(Ducksboard.Backbone.widget_kinds,
{github_commits_timeline:j,github_watchers_timeline:g,github_watchers_counter:b,github_watchers_counter_timeline:f,github_watchers_graph:h,github_watchers_graph_timeline:e,github_forks_timeline:d,github_forks_counter:q,github_forks_counter_timeline:l,github_forks_graph:k,github_forks_graph_timeline:o,github_issues_counter:u,github_issues_graph:w,github_issues_timeline:a,github_issues_counter_timeline:v,github_issues_graph_timeline:n});_.extend(Ducksboard.Backbone.service_kinds,{github:x})})();
(function(){var a={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=this.model.data_source.get("service_id");D.Backbone.services.get(b);b=_.sprintf("http://www.pivotaltracker.com/");this.add_context_action(a,{label:"Go to Pivotal Tracker account",url:b})}}),webhook_doc_url:"http://ducksboard.com/pivotal-tracker-webhooks-setup/",data_source_params:{project_id:{template:"select",template_data:{load_service_params:true}}}},j=D.Backbone.wt.TrendWidget.extend(a).extend({defaults:{title:"Pivotal project stories",
sound:false},trend_defs:{subtitle:"stories",color:"rgba(59, 136, 177, 0.65)",timespan:"daily"}}),e=D.Backbone.wt.BoxesWidget.extend(a).extend({defaults:{title:"Pivotal project stories by type",sound:false},subtitles:["features","bugs","chores","releases"],colors:["rgba(247, 209, 2, 0.65)","rgba(203, 25, 28, 0.65)","rgba(9, 9, 9, 0.65)","rgba(59, 136, 177, 0.65)"]}),d=D.Backbone.wt.BarsWidget.extend(a).extend({defaults:{title:"Pivotal project stories by type",sound:false},subtitles:["features","bugs",
"chores","releases"],colors:["rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)"]}),g=D.Backbone.wt.BarsWidget.extend(a).extend({defaults:{title:"Pivotal project stories by state",sound:false},subtitles:["unstarted","started","finished","delivered","rejected"],colors:["rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)"]}),b=D.Backbone.wt.BoxesWidget.extend(a).extend({defaults:{title:"Pivotal project stories by iteration",
sound:false},subtitles:["done","current","backlog"],colors:["rgba(9, 9, 9, 0.65)","rgba(59, 136, 177, 0.65)","rgba(56, 175, 197, 0.65)"]}),f=D.Backbone.wt.BarsWidget.extend(a).extend({defaults:{title:"Pivotal project stories by iteration",sound:false},subtitles:["done","current","backlog"],colors:["rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)"]}),h=D.Backbone.wt.BoxesWidget.extend(a).extend({defaults:{title:"Current iteration stories by type",sound:false},subtitles:["features",
"bugs","chores","releases"],colors:["rgba(247, 209, 2, 0.65)","rgba(203, 25, 28, 0.65)","rgba(9, 9, 9, 0.65)","rgba(59, 136, 177, 0.65)"]}),o=D.Backbone.wt.BarsWidget.extend(a).extend({defaults:{title:"Current iteration stories by type",sound:false},subtitles:["features","bugs","chores","releases"],colors:["rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)"]}),u=D.Backbone.wt.BarsWidget.extend(a).extend({defaults:{title:"Current iteration stories by state",
sound:false},subtitles:["unstarted","started","finished","delivered","rejected"],colors:["rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)"]}),q=D.Backbone.wt.GaugeWidget.extend(a).extend({defaults:{title:"Current iteration accepted stories rate",sound:false},subtitles:["accepted stories"],colors:["rgba(56, 175, 197, 0.65)"]}),a=_.extend({},a,{defaults:{title:"Pivotal project activity",sound:false}}),a=D.Backbone.wt.TimelineWidget.extend(a),
l=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_key"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name",tooltip:"Provide a name that you'll easily relate to the Pivotal project you'll be tracking. It can be the project's name itself, or whatever you prefer. It's up to you!"}},auth_user:{template:"input_text",template_data:{placeholder:"API token",tooltip:"To get you Pivotal API token log in to your Pivotal account and navigate to Profile > API token. If you ever create a new API token, you will need to relink your Pivotal account with Ducksboard."}}}});
_.extend(Ducksboard.Backbone.widget_kinds,{pivotal_project_stories_counter:j,pivotal_project_stories_by_type_boxes:e,pivotal_project_stories_by_type_bars:d,pivotal_project_stories_by_state_bars:g,pivotal_project_stories_by_iteration_boxes:b,pivotal_project_stories_by_iteration_bars:f,pivotal_iteration_stories_by_type_boxes:h,pivotal_iteration_stories_by_type_bars:o,pivotal_iteration_stories_by_state_bars:u,pivotal_iteration_accepted_stories_rate_gauge:q,pivotal_project_activity_timeline:a});_.extend(Ducksboard.Backbone.service_kinds,
{pivotal:l})})();
(function(){var a={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to startup's page",url:this.model.data_source.get("url")})}}),data_source_params:{url:{template:"input_text",template_data:{placeholder:"AngelList URL"}}}},j=D.Backbone.wt.TrendWidget.extend(a).extend({defaults:{title:"AngelList followers",sound:false},trend_defs:{subtitle:"followers",color:"rgba(59, 136, 177, 0.65)",timespan:"daily"}}),
e=D.Backbone.wt.TimelineWidget.extend(a).extend({defaults:{title:"AngelList followers",sound:false}}),a=D.Backbone.wt.TimelineWidget.extend(a).extend({defaults:{title:"AngelList statuses",sound:false}}),d=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{angellist_followers_counter:j,angellist_followers_timeline:e,angellist_statuses_timeline:a});_.extend(Ducksboard.Backbone.service_kinds,{angellist:d})})();
(function(){var a={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("rss_url");this.add_context_action(a,{label:"Go to RSS feed",url:d})}}),defaults:{title:"RSS feed entries",sound:false},data_source_params:{rss_url:{template:"input_text",template_data:{placeholder:"RSS feed URL",tooltip:"You can access authenticated RSS feeds by using http://user:pass@hostname/feed.rss"}}}},a=D.Backbone.wt.TimelineWidget.extend(a),
j=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{rss_feed_entries_timeline:a});_.extend(Ducksboard.Backbone.service_kinds,{rss:j})})();
(function(){var a=D.colors.black,j={events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to Google Analytics",url:"https://www.google.com/analytics/"})}},e=D.Backbone.WidgetView.extend(_.clone(j)),d=D.Backbone.wt.MultilineChartView.extend(_.clone(j)),g=D.Backbone.slot_kinds.Chart.extend({allowed_timespans:["weekly","monthly"]}),b=D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["weekly","monthly"]}),f=D.Backbone.slot_kinds.LineChart.extend({allowed_timespans:["weekly",
"monthly"]}),h=D.Backbone.slot_kinds.StackedChart.extend({allowed_timespans:["weekly","monthly"]}),o=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly"]});o.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new D.Backbone.slot_views.ChartView({model:this})}});var u=D.Backbone.slot_views.ChartView.extend({update_counter:function(a){var b=D.Backbone.slot_views.CounterTrendView,a=_.reduce(a[0],function(a,b){return a+b},0)/
_.filter(a[0],function(a){return a!==null}).length;this.model.get("is_percentage")&&(a=a*100);b.prototype.update_counter.call(this,[[a]])}}),q=o.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new u({model:this})}}),l={view_cls:e,data_source_params:{table_id:{template:"select",template_data:{load_service_params:true}}}},k={view_cls:e,data_source_params:{table_id:{template:"select",template_data:{load_service_params:true}},segment_id:{template:"select",
template_data:{load_service_params:true}}}},n={view_cls:e,data_source_params:{table_id:{template:"select",template_data:{load_service_params:true,klass:"load:goal"}},goal_number:{template:"select",template_data:{load_service_params:true}}}},x={view_cls:e,data_source_params:_.extend(_.clone(n.data_source_params),{segment_id:{template:"select",template_data:{load_service_params:true}}})},v={view_cls:e,data_source_params:{table_id:{template:"select",template_data:{load_service_params:true,klass:"load:event_categories"}},
segment_id:{template:"select",template_data:{load_service_params:true}},event_category:{template:"select",template_data:{load_service_params:true}}}},j={timespan_days:{template:"select",template_data:{options:[{value:"365",display_name:"a year's worth of data"},{value:"30",display_name:"a month's worth of data"},{value:"7",display_name:" a week's worth of data"},{value:"1",display_name:"two day's worth of data"},{value:"0",display_name:"today's data"}]}}},w={view_cls:e,data_source_params:_.extend(_.clone(l.data_source_params),
_.clone(j))},z={view_cls:e,data_source_params:_.extend(_.clone(k.data_source_params),_.clone(j))},E={view_cls:e,data_source_params:_.extend(_.clone(n.data_source_params),_.clone(j))},B={view_cls:e,data_source_params:_.extend(_.clone(x.data_source_params),_.clone(j))},F={view_cls:e,data_source_params:_.extend(_.clone(v.data_source_params),_.clone(j))},x=D.Backbone.wt.ChartWidget.extend(x).extend({kind_cls:g,defaults:{title:"Google Analytics visits",sound:false},trend_defs:{subtitle:"visits",color:"rgba(250, 136, 54, 0.65)",
timespan:"monthly"}}),t=D.Backbone.wt.ChartWidget.extend(k).extend({kind_cls:g,defaults:{title:"Google Analytics pageviews",sound:false},trend_defs:{subtitle:"pageviews",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),g=D.Backbone.wt.ChartWidget.extend(l).extend({kind_cls:g,defaults:{title:"Google Analytics unique visitors",sound:false},trend_defs:{subtitle:"unique visitors",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),w=D.Backbone.wt.TrendWidget.extend(w).extend({kind_cls:D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["monthly"]}),
defaults:{title:"Google Analytics unique visitors",sound:false},trend_defs:{subtitle:"unique visitors",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),l=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(l).extend({view_cls:d,kind_cls:b,defaults:{title:"Google Analytics",sound:false},subtitles:["daily unique visitors"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),G=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_time(a,2)}}),
y=o.extend({initialize:function(){o.prototype.initialize.apply(this,arguments);this.view=new G({model:this})}}),y=D.Backbone.wt.TrendWidget.extend(k).extend({kind_cls:y,defaults:{title:"Google Analytics average session time",sound:false},trend_defs:{subtitle:"avg duration",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),A=u.extend({format_value:function(a){return D.u.format_time(a,2)}}),C=q.extend({initialize:function(){q.prototype.initialize.apply(this,arguments);this.view=new A({model:this})}}),
C=D.Backbone.wt.ChartWidget.extend(k).extend({kind_cls:C,defaults:{title:"Google Analytics average session time",sound:false},trend_defs:{subtitle:"avg duration",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),K=D.Backbone.wt.GaugeWidget.extend(z).extend({defaults:{title:"Google Analytics visit bounce rate",sound:false},subtitles:["visit bounce rate"],colors:["rgba(250, 136, 54, 0.65)"]}),m=D.Backbone.wt.ChartWidget.extend(k).extend({kind_cls:q,defaults:{title:"Google Analytics visit bounce rate",
sound:false},trend_defs:{is_percentage:true,subtitle:"% bounce rate",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),P=D.Backbone.wt.TrendLeaderboardWidget.extend(B).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Top sources",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"visits",color2:a,subtitle3:"pct",color3:a}}),J=D.Backbone.wt.TrendLeaderboardWidget.extend(B).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,
defaults:{title:"Top keywords",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"visits",color2:a,subtitle3:"pct",color3:a}}),T=D.Backbone.wt.TrendLeaderboardWidget.extend(B).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Top languages",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"visits",color2:a,subtitle3:"pct",color3:a}}),Q=D.Backbone.wt.TrendLeaderboardWidget.extend(B).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,
data_source_params:_.extend(_.clone(B.data_source_params),{page_title:{template:"select",template_data:{options:[{value:"",display_name:"Show pages path"},{value:"t",display_name:"Show pages title"}]}}}),defaults:{title:"Most visited pages",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"visits",color2:a,subtitle3:"pct",color3:a}}),I=D.Backbone.wt.TrendLeaderboardWidget.extend(B).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,
defaults:{title:"Visitors Frequency",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"Count of visits",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"visits",color2:a,subtitle3:"pct",color3:a}}),B=D.Backbone.wt.TrendLeaderboardWidget.extend(B).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Visitors engagement",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"Visit duration",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"visits",color2:a,subtitle3:"pct",
color3:a}}),M=D.Backbone.wt.GaugeWidget.extend(z).extend({defaults:{title:"Google Analytics new visitors pct.",sound:false},subtitles:["new visitors"],colors:["rgba(250, 136, 54, 0.65)"]}),H=D.Backbone.wt.ChartWidget.extend(k).extend({kind_cls:q,defaults:{title:"Google Analytics new visits percentage",sound:false},trend_defs:{is_percentage:true,subtitle:"% new visits",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),R=D.Backbone.wt.MultilineChartWidget.extend(n).extend({view_cls:d,kind_cls:f,
defaults:{title:"Google Analytics",sound:false},subtitles:["goal completions"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),N=D.Backbone.wt.TrendWidget.extend(E).extend({kind_cls:D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["monthly"]}),defaults:{title:"Google Analytics goal completions",sound:false},trend_defs:{subtitle:"completions",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),L=D.Backbone.wt.MultilineChartWidget.extend(n).extend({view_cls:d,kind_cls:f,
defaults:{title:"Google Analytics",sound:false},subtitles:["goal abandons"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),W=D.Backbone.wt.TrendWidget.extend(E).extend({kind_cls:D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["monthly"]}),defaults:{title:"Google Analytics goal abandons",sound:false},trend_defs:{subtitle:"abandons",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),U=D.Backbone.wt.MultilineChartWidget.extend(n).extend({view_cls:d,kind_cls:f,
defaults:{title:"Google Analytics",sound:false},subtitles:["goal value"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),Z=D.Backbone.wt.TrendWidget.extend(E).extend({kind_cls:D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["monthly"]}),defaults:{title:"Google Analytics goal value",sound:false},trend_defs:{subtitle:"value",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),fa=D.Backbone.wt.GaugeWidget.extend(E).extend({defaults:{title:"Google Analytics goal conversion rate",
sound:false},subtitles:["conversion"],colors:["rgba(250, 136, 54, 0.65)"]}),ha=D.Backbone.wt.TrendWidget.extend(E).extend({kind_cls:o,defaults:{title:"Google Analytics goal conversion rate",sound:false},trend_defs:{is_percentage:true,subtitle:"conversion rate",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),ia=D.Backbone.wt.GaugeWidget.extend(E).extend({defaults:{title:"Google Analytics goal abandon rate",sound:false},subtitles:["abandons"],colors:["rgba(250, 136, 54, 0.65)"]}),ja=D.Backbone.wt.TrendWidget.extend(E).extend({kind_cls:o,
defaults:{title:"Google Analytics goal abandon rate",sound:false},trend_defs:{is_percentage:true,subtitle:"abandon rate",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),ra=D.Backbone.wt.TrendLeaderboardWidget.extend(E).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Top goal sources",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"goals",color2:a,subtitle3:"pct",color3:a}}),n=D.Backbone.wt.MultilineChartWidget.extend(n).extend({view_cls:d,
kind_cls:f,defaults:{title:"Completions vs Abandons",sound:false},subtitles:["completions","abandons"],colors:[D.colors.blue,D.colors.red],trend_defs:{timespan:"monthly"}}),h=D.Backbone.wt.StackedChartWidget.extend(E).extend({view_cls:d,kind_cls:h,defaults:{title:"Conversion vs Abandon rate",sound:false},subtitles:["conversion","abandon"],colors:[D.colors.blue,D.colors.red],trend_defs:{timespan:"monthly"}}),E=D.Backbone.wt.MultilineChartWidget.extend(v).extend({view_cls:d,kind_cls:f,defaults:{title:"Google Analytics",
sound:false},subtitles:["total events"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),Y=D.Backbone.wt.TrendWidget.extend(F).extend({kind_cls:o,defaults:{title:"Google Analytics total events",sound:false},trend_defs:{subtitle:"events",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),X=D.Backbone.wt.MultilineChartWidget.extend(v).extend({view_cls:d,kind_cls:f,defaults:{title:"Google Analytics",sound:false},subtitles:["unique events"],colors:["rgba(250, 136, 54, 0.65)"],
trend_defs:{timespan:"monthly"}}),da=D.Backbone.wt.TrendWidget.extend(F).extend({kind_cls:o,defaults:{title:"Google Analytics unique events",sound:false},trend_defs:{subtitle:"unique events",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),ba=D.Backbone.wt.MultilineChartWidget.extend(v).extend({view_cls:d,kind_cls:f,defaults:{title:"Google Analytics",sound:false},subtitles:["event value"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),la=D.Backbone.wt.TrendWidget.extend(F).extend({kind_cls:o,
defaults:{title:"Google Analytics event value",sound:false},trend_defs:{subtitle:"value",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),ea=D.Backbone.wt.MultilineChartWidget.extend(v).extend({view_cls:d,kind_cls:f,defaults:{title:"Google Analytics",sound:false},subtitles:["visits with event"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),na=D.Backbone.wt.TrendWidget.extend(F).extend({kind_cls:o,defaults:{title:"Google Analytics visits with event",sound:false},trend_defs:{subtitle:"visits",
color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),v=D.Backbone.wt.MultilineChartWidget.extend(v).extend({view_cls:d,kind_cls:b,defaults:{title:"Google Analytics",sound:false},subtitles:["events per visit"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),F=D.Backbone.wt.TrendWidget.extend(F).extend({kind_cls:o,defaults:{title:"Google Analytics events per visit",sound:false},trend_defs:{subtitle:"events per vist",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),Ga=D.Backbone.wt.TrendLeaderboardWidget.extend(z).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,
defaults:{title:"Top events",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"events",color2:a,subtitle3:"pct",color3:a}}),za=D.Backbone.wt.MultilineChartWidget.extend(k).extend({view_cls:d,kind_cls:f,defaults:{title:"Google Analytics",sound:false},subtitles:["search visits"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),Aa=D.Backbone.wt.TrendWidget.extend(z).extend({kind_cls:o,defaults:{title:"Google Analytics search visits",
sound:false},trend_defs:{subtitle:"visits",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),z=D.Backbone.wt.TrendLeaderboardWidget.extend(z).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Top search keywords",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"searches",color2:a,subtitle3:"pct",color3:a}}),ma=function(a,b){b=b||{};type="source";var e=[D.colors.red,D.colors.blue,D.colors.yellow,D.colors.lightgreen,
D.colors.purple,D.colors.darkgreen],h={table_id:{template:"select",template_data:{load_service_params:true,klass:"load:sources"}}},g={template:"autocomplete",template_data:{load_service_params:true},depends_on:"table_id"},j=[];for(i=1;i<=a;i++){j.push(type+i);h[type+i]=$.extend(true,{},g,{template_data:{placeholder:"Select Source "+i,tooltip:'Every referral to a web site has an origin, or source. Possible sources include: "google" (the name of a search engine), "facebook.com" (the name of a referring site), "spring_newsletter" (the name of one of your newsletters), and "direct" (visits from people who typed your URL directly into their browser, or who had bookmarked your site).'}})}return{defaults:_.extend({title:"Traffic sources",
sound:false},b),view_cls:d,kind_cls:f,data_source_params:h,colors:e.slice(0,a),subtitles:j,trend_defs:{timespan:"monthly"}}},sa=D.Backbone.wt.MultilineChartWidget.extend(ma(2)),ta=D.Backbone.wt.MultilineChartWidget.extend(ma(3)),va=D.Backbone.wt.MultilineChartWidget.extend(ma(4)),Fa=D.Backbone.wt.MultilineChartWidget.extend(ma(5)),ma=D.Backbone.wt.MultilineChartWidget.extend(ma(6)),qa=D.Backbone.Service.extend({description:"Your data is in there somewhere. Bring those key performance indicators to the forefront with these widgets.",
signup_url:"http://www.google.com/analytics/"}),k={view_cls:e,data_source_params:_.extend(_.clone(k.data_source_params),{custom_metric:{template:"autocomplete",template_data:{options:D.ga.metric_options,placeholder:"Select metric",tooltip:"The metrics data to be retrieved from the API. Read the reference for metrics at http://developers.google.com/analytics/devguides/reporting/core/v3/reference#metrics"}},custom_filter:{template:"input_text",template_data:{placeholder:"filters",tooltip:"Specifies a subset of all data matched in analytics. Read the reference for filters at https://developers.google.com/analytics/devguides/reporting/core/v3/reference#filters"}}})},
Ha={view_cls:e,data_source_params:_.extend(_.clone(k.data_source_params),_.clone(j))},b=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(k).extend({view_cls:d,kind_cls:b,defaults:{title:"Google Analytics custom query",sound:false},subtitles:["metric"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),Ha=D.Backbone.wt.TrendWidget.extend(Ha).extend({kind_cls:o,defaults:{title:"Google Analytics custom query",sound:false},trend_defs:{subtitle:"metric",color:"rgba(250, 136, 54, 0.65)",
timespan:"monthly"}}),a=D.Backbone.wt.TrendLeaderboardWidget.extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,view_cls:e,defaults:{title:"Google Analytics custom board",sound:false},data_source_params:_.extend(_.clone(k.data_source_params),{custom_dim:{template:"autocomplete",template_data:{options:D.ga.dimension_options,placeholder:"Select dimension",tooltip:"The dimension data to be retrieved from the API. Read the reference for dimensions at http://developers.google.com/analytics/devguides/reporting/core/v3/reference#dimensions"}}},
_.clone(j)),leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"metric",color2:a,subtitle3:"pct",color3:a}});_.extend(Ducksboard.Backbone.widget_kinds,{analytics_visits_graph:x,analytics_pageviews_graph:t,analytics_avg_time_on_site_counter:y,analytics_avg_time_on_site_graph:C,analytics_visit_bounce_rate_gauge:K,analytics_visit_bounce_rate_graph:m,analytics_keywords_leaderboard:J,analytics_sources_leaderboard:P,analytics_frequency_leaderboard:I,analytics_engagement_leaderboard:B,
analytics_keywords_leaderboard:J,analytics_sources_leaderboard:P,analytics_pct_new_visitors_gauge:M,analytics_pct_new_visits_graph:H,analytics_unique_visitors_graph:g,analytics_unique_visitors_counter:w,analytics_daily_unique_visitors_graph:l,analytics_languages_leaderboard:T,analytics_pages_leaderboard:Q,analytics_goal_completions_graph:R,analytics_goal_completions_counter:N,analytics_goal_conversion_rate_counter:ha,analytics_goal_conversion_rate_gauge:fa,analytics_goal_abandons_graph:L,analytics_goal_abandons_counter:W,
analytics_goal_abandon_rate_counter:ja,analytics_goal_abandon_rate_gauge:ia,analytics_goal_completions_vs_abandons_graph:n,analytics_goal_conversion_rate_vs_abandon_rate_stacked_graph:h,analytics_goal_value_graph:U,analytics_goal_value_counter:Z,analytics_goal_completed_source_leaderboard:ra,analytics_total_events_graph:E,analytics_total_events_counter:Y,analytics_unique_events_graph:X,analytics_unique_events_counter:da,analytics_event_value_graph:ba,analytics_event_value_counter:la,analytics_visits_with_event_graph:ea,
analytics_visits_with_event_counter:na,analytics_events_per_visit_graph:v,analytics_events_per_visit_counter:F,analytics_events_leaderboard:Ga,analytics_search_visits_graph:za,analytics_search_visits_counter:Aa,analytics_search_keywords_leaderboard:z,analytics_sources_graph2:sa,analytics_sources_graph3:ta,analytics_sources_graph4:va,analytics_sources_graph5:Fa,analytics_sources_graph6:ma,analytics_custom_query_graph:b,analytics_custom_query_counter:Ha,analytics_custom_query_leaderboard:a});_.extend(Ducksboard.Backbone.service_kinds,
{analytics:qa})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to your Trello account",url:"https://trello.com/"})}}),j=D.Backbone.wt.TimelineWidget.extend({view_cls:a,data_source_params:{board_id:{template:"select",template_data:{load_service_params:true}}},defaults:{title:"Trello board activity",sound:false}}),e=D.Backbone.wt.CompletionWidget.extend({view_cls:a,completion_defs:{view_cls:D.bb.slot_views.CompletionProgressView},data_source_params:{board_id:{template:"select",
template_data:{load_service_params:true}}},defaults:{title:"Trello board completion rate",sound:false},subtitles:["closed cards"],colors:["rgba(32, 92, 126, 0.65)"]}),d={template:"select",template_data:{load_service_params:true}},g={board_id:{template:"select",template_data:{load_service_params:true,klass:"load:list"}}},b={data_source_params:_.extend(_.clone(g),{list_id:d})},f={data_source_params:_.extend(_.clone(g),{list_id:d,list_id2:d})},h={data_source_params:_.extend(_.clone(g),{list_id:d,list_id2:d,
list_id3:d})},o={data_source_params:_.extend(_.clone(g),{list_id:d,list_id2:d,list_id3:d,list_id4:d})},u={data_source_params:_.extend(_.clone(g),{list_id:d,list_id2:d,list_id3:d,list_id4:d,list_id5:d})},q={data_source_params:_.extend(_.clone(g),{list_id:d,list_id2:d,list_id3:d,list_id4:d,list_id5:d,list_id6:d})},d=D.Backbone.wt.TimelineWidget.extend(b).extend({view_cls:a,defaults:{title:"Trello board list cards",sound:false}}),l={view_cls:D.Backbone.wt.MultilineChartView.extend(_.clone(a)),defaults:{title:"Trello board list cards",
sound:false}},k={subtitles:["list1"],colors:["rgba(32, 92, 126, 0.65)"],trend_defs:{timespan:"daily"}},n=_.extend(_.clone(b),k),g=D.bb.wt.AbsoluteMultilineChartWidget.extend(l).extend(n),k={subtitles:["list1","list2"],colors:["rgba(32, 92, 126, 0.65)","rgba(216, 66, 55, 0.65)"],trend_defs:{timespan:"daily"}},x=_.extend(_.clone(f),k),v=D.bb.wt.AbsoluteMultilineChartWidget.extend(l).extend(x),k={subtitles:["list1","list2","list3"],colors:["rgba(32, 92, 126, 0.65)","rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)"],
trend_defs:{timespan:"daily"}},w=_.extend(_.clone(h),k),z=D.bb.wt.AbsoluteMultilineChartWidget.extend(l).extend(w),k={subtitles:["list1","list2","list3","list4"],colors:["rgba(32, 92, 126, 0.65)","rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)","rgba(255, 114, 0, 0.65)"],trend_defs:{timespan:"daily"}},E=_.extend(_.clone(o),k),B=D.bb.wt.AbsoluteMultilineChartWidget.extend(l).extend(E),k={subtitles:["list1","list2","list3","list4","list5"],colors:["rgba(32, 92, 126, 0.65)","rgba(216, 66, 55, 0.65)",
"rgba(109, 0, 119, 0.65)","rgba(255, 114, 0, 0.65)","rgba(0, 170, 93, 0.65)"],trend_defs:{timespan:"daily"}},F=_.extend(_.clone(u),k),F=D.bb.wt.AbsoluteMultilineChartWidget.extend(l).extend(F),k={subtitles:["list1","list2","list3","list4","list5","list6"],colors:["rgba(32, 92, 126, 0.65)","rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)","rgba(255, 114, 0, 0.65)","rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)"],trend_defs:{timespan:"daily"}},q=_.extend(_.clone(q),k),q=D.bb.wt.AbsoluteMultilineChartWidget.extend(l).extend(q),
n=D.bb.wt.AbsoluteMultiareaChartWidget.extend(l).extend(n),x=D.bb.wt.AbsoluteMultiareaChartWidget.extend(l).extend(x),w=D.bb.wt.AbsoluteMultiareaChartWidget.extend(l).extend(w),l=D.bb.wt.AbsoluteMultiareaChartWidget.extend(l).extend(E),b=D.Backbone.wt.TrendWidget.extend(b).extend({view_cls:a,defaults:{title:"Trello board list cards",sound:false},trend_defs:{subtitle:"value",color:"rgba(32, 92, 126, 0.65)"}}),f=D.Backbone.wt.PinsWidget.extend(f).extend({view_cls:a,defaults:{title:"Trello board list cards",
sound:false},subtitles:["list1","list2"],colors:["rgba(32, 92, 126, 0.65)","rgba(216, 66, 55, 0.65)"]}),E=D.Backbone.wt.BoxesWidget.extend(h).extend({view_cls:a,defaults:{title:"Trello board list cards",sound:false},subtitles:["list1","list2","list3"],colors:["rgba(32, 92, 126, 0.65)","rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)"]}),k=D.Backbone.wt.BoxesWidget.extend(o).extend({view_cls:a,defaults:{title:"Trello board list cards",sound:false},subtitles:["list1","list2","list3","list4"],colors:["rgba(32, 92, 126, 0.65)",
"rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)","rgba(255, 114, 0, 0.65)"]}),h=D.Backbone.wt.BarsWidget.extend(h).extend({view_cls:a,defaults:{title:"Trello board list cards",sound:false},subtitles:["list1","list2","list3"],colors:["rgba(32, 92, 126, 0.65)","rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)"]}),o=D.Backbone.wt.BarsWidget.extend(o).extend({view_cls:a,defaults:{title:"Trello board list cards",sound:false},subtitles:["list1","list2","list3","list4"],colors:["rgba(32, 92, 126, 0.65)",
"rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)","rgba(255, 114, 0, 0.65)"]}),a=D.Backbone.wt.BarsWidget.extend(u).extend({view_cls:a,defaults:{title:"Trello board list cards",sound:false},subtitles:["list1","list2","list3","list4","list5"],colors:["rgba(32, 92, 126, 0.65)","rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)","rgba(255, 114, 0, 0.65)","rgba(0, 170, 93, 0.65)"]}),u=D.Backbone.Service.extend({description:"Use these widgets to keep tabs on your Trello boards.",signup_url:"https://trello.com/signup"});
_.extend(Ducksboard.Backbone.widget_kinds,{trello_board_list_cards_counter:b,trello_board_list_cards_pins:f,trello_board_list_cards_boxes3:E,trello_board_list_cards_boxes4:k,trello_board_list_cards_bars3:h,trello_board_list_cards_bars4:o,trello_board_list_cards_bars5:a,trello_board_list_cards_absolute_graph:g,trello_board_list_cards_absolute_graph2:v,trello_board_list_cards_absolute_graph3:z,trello_board_list_cards_absolute_graph4:B,trello_board_list_cards_absolute_graph5:F,trello_board_list_cards_absolute_graph6:q,
trello_board_list_cards_absolute_area_graph:n,trello_board_list_cards_absolute_area_graph2:x,trello_board_list_cards_absolute_area_graph3:w,trello_board_list_cards_absolute_area_graph4:l,trello_board_completion_rate_progress:e,trello_board_list_cards_timeline:d,trello_board_activity_timeline:j});_.extend(Ducksboard.Backbone.service_kinds,{trello:u})})();
(function(){var a={401:"Could not authenticate. The authorization has probably expired. Please, relink it.",403:"You do not have permissions to get statistics for the company. Please, change it.",404:"We couldn't find the configured object. Don't worry, we'll keep on trying."},j=D.Backbone.WidgetView.extend({error_code_to_message:function(b){b=a[b];if(b===void 0)b=D.u.default_error_message;return b}}),e={view_cls:j,data_source_params:{company_id:{template:"input_text",template_data:{placeholder:"company ID or company keywords",
tooltip:"The Company ID is the sequence of numbers at the end of a company URL."}}}},d={view_cls:j,data_source_params:{company_id:{template:"input_text",template_data:{placeholder:"your company ID or keywords",tooltip:"Your Company ID is the sequence of numbers at the end of your company URL."}}},handles_error_code:function(a){console.log(a);return a===401||a===403}},g={allowed_timespans:["yearly"],get_initial_data:function(){var a=this._prepare_initial_params();this.initial_msg_id=D.ws.fetch(this.get("label"),
a);this.initial_data_d=$.Deferred();this.listenTo(D.ws,"fetched:"+this.initial_msg_id,this.got_initial_data);D.ws.connected&&this.bind_data_source();return this.initial_data_d},got_initial_data:function(a){this.stopListening(D.ws,"fetched:"+this.initial_msg_id);this.initial_data_d.resolve();delete this.initial_msg_id;delete this.initial_data_d;this._process_initial_data(a);a=this.extra_timezone?_.sprintf("tick:%s",this.extra_timezone):"tick";this.listenTo(D.ws,a,this.tick)}},b=D.Backbone.slot_kinds.CounterTrend.extend(g),
f=D.Backbone.slot_kinds.AreaChart.extend(g),h=D.Backbone.wt.MultilineChartView.extend(j),o=D.colors.bluesteel,j=D.Backbone.wt.TrendWidget.extend(e).extend({defaults:{title:"Linkedin followers",sound:false},trend_defs:{subtitle:"followers",color:o,timespan:"daily"}}),g=D.Backbone.wt.MultiareaChartWidget.extend(e).extend({view_cls:h,defaults:{title:"Followers growth",sound:false},subtitles:["followers"],colors:[o],trend_defs:{timespan:"monthly"}}),e=D.Backbone.wt.TimelineWidget.extend(e).extend({defaults:{title:"Linkedin company updates",
sound:false}}),u=D.Backbone.wt.TrendWidget.extend(d).extend({kind_cls:b,defaults:{title:"Linkedin engagement",sound:false},trend_defs:{subtitle:"engagement",color:o,timespan:"yearly"}}),q=D.Backbone.wt.TrendWidget.extend(d).extend({kind_cls:b,defaults:{title:"Linkedin clicks",sound:false},trend_defs:{subtitle:"clicks",color:o,timespan:"yearly"}}),l=D.Backbone.wt.TrendWidget.extend(d).extend({kind_cls:b,defaults:{title:"Linkedin comments",sound:false},trend_defs:{subtitle:"comments",color:o,timespan:"yearly"}}),
k=D.Backbone.wt.TrendWidget.extend(d).extend({kind_cls:b,defaults:{title:"Linkedin likes",sound:false},trend_defs:{subtitle:"likes",color:o,timespan:"yearly"}}),n=D.Backbone.wt.TrendWidget.extend(d).extend({kind_cls:b,defaults:{title:"Linkedin shares",sound:false},trend_defs:{subtitle:"shares",color:o,timespan:"yearly"}}),b=D.Backbone.wt.TrendWidget.extend(d).extend({kind_cls:b,defaults:{title:"Linkedin impressions",sound:false},trend_defs:{subtitle:"impressions",color:o,timespan:"yearly"}}),x=D.Backbone.wt.MultiareaChartWidget.extend(d).extend({view_cls:h,
kind_cls:f,defaults:{title:"Engagement growth",sound:false},subtitles:["engagement"],colors:[o],trend_defs:{timespan:"yearly"}}),v=D.Backbone.wt.MultiareaChartWidget.extend(d).extend({view_cls:h,kind_cls:f,defaults:{title:"Clicks growth",sound:false},subtitles:["clicks"],colors:[o],trend_defs:{timespan:"yearly"}}),w=D.Backbone.wt.MultiareaChartWidget.extend(d).extend({view_cls:h,kind_cls:f,defaults:{title:"Comments growth",sound:false},subtitles:["comments"],colors:[o],trend_defs:{timespan:"yearly"}}),
z=D.Backbone.wt.MultiareaChartWidget.extend(d).extend({view_cls:h,kind_cls:f,defaults:{title:"Likes growth",sound:false},subtitles:["likes"],colors:[o],trend_defs:{timespan:"yearly"}}),E=D.Backbone.wt.MultiareaChartWidget.extend(d).extend({view_cls:h,kind_cls:f,defaults:{title:"Shares growth",sound:false},subtitles:["shares"],colors:[o],trend_defs:{timespan:"yearly"}}),d=D.Backbone.wt.MultiareaChartWidget.extend(d).extend({view_cls:h,kind_cls:f,defaults:{title:"Impressions growth",sound:false},subtitles:["impressions"],
colors:[o],trend_defs:{timespan:"yearly"}}),f=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{linkedin_company_updates_timeline:e,linkedin_company_followers_counter:j,linkedin_company_followers_area_graph:g,linkedin_company_engagement_counter:u,linkedin_company_clicks_counter:q,linkedin_company_comments_counter:l,linkedin_company_likes_counter:k,linkedin_company_shares_counter:n,linkedin_company_impressions_counter:b,linkedin_company_engagement_area_graph:x,linkedin_company_clicks_area_graph:v,
linkedin_company_comments_area_graph:w,linkedin_company_likes_area_graph:z,linkedin_company_shares_area_graph:E,linkedin_company_impressions_area_graph:d});_.extend(Ducksboard.Backbone.service_kinds,{linkedin:f})})();
(function(){var a=D.Backbone.wt.TrendWidget.extend({defaults:{title:"Delicious bookmarks count",sound:false},trend_defs:{subtitle:"bookmarks",color:"rgba(9, 9, 9, 0.65)",timespan:"daily"},data_source_params:{url:{template:"input_text",template_data:{placeholder:"Link to track"}}}}),j=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{delicious_url_posts_counter:a});_.extend(Ducksboard.Backbone.service_kinds,{delicious:j})})();
(function(){var a={events:{"click .inner":"external_account"},server_or_app:"applications",external_account:function(a){var b=this.model.data_source.get("service_id");if(b=D.Backbone.services.get(b)){b=_.sprintf("https://rpm.newrelic.com/accounts/%s/%s/%s",b.get("auth_domain"),this.server_or_app,this.model.data_source.get("app_id"));this.add_context_action(a,{label:"Go to New Relic account",url:b})}}},j=D.Backbone.WidgetView.extend(a),e=D.Backbone.wt.MultilineChartView.extend(a).extend({server_or_app:"servers"}),
d=D.Backbone.WidgetView.extend(a).extend({server_or_app:"servers"}),g={view_cls:j,data_source_params:{app_id:{template:"select",template_data:{load_service_params:true}}}},a=D.Backbone.wt.TrendWidget.extend(g).extend({defaults:{title:"New Relic Apdex",sound:false},trend_defs:{subtitle:"apdex",color:"rgba(56, 175, 197, 0.65)",timespan:"daily"}}),b=D.Backbone.wt.TrendWidget.extend(g).extend({view_cls:j,defaults:{title:"New Relic response time",sound:false},trend_defs:{subtitle:"avg response time",color:"rgba(56, 175, 197, 0.65)",
timespan:"daily"}}),f=D.Backbone.wt.BoxesWidget.extend(g).extend({view_cls:j,defaults:{title:"New Relic response times",sound:false},subtitles:["min","avg","max"],colors:["rgba(59, 136, 177, 0.65)","rgba(56, 175, 197, 0.65)","rgba(209, 59, 8, 0.65)"]}),h=D.Backbone.wt.TrendWidget.extend(g).extend({view_cls:j,defaults:{title:"New Relic throughput",sound:false},trend_defs:{subtitle:"throughput",color:"#338899",timespan:"daily"}}),o=D.Backbone.wt.TrendWidget.extend(g).extend({view_cls:j,defaults:{title:"New Relic errors",
sound:false},trend_defs:{subtitle:"error rate",color:"rgba(209, 59, 8, 0.65)",timespan:"daily"}}),u=D.Backbone.wt.GaugeWidget.extend(g).extend({view_cls:j,defaults:{title:"New Relic busy rate",sound:false},subtitles:["busy time"],colors:["rgba(56, 175, 197, 0.65)"]}),q=D.Backbone.wt.GaugeWidget.extend(g).extend({view_cls:j,defaults:{title:"New Relic resource usage",sound:false},data_source_params:{app_id:{template:"select",template_data:{load_service_params:true,klass:"load:metric_name"}},ncpus:{template:"input_text",
template_data:{placeholder:"Total number of CPUs"}}},subtitles:["CPU","DB"],colors:["rgba(56, 175, 197, 0.65)","rgba(59, 136, 177, 0.65)"]}),j=D.Backbone.wt.TrendWidget.extend({view_cls:j,defaults:{title:"New Relic custom metric",sound:false},trend_defs:{subtitle:"custom metric",color:"rgba(56, 175, 197, 0.65)",timespan:"daily"},data_source_params:{app_id:{template:"select",template_data:{load_service_params:true,klass:"load:metric_name"}},metric_name:{template:"select",template_data:{load_service_params:true,
klass:"load:field_name"}},field_name:{template:"select",template_data:{load_service_params:true}}}}),e=D.Backbone.wt.StackedChartWidget.extend(g).extend({view_cls:e,defaults:{title:"CPU usage",sound:false},subtitles:["IO wait","stolen","system","user"],colors:["rgba(203, 25, 28, 0.65)","rgba(157, 199, 88, 0.65)","rgba(81, 0, 14, 0.65)","rgba(59, 136, 177, 0.65)"],trend_defs:{timespan:"daily"}}),d=D.Backbone.wt.LeaderboardWidget.extend({view_cls:d,defaults:{title:"Top processes",sound:false},leaderboard_defs:{total_subtitles:3,
subtitle1:"",color1:"rgba(122, 123, 118, 0.65)",subtitle2:"mem",color2:"rgba(59, 136, 177, 0.65)",subtitle3:"cpu",color3:"rgba(59, 136, 177, 0.65)"},data_source_params:{app_id:{template:"select",template_data:{load_service_params:true}},order_by_cpu:{template:"select",template_data:{options:[{value:"t",display_name:"order processes by CPU usage"},{value:"",display_name:"order processes by memory consumption"}]}}}}),g=D.Backbone.Service.extend({description:"Get Insight Into Your Application Stack with New Relic and track response times, Apdex and even your server\u2019s resource usage with this widgets.",
signup_url:"https://rpm.newrelic.com/signup?product%5Blevel%5D=Standard&product%5Bcommitment%5D=Monthly&subscription%5Bnumber_of_hosts%5D=1&partnership_id=135&promo_code=DUCK14PRO",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_key"]]),params:{auth_user:{template:"input_text",template_data:{placeholder:"API key"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{newrelic_apdex_counter:a,newrelic_response_time_counter:b,newrelic_response_time_boxes:f,newrelic_throughput_counter:h,
newrelic_errors_counter:o,newrelic_busy_rate_gauge:u,newrelic_resource_rate_gauges:q,newrelic_custom_metric_counter:j,newrelic_cpu_usage_stacked_graph4:e,newrelic_processes_leaderboard:d});_.extend(Ducksboard.Backbone.service_kinds,{newrelic:g})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=this.model.data_source.get("basecamp_account_id");if(b){b=_.sprintf("https://basecamp.com/%s/",b);this.add_context_action(a,{label:"Go to Basecamp account",url:b})}}}),j=D.Backbone.slot_kinds.Timeline.extend({reverse:false,_prepare_initial_params:function(){var a=D.Backbone.account.get("timezone").replace(" ","_");return{label:this.get("label"),timezone:a,kind:"since",seconds:moment().diff(moment().startOf("day"),
"seconds")}}}),e={view_cls:a,data_source_params:{basecamp_account_id:{template:"select",template_data:{load_service_params:true,klass:"load:project"}},project_id:{template:"select",template_data:{load_service_params:true}}}},d={view_cls:a,data_source_params:{basecamp_account_id:{template:"select",template_data:{load_service_params:true,klass:"load:project"}},project_id:{template:"select",template_data:{load_service_params:true,klass:"load:todolist"}},todolist_id:{template:"select_multiple",template_data:{placeholder:"All to-do lists",
load_service_params:true}}}},g=D.Backbone.wt.TrendWidget.extend(d).extend({defaults:{title:"Basecamp to-dos",sound:false},trend_defs:{subtitle:"to-dos",color:"rgba(59, 136, 177, 0.65)",timespan:"daily"}}),b=D.Backbone.wt.PinsWidget.extend(d).extend({defaults:{title:"Basecamp to-dos",sound:false},subtitles:["remaining","completed"],colors:["rgba(59, 136, 177, 0.65)","rgba(59, 121, 10, 0.65)"]}),f=D.Backbone.wt.TimelineWidget.extend(d).extend({defaults:{title:"Basecamp project to-dos",sound:false}}),
d=D.Backbone.wt.TrendTimelineWidget.extend(d).extend({defaults:{title:"Basecamp project to-dos",sound:false},trend_defs:{subtitle:"to-dos",color:"rgba(59, 136, 177, 0.65)",timespan:"daily"}}),h=D.Backbone.wt.TimelineWidget.extend(e).extend({defaults:{title:"Basecamp project discussions",sound:false}}),e=D.Backbone.wt.TimelineWidget.extend(e).extend({defaults:{title:"Basecamp project events",sound:false},kind_cls:j}),a=D.Backbone.wt.TimelineWidget.extend({view_cls:a,kind_cls:j,defaults:{title:"Basecamp calendar events",
sound:false},data_source_params:{basecamp_account_id:{template:"select",template_data:{load_service_params:true,klass:"load:calendar"}},calendar_id:{template:"select",template_data:{load_service_params:true}}}}),j=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{basecamp_project_todolist_todos_counter:g,basecamp_project_todolist_todos_pins:b,basecamp_project_todolist_todos_timeline:f,basecamp_project_todolist_todos_counter_timeline:d,basecamp_project_discussions_timeline:h,
basecamp_project_calendar_events_timeline:e,basecamp_calendar_events_timeline:a});_.extend(Ducksboard.Backbone.service_kinds,{basecamp_new:j})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=_.sprintf("https://manage.stripe.com/");this.add_context_action(a,{label:"Go to Stripe account",url:b})}}),j=D.Backbone.wt.MultilineChartView.extend(a),e=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_number(a,2,6)+"%"}}),d=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly","quarterly","yearly"]}),g=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly",
"monthly","quarterly","yearly"],initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,arguments);this.view=new e({model:this})}}),b=D.colors.red,f=D.Backbone.wt.TrendWidget.extend({view_cls:a,defaults:{title:"Stripe customers",sound:false},trend_defs:{subtitle:"customers",color:"rgba(0,140,221, 0.65)",timespan:"monthly"}}),h=D.Backbone.wt.MultiareaChartWidget.extend({view_cls:j,defaults:{title:"Customers growth",sound:false},subtitles:["customers"],colors:["rgba(0,140,221, 0.65)"],
trend_defs:{timespan:"monthly"}}),o=D.Backbone.wt.BoxesWidget.extend({view_cls:a,defaults:{title:"Stripe subscriptions by status",sound:false},subtitles:["trialing","active","past_due","unpaid"],colors:[D.colors.orange,"rgba(0,140,221, 0.65)",D.colors.green,b]}),u=D.Backbone.wt.TrendWidget.extend({view_cls:a,defaults:{title:"Stripe active subscriptions",sound:false},trend_defs:{subtitle:"active subscriptions",color:"rgba(0,140,221, 0.65)",timespan:"monthly"}}),q=D.Backbone.wt.MultiareaChartWidget.extend({view_cls:j,
defaults:{title:"Subscriptions growth",sound:false},subtitles:["active subscriptions"],colors:["rgba(0,140,221, 0.65)"],trend_defs:{timespan:"monthly"}}),b=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend({view_cls:j,defaults:{title:"Customers & subscriptions",sound:false},subtitles:["customers","subscriptions"],colors:[b,"rgba(0,140,221, 0.65)"],trend_defs:{timespan:"monthly"}}),g=D.Backbone.wt.TrendWidget.extend({kind_cls:g,defaults:{title:"Churn rate",sound:false},trend_defs:{subtitle:"churn rate",
color:"rgba(0,140,221, 0.65)",timespan:"monthly"}}),d=D.Backbone.wt.TrendWidget.extend({view_cls:a,kind_cls:d,defaults:{title:"Stripe Revenue",sound:false},trend_defs:{subtitle:"revenue",color:"rgba(0,140,221, 0.65)",timespan:"yearly"}}),l=D.Backbone.wt.TrendWidget.extend({view_cls:a,defaults:{title:"Stripe charges",sound:false},trend_defs:{subtitle:"your currency",color:"rgba(0,140,221, 0.65)",timespan:"monthly"}}),k=D.Backbone.wt.MultiareaChartWidget.extend({view_cls:j,defaults:{title:"Charges growth",
sound:false},subtitles:["charges"],colors:["rgba(0,140,221, 0.65)"],trend_defs:{timespan:"monthly"}}),a=D.Backbone.wt.TimelineWidget.extend({view_cls:a,defaults:{title:"Stripe account events",sound:false}}),n=function(a){for(var b=["rgba(0,140,221, 0.65)",D.colors.red,D.colors.green,D.colors.purple,D.colors.orange,D.colors.black],d=["first","second","third","fourth","fifth","sixth"],e={},f={template:"select",template_data:{load_service_params:true}},h=[],g=1;g<=a;g++){h.push("Plan id "+g);e["plan_id"+
g]=$.extend(true,{},f,{template_data:{placeholder:_.sprintf("The %s plan you are interested in",d[g-1])}})}return{defaults:{title:"Subscriptions by plan",sound:false},view_cls:j,data_source_params:e,colors:b.slice(0,a),subtitles:h,trend_defs:{timespan:"monthly"}}},x=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(n(1)),v=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(n(2)),w=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(n(3)),z=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(n(4)),E=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(n(5)),
n=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(n(6)),B=D.Backbone.Service.extend({description:"Use these widgets to keep tabs on your Stripe-managed billing. Stay up to date in your customers growth rate.",signup_url:"https://manage.stripe.com/register",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_key"]]),params:{auth_user:{template:"input_text",template_data:{placeholder:"API key",tooltip:'You can find your API Key for your Stripe account <a href="https://manage.stripe.com/account/apikeys" target="_blank">here</a>.'}}}});
_.extend(Ducksboard.Backbone.widget_kinds,{stripe_customers_counter:f,stripe_customers_area_graph:h,stripe_subscriptions_boxes:o,stripe_active_subscriptions_counter:u,stripe_active_subscriptions_area_graph:q,stripe_customers_subscriptions_absolute_area_graph:b,stripe_charges_counter:l,stripe_churn_counter:g,stripe_revenue_counter:d,stripe_charges_area_graph:k,stripe_events_timeline:a,stripe_plan_subscriptions_absolute_graph:x,stripe_plan_subscriptions_absolute_graph2:v,stripe_plan_subscriptions_absolute_graph3:w,
stripe_plan_subscriptions_absolute_graph4:z,stripe_plan_subscriptions_absolute_graph5:E,stripe_plan_subscriptions_absolute_graph6:n});_.extend(Ducksboard.Backbone.service_kinds,{stripe:B})})();
(function(){var a={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=_.sprintf("http://www.gosquared.com/cp/signin.php");this.add_context_action(a,{label:"Go to GoSquared account",url:b})}}),data_source_params:{site_token:{template:"select",template_data:{load_service_params:true}}}},j=D.Backbone.wt.TrendWidget.extend(a).extend({defaults:{title:"GoSquared visitors",sound:false},trend_defs:{subtitle:"visits",color:"rgba(77, 34, 89, 0.65)",
timespan:"daily"}}),e=D.Backbone.wt.BoxesWidget.extend(a).extend({defaults:{title:"GoSquared visitors by type",sound:false},subtitles:["total","new","returning","active"],colors:["rgba(77, 34, 89, 0.65)","rgba(59, 121, 10, 0.65)","rgba(37, 177, 228, 0.65)","rgba(209, 59, 8, 0.65)"]}),d=D.Backbone.wt.GaugeWidget.extend(a).extend({defaults:{title:"GoSquared active visitors",sound:false},subtitles:["visitors active"],colors:["rgba(209, 59, 8, 0.65)"]}),g=D.Backbone.wt.GaugeWidget.extend(a).extend({defaults:{title:"GoSquared new visitors",
sound:false},subtitles:["new visitors"],colors:["rgba(59, 121, 10, 0.65)"]}),a=_.extend({},a,{defaults:{title:"GoSquared visits",sound:false}}),a=D.Backbone.wt.TimelineWidget.extend(a),b=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_key"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name",tooltip:"Choose any name to give to this account, so you can find it later in the accounts list."}},auth_user:{template:"input_text",
template_data:{placeholder:"API key",tooltip:"You GoSquared account API Key"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{gosquared_visitors_counter:j,gosquared_visitors_boxes:e,gosquared_new_vs_all_visitors_gauge:g,gosquared_active_vs_all_visitors_gauge:d,gosquared_visits_timeline:a});_.extend(Ducksboard.Backbone.service_kinds,{gosquared:b})})();
(function(){var a={events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to Bitly",url:"https://bitly.com"})}},j={view_cls:D.Backbone.WidgetView.extend(_.clone(a)),data_source_params:{link:{template:"input_text",template_data:{placeholder:"Bitly link"}}}},e=_.extend(_.clone(j),{defaults:{title:"Bitly link stats",sound:false},subtitles:["clicks","shares"],colors:["rgba(107, 175, 240, 0.65)","rgba(238, 97, 35, 0.65)"]}),d=D.Backbone.wt.PinsWidget.extend(e),
a=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(e).extend({view_cls:D.Backbone.wt.MultilineChartView.extend(_.clone(a)),trend_defs:{timespan:"daily"}}),e=D.Backbone.wt.TrendWidget.extend(j).extend({defaults:{title:"Bitly link clicks",sound:false},trend_defs:{subtitle:"clicks",color:"rgba(107, 175, 240, 0.65)",timespan:"daily"}}),g=D.Backbone.wt.TrendWidget.extend(j).extend({defaults:{title:"Bitly link encoders",sound:false},trend_defs:{subtitle:"encoders",color:"rgba(107, 175, 240, 0.65)",timespan:"daily"}}),
b=D.Backbone.wt.TrendLeaderboardWidget.extend(j).extend({defaults:{title:"Bitly link locations",sound:false},leaderboard_defs:{total_subtitles:2,subtitle1:"country",color1:"rgba(107, 175, 240, 0.65)",subtitle2:"clicks",color2:"rgba(238, 97, 35, 0.65)"}}),f=D.Backbone.wt.TrendLeaderboardWidget.extend(j).extend({defaults:{title:"Bitly link referrers",sound:false},leaderboard_defs:{total_subtitles:2,subtitle1:"referrer",color1:"rgba(107, 175, 240, 0.65)",subtitle2:"clicks",color2:"rgba(238, 97, 35, 0.65)"}}),
j=D.Backbone.wt.TrendLeaderboardWidget.extend(j).extend({defaults:{title:"Bitly link referring domains",sound:false},leaderboard_defs:{total_subtitles:2,subtitle1:"referring domain",color1:"rgba(107, 175, 240, 0.65)",subtitle2:"clicks",color2:"rgba(238, 97, 35, 0.65)"}}),h=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{bitly_link_stats_boxes:d,bitly_link_stats_graph:a,bitly_link_clicks_counter:e,bitly_link_encoders_counter:g,bitly_link_locations_trend_leaderboard:b,bitly_link_referrers_trend_leaderboard:f,
bitly_link_referring_domains_trend_leaderboard:j});_.extend(Ducksboard.Backbone.service_kinds,{bitly:h})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=this.model.data_source.get("service_id");if(b=D.Backbone.services.get(b)){b=_.sprintf("http://%s.lighthouseapp.com/",b.get("auth_domain"));this.add_context_action(a,{label:"Go to Lighthouse account",url:b})}}}),j=D.Backbone.wt.TrendWidget.extend({view_cls:a,defaults:{title:"Lighthouse ticket bin count",sound:false},trend_defs:{subtitle:"ticket count",color:"rgba(59, 136, 177, 0.65)",
timespan:"daily"},data_source_params:{project_id:{template:"select",template_data:{load_service_params:true,klass:"load:ticket_bin"}},ticket_bin_id:{template:"select",template_data:{load_service_params:true}}}}),e=D.Backbone.wt.GaugeWidget.extend({view_cls:a,defaults:{title:"Lighthouse milestone completion",sound:false},data_source_params:{project_id:{template:"select",template_data:{load_service_params:true,klass:"load:milestone"}},milestone_id:{template:"select",template_data:{load_service_params:true}}},
subtitles:["tickets completed"],colors:["rgba(59, 136, 177, 0.65)"]}),a=D.Backbone.wt.BarsWidget.extend({view_cls:a,defaults:{title:"Lighthouse tickets by state",sound:false},data_source_params:{project_id:{template:"select",template_data:{load_service_params:true}}},subtitles:["open","resolved","hold","invalid"],colors:["rgba(59, 136, 177, 0.65)","rgba(59, 136, 177, 0.65)","rgba(59, 136, 177, 0.65)","rgba(59, 136, 177, 0.65)"]}),d=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain",
"subdomain"],["auth_user","api_key"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name"}},auth_domain:{template:"input_text",template_data:{placeholder:"Lighthouse subdomain"}},auth_user:{template:"input_text",template_data:{placeholder:"API token"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{lighthouse_ticket_bins_counter:j,lighthouse_milestones_gauge:e,lighthouse_tickets_bars:a});_.extend(Ducksboard.Backbone.service_kinds,{lighthouse:d})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=this.model.data_source.get("service_id");if(b=D.Backbone.services.get(b)){b=_.sprintf("https://%s.highrisehq.com/",b.get("auth_domain"));this.add_context_action(a,{label:"Go to Highrise account",url:b})}}}),j=D.Backbone.wt.TrendWidget.extend({view_cls:a,defaults:{title:"Highrise contacts",sound:false},trend_defs:{subtitle:"contacts",color:"rgba(59, 136, 177, 0.65)",timespan:"daily"}}),
e=D.Backbone.wt.BoxesWidget.extend({view_cls:a,defaults:{title:"Highrise tasks",sound:false},subtitles:["assigned","upcoming","overdue"],colors:["rgba(59, 121, 10, 0.65)","rgba(59, 136, 177, 0.65)","rgba(203, 25, 28, 0.65)"]}),d=D.Backbone.wt.PinsWidget.extend({view_cls:a,defaults:{title:"Highrise cases",sound:false},subtitles:["open cases","closed cases"],colors:["rgba(59, 136, 177, 0.65)","rgba(59, 121, 10, 0.65)"]}),g=D.Backbone.wt.BarsWidget.extend({view_cls:a,defaults:{title:"Highrise deals",
sound:false},subtitles:["pending","lost","won"],colors:["rgba(59, 136, 177, 0.65)","rgba(59, 136, 177, 0.65)","rgba(59, 136, 177, 0.65)"]}),a=D.Backbone.wt.GaugeWidget.extend({view_cls:a,defaults:{title:"Highrise deals",sound:false},subtitles:["lost","won"],colors:["rgba(254, 203, 91, 0.65)","rgba(59, 136, 177, 0.65)"]}),b=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain","subdomain"],["auth_user","api_key"]]),params:{service_username:{template:"input_text",
template_data:{placeholder:"Account name"}},auth_domain:{template:"input_text",template_data:{placeholder:"Highrise subdomain"}},auth_user:{template:"input_text",template_data:{placeholder:"API token"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{highrise_people_counter:j,highrise_cases_pins:d,highrise_tasks_boxes:e,highrise_deals_bars:g,highrise_deals_gauges:a});_.extend(Ducksboard.Backbone.service_kinds,{highrise:b})})();
(function(){var a={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=this.model.data_source.get("service_id");if(b=D.Backbone.services.get(b)){b=_.sprintf("https://%s.basecamphq.com/",b.get("auth_domain"));this.add_context_action(a,{label:"Go to Basecamp account",url:b})}}}),data_source_params:{project_id:{template:"select",template_data:{load_service_params:true}}}},j=D.Backbone.wt.TrendWidget.extend(a).extend({defaults:{title:"Basecamp to-dos",
sound:false},trend_defs:{subtitle:"to-dos",color:"rgba(59, 136, 177, 0.65)",timespan:"daily"}}),e=D.Backbone.wt.TrendWidget.extend(a).extend({defaults:{title:"Basecamp project hours",sound:false},trend_defs:{subtitle:"hours",color:"rgba(59, 136, 177, 0.65)",timespan:"daily"}}),d=D.Backbone.wt.PinsWidget.extend(a).extend({defaults:{title:"Basecamp to-dos",sound:false},subtitles:["pending","finished"],colors:["rgba(59, 136, 177, 0.65)","rgba(59, 121, 10, 0.65)"]}),g=D.Backbone.wt.BoxesWidget.extend(a).extend({defaults:{title:"Basecamp project milestones",
sound:false},subtitles:["late","completed","upcoming"],colors:["rgba(203, 25, 28, 0.65)","rgba(59, 121, 10, 0.65)","rgba(59, 136, 177, 0.65)"]}),b=D.Backbone.wt.BarsWidget.extend(a).extend({defaults:{title:"Basecamp project milestones",sound:false},subtitles:["late","completed","upcoming"],colors:["rgba(203, 25, 28, 0.65)","rgba(59, 121, 10, 0.65)","rgba(59, 136, 177, 0.65)"]}),f=D.Backbone.wt.TimelineWidget.extend(a).extend({defaults:{title:"Basecamp project posts",sound:false}}),a=D.Backbone.wt.TimelineWidget.extend(a).extend({defaults:{title:"Basecamp project activity",
sound:false}}),h=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain","subdomain"],["auth_user","api_key"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name",tooltip:"Provide a name that you'll easily relate to the Basecamp project you'll be tracking. It can be the project's name itself, or whatever you prefer. It's up to you!"}},auth_domain:{template:"input_text",template_data:{placeholder:"Basecamp subdomain",
tooltip:'Basecamp subdomain is the name of your Basecamp account as it appears in the URL. For example, if you log on to http://subdomain.basecamphq.com, please enter "subdomain" here.'}},auth_user:{template:"input_text",template_data:{placeholder:"API token",tooltip:"To get you Basecamp API token log in to your Basecamp account and navigate to My info > Authentication tokens > Basecamp API token. If you ever regenerate your API token, you will need to relink your basecamp account with Ducksboard."}}}});
_.extend(Ducksboard.Backbone.widget_kinds,{basecamp_project_todos_counter:j,basecamp_project_todos_by_state_pins:d,basecamp_project_milestones_boxes:g,basecamp_project_milestones_bars:b,basecamp_project_hours_counter:e,basecamp_project_posts_timeline:f,basecamp_project_activity_timeline:a});_.extend(Ducksboard.Backbone.service_kinds,{basecamp:h})})();
(function(){var a={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=this.model.data_source.get("service_id");if(b=D.Backbone.services.get(b)){b=_.sprintf("https://%s.wufoo.com/admin/",b.get("auth_domain"));this.add_context_action(a,{label:"Go to Wufoo account",url:b})}}}),data_source_params:{form_identifier:{template:"select",template_data:{load_service_params:true}}}},j=D.Backbone.wt.PinsWidget.extend(a).extend({defaults:{title:"Wufoo entries",
sound:false},subtitles:["started","completed"],colors:["#dcc167","#cb3517"]}),e=D.Backbone.wt.GaugeWidget.extend(a).extend({defaults:{title:"Wufoo Form Completion Rate",sound:false},subtitles:["completion rate"],colors:["#cb3517"]}),a=D.Backbone.wt.TimelineWidget.extend(a).extend({defaults:{title:"Wufoo Form Entries",sound:false}}),d=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain","subdomain"],["auth_user","api_key"]]),params:{service_username:{template:"input_text",
template_data:{placeholder:"Account name"}},auth_domain:{template:"input_text",template_data:{placeholder:"Wufoo subdomain"}},auth_user:{template:"input_text",template_data:{placeholder:"API key",tooltip:'You can find your API Key for your Wufoo account following <a href="http://help.wufoo.com/articles/en_US/SurveyMonkeyArticleType/Wufoo-REST-API-V3#Findingthekey" target="_blank">these instructions</a>.'}}}});_.extend(Ducksboard.Backbone.widget_kinds,{wufoo_forms_pins:j,wufoo_form_completion_rate_gauge:e,
wufoo_form_entries_timeline:a});_.extend(Ducksboard.Backbone.service_kinds,{wufoo:d})})();
(function(){var a={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to Chartbeat account",url:"http://www.chartbeat.com/"})}}),data_source_params:{host:{template:"input_text",template_data:{placeholder:"host name",tooltip:'The hostname you used when configuring the Chartbeat snippet on your site, like "example.com" or "store.company.com".'}}}},j=D.Backbone.wt.TrendWidget.extend(a).extend({defaults:{title:"Chartbeat page load time",
sound:false},trend_defs:{subtitle:"seconds to load",color:"rgba(81, 0, 14, 0.65)",timespan:"daily"}}),e=D.Backbone.wt.TrendWidget.extend(a).extend({defaults:{title:"Chartbeat visitors",sound:false},trend_defs:{subtitle:"visits",color:"rgba(209, 59, 8, 0.65)",timespan:"daily"}}),d=D.Backbone.wt.BoxesWidget.extend(a).extend({defaults:{title:"Chartbeat visitors by activity",sound:false},subtitles:["total","read","write","idle"],colors:["rgba(209, 59, 8, 0.65)","rgba(59, 121, 10, 0.65)","rgba(251, 136, 11, 0.65)",
"rgba(122, 123, 118, 0.65)"]}),g=D.Backbone.wt.GaugeWidget.extend(a).extend({defaults:{title:"Chartbeat active visitors",sound:false},subtitles:["visitors active"],colors:["rgba(203, 25, 28, 0.65)"]}),b=D.Backbone.wt.GaugeWidget.extend(a).extend({defaults:{title:"Chartbeat new visitors",sound:false},subtitles:["new visitors"],colors:["rgba(59, 121, 10, 0.65)"]}),f=_.extend({},a,{defaults:{title:"Chartbeat alerts",sound:false}}),f=D.Backbone.wt.TimelineWidget.extend(f),a=_.extend({},a,{defaults:{title:"Chartbeat visits",
sound:false}}),a=D.Backbone.wt.TimelineWidget.extend(a),h=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_key"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name",tooltip:"Choose any name to give to this account, so you can find it later in the accounts list."}},auth_user:{template:"input_text",template_data:{placeholder:"API key"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{chartbeat_domload_counter:j,
chartbeat_visitors_counter:e,chartbeat_visitors_boxes:d,chartbeat_active_vs_all_visitors_gauge:g,chartbeat_new_vs_all_visitors_gauge:b,chartbeat_alerts_timeline:f,chartbeat_visits_timeline:a});_.extend(Ducksboard.Backbone.service_kinds,{chartbeat:h})})();
(function(){var a=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var b=this.model.data_source.get("service_id");D.Backbone.services.get(b)&&this.add_context_action(a,{label:"Go to Twilio account",url:"https://www.twilio.com/user/account"})}}),j=D.bb.wt.MultilineChartView.extend(a),e={timezone:"Etc/UTC",view_cls:a,data_source_params:{subaccount:{template:"select",template_data:{load_service_params:true}}}},d=D.bb.slot_kinds.CounterBar.extend({initialize:function(){D.Backbone.slot_kinds.CounterBar.prototype.initialize.apply(this,
arguments);this.view=new g({model:this})},new_slot_value:function(){var a=this.collection.map(function(a){return a.current_value||0}),b=_.reduce(a,function(a,b){return a+b},0);this.collection.each(function(a){a.view.update_bar(b)})}}),g=D.bb.slot_views.CounterBarView.extend({template:"slot_twilio_progress",update_counter:function(a){var b=this.$(".preview .value"),d=this.$(".preview .subtitle"),e=this.format_value(a),a=Raphael.constants.UPDATE_ANIMATION_DURATION/2;b.stop(true,true);b.fadeOut(a,function(){$(this).text(e)}).fadeIn(a);
d.stop(true,true);d.fadeOut(a).fadeIn(a)},update_bar_value:function(a,b){var d=this.$(".bar .label strong"),e=this.$(".bar .label span"),f=this.format_value(a),h=this.format_value(b),g=Raphael.constants.UPDATE_ANIMATION_DURATION/2;d.stop(true,true);d.fadeOut(g,function(){$(this).text(f)}).fadeIn(g);e.stop(true,true);e.fadeOut(g,function(){$(this).text(h)}).fadeIn(g)},update_bar:function(a){if(_.isNumber(this.model.current_value)){a=a===0?0:this.model.current_value*100/a;this.update_counter(a);this.update_bar_value(this.model.current_value,
a);var b=this.$(".bar"),d=this.format_value(a);$(".value",b).width(d+"%");a<30?b.removeClass("high_value").addClass("low_value"):a>70?b.removeClass("low_value").addClass("high_value"):b.removeClass("low_value high_value")}}}),b=D.bb.slot_kinds.CounterTrend.extend({allowed_timespans:["yearly","monthly","weekly"]}),f=D.bb.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["yearly","monthly","weekly"]}),h=D.bb.slot_kinds.AbsoluteAreaChart.extend({allowed_timespans:["yearly","monthly","weekly"]}),
o=D.bb.slot_kinds.StackedChart.extend({allowed_timespans:["yearly","monthly","weekly"]}),u=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_time(a,2)}}),a=b.extend({initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,arguments);this.view=new u({model:this})}}),a=D.Backbone.wt.TrendWidget.extend(e).extend({kind_cls:a,defaults:{title:"Twilio average call duration this month",sound:false},trend_defs:{subtitle:"average call duration",
color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),q=_.extend({},e,{defaults:{title:"Twilio monthly calls",sound:false},subtitles:["total calls"],colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"total calls",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),l=D.Backbone.wt.TrendWidget.extend(q).extend({kind_cls:b}),q=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(q).extend({view_cls:j,kind_cls:f}),k=_.extend({},e,{defaults:{title:"Twilio monthly received calls",sound:false},subtitles:["received calls"],
colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"received calls",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),n=D.Backbone.wt.TrendWidget.extend(k).extend({kind_cls:b}),k=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(k).extend({view_cls:j,kind_cls:f}),x=_.extend({},e,{defaults:{title:"Twilio monthly sent calls",sound:false},subtitles:["sent calls"],colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"sent calls",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),v=D.Backbone.wt.TrendWidget.extend(x).extend({kind_cls:b}),
x=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(x).extend({view_cls:j,kind_cls:f}),w=_.extend({},e,{defaults:{title:"Twilio-Client monthly calls",sound:false},subtitles:["client calls"],colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"client calls",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),z=D.Backbone.wt.TrendWidget.extend(w).extend({kind_cls:b}),w=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(w).extend({view_cls:j,kind_cls:f}),E=_.extend({},e,{defaults:{title:"Twilio monthly SMS",
sound:false},subtitles:["total SMS"],colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"total SMS",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),B=D.Backbone.wt.TrendWidget.extend(E).extend({kind_cls:b}),E=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(E).extend({view_cls:j,kind_cls:f}),F=_.extend({},e,{defaults:{title:"Twilio monthly received SMS",sound:false},subtitles:["received SMS"],colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"received SMS",color:"rgba(203, 25, 28, 0.65)",
timespan:"yearly"}}),t=D.Backbone.wt.TrendWidget.extend(F).extend({kind_cls:b}),F=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(F).extend({view_cls:j,kind_cls:f}),G=_.extend({},e,{defaults:{title:"Totals",sound:false},subtitles:["sms-in","sms-out","calls-in","calls-out","client"],colors:["rgba(251, 136, 11, 0.65)","rgba(122, 123, 118, 0.65)","rgba(59, 121, 10, 0.65)","rgba(203, 25, 28, 0.65)","rgba(37, 177, 228, 0.65)"],trend_defs:{timespan:"yearly"}}),G=D.bb.wt.AbsoluteMultilineChartWidget.extend(G).extend({view_cls:j,
kind_cls:f}),y=_.extend({},e,{defaults:{title:"Twilio monthly sent SMS",sound:false},subtitles:["sent SMS"],colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"sent SMS",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),A=D.Backbone.wt.TrendWidget.extend(y).extend({kind_cls:b}),y=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(y).extend({view_cls:j,kind_cls:f}),C=_.extend({},e,{defaults:{title:"Twilio monthly calls amount",sound:false},subtitles:["calls amount"],colors:["rgba(203, 25, 28, 0.65)"],
trend_defs:{subtitle:"calls amount",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),K=D.Backbone.wt.TrendWidget.extend(C).extend({kind_cls:b}),C=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(C).extend({view_cls:j,kind_cls:f}),m=_.extend({},e,{defaults:{title:"Twilio monthly SMS amount",sound:false},subtitles:["SMS amount"],colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"SMS amount",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),P=D.Backbone.wt.TrendWidget.extend(m).extend({kind_cls:b}),
m=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(m).extend({view_cls:j,kind_cls:f}),J=_.extend({},e,{defaults:{title:"Twilio monthly total amount",sound:false},subtitles:["total amount"],colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"total amount",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),b=D.Backbone.wt.TrendWidget.extend(J).extend({kind_cls:b}),f=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(J).extend({view_cls:j,kind_cls:f}),T=_.extend({},e,{defaults:{title:"Twilio monthly amounts",
sound:false},subtitles:["calls","sms","total"],colors:["rgba(9, 9, 9, 0.65)","rgba(122, 123, 118, 0.65)","rgba(203, 25, 28, 0.65)"],trend_defs:{timespan:"yearly"}}),J=D.Backbone.wt.BoxesWidget.extend(T),h=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend(T).extend({view_cls:j,kind_cls:h}),T=_.extend({},e,{defaults:{title:"Twilio monthly calls by status",sound:false},subtitles:["unanswered","busy","completed","failed"],colors:["rgba(251, 136, 11, 0.65)","rgba(122, 123, 118, 0.65)","rgba(59, 121, 10, 0.65)",
"rgba(203, 25, 28, 0.65)"],trend_defs:{timespan:"yearly"}}),j=D.bb.wt.StackedChartWidget.extend(T).extend({view_cls:j,kind_cls:o,defaults:{title:"Calls by status",sound:false},subtitles:["no-answer","busy","completed","failed"]}),o=D.Backbone.wt.BarsWidget.extend(T).extend({subtitles:["completed","busy","unanswered","failed"],colors:["rgba(59, 121, 10, 0.65)","rgba(122, 123, 118, 0.65)","rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)"]}),T=D.bb.wt.BarsWidget.extend(e).extend({kind_cls:d,css_classes:function(){return _.sprintf("progress-%s",
this.slots.length)},defaults:{title:"Sent vs received calls",sound:false},subtitles:["sent calls","received calls"],colors:["rgba(9, 9, 9, 0.65)","rgba(122, 123, 118, 0.65)"]}),d=D.bb.wt.BarsWidget.extend(e).extend({kind_cls:d,css_classes:function(){return _.sprintf("progress-%s",this.slots.length)},defaults:{title:"Sent vs received SMS",sound:false},subtitles:["sent SMS","received SMS"],colors:["rgba(9, 9, 9, 0.65)","rgba(122, 123, 118, 0.65)"]}),Q=_.extend({},e,{timezone:void 0,data_source_params:{subaccount:{template:"select",
template_data:{load_service_params:true,klass:"load:queue"}},queue:{template:"select",template_data:{load_service_params:true}}}}),e=D.bb.wt.TrendWidget.extend(Q).extend({defaults:{title:"Twilio queue size",sound:false},trend_defs:{subtitle:"queued callers",color:"rgba(203, 25, 28, 0.65)"}}),I=D.Backbone.slot_kinds.CounterTrend.extend({initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,arguments);this.view=new u({model:this})}}),Q=D.bb.wt.TrendWidget.extend(Q).extend({kind_cls:I,
defaults:{title:"Twilio queue average wait time",sound:false},trend_defs:{subtitle:"average wait time",color:"rgba(203, 25, 28, 0.65)"},allowed_timespans:["daily","weekly","monthly"]}),I=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{twilio_average_call_duration_counter:a,twilio_total_calls_counter:l,twilio_total_calls_graph:q,twilio_inbound_calls_counter:n,twilio_inbound_calls_graph:k,twilio_outbound_calls_counter:v,twilio_outbound_calls_graph:x,twilio_client_calls_counter:z,
twilio_client_calls_graph:w,twilio_total_sms_counter:B,twilio_total_sms_graph:E,twilio_inbound_sms_counter:t,twilio_inbound_sms_graph:F,twilio_outbound_sms_counter:A,twilio_outbound_sms_graph:y,twilio_calls_by_status_stacked:j,twilio_calls_by_status_bars:o,twilio_usage_categories_graph:G,twilio_calls_price_counter:K,twilio_calls_price_graph:C,twilio_sms_price_counter:P,twilio_sms_price_graph:m,twilio_total_price_counter:b,twilio_total_price_graph:f,twilio_prices_area:h,twilio_prices_boxes:J,twilio_sent_received_calls_progress:T,
twilio_sent_received_sms_progress:d,twilio_queue_size_counter:e,twilio_queue_average_wait_time_counter:Q});_.extend(Ducksboard.Backbone.service_kinds,{twilio:I})})();
(function(){var a={events:{"click .inner":"external_account"},external_account:function(a){var b=this.model.data_source.get("service_id");if(b=D.Backbone.services.get(b)){b=_.sprintf("https://%s.desk.com/",b.get("auth_domain"));this.add_context_action(a,{label:"Go to Desk account",url:b})}}},j=D.Backbone.WidgetView.extend(_.clone(a)),e=D.Backbone.wt.MultilineChartView.extend(_.clone(a)),d={view_cls:j,data_source_params:{group_name:{template:"select",template_data:{load_service_params:true}}}},g=D.colors.purple,
b=D.colors.black,a=D.Backbone.wt.BoxesWidget.extend(d).extend({defaults:{title:"Desk cases by status",sound:false},subtitles:["new","open","pending"],colors:[g,D.colors.yellow,D.colors.darkorange]}),f=D.Backbone.wt.BarsWidget.extend(d).extend({defaults:{title:"Desk cases by status",sound:false},subtitles:["new","open","pending"],colors:[g,g,g]}),h=D.Backbone.wt.BarsWidget.extend(d).extend({defaults:{title:"Desk cases by priority",sound:false},subtitles:["low","normal","high","urgent"],colors:[g,g,
g,g]}),o=_.extend({},d,{defaults:{title:"Desk unresolved cases",sound:false},trend_defs:{subtitle:"unresolved cases",color:g,timespan:"daily"}}),o=D.Backbone.wt.TrendWidget.extend(o),u=D.Backbone.wt.TrendWidget.extend(d).extend({defaults:{title:"Desk urgent and unresolved cases",sound:false},trend_defs:{subtitle:"urgent & unresolved",color:D.colors.red,timespan:"daily"}}),q=D.Backbone.wt.TrendWidget.extend({defaults:{title:"Desk unassigned cases",sound:false},trend_defs:{subtitle:"unassigned cases",
color:D.colors.yellow,timespan:"daily"}}),l=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_time(a,1)}}),k=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly"],initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,arguments);this.view=new l({model:this})}}),n=D.Backbone.wt.TrendWidget.extend(d).extend({kind_cls:k,defaults:{title:"Desk response time",sound:false},trend_defs:{subtitle:"response time",
color:g,timespan:"weekly"}}),k=D.Backbone.wt.TrendWidget.extend(d).extend({kind_cls:k,defaults:{title:"Desk solution time",sound:false},trend_defs:{subtitle:"solution time",color:g,timespan:"weekly"}}),x=D.Backbone.wt.TrendLeaderboardWidget.extend(d).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Desk top labels",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:g,subtitle2:"count",color2:b,subtitle3:"pct",color3:b}}),v=D.Backbone.wt.TrendLeaderboardWidget.extend(d).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,
defaults:{title:"Desk unresolved cases per agent",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:g,subtitle2:"total",color2:b,subtitle3:"pct",color3:b}}),b=D.Backbone.wt.TrendLeaderboardWidget.extend(d).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Desk solved cases per agent",sound:false},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:g,subtitle2:"total",color2:b,subtitle3:"pct",color3:b}}),w=D.Backbone.wt.StackedChartWidget.extend(d).extend({view_cls:e,
defaults:{title:"Desk cases by priority",sound:false},subtitles:["low","normal","high","urgent"],colors:[D.colors.blue,D.colors.yellow,D.colors.orange,D.colors.red],trend_defs:{timespan:"daily"}}),z=_.extend({},d,{view_cls:e,defaults:{title:"Desk cases by priority",sound:false},subtitles:["low","normal","high","urgent"],colors:[D.colors.blue,D.colors.yellow,D.colors.orange,D.colors.red],trend_defs:{timespan:"daily"}}),z=D.bb.wt.MultilineChartWidget.extend(z),E=D.Backbone.wt.StackedChartWidget.extend(d).extend({view_cls:e,
defaults:{title:"Desk cases by status",sound:false},subtitles:["new","open","pending"],colors:[g,D.colors.yellow,D.colors.darkorange],trend_defs:{timespan:"daily"}}),g=_.extend({},{view_cls:e,defaults:{title:"Desk created vs closed cases",sound:false},subtitles:["created","closed"],colors:[g,D.colors.lightgreen],trend_defs:{timespan:"daily"}}),g=D.Backbone.wt.MultiareaChartWidget.extend(g),B=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(d).extend({view_cls:e,defaults:{title:"Desk unresolved cases by group",
sound:false},subtitles:["group1","group2"],colors:[D.colors.purple,D.colors.lightgreen],trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:true}},group_name2:{template:"select",template_data:{load_service_params:true}}}}),F=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(d).extend({view_cls:e,defaults:{title:"Desk unresolved cases by group",sound:false},subtitles:["group1","group2","group3"],colors:[D.colors.purple,D.colors.lightgreen,
D.colors.yellow],trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:true}},group_name2:{template:"select",template_data:{load_service_params:true}},group_name3:{template:"select",template_data:{load_service_params:true}}}}),t=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(d).extend({view_cls:e,defaults:{title:"Desk unresolved cases by group",sound:false},subtitles:["group1","group2","group3","group4"],colors:[D.colors.purple,D.colors.lightgreen,
D.colors.yellow,D.colors.orange],trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:true}},group_name2:{template:"select",template_data:{load_service_params:true}},group_name3:{template:"select",template_data:{load_service_params:true}},group_name4:{template:"select",template_data:{load_service_params:true}}}}),G=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(d).extend({view_cls:e,defaults:{title:"Desk unresolved cases by group",sound:false},
subtitles:["group1","group2","group3","group4","group5"],colors:[D.colors.purple,D.colors.lightgreen,D.colors.yellow,D.colors.orange,D.colors.red],trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:true}},group_name2:{template:"select",template_data:{load_service_params:true}},group_name3:{template:"select",template_data:{load_service_params:true}},group_name4:{template:"select",template_data:{load_service_params:true}},group_name5:{template:"select",
template_data:{load_service_params:true}}}}),e=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(d).extend({view_cls:e,defaults:{title:"Desk unresolved cases by group",sound:false},subtitles:["group1","group2","group3","group4","group5","group6"],colors:[D.colors.purple,D.colors.lightgreen,D.colors.yellow,D.colors.orange,D.colors.red,D.colors.blue],trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:true}},group_name2:{template:"select",
template_data:{load_service_params:true}},group_name3:{template:"select",template_data:{load_service_params:true}},group_name4:{template:"select",template_data:{load_service_params:true}},group_name5:{template:"select",template_data:{load_service_params:true}},group_name6:{template:"select",template_data:{load_service_params:true}}}}),j=D.Backbone.wt.TimelineWidget.extend({view_cls:j,defaults:{title:"Desk interaction stream",sound:false}}),d=D.Backbone.Service.extend({description:"Be there for your customers \u2014 anytime, anywhere. These widgets bring your Desk.com customer service KPIs to your dash.",
signup_url:"http://www.desk.com/",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain","subdomain"]]),params:{auth_domain:{template:"input_text",template_data:{placeholder:"Your Desk domain (like company.desk.com)",tooltip:"Use the Desk domain, if your account is using a custom domain.<br>For instance enter company.desk.com instead of company.support.com, unless you're using SSL. In that case, enter your own domain."}}}});_.extend(Ducksboard.Backbone.widget_kinds,{desk_cases_by_status_boxes:a,
desk_cases_by_priority_bars:h,desk_cases_by_priority_stacked_graph:w,desk_cases_by_priority_graph:z,desk_cases_by_status_bars:f,desk_cases_by_status_stacked_graph:E,desk_unresolved_cases_counter:o,desk_unresolved_urgent_cases_counter:u,desk_unresolved_cases_by_group_absolute_graph2:B,desk_unresolved_cases_by_group_absolute_graph3:F,desk_unresolved_cases_by_group_absolute_graph4:t,desk_unresolved_cases_by_group_absolute_graph5:G,desk_unresolved_cases_by_group_absolute_graph6:e,desk_unassigned_cases_counter:q,
desk_average_response_time_counter:n,desk_average_solution_time_counter:k,desk_top_active_labels_leaderboard:x,desk_cases_created_closed_area_graph:g,desk_unresolved_cases_agent_leaderboard:v,desk_solved_cases_agent_leaderboard:b,desk_interaction_stream_timeline:j});_.extend(Ducksboard.Backbone.service_kinds,{desk:d})})();
(function(){var a=D.Backbone.Model.extend({idAttribute:null,url:"/support/ticket",defaults:{content:void 0},initialize:function(){this.view=new j({model:this})}}),j=D.Backbone.View.extend({template:"support_ticket",done_text:"close",events:{"click .send":"send_ticket"},sending_complete:false,render:function(){this.setElement($.tmpl(this.template,{name:D.Backbone.account.get("email")}));D.u.modal({content:this.$el,onComplete:_.bind(function(){this.$el.find("textarea").first().focus()},this)});return this},
send_ticket:function(a){if(this.$("textarea").val())if(this.sending_complete)this.navigate_away();else{var b=D.u.sending($(a.currentTarget),"creating");if(!b.blocked){a=this.$(".subject");a=(a.find("input").length?a.find("input").val():a.text())+"\n\n"+this.$("textarea").val();this.model.save({content:a},{success:_.bind(function(){this.ticket_sent(b)},this),error:_.bind(function(a,d){b.complete();this.show_response_errors(d)},this)})}}},navigate_away:function(){$.fancybox.close()},ticket_sent:function(a){this.$(".form").fadeOut(_.bind(function(){a.complete();
this.sending_complete=true;this.$(".sent").fadeIn();this.$(".send").text(this.done_text)},this))}}),e=a.extend({url:"/support/integration",initialize:function(){this.view=new d({model:this})}}),d=j.extend({template:"integration_ticket",done_text:"go back to the widgets",navigate_away:function(){D.Backbone.app.navigate("directory",true)}});_.extend(Ducksboard.Backbone,{SupportTicket:a,IntegrationTicket:e})})();
(function(){var a=D.Backbone.Model.extend({idAttribute:"account_code",params:{first_name:{template:"input_text",validators:[D.Utils.is_not_empty],template_data:{placeholder:"First Name"}},last_name:{template:"input_text",validators:[D.Utils.is_not_empty],template_data:{placeholder:"Last Name"}},number:{template:"input_text",validators:[D.Utils.is_not_empty,D.Utils.is_valid_credit_card],template_data:{placeholder:"Credit Card Number"}},verification_value:{template:"input_text",validators:[D.Utils.is_not_empty,
D.Utils.is_valid_cvv],template_data:{placeholder:"CVV",maxlength:"4"}},month:{template:"select_months"},year:{template:"select",template_data:{options:[]}},address1:{template:"input_text",validators:[D.Utils.is_not_empty],template_data:{placeholder:"Full Address"}},city:{template:"input_text",validators:[D.Utils.is_not_empty],template_data:{placeholder:"City"}},state:{template:"input_text",validators:[D.Utils.is_not_empty],template_data:{placeholder:"State/Province"}},zip:{template:"input_text",validators:[D.Utils.is_not_empty],
template_data:{placeholder:"Zip"}},country:{template:"select_countries"},company_name:{target_class:".vat-info",template:"input_text",template_data:{placeholder:"Company Name"}},vat_number:{target_class:".vat-info",template:"input_text",template_data:{placeholder:"VAT Number",tooltip:"only applicable to EU customers"}}},initialize:function(){this.plan=D.bb.account.set_plan();this.year_options();var a=D.bb.account.get("country");this.set({company_name:D.bb.account.get("company"),plan_code:this.plan.get("code"),
country:a,currency:D.u.b.is_country_in_eu(a)?"EUR":"USD"})},toDucksboardJSON:function(){var a=this.toJSON();if(!D.u.Billing.is_country_in_eu(this.get("country")))a.vat_number="";return a},parse:function(a){return a.data&&a.data[0]||a},validate_country:function(a){if(a!==D.bb.account.get("country"))this.trigger("error:country");else{this.set({country:a});this.trigger("change:country",this)}},year_options:function(){for(var a=moment().year(),b=[],d=a;d<=a+10;++d)b.push({value:d,display_name:d});this.params.year.template_data.options=
b;this.set({year:a+1,month:1})},calculate_totals:function(a,b){var d={stages:{}};d.usd_plan=a.usd_cost;d.eur_plan=a.eur_cost;d.stages.usd_now=d.usd_plan;d.stages.eur_now=d.eur_plan;if(b){var e=d.stages.usd_now,f=d.stages.eur_now,h=d.stages.usd_now.discount(b,"USD"),g=d.stages.eur_now.discount(b,"EUR");d.usd_coupon=h.sub(e);d.eur_coupon=g.sub(f);d.stages.usd_now=h;d.stages.eur_now=g}d.stages.before_vat_eur=d.stages.eur_now;if(D.u.Billing.is_vat_charge_applicable(this.get("country"),this.get("vat_number"))){d.vat=
d.stages.eur_now.mult(D.u.b.vat_percent/100);d.stages.eur_now=d.stages.eur_now.add(d.vat)}return d}}),j=a.extend({url:"/accounts/billing/subscription/",initialize:function(b,d){a.prototype.initialize.apply(this,arguments);var e=D.bb.account.get("country");this.set({first_name:D.bb.account.get("first_name"),last_name:D.bb.account.get("last_name"),country:e});this.totals=this.calculate_totals(this.plan,this.coupon)},validate_coupon:function(a){if(a&&a!=="Code"){a=a.toLowerCase()==="betatester"?"BETATESTERS2":
a;$.ajax({type:"GET",url:_.sprintf("/accounts/billing/coupons/%s/%s",this.plan.get("code"),a),dataType:"json",timeout:6E4,success:_.bind(function(b){this.coupon=b.data[0].coupon;this.set({coupon_code:a});this.trigger("change:coupon_code",this)},this),error:_.bind(function(){this.trigger("error:coupon_code")},this)})}}}),e=a.extend({url:"/accounts/billing/billing_info/"}),d=D.Backbone.FormView.extend({events:{"change .field-year":"update_month","change .field-country":"update_country","change .field-vat_number":"update_vat_number",
"click .form .current":"show_available_plans","click .plans-info .current":"hide_available_plans","click .recurly-plan ":"update_plan","click .confirm .cancel":"show_form_view","click .contact":"show_contact_tab","click .send":"send"},vat_messages:{es:{placeholder:"CIF",tooltip:"your CIF as it should appear on the invoice"},eu:{placeholder:"VIES VAT Code",tooltip:"if you provide a valid VAT Information Exchange System  number, you will not be charged VAT for your subscription"},other:{placeholder:"VAT number",
tooltip:"only applicable to EU customers"}},initialize:function(){this.visible=true;D.bb.FormView.prototype.initialize.apply(this,arguments);this.listenTo(this.model,"change:country",this.country_updated);this.listenTo(this.model,"error:country",this.show_country_error);this.listenTo(this.model,"change:plan_code",this.plan_code_updated);this.listenTo(this.model,"change:coupon_code",this.coupon_code_updated);this.listenTo(this.model,"error:coupon_code",this.show_coupon_error);this.listenTo(this.model,
"change:vat_number",this.vat_number_updated);this.listenTo(D.bb.account,"change",this.account_updated)},template_data:function(){this.model.totals=this.model.calculate_totals(this.model.plan,this.model.coupon);var a=_.map(D.bb.account.available_plans(),function(a){return a.toJSON()}),b=_.max(D.bb.plans.map(function(a){return a.get("features").create_dashboard})),d=false,e=0;if(b<D.bb.dashboards.size()){d=true;e=D.bb.dashboards.size()-b}return _.extend(this.model.toJSON(),{has_trial_expired:D.bb.account.get("has_trial_expired"),
has_recurly_account_expired:D.bb.account.get("has_recurly_account_expired"),plan:this.model.plan.toJSON(),plan_exceeded:d,max_dashboards_num:b,to_delete:e,totals:this.model.totals,available_plans:a,is_eu:D.u.Billing.is_country_in_eu(this.model.get("country")),discount_applied:this.model.coupon?true:false,coupon_error:false,coupon:this.model.coupon,submit_html:this.submit_messages.send})},render_child_template:function(a,b){var d=a.tmplItem();if(d.update){b=b||{};d.data=this.template_data();_.extend(d.data,
b);d.update()}},render_fields:function(){this.fields={};_.each(this.model.params,function(a,b){this.fields[b]=$.tmpl(a.template,_.extend({name:b,value:this.model.get(b)},a.template_data));var d=a.target_class&&this.$(a.target_class);this.fields[b].appendTo(d||this.$("fieldset"));a.template_data&&a.template_data.tooltip&&this.setup_tooltip(this.fields[b])},this);this.model.trigger("change:country");return this},set_from_fields:function(){this.errors={};_.each(this.fields,_.bind(function(a,b){_.reduce(this.model.params[b].validators,
function(b,d){return b&&d(a)},true)||(this.errors[b]=D.u.Billing.errors[b])},this));return!_.isEmpty(this.errors)?false:D.bb.FormView.prototype.set_from_fields.apply(this)},update_month:function(){var a=moment(),b=a.year(),d=a.month();if(parseInt(this.$(".field-year").val())===b){var e=false;this.$(".field-month").find("option").each(function(){if(parseInt($(this).val())<=d)$(this).attr("disabled",true);else{$(this).removeAttr("disabled");if(!e){e=true;$(this).attr("selected",true)}}})}else this.$(".field-month").find("option").removeAttr("disabled");
this.$(".field-month").trigger("liszt:updated")},update_country:function(){this.model.validate_country(this.$(".field-country").val())},update_plan:function(a){a=$(a.currentTarget).attr("id");if(a!==this.model.get("plan_code")){var b=D.bb.recurly_plans.get(a),d=D.bb.plans.get(b.get("plan_label")),e=d.cannot_choose();if(e){mixpanel.track("plan change error",{selected_plan:a});d.item_view.show_error(e)}else{mixpanel.track("plan changed",{selected_plan:a});this.model.plan=b;this.model.set({plan_code:a})}}},
update_vat_number:function(){var a=this.$(".field-vat_number").val();this.model.set({vat_number:a})},country_updated:function(){var a=this.model.get("country");this.model.set({currency:D.u.b.is_country_in_eu(a)?"EUR":"USD"});var b=this.$(".send");if(b.hasClass("error")){b.removeAttr("disabled");b.removeClass("error");this.update_submit_button("send")}b="other";D.u.Billing.is_vat_number_applicable(a)&&(b=a==="ES"?"es":"eu");a=this.vat_messages[b];$('input[type="text"]',this.fields.vat_number).attr("placeholder",
a.placeholder);$(".tooltip span",this.fields.vat_number).html(a.tooltip);this.render_child_template(this.$(".current"));this.show_glow(this.$(".current"))},plan_code_updated:function(){this.hide_available_plans();this.render_child_template(this.$(".current"));this.show_glow(this.$(".current"));this.render_child_template(this.$(".plan-list"))},vat_number_updated:function(){this.render_child_template(this.$(".current"));this.show_glow(this.$(".current"));this.render_child_template(this.$(".plan-list"))},
account_updated:function(){this.$(".field-first_name").val(D.bb.account.get("first_name"));this.$(".field-last_name").val(D.bb.account.get("last_name"));this.$(".field-company_name").val(D.bb.account.get("company"));var a=this.$(".field-country");a.val(D.bb.account.get("country"));a.trigger("liszt:updated");this.model.set({country:D.bb.account.get("country")})},show_available_plans:function(a){if(!D.bb.account.get("has_recurly_account_expired")){a=$(a.currentTarget);if(!a.hasClass("disabled")&&!a.hasClass("exceeded")){this.$(".form").fadeOut(_.bind(function(){this.$(".loading-plans-info").fadeIn(_.bind(function(){D.bb.account.refresh_alert_count().done(_.bind(function(){this.$(".send").fadeOut();
this.$(".loading-plans-info").fadeOut(_.bind(function(){this.$(".plans-info").fadeIn()},this))},this))},this))},this));mixpanel.track("plan change button")}}},hide_available_plans:function(a){this.$(".plans-info li .error").fadeOut(_.bind(function(){this.$(".plans-info li").removeClass("disabled");this.$(".plans-info li .detail").fadeIn()},this));this.$(".plans-info").fadeOut(_.bind(function(){this.$(".form").fadeIn();this.$(".send").fadeIn()},this));a!==void 0&&mixpanel.track("plan keep button")},
show_form_view:function(){this.$(".confirm").fadeOut(_.bind(function(){this.restore_previous_plan();this.$(".form").fadeIn(_.bind(function(){this.show_server_errors();this.update_submit_button("send")},this))},this));return false},restore_previous_plan:function(){var a=this.model.get("previous_plan_code");if(a){var b=D.bb.recurly_plans.get(a);this.model.plan=b;this.model.set({plan_code:a},{silent:true});this.model.unset("previous_plan_code");this.render_child_template(this.$(".current"));this.show_glow(this.$(".current"));
this.render_child_template(this.$(".plan-list"))}},show_confirmation_view:function(){this.$(".form").fadeOut(_.bind(function(){this.clean_server_errors();this.render_child_template(this.$(".confirm"));this.$(".confirm").fadeIn();this.update_submit_button("confirm_subscription")},this))},show_contact_tab:function(){this.container.show_tab("credentials")},update_submit_button:function(a){var b=this.submit_messages[a],d=this.$(".send");(d.find("span").length?d.find("span"):d).html(b).val(b);this.events["click .send"]=
a;this.delegateEvents()},show_glow:function(a,b){b=b||2E3;if(!a.hasClass("updated")){a.switchClass("idle","updated",0);setTimeout(_.bind(function(){a.switchClass("updated","idle",0)},a),b)}},show_country_error:function(){var a=this.$(".field-country + .chzn-container > .chzn-single");this.show_glow(a);a=this.$(".send");if(!a.hasClass("error")){a.attr("disabled","disabled");a.addClass("error");this.update_submit_button("show_country_error")}},show_server_errors:function(){if(this.errors){var a=this.$(".server-errors");
_.each(this.errors,function(b){a.append(_.sprintf("<li>%s</li>",b))});this.$("h3.title").length?this.$("h3.title").fadeOut(_.bind(function(){this.$(".server-errors").fadeIn()},this)):this.$(".server-errors").fadeIn()}},clean_server_errors:function(){this.errors=void 0;this.$(".server-errors").hide();this.$("h3.title").fadeIn();this.$(".server-errors").empty()}}),g=d.extend({template:"subscription",events:{"click .coupon-info .show":"show_coupon_code","click .coupon-info .applied":"remove_coupon_code",
"click .coupon-info .apply a":"update_coupon_code","keyup input.field-number":"track_cc_input"},submit_messages:{send:'continue to confirmation</br><span class="note">you won\'t be charged until you confirm your order</span>',confirm_subscription:"confirm your subscription",show_billing_tab:"check your billing info",show_country_error:'The country of your credit card must be the same as the one you set in the <a class="contact">contact information</a>. Please, fix it and try again.'},track_cc_input_triggered:false,
initialize:function(){d.prototype.initialize.apply(this,arguments);_.extend(this.events,d.prototype.events)},update_coupon_code:function(){var a=this.$(".field-coupon_code").val();if(a&&a!=="Code"){var b=this.$(".coupon-info .apply a");this.sending=D.u.sending(b,"");if(!this.sending.blocked){this.$(".send").attr("disabled","disabled");this.model.validate_coupon(a)}}},remove_coupon_code:function(){this.model.coupon=void 0;this.coupon_code_updated()},coupon_code_updated:function(){this.sending.complete;
this.$(".send").removeAttr("disabled");this.render_child_template(this.$(".current"));this.render_child_template(this.$(".coupon-info"));this.show_glow(this.$(".current"))},show_coupon_code:function(){this.$(".coupon-info .show").fadeOut(_.bind(function(){this.$(".coupon-info .apply").fadeIn()},this));mixpanel.track("coupon button")},show_billing_tab:function(){this.container.show_tab("billing")},send:function(){this.clean_server_errors();mixpanel.track("subscription continue button");if(this.visible)if(this.set_from_fields())if(this.check_tos()){mixpanel.track("subscription pending confirmation");
var a=this.$(".field-coupon_code").val();a&&a!=="Code"&&!this.model.get("coupon_code")?this.update_coupon_code():this.show_confirmation_view()}else{mixpanel.track("subscription TOS not accepted");this.errors=[D.u.Billing.errors.tos];this.show_server_errors()}else{mixpanel.track("subscription confirmation error");this.show_errors(this.errors)}else this.show_billing_tab("billing")},confirm_subscription:function(a){a=$(a.currentTarget);this.sending=D.u.sending(a,"creating subscription");if(!this.sending.blocked){mixpanel.track("subscription confirm button");
this.model.save({},{complete:this.sending.complete,success:_.bind(function(a,b){this.update_on_changes(b)},this),error:_.bind(function(a,b){mixpanel.track("subscription creation error");try{this.errors=JSON.parse(b.responseText)}catch(d){this.errors={}}this.errors=this.errors.errors?D.u.Billing.flatten_errors(this.errors.errors):["Unknown error processing transaction. Please try again later."];this.show_form_view()},this)})}},update_on_changes:function(a){if(a){D.bb.account.set(a);D.bb.account.update_mixpanel()}D.bb.account.set_plan(this.model.plan);
this.$(".confirm").fadeOut(_.bind(function(){this.visible=false;this.container.add_tab("billing");this.container.add_tab("invoices");this.$(".sent").fadeIn();this.update_submit_button("show_billing_tab");this.container.$(".logout").attr("href","/");this.container.$(".logout").text("close");D.bb.preferences.remove_upgrade_now();$("menu#preferences .subscription").fadeOut(function(){D.bb.dashboards.current.view.adjust_preferences_bar();$("menu#preferences .subscription").remove()});$("menu#preferences .trial-expired").fadeOut(function(){D.bb.dashboards.current.view.adjust_preferences_bar();
$("menu#preferences .trial-expired").remove()})},this))},check_tos:function(){var a=this.$("#tos_check");return D.u.is_checked(a)},show_coupon_error:function(){this.sending.complete;this.$(".send").removeAttr("disabled");this.render_child_template(this.$(".coupon-info"),{coupon_error:true});this.render_child_template(this.$(".current"));this.show_glow(this.$(".current"))},track_cc_input:function(a){if(!this.track_cc_input_triggered)if((a=$(a.currentTarget).val())&&a.length>4){mixpanel.track("subscription fill in credit card info");
this.track_cc_input_triggered=true}}}),b=d.extend({template:"billing_info",submit_messages:{send:"update your billing info",confirm_plan_change:"change your plan",show_billing_tab:"back to billing info",show_country_error:'The country of your credit card must be the same as the one you set in the <a class="contact">contact information</a>. Please, fix it and try again.'},show_billing_tab:function(){this.$(".sent, .plan-changed").fadeOut(_.bind(function(){this.$(".form").fadeIn(_.bind(function(){this.visible=
true;this.update_submit_button("send")},this))},this))},send:function(a){if(this.visible){this.clean_server_errors();if(this.set_from_fields()){a=$(a.currentTarget);this.sending=D.u.sending(a,"updating billing info");this.sending.blocked||this.model.save({},{complete:this.sending.complete,success:_.bind(function(a,b){this.update_on_changes(b)},this),error:_.bind(function(a,b){mixpanel.track("updating billing error");try{this.errors=JSON.parse(b.responseText)}catch(d){this.errors={}}this.errors=this.errors.errors?
D.u.Billing.flatten_errors(this.errors.errors):["Unknown error processing transaction. Please try again later."];this.show_server_errors();this.update_submit_button("send")},this)})}else{this.show_errors(this.errors);this.sending.complete()}}else this.show_billing_tab("billing")},update_on_changes:function(a){if(a){D.bb.account.set(a);D.bb.account.update_mixpanel()}D.bb.account.set_plan(this.model.plan);this.$(".form").fadeOut(_.bind(function(){this.$(".field-number").val("");this.$(".field-verification_value").val("");
this.model.set({number:"",verification_value:""});this.$(".sent").fadeIn();this.update_submit_button("show_billing_tab");this.visible=false;$("menu#preferences .subscription-expired").fadeOut(function(){D.bb.dashboards.current.view.adjust_preferences_bar();$("menu#preferences .subscription-expired").remove()})},this))},update_on_plan_changes:function(a){if(a){D.bb.account.set(a);D.bb.account.update_mixpanel()}D.bb.account.set_plan(this.model.plan);this.$(".confirm").fadeOut(_.bind(function(){this.render_child_template(this.$(".current"));
this.show_glow(this.$(".current"));this.render_child_template(this.$(".plan-list"));this.$(".plan-changed").fadeIn();this.update_submit_button("show_billing_tab")},this))},plan_code_updated:function(){var a=this.model.previous("plan_code"),b=D.bb.recurly_plans.get(a),d=this.model.calculate_totals(b),e={previous_plan:b.toJSON(),previous_totals:d};this.model.set({previous_plan_code:a});this.$(".plans-info li .error").fadeOut(_.bind(function(){this.$(".plans-info li").removeClass("disabled");this.$(".plans-info li .detail").fadeIn()},
this));this.$(".plans-info").fadeOut(_.bind(function(){this.render_child_template(this.$(".confirm"),e);this.update_submit_button("confirm_plan_change");this.$(".confirm").fadeIn();this.$(".send").fadeIn();this.visible=false},this))},confirm_plan_change:function(a){a=$(a.currentTarget);this.plan_change_sending=D.u.sending(a,"changing plan");this.clean_server_errors();this.plan_change_sending.blocked||this.model.save({},{url:"/accounts/billing/plan-update/",complete:this.plan_change_sending.complete,
success:_.bind(function(a,b){this.update_on_plan_changes(b)},this),error:_.bind(function(a,b){try{this.errors=JSON.parse(b.responseText)}catch(d){this.errors={}}this.errors=this.errors.errors?D.u.Billing.flatten_errors(this.errors.errors):["Unknown error processing transaction. Please try again later."];this.show_form_view()},this)})}}),f=D.Backbone.Model.extend({idAttribute:"uuid",defaults:{uuid:void 0,state:void 0,invoice_number:void 0,po_number:void 0,vat_number:void 0,subtotal_in_cents:void 0,
tax_in_cents:void 0,total_in_cents:void 0,currency:void 0,created_at:void 0,line_items:void 0,transactions:void 0},initialize:function(){this.item_view=new u({model:this})}}),h=D.Backbone.Model.extend({idAttribute:"code",initialize:function(){this.usd_cost=new D.u.Billing.Cost(this.get("usd_price")*100,"USD");this.eur_cost=new D.u.Billing.Cost(this.get("eur_price")*100,"EUR")},cost_with_taxes:function(a,b){if(D.u.b.is_vat_charge_applicable(a,b)){var d=this.eur_cost.mult(D.u.b.vat_percent/100);return{vat:d,
eur_cost:this.eur_cost.add(d)}}},toJSON:function(){var a=D.Backbone.Model.prototype.toJSON.apply(this),b=D.bb.account.get("country"),d=D.bb.account.get("vat_number");return _.extend(a,this.cost_with_taxes(b,d))}}),o=D.Backbone.Model.extend({idAttribute:"label",initialize:function(){this.item_view=new q({model:this})},cannot_choose:function(){var a=this.get("features").create_dashboard,b=D.bb.dashboards.billable_dashboards();if(a&&b>a){b=b-a;a=D.u.number_to_text(a);b=D.u.number_to_text(b);return _.sprintf("This is a %s-dashboard plan, you'll have to delete %s of yours. Will that be enough?",
a,b)}a=D.bb.account.available_widgets_count(this);return a.total<0||a.custom<0?"This plan has a limited number of widgets, you'll have to remove some of the widgets you created.":!D.bb.account.has_premium_directory(this)&&D.bb.dashboards.uses_premium_widgets()?"This plan does not premium services, you'll have to remove the widgets from premium services":!D.bb.account.has_tvmode_carousel(this)&&D.bb.dashboards.has_carousel()?"This plan does not include TV Mode Reel, you'll have to remove all the dashboards from the reel":
D.bb.account.available_alerts_count(this)<0?"This plan has a limited number of alerts, you'll have to remove some of the alerts you created.":null},toJSON:function(){return _.extend(D.Backbone.Model.prototype.toJSON.apply(this),{monthly_plan_code:this.get("monthly").code,yearly_plan_code:this.get("yearly").code,monthly_usd_cost:new D.u.b.Cost(this.get("monthly").usd_price*100,"USD"),yearly_usd_cost:new D.u.b.Cost(this.get("yearly").usd_price*100,"USD"),monthly_eur_cost:new D.u.b.Cost(this.get("monthly").eur_price*
100,"EUR"),yearly_eur_cost:new D.u.b.Cost(this.get("yearly").eur_price*100,"EUR")})}}),u=D.Backbone.View.extend({template:"plan_invoice_item",template_data:function(){var a=moment(this.model.get("created_at"));return _.extend(this.model.toJSON(),{url:"/accounts/billing/"+this.model.get("invoice_number")+"/pdf/",total:(this.model.get("total_in_cents")/100).toFixed(2),date:a.format("dddd, MMMM Do YYYY")})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));return this}}),
q=D.Backbone.View.extend({events:{"click .error":"hide_error"},initialize:function(a){this.model=a.model},show_error:function(a,b){b=b||3E3;this.setElement($(_.sprintf("#%s",this.model.get("label"))));this.$(".detail").fadeOut(_.bind(function(){this.$el.addClass("disabled");var d=this.$(".error");d.children("span").text(a);d.fadeIn(_.bind(function(){setTimeout(_.bind(function(){this.hide_error()},this),b)},this))},this))},hide_error:function(){var a=this.$el||$(_.sprintf("#%s",this.model.get("label")));
this.setElement(a);this.$(".error").fadeOut(_.bind(function(){this.$el.removeClass("disabled");this.$(".detail").fadeIn()},this))}}),f=D.Backbone.Collection.extend({model:f,url:"/accounts/billing/invoices/",comparator:function(a){return-a.get("invoice_number")},parse:function(a){return a.data}}),o=D.Backbone.Collection.extend({model:o,comparator:function(a){return(a=a.get("monthly"))?parseFloat(a.usd_price,2):0}}),h=D.Backbone.Collection.extend({model:h,comparator:function(a){return-parseInt(a.get("usd_price"),
2)}}),o=new o,h=new h;_.extend(Ducksboard.Backbone,{SubscriptionParams:j,BillingInfoParams:e,SubscriptionFormView:g,BillingInfoFormView:b,InvoiceList:f,plans:o,recurly_plans:h})})();
(function(){var a=D.Backbone.View.extend({template:"directory_group_detail_sizes",render:function(){this.setElement($.tmpl(this.template,{sizes:this.options.kind.available_sizes}));return this}}),j=D.Backbone.View.extend({template:"directory_group_detail_item",events:{click:"selected"},render:function(){this.setElement($.tmpl(this.template,this.options.kind));this.options.selected&&this.selected();return this},selected:function(){this.$el.siblings().find("a").removeClass("selected");this.$("a").addClass("selected");
this.trigger("selected",this.options.kind)}}),e=D.Backbone.Model.extend({idAttribute:"group",is_custom_category:false,initialize:function(){this.item_view=new d({model:this});this.detail_view=new g({model:this})},needs_upgrade:function(){var a=D.bb.account.available_widgets_count();return D.bb.account.get("plan_label")==="developer"&&!this.get("developer_plan_permission")||!D.bb.account.has_premium_directory()&&this.get("premium")||a.total<=0||this.get("service_kind")=="custom"&&a.custom<=0},order_rank:function(){return this.get("name")}}),
d=D.Backbone.View.extend({template:"directory_group_item",max_imgs_per_widget:4,events:{"click a":"select_group"},template_data:function(){var a=_.pluck(this.model.get("widget_kinds"),"kind");return data=_.extend(this.model.toJSON(),{needs_upgrade:this.model.needs_upgrade(),images:this.get_images(),total_images:Math.min(a.length,this.max_imgs_per_widget)})},get_images:function(){return _.pluck(this.model.get("widget_kinds"),"kind").slice(0,this.max_imgs_per_widget)},render:function(){this.setElement($.tmpl(this.template,
this.template_data()));this.$("img").preload({placeholder:"/static/dashboard/img/empty.png",notFound:"/static/dashboard/img/empty.png",onFinish:_.bind(function(){this.$("img").css("opacity",1)},this)});return this},select_group:function(){mixpanel.track("widgets group select",{group:this.model.get("group"),service_kind:this.model.get("service")})}}),g=D.Backbone.View.extend({template:"directory_group_detail",selected_kind:void 0,events:{"click .add":"add_widget","change .kinds":"widget_kind_choice_selected"},
template_data:function(){return data=_.extend(this.model.toJSON(),{needs_upgrade:this.model.needs_upgrade(),many_kinds:this.many_kinds(),has_choices:this.has_choices(),kinds:this.model.get("widget_kinds")})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.has_choices()?this.render_choices():this.render_kinds();return this},render_choices:function(){kind=this.model.get("widget_kinds")[0];this.many_kinds()||this.widget_kind_selected(kind);this.$(".kind").attr("class",
"kind m-widget-preview "+kind.kind)},render_kinds:function(){_.each(this.model.get("widget_kinds"),function(a,b){var d=new j({kind:a,selected:b===0});this.listenTo(d,"selected",this.widget_kind_selected);d.render().$el.appendTo(this.$(".kinds"))},this)},many_kinds:function(){return this.model.get("widget_kinds").length>1},has_choices:function(){return this.model.get("choice_question")!==null},widget_kind_choice_selected:function(a){var b=$(a.target).val().toLowerCase(),a=_.find(this.model.get("widget_kinds"),
function(a){return a.kind===b});this.widget_kind_selected(a)},widget_kind_selected:function(b){this.selected_kind=b;this.$(".description").html(b.description);this.$(".kind").attr("class","kind m-widget-preview "+b.kind);this.remove_size_select();if(b.available_sizes.length>1){b=(new a({kind:b})).render().$el;b.insertBefore(this.$(".add"));this.$el.is(":visible")&&b.chosen({disable_search_threshold:10})}this.enable_add_button()},remove_size_select:function(){var a=this.$(".size");a.length<1||a.unchosen().remove()},
enable_add_button:function(){var a=this.$(".add");if(a.hasClass("disabled")){a.removeAttr("disabled");a.removeClass("disabled")}},add_widget:function(a){a=$(a.target);if(a.hasClass("disabled"))return null;a.addClass("disabled");var a=this.selected_kind.kind,b=D.Backbone.widget_kinds[a];if(this.selected_kind.available_sizes.length>1)var d=this.$(".size").val();else{d=this.selected_kind.available_sizes[0];d=_.sprintf("%dx%d",d[0],d[1])}b={service_kind:b.prototype.service_kind,widget_kind:a,no_permissions:0};
if(this.model.needs_upgrade()){b.no_permissions=1;mixpanel.track("widget kind select",b);D.Backbone.app.navigate("settings/account/subscription",true)}else{mixpanel.track("widget kind select",b);D.Backbone.app.navigate(_.sprintf("new/widget/%s/%s",a,d),true)}}}),b=D.Backbone.Collection.extend({model:e,url:"/api/directory/",view_cls:void 0,detail_view_cls:void 0,not_services:["static","clock","rss","countdown"],initialize:function(){this.view=new this.view_cls({collection:this});this.detail_view=new this.detail_view_cls({collection:this});
this.on("reset",this.update_widget_classes)},comparator:function(a){var b=a.get("name");a.needs_upgrade()||(b=" "+b);return b},update_widget_classes:function(){this.each(function(a){var b=a.get("parent_service"),d=D.Backbone.service_kinds[b||a.get("service")];d===void 0?$.error("service "+a.get("service")+" not found"):b===null&&_.extend(d.prototype,{kind:a.get("service"),kind_name:a.get("service_name"),user_managed:a.get("user_managed"),developer_plan_permission:a.get("developer_plan_permission"),
uses_external_authentication:a.get("uses_external_authentication")});_.each(a.get("widget_kinds"),function(b){var d=D.Backbone.widget_kinds[b.kind];d===void 0&&$.error("widget "+b.kind+" not found");_.extend(d.prototype,{kind:b.kind,kind_name:b.display_name,premium:a.get("premium"),wiki_url:a.get("wiki_url"),service_kind:b.service,description:b.description,available_sizes:b.available_sizes,date_created:b.date_created,slots:b.slots})})})}}),f=D.Backbone.View.extend({slider_name:void 0,create_slide:function(a,
b){this.slider=new $.fn.Slidster(this.$(".groups"),$.extend({},D.u.constants.slidster_conf,{pager_info_item:"services",start_at:a||1},b))},slide_container:function(){return this.$(".groups .viewport > ul")},next_page:function(){this.track_slide("next page")},previous_page:function(){this.track_slide("previous page")},track_slide:function(a){if(this.slider_name){var b=this.slider_name;_.isFunction(this.slider_name)&&(b=this.slider_name());mixpanel.track(b+" "+a,this.track_slider_props())}},track_slider_props:function(){return{slide:this.slider.current,
progress:this.slider.current/this.slider.slides}}}),h=f.extend({template:"directory_services_detail",events:{"click .next":"next_page","click .previous":"previous_page"},slider_name:"widget kind",initialize:function(a){this.collection=a.collection},template_data:function(a){a=a.toJSON();return{service:a.service||a.id,service_name:a.service_name||a.name}},render:function(a){if(D.bb.account.get("readonly"))return this;var b=a.get("service")||a.get("id");this.setElement($.tmpl(this.template,this.template_data(a)));
this.groups=this.collection.get(b).get("widgets").models;this.add_groups(a);var d=_.indexOf(this.groups,a)+1;D.u.modal({content:this.$el,onComplete:_.bind(function(){D.u.on_esc();this.create_slide(d,{on_slide_show:_.bind(function(a){this.update_pagination(a)},this)});this.slide_container().children().show()},this)});this.$(".groups select").chosen({disable_search_threshold:10});return this},add_groups:function(a){_.each(this.groups,_.bind(function(b){var d=b.detail_view.render().$el;d.appendTo(this.slide_container());
b!==a&&d.hide()},this))},update_pagination:function(a){var a=this.groups[a-1],b=a.get("service")||a.id;D.Backbone.app.navigate("directory/"+b+"/"+a.id)}}),o=b.extend({view_cls:D.bb.View,detail_view_cls:h}),u=D.Backbone.Model.extend({initialize:function(){this.item_view=new q({model:this});this.detail_view=new g({model:this})},needs_upgrade:function(){if(D.bb.account.get("has_full_permissions"))return false;var a=D.bb.account.get("plan_label")==="developer"&&!_.contains(["custom","github","internal"],
this.get("id")),b=!D.bb.account.has_premium_directory()&&this.get("premium");return a||b},order_rank:function(){return this.get("name")}}),q=D.Backbone.View.extend({template:"directory_services_item",template_data:function(){return _.extend(this.model.toJSON(),{needs_upgrade:this.model.needs_upgrade()})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));return this}}),l=f.extend({template:"directory_services",page_template:"directory_services_page",groups_per_page:3,current_page:void 0,
slider_name:"directory",filtered:void 0,initialize:function(a){this.collection=a.collection},events:{"click .integration-request":"integration_request","keyup .search":"filter_keyword","change .category":"filter_category"},initialize:function(a){this.collection=a.collection;this.reset_search()},template_data:function(){return data={plan:Ducksboard.bb.account.get("plan_label"),total:D.bb.directory.services.models.length,categories:this.collection.extract_categories(),services:this.collection,has_trial_account:D.bb.account.get("has_trial_account"),
has_premium_directory:D.bb.account.has_premium_directory()}},render:function(a){if(D.bb.account.get("readonly"))return this;D.bb.dashboards.current&&D.bb.dashboards.current.view.hide_welcome();this.setElement($.tmpl(this.template,this.template_data()));this.search();this.set_old_filters();D.u.modal({content:this.$el,onComplete:_.bind(function(){D.u.on_esc();this.create_slide(a||1,{on_slide_show:_.bind(function(a){this.update_pagination(a)},this)});var b=new B;this.$(".latest-widgets").replaceWith(b.render().$el);
b.create_slide();this.$("#directory-search").focus()},this)});$("ul",this.slide_container()).length<2&&this.$("nav .next").hide();this.$("select").chosen({disable_search_threshold:10});return this},append_to_directory:function(a){this.filtered&&this.filtered.push(a);if(!this.current_page||$("a",this.current_page).length>=this.groups_per_page)this.current_page=this.new_page();a.item_view.render().$el.appendTo(this.current_page)},new_page:function(){return $.tmpl(this.page_template).appendTo(this.slide_container())},
update_directory:function(a){this.current_page=void 0;this.slider&&this.slider.$controls.add(this.slider.$pager_info)[a.length?"show":"hide"]();this.slider&&this.slider.slides&&this.slider.empty();this.filtered=[];_.each(a,function(a){this.append_to_directory(a)},this);this.slider&&this.slider.refresh()},update_pagination:function(a){D.Backbone.app.navigate("directory/p"+a)},integration_request:function(){mixpanel.track("missing widgets button")},default_filters:function(){return{keyword:"",category:"all",
service:"all"}},reset_search:function(){this.search_filters=this.default_filters()},search_active:function(){return!_.isEqual(this.search_filters,this.default_filters())},set_old_filters:function(){this.$(".filters .search").val(this.search_filters.keyword);this.$(".filters .category").val(this.search_filters.category);this.$(".filters .service").val(this.search_filters.service)},track_slider_props:function(){return{slide:this.slider.current,progress:this.slider.current/this.slider.slides}},search:function(){var a=
this.search_filters.keyword,b=function(){return true};_.each(["category"],_.bind(function(a){var d=this.search_filters[a];d!=="all"&&(b=function(a){return _.any(a.get("widgets").models,function(a){return a.get("category")===d})})},this));this.groups=this.collection.select(_.bind(function(d){if(!d.get("name")||this.search_active()&&d.is_custom_category)return false;var e=[d.get("name"),d.get("description"),d.get("service")];return b(d)&&_.any(e,function(b){return b&&_.str.include(b.toLowerCase(),a)})},
this));this.update_directory(this.groups)},filter_keyword:function(){var a=this.$(".filters .search").val().toLowerCase();this.search_filters.keyword=a;this.search();this.track_keyword()},track_keyword:_.debounce(function(){mixpanel.track("directory filter keyword")},2E3),filter_category:function(a){a=$(a.target).val().toLowerCase();this.search_filters.category=a;this.reset_filter("service");this.search();mixpanel.track("directory filter category",{category:a})},reset_filter:function(a){this.search_filters[a]=
"all";this.$(_.sprintf(".filters .%s",a)).val("all").trigger("liszt:updated")}}),k=l.extend({template:"directory_service_widgets",slider_name:"service widgets",groups_per_page:void 0,using_service:function(a){return _.find(D.bb.services.models,function(b){return b.get("service_kind")===a.get("service_kind")})},template_data:function(a){return _.extend(a.toJSON(),{description:a.get("description")||false,using_service:this.in_use})},render:function(a,b){if(D.bb.account.get("readonly"))return this;D.bb.dashboards.current&&
D.bb.dashboards.current.view.hide_welcome();this.groups_per_page=(this.in_use=this.using_service(a))||!a.get("description")?6:4;this.setElement($.tmpl(this.template,this.template_data(a)));this.update_directory(a);D.u.modal({content:this.$el,onComplete:_.bind(function(){D.u.on_esc();this.create_slide(b||1,{on_slide_show:_.bind(function(a){this.update_pagination(a)},this)})},this)});return this},create_slide:function(a,b){this.slider=new $.fn.Slidster(this.$(".groups"),$.extend({},D.u.constants.slidster_conf,
{pager_info_item:"widgets",start_at:a||1},b))},update_directory:function(a){this.current_page=void 0;this.groups=a.get("widgets").models;_.each(this.groups,function(a){this.append_to_directory(a)},this)},update_pagination:function(a){var b=this.groups[a-1],b=b.get("service")||b.id;D.Backbone.app.navigate("directory/service/"+b+"/p"+a)}}),k=b.extend({model:u,view_cls:l,widgets_view_cls:k,detail_view_cls:h,no_external_services:["clock","countdown","rss","static"],initialize:function(){this.view=new this.view_cls({collection:this});
this.widgets_view=new this.widgets_view_cls({collection:this});this.detail_view=new this.detail_view_cls({collection:this})},extract_categories:function(a){a||(a=this.service_widgets);return _.uniq(_.sortBy(a.map(function(a){return{id:a.get("category"),name:a.get("category_name"),description:a.get("description")}}),function(a){return a.name}),true,function(a){return a.id})},extract_services:function(a){a||(a=this.service_widgets);var b=this.no_external_services,d={},a=_.uniq(_.sortBy(a.map(function(a){var e=
a.get("service"),f=D.bb.service_kinds[a.get("parent_service")||a.get("service")].prototype;d[e]||(d[e]={all:[],total:0});d[e].all.push(a);return{id:a.get("service"),premium:a.get("premium"),service_kind:a.get("parent_service")||a.get("service"),name:a.get("service_name"),description:f.description,total:d[e].total+a.get("total"),signup_url:f.signup_url,button_text:f.button_text,external_service:$.inArray(a.get("service"),b)===-1}}),function(a){return a.name}),true,function(a){return a.id});_.each(a,
function(a){a.widgets=new w(d[a.id].all)});return a},extract_service_models:function(a){a||(a=this.service_widgets);return _.map(this.extract_services(a),function(a){return new u(a)})}}),n=D.Backbone.Model.extend({is_custom_category:false,initialize:function(){this.item_view=new d({model:this})}}),x=D.Backbone.View.extend({template:"directory_dashboard_item",template_data:function(){return data=_.extend(this.model.toJSON(),{needs_upgrade:this.model.get("needs_upgrade")()})},render:function(){this.setElement($.tmpl(this.template,
this.template_data()));return this}}),v=D.Backbone.View.extend({template:"directory_dashboard_detail",template_data:function(){return data=_.extend(this.model.toJSON(),{needs_upgrade:this.model.get("needs_upgrade")})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));return this}}),w=D.bb.Collection.extend({model:n,comparator:function(a){return a.is_dashboard?-1:a.order_rank()},initialize:function(a){this.service=a[0].get("service");if(this.service==="twilio")if(this.dashboard_kind=
D.bb.dashboard_kinds.get(this.service)){this.dashboard_kind.is_dashboard=true;this.dashboard_kind.item_view=new x({model:this.dashboard_kind});this.dashboard_kind.detail_view=new v({model:this.dashboard_kind});a.push(this.dashboard_kind)}}});D.bb.Collection.extend({model:n,initialize:function(){this.detail_view=new h({collection:this})}});var z=D.Backbone.View.extend({template:"directory_custom_category_item",events:{"click a":"select_group"},template_data:function(){return this.model.toJSON()},render:function(){this.setElement($.tmpl(this.template,
this.template_data()));return this},select_group:function(){mixpanel.track("widgets group select",{group:this.model.id,service_kind:"custom"})}}),l=l.extend({template:"directory_customs",spreadsheets_template:"directory_custom_googlespreadsheets",groups_per_page:9,current_page:void 0,slider_name:"customs",initialize:function(a){this.collection=a.collection},render:function(){this.setElement($.tmpl(this.template));D.u.modal({content:this.$el,onComplete:_.bind(function(){D.u.on_esc()},this)});this.update_directory(this.collection.models);
$.tmpl(this.spreadsheets_template).appendTo(this.current_page);return this}});D.Backbone.View.extend({template:"directory_custom_item",render:function(){this.setElement($.tmpl(this.template,this.model.toJSON()));return this}});var n=h.extend({template:"directory_custom_detail",category_name:void 0,slider_name:function(){return!this.category_name?"custom":this.category_name.replace("_"," ")},render:function(a,b){this.setElement($.tmpl(this.template));this.category_name=a;this.groups=this.collection.select(_.bind(function(b){return b.get("category").toLowerCase()===
a},this));b||(b=this.groups[0]);this.add_groups(b);var d=_.indexOf(this.groups,b)+1;D.u.modal({content:this.$el,onComplete:_.bind(function(){D.u.on_esc();this.create_slide(d);this.slide_container().children().show()},this)});this.$(".groups select").chosen({disable_search_threshold:10});return this},slide_container:function(){return this.$(".groups .viewport > ul")},update_pagination:function(a){a=_.sprintf("custom/%s/%s",this.category_name,this.groups[a].id);D.Backbone.app.navigate(a)}}),e=e.extend({initialize:function(){this.item_view=
new d({model:this});this.detail_view=new g({model:this})}}),n=b.extend({model:e,view_cls:D.bb.View,detail_view_cls:n,comparator:function(a){return a.get("layout")}}),E=D.Backbone.Model.extend({is_custom_category:true,initialize:function(){this.item_view=new z({model:this})},needs_upgrade:function(){return false},order_rank:function(){return this.get("order_rank")}}),e=D.bb.Collection.extend({model:E,view_cls:l,initialize:function(){this.view=new this.view_cls({collection:this})},extract_categories:function(){var a=
{custom_numeric:1,custom_images:2,custom_textual:3};return _.uniq(_.sortBy(D.bb.directory.custom.map(function(b){return{id:b.get("category"),name:b.get("category_name"),order_rank:a[b.get("category")],description:b.get("category_description")}}),function(b){return a[b.id]}),true,function(a){return a.id})},extract_category_models:function(){return _.map(this.extract_categories(),function(a){return new E(a)})}}),b=b.extend({url:null,initialize:function(){this.on("reset",this.update_widget_classes)}}),
B=f.extend({template:"directory_latest",limit:12,events:{"click .next":"next_page","click .previous":"previous_page"},initialize:function(){this.collection=F},template_data:function(){return{widgets:this.collection.sortBy(function(a){return parseFloat(a.get("date_modified"))*-1}).slice(0,this.limit).map(function(a){return{name:a.get("name"),description:a.get("description"),service:a.get("service"),group:a.get("group")}})}},render:function(){this.setElement($.tmpl(this.template,this.template_data()));
return this},create_slide:function(){this.slider=new $.fn.Slidster(this.$el,$.extend({},D.u.constants.slidster_conf,{pager_info:false,loop:false}))}}),f=new n,F=new o,o=new b,t=new k,G=new e;F.on("reset",function(a){t.service_widgets=a;a=t.extract_service_models();t.reset(a)});f.on("reset",function(){var a=G.extract_category_models();G.reset(a)});_.extend(Ducksboard.Backbone,{directory:{services:F,custom:f,others:o,service_kinds:t,custom_kinds:G}})})();
(function(){var a,j=["twitter","analytics","salesforce","zendesk","github","twilio"];D.bb.directory.service_kinds.on("reset",function(){a=D.bb.directory.service_kinds.filter(function(a){return _.contains(j,a.get("id"))});a=_.map(a,function(a){return{slug:a.get("id"),name:a.get("name"),needs_upgrade:a.needs_upgrade()}})});var e=D.Backbone.View.extend({template:null,template_data:function(){return{}},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.render_modal();return this},
render_modal:function(){D.u.super_modal(this);this.mixpanel_track()},mixpanel_track:function(a){mixpanel.track(this.template.replace(/_/g," "),a)}}),d=e.extend({template:"wizard_start"}),g=e.extend({template:"wizard_manual_setup"}),b=e.extend({template:"wizard_choose_service",template_data:function(){return{services:a}}}),f=e.extend({template:"wizard_connect",render:function(a){if(a){this.setElement($.tmpl(this.template,this.template_data()));var b=D.Backbone.dashboards.current;b.set_create_view(D.Backbone.wizard_dashboard_create_views[a.service]);
b.create_view.render();this.mixpanel_track({service:a.service})}}}),e=e.extend({template:"wizard_what_is_next",template_data:function(){return{slug:D.bb.dashboards.current.get("slug")}},mixpanel_track:function(){var a={},b=D.bb.dashboards.current.widgets,d=b.size(),e=d?"setup":"manual";d&&(a.service=b.at(0).service.get("service_kind"));mixpanel.track(e+" wizard completed",a)}});D.bb.wizard||(D.bb.wizard={});D.bb.wizard.dashboard={start:d,manual_setup:g,choose_service:b,connect:f,what_is_next:e}})();
(function(){var a=D.Backbone.Model.extend({idAttribute:"email",url:"/api/user",defaults:{email:void 0,first_name:void 0,last_name:void 0,position:void 0,company:void 0,address1:void 0,city:void 0,state:void 0,zip:void 0,country:void 0,timezone:void 0,plan_label:void 0,status:void 0,status_change_date:void 0,readonly:void 0,access_token:void 0,access_password:void 0,api_key:void 0,subscriber_account_code:void 0,recurly_plan_code:void 0,recurly_signature:void 0,has_trial_expired:void 0,has_trial_account:void 0,
has_recurly_account:void 0,can_subscribe:void 0,has_full_permissions:void 0,has_freemium_plan:void 0,date_joined:void 0,mixpanel_distinct_id:void 0,can_upload_background:void 0,has_tvmode:void 0,num_alerts:void 0,owners:void 0},initialize:function(){this.settings_view=new j({model:this});this.disabled_settings_view=new e({model:this});this.unpaid_settings_view=new d({model:this});this.trial_expired_view=new g({model:this});this.subscription_expired_view=new b({model:this});this.api_key_view=new f({model:this});
this.invoices=new D.Backbone.InvoiceList},get_billing:function(){var a={account:this};if(this.get("can_subscribe"))this.billing=new D.Backbone.SubscriptionParams({},a);else if(this.get("has_recurly_account"))this.billing=new D.Backbone.BillingInfoParams({},a);return this.billing},available_plans:function(){return D.bb.plans.filter(function(a){return a.get("subscriber_kind")!=="whitelabel"&&a.get("active")===true&&a.get("monthly")!==void 0&&a.get("yearly")!==void 0&&a.cannot_choose()===null})},set_plan:function(a){if(a)return this.plan=
a;this.plan=this.get("has_trial_account")?[]:D.bb.recurly_plans.filter(_.bind(function(a){return a.get("code")===this.get("recurly_plan_code")},this));if(!_.isEmpty(this.plan))return this.plan=this.plan[0];if(this.get("plan_label")==="enterprise")return this.plan=D.bb.recurly_plans.get("monthly_enterprise");if(this.get("plan_label")==="professional")return this.plan=D.bb.recurly_plans.get("monthly_professional");if(this.get("plan_label")==="standard")return this.plan=D.bb.recurly_plans.get("standard");
D.bb.dashboards.size();a=D.bb.recurly_plans.filter(function(a){var b=D.bb.plans.get(a.get("plan_label"));return a.get("active")===true&&a.get("subscriber_kind")!=="whitelabel"&&a.get("payment_frequency")==="monthly"&&b.cannot_choose()===null});return this.plan=_.isEmpty(a)?D.bb.recurly_plans.get("monthly_enterprise_2013"):_.min(a,function(a){return a.get("features").create_dashboard})},save:function(){res=D.Backbone.Model.prototype.save.apply(this,arguments);this.update_mixpanel();return res},update:function(){res=
this.fetch({url:"/accounts/"});this.update_mixpanel();return res},should_be_activated:function(){return this.get("first_name")&&this.get("last_name")&&(this.get("status")==="trial"||this.get("plan_label")==="developer")&&D.bb.dashboards.reduce(function(a,b){return a+(b.widgets?b.widgets.size():0)},0)>=3},update_mixpanel:function(){if(mixpanel&&mixpanel.cookie){_.extend(mixpanel.cookie.props,{status:this.get("status"),plan:this.get("plan_label")||mixpanel.cookie.props.plan,recurly_plan_code:this.get("recurly_plan_code")||
mixpanel.cookie.props.recurly_plan_code});mixpanel.name_tag(this.get("email"));if(!mixpanel.cookie.props.activated_since&&this.should_be_activated()){var a=moment(new Date),b=moment.unix(D.bb.account.get("date_joined"));_.extend(mixpanel.cookie.props,{activated_since:a.unix(),activated_seconds:a.diff(b,"seconds")})}}},available_widgets_count:function(a){var b=Infinity,d=Infinity,e=D.bb.dashboards.num_widgets(),f=D.bb.dashboards.num_custom_widgets();if(!a&&(this.get("has_full_permissions")||this.get("is_beta")))return{total:Infinity,
custom:Infinity};var g=D.bb.account.get("has_trial_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false||D.bb.account.get("has_recurly_account_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false||D.bb.account.get("readonly")===true;if(!a&&g)return{total:0,custom:0};a=a||D.bb.plans.get(this.get("plan_label"));if(a.get("features").create_widget)b=a.get("features").create_widget;if(a.get("features").create_custom_widget)d=a.get("features").create_custom_widget;return{total:b-
e,custom:d-f}},available_alerts_count:function(a){if(!a&&this.get("has_full_permissions"))return Infinity;if(this.get("is_beta"))return 0;a=a||D.bb.plans.get(this.get("plan_label"));if(this.get("has_alert_tag"))return Infinity;max_num_alerts=Infinity;if(a.get("features").create_alert)max_num_alerts=a.get("features").create_alert;return max_num_alerts-D.bb.account.get("num_alerts")},has_premium_directory:function(a){if(!a&&this.get("has_full_permissions"))return true;var b=D.bb.account.get("has_trial_expired")===
true&&D.bb.dashboards.current_is_chromeboard()===false||D.bb.account.get("has_recurly_account_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false||D.bb.account.get("readonly")===true;if(!a&&b)return false;a=a||D.bb.plans.get(this.get("plan_label"));return"premium_directory"in a.get("features")},has_tvmode_carousel:function(a){if(!a&&this.get("has_full_permissions"))return true;a=a||D.bb.plans.get(this.get("plan_label"));return"tvmode_carousel"in a.get("features")},can_export_data:function(a){if(!a&&
this.get("has_full_permissions"))return true;a=a||D.bb.plans.get(this.get("plan_label"));return"export_data"in a.get("features")},accepted_timespan:function(a){return _.indexOf(["quarterly","yearly"],a)===-1||this.get("has_full_permissions")?true:"data_retention"in this.plan.get("features")},refresh_alert_count:function(){return $.get("/api/alerts/",_.bind(function(a){this.set("num_alerts",a.count)},this))},display_wizard:function(){!D.bb.dashboards.current.has_widgets()&&!D.bb.account.get("readonly")&&
D.bb.account.get("has_trial_account")&&!D.bb.account.get("has_trial_expired")&&Backbone.history.navigate("/wizard/dashboard/start",true)},display_welcome:function(){var a=D.bb.dashboards.current,b=a.view;!a.has_widgets()&&!D.bb.account.get("readonly")&&(a.has_widgets()||!D.bb.account.get("has_trial_account")||D.bb.account.get("has_trial_expired"))&&!_.str.include(Backbone.history.fragment,"directory")&&(!_.str.include(Backbone.history.fragment,"custom")&&!_.str.include(Backbone.history.fragment,"new/widget")&&
!_.str.include(Backbone.history.fragment,"wizard/dashboard"))&&b.render_welcome()},set_background:function(a){var b=D.bb.dashboards.current.get("owner");this.get("owners")[b]=a},get_background_url:function(a){a=a||D.bb.dashboards.current.get("owner");return this.get("owners")[a].background_url},get_background_thumbnail:function(a){a=a||D.bb.dashboards.current.get("owner");return this.get("owners")[a].background_thumbnail}}),j=D.Backbone.View.extend({template:"account_settings",tabs:["credentials",
"services","subscription","billing","invoices","api_key","close"],initialize:function(){this.listenTo(this.model,"change:company",this.company_updated)},template_data:function(){return _.extend({},this.model.toJSON())},create_tabs:function(a){this.setElement($.tmpl(this.template,this.template_data()));this.sections={};_.each(this.tabs,_.bind(function(a){var b=new D.Backbone.account_tabs[a]({container:this});b&&b.enabled&&(this.sections[a]=b)},this));var b=_.indexOf(_.keys(this.sections),a),b=b>-1?
b:0;this.$("nav").tabs(this.$(".pane"),{initialIndex:b,onBeforeClick:function(){D.u.hide_tooltips()},onClick:_.bind(function(a,b){var d=_.keys(this.sections)[b];D.u.track_tab(a,"select account tab",{tab:d});D.u.focus_on_first(this.sections[d].$el)},this)});_.defer(_.bind(function(){var a=_.keys(this.sections)[b];D.u.focus_on_first(this.sections[a].$el)},this))},render:function(a){if(this.model.get("readonly"))return this;this.create_tabs(a);D.u.modal({content:this.$el,onComplete:_.bind(function(){this.$el.find("input:text").first().focus()},
this)});this.$("select").chosen({disable_search_threshold:12});this.$("input[placeholder], textarea[placeholder]").placeholder();return this},show_tab:function(a){if(_.include(_.keys(this.sections),a)){var a=_.indexOf(_.keys(this.sections),a),b=this.$("nav").data("tabs");a===0?b.click(a):b.click(a-1)}},add_tab:function(a){if(!_.include(_.keys(this.sections),a)){var b=this.$("nav").data("tabs");b.getTabs();var d=new D.Backbone.account_tabs[a]({container:this,existing_tabs:true});d.$el&&(this.sections[a]=
d);this.$("nav").tabs(this.$(".pane"),{initialIndex:b.getIndex(),onBeforeClick:function(){D.u.hide_tooltips()}})}},_show_all_errors:function(a,b){this.show_response_errors(a,b)},company_updated:function(){this.$(".field-company").val(this.model.get("company"))}}),e=j.extend({tabs:["credentials","services","subscription","close"],render:function(a){this.create_tabs(a);D.u.blocked_modal({content:this.$el});this.$("select").chosen({disable_search_threshold:12});this.$("input[placeholder], textarea[placeholder]").placeholder();
return this}}),d=j.extend({tabs:["credentials","services","billing","invoices","close"],render:function(a){this.create_tabs(a);D.u.blocked_modal({content:this.$el});this.$("select").chosen({disable_search_threshold:12});this.$("input[placeholder], textarea[placeholder]").placeholder();return this}}),g=D.Backbone.View.extend({template:"trial_expired",render:function(a){this.setElement($.tmpl(this.template,{is_whitelabel:D.bb.account.get("subscriber_kind")==="whitelabel",from_notification:a||false}));
D.u.modal({content:this.$el,onComplete:_.bind(function(){D.u.on_esc()},this)});return this}}),b=D.Backbone.View.extend({template:"subscription_expired",render:function(){this.setElement($.tmpl(this.template,{}));D.u.modal({content:this.$el,onComplete:_.bind(function(){D.u.on_esc()},this)});return this}}),f=D.Backbone.View.extend({template:"api_key",render:function(){this.setElement($.tmpl(this.template,this.model.toJSON()));this.listenTo(this.model,"change:api_key",this.redisplay);return this},redisplay:function(){var a=
this.model;this.$("p").animate({opacity:"toggle"},function(){$(this).text(a.get("api_key")).animate({opacity:"toggle"})})}}),a=new a;_.extend(Ducksboard.Backbone,{account:a,account_tabs:{}})})();
(function(){var a=D.bb.SettingsSection.extend({template:"account_creds",title:"Contact Information",events:{"click .save":"save"},params:{email:void 0,timezone:void 0,country:void 0,first_name:void 0,last_name:void 0,company:void 0,position:void 0,new_password:void 0,current_password:void 0},initialize:function(a){return a.container.model.get("subscriber_kind")==="whitelabel"?this:D.bb.SettingsSection.prototype.initialize.apply(this,arguments)},template_data:function(){return _.extend(this.container.model.toJSON(),
{timezones:D.config.timezones,most_used_timezones:D.config.most_used_timezones})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.$(".field-timezone").val(this.model.get("timezone"));this.$(".field-country").val(this.model.get("country"));return this},set_from_fields:function(){_.each(_.keys(this.params),_.bind(function(a){var b=this.$(".field-"+a),d=b.is("select")?b.find("option:selected").first().val():b.val();b.attr("placeholder")===d&&(d="");this.params[a]=d},
this))},save:function(a){if(this.$(".error").length)return false;a=$(a.currentTarget);a=D.u.sending(a,"saving settings");if(a.blocked)return false;this.set_from_fields();this.model.save(this.params,{complete:a.complete,success:_.bind(function(){this.model.get("has_trial_expired")||$.fancybox.close()},this),error:_.bind(function(a,b){this.show_response_errors(b)},this)});return true}}),j=D.Backbone.SettingsSection.extend({template:"services_settings",title:"External accounts",events:{"click .cancel":"cancel",
"click .send":"send"},render:function(){this.setElement($.tmpl(this.template));this.$list=this.$(".account-list");this.$ul=this.$list.find("ul");this.$form=this.$(".form");D.Backbone.services.each(function(a){a.user_managed&&a.item_view.render().$el.appendTo(this.$ul);a.bind("relink",this.relink,this)},this);return this},relink:function(a){this.form_view=new D.bb.FormView({model:a});this.form_view.render().$el.appendTo(this.$form);this.$list.fadeOut(_.bind(function(){this.$form.fadeIn()},this))},
cancel:function(a){a&&a.preventDefault();a&&a.stopPropagation();this.$form.fadeOut(_.bind(function(){this.$list.fadeIn();this.form_view.$el.remove()},this))},send:function(a){var b=$(a.currentTarget),a=D.u.sending(b,function(){b.val("")});if(!a.blocked){this.form_view.set_from_fields();this.form_view.model.save({},{complete:a.complete,success:_.bind(function(){this.$ul.empty();D.Backbone.services.each(function(a){a.user_managed&&a.item_view.render().$el.appendTo(this.$ul)},this);this.cancel()},this),
error:_.bind(function(a,b){this.form_view.show_response_errors(b);mixpanel.track("update service error",{service_kind:this.form_view.model.kind})},this)})}}}),e=D.Backbone.SubscriptionFormView.extend(D.Backbone.SectionMixin).extend({title:"Subscription",initialize:function(a){if(a.container.model.get("subscriber_kind")!=="whitelabel"&&a.container.model.get("can_subscribe")){this.container=a.container;this.model=this.container.model.get_billing();this.model.view=this;D.bb.SubscriptionFormView.prototype.initialize.apply(this,
arguments);if(a.container.model.get("can_upgrade"))this.title="Upgrade";this.append_tab();this.enabled=true}},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.render_fields();this.country_updated();return this}}),d=D.Backbone.BillingInfoFormView.extend(D.Backbone.SectionMixin).extend({title:"Billing Information",events:{"click .failure a":"hide_fetch_error"},initialize:function(a){if(a.container.model.get("subscriber_kind")!=="whitelabel"&&a.container.model.get("has_recurly_account")){this.container=
a.container;this.model=this.container.model.get_billing();D.bb.BillingInfoFormView.prototype.initialize.apply(this,arguments);_.extend(this.events,D.bb.BillingInfoFormView.prototype.events);this.append_tab(a.existing_tabs);this.enabled=true}},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.fetch_content();return this},fetch_content:function(){this.set_loading();this.model.fetch({silent:true,success:_.bind(function(){this.render_content()},this),error:_.bind(function(){this.show_fetch_error(arguments)},
this)});return this},render_content:function(){this.render_fields();this.$(".field-number").attr("placeholder",_.sprintf("XXXX-XXXX-%s",this.model.get("last_four")));this.$("select").chosen({disable_search_threshold:12});this.$("input[placeholder]").placeholder();this.remove_loading();return this},show_fetch_error:function(){this.remove_loading();this.$(".form").hide();this.$(".failure").show();this.$(".send").addClass("disabled")},hide_fetch_error:function(){this.$(".failure").fadeOut(_.bind(function(){this.$(".form").fadeIn(_.bind(function(){this.$(".send").removeClass("disabled");
this.fetch_content()},this))},this))},set_loading:function(){this.$(".form").addClass("loading");this.$(".current").addClass("disabled");var a=this.$(".send");this.sending=D.u.sending(a,"getting your billing info")},remove_loading:function(){this.$(".form").removeClass("loading");this.$(".current").removeClass("disabled");this.sending.complete()}}),g=D.Backbone.SettingsSection.extend({template:"plan_invoices",title:"invoices",events:{"click .failure a":"hide_error"},initialize:function(a){if(a.container.model.get("subscriber_kind")!==
"whitelabel"&&a.container.model.get("has_recurly_account")){this.container=a.container;this.model=this.container.model.billing;this.append_tab(a.existing_tabs);this.enabled=true}},render:function(){this.setElement($.tmpl(this.template));this.fetch_list();return this},fetch_list:function(){this.set_loading();this.container.model.invoices.fetch({success:_.bind(function(){this.render_list()},this),error:_.bind(function(){this.show_error(arguments)},this)});return this},render_list:function(){this.remove_loading();
this.container.model.invoices.each(_.bind(function(a){a.item_view.render().$el.appendTo(this.$("ul"))},this));return this},show_error:function(){this.remove_loading();this.$(".invoice-list").hide();this.$(".failure").show()},hide_error:function(){this.$(".failure").fadeOut(_.bind(function(){this.$(".invoice-list").fadeIn(_.bind(function(){this.fetch_list()},this))},this))},set_loading:function(){this.$("ul").addClass("loading")},remove_loading:function(){this.$("ul").removeClass("loading")}}),b=D.Backbone.SettingsSection.extend({template:"account_api_key",
title:"API key",events:{"click .reset:not(.disabled)":"generate_new_key"},render:function(){this.setElement($.tmpl(this.template,this.container.model.toJSON()));this.$("section").append(D.Backbone.account.api_key_view.render().$el);return this},generate_new_key:function(a){this.confirm_view=this.$(".button-wrap").confirm({text:"Do you want to generate a new API key? The old key will be disabled.",continue_text:"Generate",discard_text:"Keep",continue_action:_.bind(this._generate_new_key,this,a),continue_icon:false}).data("confirm_view");
return false},_generate_new_key:function(a){var a=$(a.currentTarget),b=D.u.sending(a,"generating");b.blocked||$.ajax({url:D.bb.account.url+"/api_key",type:"POST",complete:_.bind(function(){b.complete();this.confirm_view.hide()},this),success:function(a){D.bb.account.set({api_key:a.api_key})},data:1})}}),f=D.Backbone.SettingsSection.extend({template:"account_close",title:"close account",events:{"click .submit-and-close":"close_account","change li input":"show_textarea","focus li textarea":"hide_error"},
initialize:function(a){return a.container.model.get("subscriber_kind")==="whitelabel"?this:D.bb.SettingsSection.prototype.initialize.apply(this,arguments)},template_data:function(){return _.extend(this.container.model.toJSON(),{})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));return this},send_mail:function(){if(this.sending&&this.sending.blocked)return false;var a=this.get_reason();if(!a.label||!a.reason){this.show_error();return false}this.sending=D.u.sending(this.$(".close"),
"sending");if(!this.sending.blocked){$.post("/support/closing-ticket/",JSON.stringify(this.get_reason()),_.bind(function(){this.sending.complete();$.fancybox.close()},this));return false}},close_account:function(){if(this.sending&&this.sending.blocked)return false;var a=this.get_reason();if(!a.label||!a.reason||a.reason&&a.reason.length<10){this.show_error();return false}this.confirm_close(function(){this.sending=D.u.sending(this.$(".submit-and-close"),"closing your account");$.post("/accounts/close/",
this.get_reason(),function(){window.location.replace("/")})});return false},get_reason:function(){var a=this.$("input:checked").closest("li"),b=a.find("label").text(),a=a.find("textarea").val();return{label:b||"",reason:a||""}},confirm_close:function(a){this.confirm_view=this.$(".button-wrap").confirm({confirmation_class:"important",text:"Really want to close your account?",continue_text:"Close",discard_text:"Stay",continue_action:_.bind(a,this),continue_icon:false}).data("confirm_view")},show_error:function(){this.$(".error").fadeIn()},
hide_error:function(){this.$(".error").fadeOut()},show_textarea:function(){this.hide_error();this.$("textarea").closest("div").hide();this.$("input:checked").closest("li").find("div").show()}});_.extend(Ducksboard.Backbone.account_tabs,{credentials:a,services:j,subscription:e,billing:d,invoices:g,api_key:b,close:f})})();
(function(){var a=D.bb.SettingsSection.extend({append_services:function(a,b){b=b||"first";a.empty();D.Backbone.services.chain().select(function(a){return a.get("service_kind")===this.model.service.kind},this).each(function(d,e,f){e=b==="first"?e===0:b==="last"?e+1===f.length:d.id===b;d.selectable.render(e).$el.appendTo(a);e&&this.set_selected_service(d)},this)},service_created:function(a){$("a",a).removeClass("selected");this.model.service.selectable.render(true).$el.appendTo(a);this.set_selected_service(this.model.service);
this.model.service=new D.Backbone.service_kinds[this.model.service_kind]},set_selected_service:function(a){this.model.trigger("service:selected",a.id)}}),j=a.extend({template:"widget_create_account",events:{"click .send":"create_service","click .failure a":"show_service_form"},initialize:function(b){var d=b.container.model;d.isNew()&&d.service.user_managed&&(D.Backbone.services.any(function(a){return a.get("service_kind")===d.service.kind})||a.prototype.initialize.apply(this,arguments))},render:function(){this.setElement($.tmpl(this.template,
{create_tip:this.model.service.create_tip,uses_external_authentication:this.model.service.uses_external_authentication}));this.model.service.initial_form_view.render().$el.appendTo(this.$(".form"));return this},reload_services:function(){if(D.Backbone.services.any(function(a){return a.get("service_kind")===this.model.service.kind},this)){this.append_services(this.container.$(".account ul"));this.hide_pane()}else this.$(".loading").fadeOut(_.bind(function(){this.$(".failure").fadeIn()},this))},show_service_form:function(){this.$(".failure").fadeOut(_.bind(function(){this.$(".dialog").fadeIn()},
this))},create_service:function(a){if(this.model.service.uses_external_authentication){this.$(".dialog").fadeOut(_.bind(function(){this.$(".loading").fadeIn()},this));var b=_.bind(function(){this.reload_services()},this);$(window).one("focus",function(){D.Backbone.services.fetch({success:b,error:b})});a=this.model.service.auth_url()+"?"+$.param(this.model.service.initial_form_view.field_values());return window.open(a)}a=D.u.sending($(a.currentTarget),"creating account");if(!a.blocked){this.model.service.initial_form_view.set_from_fields();
D.Backbone.services.add(this.model.service);this.model.service.save({},{complete:a.complete,success:_.bind(function(){var a=this.model.service.form_view;this.service_created(this.container.$(".account ul"));this.replace_service_form_view(a);this.hide_pane()},this),error:_.bind(function(a,b){D.Backbone.services.remove(this.model.service);this.show_response_errors(b);mixpanel.track("create service error",{service_kind:this.model.service.kind,first_service:1})},this)})}},show_errors:function(a,b){b!==
D.u.api_error_codes.unique_error&&this.model.service.initial_form_view.show_errors(a,b)},replace_service_form_view:function(a){this.container.$(".account .form").fadeOut(_.bind(function(){a.remove();this.model.service.form_view.render().$el.appendTo(this.container.$(".account .form"));this.$(".choices").fadeIn()},this))},hide_pane:function(){this.container.$("nav").data("tabs").next();this.$el.fadeOut()}}),e=a.extend({template:"widget_accounts",events:{"click li":"select_service","click .new":"show_service_form",
"click .send":"create_service","click .cancel":"close_service_form"},title:"Manage accounts",initialize:function(b){if(b.container.model.service.user_managed){this.enabled=true;a.prototype.initialize.apply(this,arguments)}},template_data:function(){return{is_new:this.model.isNew()}},render:function(){this.setElement($.tmpl(this.template,this.template_data()));if(this.model.isNew()){this.append_services(this.$("ul"));this.model.service.form_view.render().$el.appendTo(this.$(".form"))}else this.model.service.selectable.render(true).$el.appendTo(this.$("ul"));
return this},reload_services:function(a){this.$(".choices").stop(true,true);this.$(".loading").stop(true,true);var b=D.Backbone.services.select(function(a){return a.get("service_kind")===this.model.service.kind},this).length;this.$("ul").empty();this.append_services(this.$("ul"),a<b?"last":this.model.service.id);this.$(".loading").fadeOut(_.bind(function(){this.$(".choices").fadeIn()},this))},select_service:function(a){a=$(a.currentTarget);$("a",a.siblings()).removeClass("selected");$("a",a).addClass("selected");
this.set_selected_service($("a",a).tmplItem().model)},show_service_form:function(){if(this.model.service.uses_external_authentication){this.$(".choices").fadeOut(_.bind(function(){this.$(".loading").fadeIn()},this));var a=this.$("ul").children().length,b=_.bind(function(){this.reload_services(a)},this);$(window).one("focus",function(){D.Backbone.services.fetch({success:b,error:b})});return window.open(this.model.service.auth_url())}this.$(".choices").fadeOut(_.bind(function(){this.$(".form").fadeIn()},
this))},close_service_form:function(){this.$(".form").fadeOut(_.bind(function(){this.model.service.form_view.clear();this.$(".choices").fadeIn()},this));return false},replace_service_form:function(a){this.$(".form").fadeOut(_.bind(function(){a.remove();this.model.service.form_view.render().$el.appendTo(this.$(".form"));this.$(".choices").fadeIn()},this))},create_service:function(a){var b=$(a.currentTarget),a=D.u.sending(b,function(){b.val("")});if(!a.blocked){this.model.service.form_view.set_from_fields();
D.Backbone.services.add(this.model.service);this.model.service.save({},{complete:a.complete,success:_.bind(function(){var a=this.model.service.form_view;this.service_created(this.$("ul"));this.replace_service_form(a)},this),error:_.bind(function(a,b){D.Backbone.services.remove(this.model.service);this.show_response_errors(b);mixpanel.track("create service error",{service_kind:this.model.service.kind,first_service:0})},this)})}},show_errors:function(a,b){b===D.u.api_error_codes.unique_error?this.close_service_form():
this.model.service.form_view.show_errors(a,b)},cb_appended:function(){var a=this.$(".selected").tmplItem().model;this.model.isNew()&&a&&this.set_selected_service(a)},set_from_input:function(){var a=this.$(".selected").tmplItem().model;a&&this.model.data_source.set({service_id:a.id},{silent:true})}}),d=D.bb.View.extend({template:"widget_timespans",initialize:function(a){this.slots=a.container.model.get_timespan_slots()},render:function(){if(this.slots.length){var a=this.slots[0],a={timespan:a.get("timespan"),
allowed:a.allowed_timespans};this.setElement($.tmpl(this.template,a,{includes:function(a,b){return _.include(a,b)}}));return this}},set_from_input:function(){var a=this.$("select").val();_.each(this.slots,function(b){b.set({timespan:a},{silent:true})})}}),g=D.Backbone.View.extend({template:"widget_appearance_fieldset",default_slot_color:D.colors.pink,colors:[D.colors.darkblue,D.colors.darkpurple,D.colors.red,D.colors.yellowgreen,D.colors.darkgreen,D.colors.black,D.colors.lightblue,D.colors.purple,
D.colors.darkorange,D.colors.yellow,D.colors.green,D.colors.gray,D.colors.blue,D.colors.bluesteel,D.colors.orange,D.colors.lightyellow,D.colors.lightgreen,D.colors.white],initialize:function(a){this.model=a.model;this.editable=a.editable;this.slot_item=1},template_data:function(){var a=this.model.widget,b=this.model.get("layout"),d=_.isFunction(a.slot_defs)?a.slot_defs():a.slot_defs;return _.extend(this.model.toJSON(),{editable:this.editable,isNew:a.isNew(),default_color:d[b].defaults.color||this.default_slot_color,
current_color:this.model.get("color")||this.default_slot_color,colors:this.colors,layout:b,has_multiple_slot_appearances:a.slots.length>1||_.size(d)>1})},render:function(){this.setElement($.tmpl(this.template,this.template_data(),{model:this.model,slot_item:this.slot_item}));this.editable&&this.$(".color_picker").selectable();return this},set_from_input:function(){var a=this.$(".field-subtitle").val(),b=this.$(".ui-selected span").attr("data-color"),b=b||this.model.get("color");this.model.set({subtitle:a,
color:b},{silent:true})},show_errors:function(){D.Backbone.View.prototype.show_errors.apply(this,arguments);var a=$(this.$el[0]);if(!a.hasClass("active"))a.addClass("error").one("click",function(){$(this).removeClass("error")})},remove:function(){this.editable&&this.$(".color_picker").selectable("destroy");D.Backbone.View.prototype.remove.apply(this)}}),b=g.extend({initialize:function(a){this.model=a.model;this.slot_item=a.slot_item;this.editable=a.editable;this.color_field=_.sprintf("color%d",this.slot_item);
this.subtitle_field=_.sprintf("subtitle%d",this.slot_item)},template_data:function(){var a=this.model.widget,b=this.model.get("layout"),d=_.isFunction(a.slot_defs)?a.slot_defs():a.slot_defs;return{subtitle:this.model.get(this.subtitle_field)||d[b].defaults[this.subtitle_field],editable:this.editable,default_color:d[b].defaults[this.color_field]||this.default_slot_color,current_color:this.model.get(this.color_field)||this.default_slot_color,colors:this.colors,has_multiple_slot_appearances:a.slots.length>
1||_.size(d)>1||this.model.get("multiple_subtitles")}},set_from_input:function(){var a=this.$(".field-subtitle").val(),b=this.$(".ui-selected span").attr("data-color"),b=b||this.model.get(this.color_field);properties={};properties[this.subtitle_field]=a;properties[this.color_field]=b;this.model.set(properties,{silent:true})},show_errors:function(){D.Backbone.View.prototype.show_errors.apply(this,arguments);var a=$(this.$el[0]);if(!a.hasClass("active"))a.addClass("error").one("click",function(){$(this).removeClass("error")})}}),
f=D.Backbone.View.extend({render:function(){var a=this.model.get("layout"),b=a=="1"?"":a,a="pull_url"+b,b="pull_frequency"+b,d=this.model.widget.data_source.get(a),e=this.model.widget.data_source.get(b);this.pull_param=a;this.freq_param=b;this.setElement($("<div></div>"));this.$el.append($.tmpl("input_text",{name:"pull_url",value:d,placeholder:"optional pull URL"}));this.$el.append($.tmpl("select",{name:"pull_frequency",value:e,options:[{value:"60",display_name:"pull every minute"},{value:"1800",
display_name:"pull every thirty minutes"},{value:"3600",display_name:"pull every hour"},{value:"10800",display_name:"pull every three hours"},{value:"21600",display_name:"pull every six hours"}]}));return this},uses_param:function(a){return this.pull_param===a},set_from_input:function(){var a={};a[this.pull_param]=this.$el.find(".field-pull_url").val();a[this.freq_param]=this.$el.find(".field-pull_frequency").val();this.model.widget.data_source.set(a)}}),h=D.Backbone.View.extend({template:"widget_data_api_fieldset",
initialize:function(a){this.model=a.model},render:function(){var a=this.model.widget,b=_.isFunction(a.slot_defs)?a.slot_defs():a.slot_defs,a=a.slots.length>1||_.size(b)>1;this.setElement($.tmpl(this.template,{has_multiple_slots:a},{model:this.model}));if(!this.model.widget.isNew()){this.url_view=new this.model.url_view_cls({model:this.model});this.url_view.render().$el.appendTo(this.$el.filter("fieldset"));this.pull_view=new f({model:this.model});this.pull_view.render().$el.appendTo(this.$el.children(".pull-url"))}return this},
set_from_input:function(){this.url_view&&this.url_view.set_from_input();this.pull_view&&this.pull_view.set_from_input()},uses_param:function(a){return this.pull_view&&this.pull_view.uses_param(a)},show_errors:function(){D.Backbone.View.prototype.show_errors.apply(this,arguments);var a=$(this.$el[0]);if(!a.hasClass("active"))a.addClass("error").one("click",function(){$(this).removeClass("error")})},remove:function(){this.url_view&&this.url_view.remove();this.pull_view&&this.pull_view.remove();D.Backbone.View.prototype.remove.apply(this)}}),
o=D.bb.SettingsSection.extend({template:void 0,slot_appearance_view_cls:void 0,slot_multi_appearance_view_cls:void 0,events:{"click .edit":"select_slot","change .timespan select":"check_timespan","click .timespan .chzn-container":"cache_timespan"},template_data:function(){return{kind:this.model.kind}},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.render_fieldsets();this.render_extra();return this},render_fieldsets:function(){this.fieldset_views={};this.model.slots.each(_.bind(function(a){var b=
!a.get("no_appearance"),b={model:a,editable:b},d=this.fieldset_views[a.id]=[],e;if(!a.get("multiple_subtitles")||!this.slot_multi_appearance_view_cls){e=new this.slot_appearance_view_cls(b);d.push(e);e.render().$el.appendTo(this.$(".editor"))}else for(i=1;i<=a.get("total_subtitles");i++){b.slot_item=i;e=new this.slot_multi_appearance_view_cls(b);d.push(e);e.render().$el.appendTo(this.$(".editor"))}},this));this.show_fieldset(this.model.slots.first())},render_extra:function(){},select_slot:function(a){var a=
$(a.currentTarget).tmplItem(),b=this.$("fieldset:visible").tmplItem();a.model===b.model&&a.slot_item===b.slot_item||this.show_fieldset(a.model,true,a.slot_item)},show_fieldset:function(a,b,d){var d=d||1,a=this.fieldset_views[a.id],e=$(a[d-1].$el[0]),f=$(a[d-1].$el[1]),d=this.$("fieldset:visible"),g=d.find("fieldset"),d=d.not(g);if(a.length==1&&_.size(this.fieldset_views)==1){a[0].$el.fadeIn("fast");return this}this.$(".edit").removeClass("active");e.addClass("active");if(b)d.fadeOut("fast",function(){f.fadeIn("fast")});
else{d.hide();f.css("display","block")}},show_errors:function(a){_.each(a,_.bind(function(a,b){_.each(this.fieldset_views[b],function(b){b.show_errors(a)})},this))},cache_timespan:function(a){this.old_valid_timespan=$(a.currentTarget).prev("select").first().val()},check_timespan:function(a){var a=$(a.currentTarget),b=a.val();if(!D.bb.account.accepted_timespan(b)){a.val(this.old_valid_timespan).trigger("liszt:updated");this.show_upgrade()}},show_upgrade:function(){Backbone.history.navigate("upgrade/timespans",
true)},set_from_input:function(){var a=_.flatten(_.values(this.fieldset_views));_.each(a,function(a){a.set_from_input()})},remove:function(){_.each(_.flatten(_.values(this.fieldset_views)),function(a){a.remove()});this.fieldset_views={};D.Backbone.View.prototype.remove.apply(this)}}),g=o.extend({template:"widget_appearance",slot_appearance_view_cls:g,slot_multi_appearance_view_cls:b,title:"Standard Settings",initialize:function(a){var b=a.container.model;if(b.can_edit_appearance()){this.has_timespans=
b.get_timespan_slots().length;this.enabled=true;o.prototype.initialize.apply(this,arguments)}},template_data:function(){return _.extend(o.prototype.template_data.apply(this,arguments),{has_timespans:this.has_timespans})},render_extra:function(){if(this.has_timespans){this.timespan_view=new d({container:this});var a=this.timespan_view.render().$el;this.$(".timespan").append(a)}},set_from_input:function(){o.prototype.set_from_input.apply(this);this.has_timespans&&this.timespan_view.set_from_input()},
show_errors:function(a){_.each(a,_.bind(function(a,b){_.each(this.fieldset_views[b],function(b){b.show_errors(a)})},this))},remove:function(){this.timespan_view&&this.timespan_view.remove();o.prototype.remove.apply(this)}}),h=o.extend({template:"widget_data_api",slot_appearance_view_cls:h,title:"Data & API",initialize:function(a){if(!a.container.model.isNew()&&a.container.model.service_kind==="custom"){this.enabled=true;D.bb.SettingsSection.prototype.initialize.apply(this,arguments)}},template_data:function(){return _.extend(o.prototype.template_data.apply(this,
arguments),{api_key:D.bb.account.attributes.api_key,wiki_url:this.model.wiki_url})},cb_appended:function(){this.model.service_kind==="custom"&&!this.model.isNew()&&_.each(_.flatten(_.values(this.fieldset_views)),function(a){a.url_view.resize()})},show_errors:function(a){_.each(a,function(b,d){_.each(_.flatten(_.values(this.fieldset_views)),function(b){b.uses_param&&b.uses_param(d)&&b.show_errors(a)},this)},this)}}),b=D.Backbone.View.extend({template:"widget_webhook",url_pattern:"https://webhooks.ducksboard.com/",
enabled:false,initialize:function(a){if(a.data_source.get("webhook_key"))this.enabled=true;this.model=a},render:function(){this.setElement($.tmpl(this.template,_.extend(this.model.toDucksboardJSON(),{url_pattern:this.url_pattern,webhook_doc_url:this.model.webhook_doc_url})));return this}}),u=D.Backbone.View.extend({template:"widget_embed",snippet_template:"widget_embed_snippet",enabled:false,events:{"click .disable":"disable","click .enable":"enable"},initialize:function(a){this.model=a;if(!this.model.isNew())this.enabled=
true},snippet_data:function(){var a=this.model.view.$el,b=_.sprintf("%s %s %s",a.css("border-style"),a.css("background-color"),a.css("border-width"));return _.extend(this.model.toDucksboardJSON(),{url:_.sprintf("%s/w/%s",D.config.public_host,this.model.embed_token.id),width:D.u.actual("innerWidth",a),height:D.u.actual("innerHeight",a),border:b,border_radius:a.css("border-radius"),has_flash:swfobject.hasFlashPlayerVersion("9.0.0")})},render:function(){this.setElement($.tmpl(this.template));this.$enabled_subview=
this.$(".enabled");this.$disabled_subview=this.$(".disabled");if(this.model.embed_token){this.$(".snippet").replaceWith(this.render_snippet());this.$disabled_subview.hide()}else this.$enabled_subview.hide();return this},render_snippet:function(){var a=$.tmpl(this.snippet_template,this.snippet_data());this.init_clipboard(a);return a},init_clipboard:function(a){if(swfobject.hasFlashPlayerVersion("9.0.0")){this.clip=new ZeroClipboard.Client;this.clip.setHandCursor(true);this.clip.setText($("input",a).val());
this.clip.glue($(".copy a",a).get(0),$(".zeroclipboard-container",a).get(0),{width:92,height:34,zIndex:2E3})}},enable:function(a){a.preventDefault();var b=$(a.currentTarget),d=D.u.sending(b,function(){b.text("")});if(d.blocked)return false;this.model.embed_token||(new D.bb.WidgetEmbedToken({},{widget:this.model})).save({},{success:_.bind(function(a){d.complete();this.model.embed_token=a;this.$(".snippet").replaceWith(this.render_snippet());this.$disabled_subview.fadeOut(_.bind(function(){this.$enabled_subview.fadeIn();
if(this.parent_view.subsections.panic_embed){var a=this.parent_view.subsections.panic_embed.render().$el;a.appendTo(this.parent_view.$(".subsections"));a.fadeIn()}},this))},this),error:function(){d.complete()}})},disable:function(a){a.preventDefault();this.confirm_view=this.$(".snippet").confirm({text:"Sure? It will disappear from any external site",continue_text:"Disable",discard_text:"Keep",continue_action:_.bind(this._disable,this,a),continue_icon:false,show_callback:_.bind(function(){this.$(".copy").hide()},
this),hide_callback:_.bind(function(){this.$(".copy").show()},this)}).data("confirm_view")},_disable:function(){this.model.embed_token.destroy({wait:true,success:_.bind(function(){this.model.embed_token=void 0;this.$enabled_subview.fadeOut(_.bind(function(){this.$disabled_subview.fadeIn()},this));this.confirm_view&&this.confirm_view.hide()},this),error:_.bind(function(){this.confirm_view&&this.confirm_view.hide()},this)});var a=this.parent_view.subsections.panic_embed;a&&a.$el.fadeOut(_.bind(function(){a.remove()},
this))},remove:function(){this.confirm_view&&this.confirm_view.remove();var a=this.parent_view.subsections.panic_embed;a&&a.remove();this.clip&&this.clip.deregister();D.Backbone.View.prototype.remove.apply(this)}}),q=D.Backbone.View.extend({template:"widget_panicboard",enabled:false,valid_slots:["CounterTrend","CounterSubtitle","CounterPin","Gauge","AbsoluteChart","Chart"],initialize:function(a){this.model=a;a=!this.model.has_multiple_slot_kinds()&&$.inArray(this.model.slot_kinds[0],this.valid_slots)!==
-1&&this.model.get("height")===1;if(!this.model.isNew()&&a&&D.bu.device.ipad)this.enabled=true},template_data:function(){var a=_.sprintf("%s/w/%s%s",D.config.public_host,this.model.embed_token.id,"?target=panic");return _.extend(this.model.toDucksboardJSON(),{url:a,url_encoded:encodeURIComponent(a),has_flash:swfobject.hasFlashPlayerVersion("9.0.0")})},render:function(){if(!this.model.embed_token)return false;this.setElement($.tmpl(this.template,this.template_data()));return this}}),b=D.bb.SettingsSection.extend({template:"widget_advanced",
title:"Advanced settings",subviews:{webhook:b,embed:u,panic_embed:q},initialize:function(a){this.subsections={};_.each(this.subviews,function(b,d){var e=new b(a.container.model);if(e.enabled){e.parent_view=this;this.subsections[d]=e}},this);if(!_.isEmpty(this.subsections)){this.model=a.container.model;this.enabled=true;D.bb.SettingsSection.prototype.initialize.apply(this,arguments);return this}},render:function(){this.setElement($.tmpl(this.template));_.each(this.subsections,_.bind(function(a){(a=
a.render())&&a.$el.appendTo(this.$(".subsections"))},this));return this},remove:function(){_.each(this.subsections,function(a){a.remove()});this.subsections={};D.Backbone.View.prototype.remove.apply(this)}}),u=D.bb.SettingsSection.extend({template:"widget_content",title:"Choose content",initialize:function(a){if(!_.isEmpty(a.container.model.data_source.params)){this.enabled=true;D.bb.SettingsSection.prototype.initialize.apply(this,arguments)}},render:function(){this.setElement($.tmpl(this.template,
{section:"content"}));this.form_view=new D.bb.FormView({model:this.model.data_source});this.form_view.render();this.$(".scroller fieldset").replaceWith(this.form_view.$el);this.form_view.cb_appended&&this.form_view.cb_appended();this.listenTo(this.model,"service:selected",function(a){this.form_view.load_service_params(a)});return this},set_from_input:function(){this.form_view.set_from_fields()},remove:function(){this.form_view&&this.form_view.remove();D.Backbone.View.prototype.remove.apply(this)}}),
l=D.Backbone.Model.extend({idAttribute:null,defaults:{content:void 0},initialize:function(a,b){this.widget_id=b.widget_id},url:function(){return"/api/widgets/"+this.widget_id+"/feedback"}}),q=D.bb.SettingsSection.extend({template:"widget_feedback",events:{"click .send":"send_feedback"},title:"Feedback & suggestions",feedback_visible:true,initialize:function(a){if(!a.container.model.isNew()){this.enabled=true;D.bb.SettingsSection.prototype.initialize.apply(this,arguments)}},template_data:function(){return{name:D.Backbone.account.get("email"),
subject:_.sprintf("%s widget",_.capitalize(this.container.model.service.kind_name))}},render:function(){this.setElement($.tmpl(this.template,this.template_data()));return this},send_feedback:function(a){if(this.feedback_visible){if(this.$("textarea").val()){var b=D.u.sending($(a.currentTarget),"sending feedback");b.blocked||(new l({content:this.$("textarea").val()},{widget_id:this.container.model.get("widget_id")})).save({},{success:_.bind(function(){this.feedback_sent(b)},this),error:_.bind(function(a,
d){b.complete();this.show_response_errors(d)},this)})}}else this.show_feedback_pane()},feedback_sent:function(a){this.$("textarea").val("");this.$(".form").fadeOut(_.bind(function(){a.complete();this.feedback_visible=false;this.$(".sent").fadeIn();this.$(".send").val("more feedback")},this))},show_feedback_pane:function(){this.$(".sent").fadeOut(_.bind(function(){this.feedback_visible=true;this.$(".form").fadeIn()},this));this.$(".send").val("send feedback")}}),k=D.bb.SettingsSection.extend({template:"widget_notifications",
template_fake:"widget_notifications_fake",template_slider:"widget_notifications_slider",items_per_group:3,title:"Alerts",events:{"click .button-new":"new_notification","click .failure a":"hide_error"},initialize:function(a){if(!a.container.model.isNew()&&!D.bb.account.get("no_branding")){var b=_.groupBy(D.config.condition_kinds,function(a){return a.slot_type});if(a.container.model.slots.find(function(a){return b[a.get_slot_type()]})){this.collection=new D.bb.NotificationList([],{widget:a.container.model});
this.enabled=true;D.bb.SettingsSection.prototype.initialize.apply(this,arguments);if(this.model.service_kind==="custom")this.items_per_group=5;this.listenTo(this.collection,"added",this.add_item);this.listenTo(this.collection,"updated",this.update_item);this.listenTo(this.collection,"removed",this.remove_item)}}},template_data:function(){return{has_recurly_account:D.bb.account.get("has_recurly_account")}},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.$main_view=
this.$(".notifications-main-view");this.fetch_list();return this},fetch_list:function(){this.fetch_xhr=this.collection.fetch({success:_.bind(this.render_list,this),error:_.bind(this.show_error,this),complete:_.bind(this.remove_loading,this)});return this},render_list:function(a){if(this.collection.size()===0&&a!==true)this.$(".m-notifications-list").replaceWith($.tmpl(this.template_fake));else{this.$(".m-notifications-list").replaceWith($.tmpl(this.template_slider));this.$slider_content=this.$(".viewport > ul");
var b=$([]);this.collection.each(_.bind(function(a,d){b=b.add(a.item_view.render().$el);if(b.length===this.items_per_group||this.collection.size()===d+1){b.appendTo(this.$slider_content).wrapAll("<li />");b=$([])}},this));this.slider=new $.fn.Slidster(this.$(".slidster"),$.extend({},D.u.constants.slidster_conf,{pager_info_item:"notifications",start_at:1,items_per_slide:1}));return this}},add_item:function(a){this.slider||this.render_list(true);this.slider.add_item(a.item_view.render().$el,this.items_per_group);
this.slider.go(this.slider.$items.index(this.slider.$items.last())+1)},update_item:function(a){a.item_view.$el.replaceWith(a.item_view.render().$el)},remove_item:function(a){a.item_view.$el.fadeOut(_.bind(function(){this.slider.remove_item(a.item_view.$el,this.items_per_group);if(this.slider.$items.children().length)this.reflow_items();else{this.$(".m-notifications-list").replaceWith($.tmpl(this.template_fake));this.slider.destroy()}a.form_view.remove();a.item_view.remove()},this))},fill_holes_in:function(a){var b=
this.slider.$items.index(a),d=a.children(),b=this.slider.$items.eq(b+1).children();d.length<this.items_per_group&&b.slice(-(this.items_per_group-d.length)).appendTo(a)},reflow_items:function(){this.slider.$preppended_clone&&this.slider.$preppended_clone.remove();this.slider.$appended_clone&&this.slider.$appended_clone.remove();this.slider.$items.children();this.slider.$items.each(_.bind(function(a,b){this.fill_holes_in($(b))},this));this.slider.$items.filter(function(){return $(this).children().length===
0}).remove();this.slider.refresh()},new_notification:function(a){a.preventDefault();if(D.bb.account.available_alerts_count()<=0)return this.show_upgrade();var b=new D.bb.Notification({},{collection:this.collection}),d=b.form_view.render().$el.hide();d.data("related_view",this.$main_view);this.$main_view.fadeOut(_.bind(function(){d.appendTo(this.$el).fadeIn();b.form_view.cb_appended()},this))},show_error:function(){this.$(".m-notifications-list").hide();this.$(".failure").show()},show_upgrade:function(){Backbone.history.navigate("upgrade/alerts",
true)},hide_error:function(){return this.hide_section(".failure")},hide_upgrade:function(){return this.hide_section(".upgrade",false)},hide_section:function(a,b){this.$(a).fadeOut(_.bind(function(){this.$(".m-notifications-list").fadeIn(_.bind(function(){b&&this.fetch_list()},this))},this))},remove_loading:function(){this.$el.removeClass("loading")},remove:function(){this.collection&&this.collection.each(function(a){a.form_view.remove();a.item_view.remove()});this.fetch_xhr&&this.fetch_xhr.abort();
this.slider&&this.slider.destroy();D.bb.View.prototype.remove.apply(this)}});_.extend(Ducksboard.Backbone.widget_tabs,{create_account:j,accounts:e,appearance:g,data_api:h,advanced:b,content:u,timespans:d,feedback:q,alerts:k})})();
(function(){var a=D.Backbone.Model.extend({idAttribute:"token",url:function(){return"/api/widgets/"+this.widget.id+"/embed"},defaults:{token:void 0,date_created:void 0},initialize:function(a,e){this.widget=e.widget},isNew:function(){return false}});_.extend(Ducksboard.Backbone,{WidgetEmbedToken:a})})();
(function(){var a=D.Backbone.View.extend({template:"public_info",events:{},render:function(){var a=D.bb.dashboards.first().get("label"),e=D.bb.account.get("access_token"),e=_.sprintf("%s/%s/",D.config.public_host,e),d=_.sprintf("Looking at the dashboard %s %s powered by @ducksboard",a,e),a={label:a,title:encodeURIComponent(a),url:encodeURIComponent(e),message:encodeURIComponent(d),can_use_tvmode:D.bb.account.get("has_tvmode"),is_sponsored:D.bb.account.get("is_sponsored"),no_branding:D.bb.account.get("no_branding")};
this.setElement($.tmpl(this.template,a));this.$el.prependTo("body");this.$("> ul").width(_.max(D.Backbone.dashboards.map(function(a){return a.view.$el.width()})));this.$el.fadeIn();return this}});_.extend(Ducksboard.Backbone,{publicinfo:new a})})();
(function(){var a=Backbone.Router.extend({routes:{"":"cleanup","dashboard/:slug":"change_dashboard","dashboard/id/:id":"change_dashboard_by_id","new/dashboard/:kind":"dashboard_new","new/widget/:kind_name":"widget_new","new/widget/:kind_name/:size":"widget_new",directory:"directory","directory/p:page":"directory","directory/service/:service_name":"directory_service","directory/service/:service_name/p:page":"directory_service","directory/:service/:group_name":"directory_group","service/:service":"service_directory",
"category/:category":"category_directory",custom:"custom_directory","custom/:category_name":"custom_directory_category","custom/:category_name/:group_name":"custom_directory_group","settings/dashboard":"dashboard_settings","settings/dashboard/:tab":"dashboard_settings","settings/account":"account_settings","settings/account/:tab":"account_settings","settings/widget/:id":"widget_settings","settings/widget/:id/:tab":"widget_settings","trial-expired":"trial_expired","subscription-expired":"subscription_expired",
support:"support",integration:"integration",tvmode:"tvmode","notice/:feature":"notice","upgrade/:feature":"upgrade","wizard/:kind(/:step)(/:service)":"wizard","Lower-prices-until-30-Sept":"oldies"},cleanup:function(){D.u.hide_tooltips();$.fancybox.close();D.Backbone.dashboards.current.widgets.purge();D.Backbone.services.purge();D.Backbone.directory.service_kinds.view.reset_search()},change_dashboard:function(a){$.fancybox.close();D.Backbone.dashboards.set_current(D.Backbone.dashboards.findWhere({slug:a}))},
change_dashboard_by_id:function(a){$.fancybox.close();D.Backbone.dashboards.set_current(D.Backbone.dashboards.get(a))},dashboard_new:function(a){if(!D.bb.account.get("readonly")&&D.d.interactive)if(D.bb.account.get("has_trial_expired")&&D.bb.account.get("is_beta")===false&&(!_.contains(D.bb.account.get("serviceboards"),a)||D.bb.dashboards.serviceboard()))D.bb.account.trial_expired_view.render(true);else if(D.bb.account.get("has_recurly_account_expired")===true&&(!_.contains(D.bb.account.get("serviceboards"),
a)||D.bb.dashboards.serviceboard()))D.bb.account.subscription_expired_view.render();else if(_.contains(D.bb.account.get("serviceboards"),a)&&!D.bb.dashboards.serviceboard())this._show_dashboard_create_view(a);else if(D.bb.account.get("plan_label")==="developer")Backbone.history.navigate("upgrade/dashboard_count",true);else{var e=D.bb.account.plan,d=Infinity,g=D.bb.dashboards.size();if(!D.bb.account.get("has_trial_account")&&D.bb.account.get("status")!=="exempt"&&e.get("features").create_dashboard)d=
e.get("features").create_dashboard;(_.contains(D.bb.account.get("serviceboards"),a)||D.bb.dashboards.serviceboard())&&g--;d<=g?Backbone.history.navigate("upgrade/dashboard_count",true):this._show_dashboard_create_view(a)}},_show_dashboard_create_view:function(a){(new D.Backbone.dashboard_models[a]({background_label:"handcrafted wood",in_carousel:false})).create_view.render()},widget_new:function(a,e){if(!D.bb.account.get("readonly")&&D.bb.dashboards.current.kind.get("editable")&&D.d.interactive)if(D.bb.account.get("has_trial_expired")===
true&&D.bb.dashboards.current_is_chromeboard()===false&&D.bb.account.get("is_beta")===false)D.bb.account.trial_expired_view.render(true);else if(D.bb.account.get("has_recurly_account_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false)D.bb.account.subscription_expired_view.render();else{var d=D.Backbone.widget_kinds[a];if(d){var g=D.Backbone.service_kinds[d.prototype.service_kind];if(g){var b=D.bb.account.available_widgets_count(),f=d.prototype.service_kind=="custom"&&b.custom<=0;if(b.total<=
0||f)f?Backbone.history.navigate("upgrade/custom_widget_count",true):Backbone.history.navigate("upgrade/widget_count",true);else if((b=D.Backbone.directory.service_kinds.get(g.prototype.kind))&&b.needs_upgrade())Backbone.history.navigate("upgrade/service",true);else{width_height=e?e.split("x"):d.prototype.available_sizes[0];d=new d({width:width_height[0],height:width_height[1]},{dashboard:D.Backbone.dashboards.current,service:new g});D.Backbone.dashboards.current.widgets.add(d);var h=new D.bb.WidgetSettingsView({model:d});
D.u.super_modal(h.render(),{onComplete:function(){D.u.focus_on_first(h.$el)}})}}}}},directory:function(a){mixpanel.track("directory button");D.bb.dashboards.current_kind_is_serviceboard()===true?Backbone.history.navigate("notice/directory_serviceboard",true):D.bb.account.get("readonly")||D.bb.dashboards.current.kind.get("editable")&&D.d.interactive&&D.Backbone.directory.service_kinds.view.render(a)},directory_service:function(a,e){if(!D.bb.account.get("readonly")&&D.bb.dashboards.current.kind.get("editable")&&
D.d.interactive)if(D.bb.account.get("has_trial_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false&&D.bb.account.get("is_beta")===false)D.bb.account.trial_expired_view.render(true);else if(D.bb.account.get("has_recurly_account_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false)D.bb.account.subscription_expired_view.render();else{var d=D.Backbone.directory.service_kinds.get(a);d&&D.bb.directory.service_kinds.widgets_view.render(d,e)}},directory_group:function(a,e){if(!D.bb.account.get("readonly")&&
D.bb.dashboards.current.kind.get("editable")&&D.d.interactive&&D.bb.directory.services.any(function(d){return d.get("service")===a}))if(D.bb.account.available_widgets_count().total<=0)Backbone.history.navigate("upgrade/widget_count",true);else{var d=D.Backbone.directory.services.get(e),a=D.Backbone.directory.service_kinds.get(e);(d=d||a)&&(d.needs_upgrade()?Backbone.history.navigate("upgrade/service",true):D.Backbone.directory.service_kinds.detail_view.render(d))}},service_directory:function(a){if(D.bb.directory.services.any(function(e){return e.get("service")===
a})){if(!D.bb.account.get("readonly")&&D.bb.dashboards.current.kind.get("editable")&&D.d.interactive){D.Backbone.directory.services.view.search_filters.service=a;D.Backbone.directory.services.view.reset_filter("category");D.Backbone.directory.services.view.render();D.Backbone.app.navigate("directory")}}else D.Backbone.app.navigate("directory",true)},category_directory:function(a){if(D.bb.directory.services.any(function(e){return e.get("category")===a})){if(!D.bb.account.get("readonly")&&D.bb.dashboards.current.kind.get("editable")&&
D.d.interactive){D.Backbone.directory.services.view.search_filters.category=a;D.Backbone.directory.services.view.reset_filter("service");D.Backbone.directory.services.view.render();D.Backbone.app.navigate("directory")}}else D.Backbone.app.navigate("directory",true)},custom_directory:function(){D.bb.account.get("readonly")||D.bb.dashboards.current.kind.get("editable")&&D.d.interactive&&D.Backbone.directory.custom_kinds.view.render()},custom_directory_category:function(a){D.bb.account.get("readonly")||
D.bb.dashboards.current.kind.get("editable")&&(D.bb.account.get("has_trial_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false&&D.bb.account.get("is_beta")===false?D.bb.account.trial_expired_view.render(true):D.bb.account.get("has_recurly_account_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false?D.bb.account.subscription_expired_view.render():D.bb.account.available_widgets_count().custom<=0?Backbone.history.navigate("upgrade/custom_widget_count",true):D.Backbone.directory.custom.detail_view.render(a))},
custom_directory_group:function(a,e){if(!D.bb.account.get("readonly")&&D.bb.dashboards.current.kind.get("editable")&&D.d.interactive)if(D.bb.account.get("has_trial_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false&&D.bb.account.get("is_beta")===false)D.bb.account.trial_expired_view.render(true);else if(D.bb.account.get("has_recurly_account_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false)D.bb.account.subscription_expired_view.render();else{var d=D.Backbone.directory.custom.get(e);
d&&D.Backbone.directory.custom.detail_view.render(a,d)}},custom_directory_kind:function(a){if(!D.bb.account.get("readonly")&&D.bb.dashboards.current.kind.get("editable")&&D.d.interactive)if(D.bb.account.get("has_trial_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false&&D.bb.account.get("is_beta")===false)D.bb.account.trial_expired_view.render(true);else if(D.bb.account.get("has_recurly_account_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false)D.bb.account.subscription_expired_view.render();
else(a=D.Backbone.directory.custom.get(a))&&D.Backbone.directory.custom.detail_view.render(category_name,a)},dashboard_settings:function(a){mixpanel.track("dashboard settings button");D.bb.account.get("readonly")||D.d.interactive&&D.Backbone.dashboards.current.settings_view.render(a)},account_settings:function(a){mixpanel.track("account settings button");D.bb.account.get("readonly")||D.d.interactive&&(D.bb.account.get("subscriber_kind")==="whitelabel"?(D.bb.account.get("has_trial_expired")===false||
D.bb.account.get("is_beta"))&&D.Backbone.account.settings_view.render(a):D.bb.account.get("has_trial_expired")===true?D.Backbone.account.disabled_settings_view.render("subscription"):D.bb.account.get("has_recurly_account_expired")===true?D.Backbone.account.unpaid_settings_view.render("billing"):D.Backbone.account.settings_view.render(a))},widget_settings:function(a,e){if(!D.bb.account.get("readonly")&&D.bb.dashboards.current.kind.get("editable")&&D.d.interactive)if(D.bb.account.get("has_trial_expired")===
true&&D.bb.dashboards.current_is_chromeboard()===false&&D.bb.account.get("is_beta")===false)D.bb.account.trial_expired_view.render(true);else if(D.bb.account.get("has_recurly_account_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false)D.bb.account.subscription_expired_view.render();else{var d=D.Backbone.dashboards.current.widgets.get(a);if(d){d=new D.bb.WidgetSettingsView({model:d});D.u.super_modal(d.render(e))}}},trial_expired:function(){D.bb.account.trial_expired_view.render()},subscription_expired:function(){D.bb.account.subscription_expired_view.render()},
support:function(){D.bb.account.get("readonly")||(new D.Backbone.SupportTicket).view.render()},integration:function(){D.bb.account.get("readonly")||(D.bb.account.get("has_trial_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false?D.bb.account.trial_expired_view.render(true):D.bb.account.get("has_recurly_account_expired")===true&&D.bb.dashboards.current_is_chromeboard()===false?D.bb.account.subscription_expired_view.render():(new D.Backbone.IntegrationTicket).view.render())},tvmode:function(){if(D.bb.account.get("has_trial_expired")===
true&&D.bb.dashboards.current_is_serviceboard()===false&&D.bb.dashboards.current_is_chromeboard()===false&&D.bb.account.get("is_beta")===false)D.bb.account.get("readonly")||D.bb.account.trial_expired_view.render(true);else if(D.bb.account.get("has_recurly_account_expired")===true&&D.bb.dashboards.current_is_serviceboard()===false&&D.bb.dashboards.current_is_chromeboard()===false)D.bb.account.get("readonly")||D.bb.account.subscription_expired_view.render();else if(D.bb.account.get("has_tvmode")||D.bb.dashboards.current_is_serviceboard()){var a=
D.bb.dashboards.current;if(a.view.dashboard_centered)D.d.switch_to(D.d.modes.tv);else a.once("dashboard:centered",function(){D.d.switch_to(D.d.modes.tv)});D.Backbone.app.navigate("")}else D.bb.account.get("readonly")||Backbone.history.navigate("upgrade/tvmode",true)},upgrade:function(a){(a=Ducksboard.bb.upgrade[a])&&a.render()},notice:function(a){(a=Ducksboard.bb.notice[a])&&(new a).render()},wizard:function(a,e,d){e||(e="start");var g=D.bb.dashboards.current;if(!(g.has_widgets()&&e!=="what_is_next")){g.view.$welcome_widget&&
g.view.hide_welcome();if(a=D.bb.wizard[a])(e=a[e])&&(new e).render({service:d})}}});_.extend(Ducksboard.Backbone,{app:new a})})();
//@ sourceMappingURL=/static/js/8ed935740fbf.js.map